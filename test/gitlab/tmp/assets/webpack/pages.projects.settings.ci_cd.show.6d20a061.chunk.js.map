{"version":3,"sources":["webpack:///./pages/projects/settings/ci_cd/show/index.js","webpack:///./settings_panels.js","webpack:///./create_item_dropdown.js","webpack:///./behaviors/shortcuts/shortcuts_navigation.js","webpack:///./project_select_combo_button.js","webpack:///./project_select.js","webpack:///./toggle_buttons.js","webpack:///./pages/projects/project.js","webpack:///./behaviors/secret_values.js","webpack:///./ci_variable_list/ci_variable_list.js","webpack:///./pages/projects/index.js","webpack:///./ci_variable_list/ajax_variable_list.js","webpack:///./lib/utils/http_status.js"],"names":["__webpack_require__","r","__webpack_exports__","_settings_panels__WEBPACK_IMPORTED_MODULE_0__","_behaviors_secret_values__WEBPACK_IMPORTED_MODULE_1__","_ci_variable_list_ajax_variable_list__WEBPACK_IMPORTED_MODULE_2__","document","addEventListener","initSettingsPanels","runnerToken","querySelector","SecretValues","container","init","variableListEl","AjaxVariableList","saveButton","errorBox","saveEndpoint","dataset","autoDevOpsExtraSettings","instanceDefaultBadge","event","target","style","display","classList","toggle","checked","d","jquery__WEBPACK_IMPORTED_MODULE_0__","jquery__WEBPACK_IMPORTED_MODULE_0___default","n","_locale__WEBPACK_IMPORTED_MODULE_1__","expandSection","$section","find","text","__","off","scrollTop","addClass","hasClass","one","removeClass","toggleSection","on","closeSection","$","each","i","elm","window","location","hash","$target","length","CreateItemDropdown","options","_classCallCheck","this","defaultToggleLabel","fieldName","onSelect","getDataOption","getData","getDataRemote","filterRemote","createNewItemFromValueOption","createNewItemFromValue","$dropdown","$dropdownContainer","parent","$dropdownFooter","$createButton","buildDropdown","bindEvents","toggleFooter","_this","glDropdown","data","bind","filterable","search","fields","selectable","toggleLabel","selected","_","escape","title","item","id","onFilter","toggleCreateNewButton","clicked","e","preventDefault","html","val","onClickCreateWildcard","refreshData","selectRowAtIndex","remote","execute","term","callback","_this2","arguments","undefined","uniqueData","selectedItem","some","concat","newValue","toggleState","toggleClass","ShortcutsNavigation","_possibleConstructorReturn","_getPrototypeOf","call","Mousetrap","findAndFollowLink","enabledHelp","push","Shortcuts","ProjectSelectComboButton","select","projectSelectInput","newItemBtn","resourceType","resourceLabel","formattedText","deriveTextVariants","groupId","initLocalStorage","siblings","openDropdown","getProjectFromLocalStorage","selectProject","AccessorUtilities","isLocalStorageAccessSafe","localStorageKey","localStorageItemType","join","setBtnTextFromLocalStorage","currentTarget","select2","selectedProjectData","JSON","parse","projectMeta","url","name","setNewItemBtnAttributes","setProjectInLocalStorage","cachedProjectData","project","attr","defaultTextPrefix","presetTextSuffix","projectString","localStorage","getItem","stringify","setItem","split","slice","projectSelect","placeholder","simpleFilter","includeGroups","allProjects","orderBy","withIssuesEnabled","withMergeRequestsEnabled","withShared","includeProjectsInSubgroups","allowClear","minimumInputLength","query","finalCallback","projectsCallback","projects","results","groupsCallback","groups","Api","groupProjects","with_issues_enabled","with_merge_requests_enabled","with_shared","include_subgroups","order_by","membership","web_url","name_with_namespace","initSelection","el","then","_ref","dropdownCssClass","setupToggleButtons","_flash__WEBPACK_IMPORTED_MODULE_1__","_locale__WEBPACK_IMPORTED_MODULE_2__","_lib_utils_common_utils__WEBPACK_IMPORTED_MODULE_3__","updateToggle","isOn","clickCallback","querySelectorAll","forEach","input","parseBoolean","value","previousIsOn","setAttribute","Promise","resolve","catch","removeAttribute","trigger","Flash","Project","$cloneOptions","$projectCloneField","$cloneBtnLabel","mobileCloneField","selectedCloneOption","trim","$this","cloneType","$el","activeText","$label","closest","clipboardText","initRefSwitcher","parents","submit","Cookies","set","remove","projectId","cookieKey","projectSelectDropdown","changeProject","refListItem","createElement","refLink","href","axios","get","params","ref","flash","filterByText","inputFieldName","renderRow","li","cloneNode","header","className","textContent","link","appendChild","obj","$form","$visit","shouldVisit","action","divider","indexOf","visitUrl","serialize","_ref$valueSelector","valueSelector","_ref$placeholderSelec","placeholderSelector","revealButton","isRevealed","secretRevealStatus","updateDom","onRevealButtonClicked","previousIsRevealed","values","n__","ALL_ENVIRONMENTS_STRING","s__","createEnvironmentItem","VariableList","formField","$container","environmentDropdownMap","WeakMap","inputMap","selector","default","key","secret_value","protected","environment_scope","_destroy","secretValues","index","rowEl","initRow","removeRow","inputSelector","Object","keys","map","$row","is","checkIfRowTouched","$lastRow","last","insertRow","css","$environmentSelect","createItemDropdown","getEnvironmentValues","refreshDropdownData","clearDropdown","_this3","$rowClone","clone","removeAttr","entry","after","row","hide","_this4","isEnabled","_this5","toArray","resultant","$input","valueMap","reduce","prevValueMap","envInput","_objectSpread","_defineProperty","_this6","environmentDropdown","_projects_gke_cluster_dropdowns__WEBPACK_IMPORTED_MODULE_0__","_persistent_user_callout__WEBPACK_IMPORTED_MODULE_1__","_project__WEBPACK_IMPORTED_MODULE_2__","_behaviors_shortcuts_shortcuts_navigation__WEBPACK_IMPORTED_MODULE_3__","page","body","callout","PersistentUserCallout","initGkeDropdowns","_ref$formField","variableList","onSaveClicked","loadingIcon","toggleEnableRow","patch","variables_attributes","getAllData","validateStatus","status","statusCodes","OK","MULTIPLE_CHOICES","BAD_REQUEST","res","errors","errorList","updateRowsWithPersistedVariables","variables","hideValues","innerHTML","errorString","persistedVariables","persistedVariableMap","variableMap","variable","destroyInput","persistedVariable","successCodes","httpStatusCodes","ABORTED","CREATED","ACCEPTED","NON_AUTHORITATIVE_INFORMATION","NO_CONTENT","RESET_CONTENT","PARTIAL_CONTENT","MULTI_STATUS","ALREADY_REPORTED","IM_USED","FORBIDDEN","NOT_FOUND","UNPROCESSABLE_ENTITY"],"mappings":"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","file":"pages.projects.settings.ci_cd.show.6d20a061.chunk.js","sourcesContent":["import initSettingsPanels from '~/settings_panels';\nimport SecretValues from '~/behaviors/secret_values';\nimport AjaxVariableList from '~/ci_variable_list/ajax_variable_list';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  // Initialize expandable settings panels\n  initSettingsPanels();\n\n  const runnerToken = document.querySelector('.js-secret-runner-token');\n  if (runnerToken) {\n    const runnerTokenSecretValue = new SecretValues({\n      container: runnerToken,\n    });\n    runnerTokenSecretValue.init();\n  }\n\n  const variableListEl = document.querySelector('.js-ci-variable-list-section');\n  // eslint-disable-next-line no-new\n  new AjaxVariableList({\n    container: variableListEl,\n    saveButton: variableListEl.querySelector('.js-ci-variables-save-button'),\n    errorBox: variableListEl.querySelector('.js-ci-variable-error-box'),\n    saveEndpoint: variableListEl.dataset.saveEndpoint,\n  });\n\n  // hide extra auto devops settings based checkbox state\n  const autoDevOpsExtraSettings = document.querySelector('.js-extra-settings');\n  const instanceDefaultBadge = document.querySelector('.js-instance-default-badge');\n  document.querySelector('.js-toggle-extra-settings').addEventListener('click', event => {\n    const { target } = event;\n    if (instanceDefaultBadge) instanceDefaultBadge.style.display = 'none';\n    autoDevOpsExtraSettings.classList.toggle('hidden', !target.checked);\n  });\n});\n","import $ from 'jquery';\nimport { __ } from './locale';\n\nfunction expandSection($section) {\n  $section.find('.js-settings-toggle:not(.js-settings-toggle-trigger-only)').text(__('Collapse'));\n  $section\n    .find('.settings-content')\n    .off('scroll.expandSection')\n    .scrollTop(0);\n  $section.addClass('expanded');\n  if (!$section.hasClass('no-animate')) {\n    $section\n      .addClass('animating')\n      .one('animationend.animateSection', () => $section.removeClass('animating'));\n  }\n}\n\nfunction closeSection($section) {\n  $section.find('.js-settings-toggle:not(.js-settings-toggle-trigger-only)').text(__('Expand'));\n  $section.find('.settings-content').on('scroll.expandSection', () => expandSection($section));\n  $section.removeClass('expanded');\n  if (!$section.hasClass('no-animate')) {\n    $section\n      .addClass('animating')\n      .one('animationend.animateSection', () => $section.removeClass('animating'));\n  }\n}\n\nfunction toggleSection($section) {\n  $section.removeClass('no-animate');\n  if ($section.hasClass('expanded')) {\n    closeSection($section);\n  } else {\n    expandSection($section);\n  }\n}\n\nexport default function initSettingsPanels() {\n  $('.settings').each((i, elm) => {\n    const $section = $(elm);\n    $section.on('click.toggleSection', '.js-settings-toggle', () => toggleSection($section));\n\n    if (!$section.hasClass('expanded')) {\n      $section.find('.settings-content').on('scroll.expandSection', () => {\n        $section.removeClass('no-animate');\n        expandSection($section);\n      });\n    }\n  });\n\n  if (window.location.hash) {\n    const $target = $(window.location.hash);\n    if ($target.length && $target.hasClass('settings')) {\n      expandSection($target);\n    }\n  }\n}\n","import _ from 'underscore';\n\nexport default class CreateItemDropdown {\n  /**\n   * @param {Object} options containing\n   *                         `$dropdown` target element\n   *                          `onSelect` event callback\n   * $dropdown must be an element created using `dropdown_tag()` rails helper\n   */\n  constructor(options) {\n    this.defaultToggleLabel = options.defaultToggleLabel;\n    this.fieldName = options.fieldName;\n    this.onSelect = options.onSelect || (() => {});\n    this.getDataOption = options.getData;\n    this.getDataRemote = !!options.filterRemote;\n    this.createNewItemFromValueOption = options.createNewItemFromValue;\n    this.$dropdown = options.$dropdown;\n    this.$dropdownContainer = this.$dropdown.parent();\n    this.$dropdownFooter = this.$dropdownContainer.find('.dropdown-footer');\n    this.$createButton = this.$dropdownContainer.find('.js-dropdown-create-new-item');\n\n    this.buildDropdown();\n    this.bindEvents();\n\n    // Hide footer\n    this.toggleFooter(true);\n  }\n\n  buildDropdown() {\n    this.$dropdown.glDropdown({\n      data: this.getData.bind(this),\n      filterable: true,\n      filterRemote: this.getDataRemote,\n      search: {\n        fields: ['text'],\n      },\n      selectable: true,\n      toggleLabel(selected) {\n        return selected && 'id' in selected ? _.escape(selected.title) : this.defaultToggleLabel;\n      },\n      fieldName: this.fieldName,\n      text(item) {\n        return _.escape(item.text);\n      },\n      id(item) {\n        return _.escape(item.id);\n      },\n      onFilter: this.toggleCreateNewButton.bind(this),\n      clicked: options => {\n        options.e.preventDefault();\n        this.onSelect();\n      },\n    });\n  }\n\n  clearDropdown() {\n    this.$dropdownContainer.find('.dropdown-content').html('');\n    this.$dropdownContainer.find('.dropdown-input-field').val('');\n  }\n\n  bindEvents() {\n    this.$createButton.on('click', this.onClickCreateWildcard.bind(this));\n  }\n\n  onClickCreateWildcard(e) {\n    e.preventDefault();\n\n    this.refreshData();\n    this.$dropdown.data('glDropdown').selectRowAtIndex();\n  }\n\n  refreshData() {\n    // Refresh the dropdown's data, which ends up calling `getData`\n    this.$dropdown.data('glDropdown').remote.execute();\n  }\n\n  getData(term, callback) {\n    this.getDataOption(term, (data = []) => {\n      // Ensure the selected item isn't already in the data to avoid duplicates\n      const alreadyHasSelectedItem =\n        this.selectedItem && data.some(item => item.id === this.selectedItem.id);\n\n      let uniqueData = data;\n      if (!alreadyHasSelectedItem) {\n        uniqueData = data.concat(this.selectedItem || []);\n      }\n\n      callback(uniqueData);\n    });\n  }\n\n  createNewItemFromValue(newValue) {\n    if (this.createNewItemFromValueOption) {\n      return this.createNewItemFromValueOption(newValue);\n    }\n\n    return {\n      title: newValue,\n      id: newValue,\n      text: newValue,\n    };\n  }\n\n  toggleCreateNewButton(newValue) {\n    if (newValue) {\n      this.selectedItem = this.createNewItemFromValue(newValue);\n\n      this.$dropdownContainer.find('.js-dropdown-create-new-item code').text(newValue);\n    }\n\n    this.toggleFooter(!newValue);\n  }\n\n  toggleFooter(toggleState) {\n    this.$dropdownFooter.toggleClass('hidden', toggleState);\n  }\n}\n","import Mousetrap from 'mousetrap';\nimport findAndFollowLink from '../../lib/utils/navigation_utility';\nimport Shortcuts from './shortcuts';\n\nexport default class ShortcutsNavigation extends Shortcuts {\n  constructor() {\n    super();\n\n    Mousetrap.bind('g p', () => findAndFollowLink('.shortcuts-project'));\n    Mousetrap.bind('g v', () => findAndFollowLink('.shortcuts-project-activity'));\n    Mousetrap.bind('g r', () => findAndFollowLink('.shortcuts-project-releases'));\n    Mousetrap.bind('g f', () => findAndFollowLink('.shortcuts-tree'));\n    Mousetrap.bind('g c', () => findAndFollowLink('.shortcuts-commits'));\n    Mousetrap.bind('g j', () => findAndFollowLink('.shortcuts-builds'));\n    Mousetrap.bind('g n', () => findAndFollowLink('.shortcuts-network'));\n    Mousetrap.bind('g d', () => findAndFollowLink('.shortcuts-repository-charts'));\n    Mousetrap.bind('g i', () => findAndFollowLink('.shortcuts-issues'));\n    Mousetrap.bind('g b', () => findAndFollowLink('.shortcuts-issue-boards'));\n    Mousetrap.bind('g m', () => findAndFollowLink('.shortcuts-merge_requests'));\n    Mousetrap.bind('g w', () => findAndFollowLink('.shortcuts-wiki'));\n    Mousetrap.bind('g s', () => findAndFollowLink('.shortcuts-snippets'));\n    Mousetrap.bind('g k', () => findAndFollowLink('.shortcuts-kubernetes'));\n    Mousetrap.bind('g e', () => findAndFollowLink('.shortcuts-environments'));\n    Mousetrap.bind('g l', () => findAndFollowLink('.shortcuts-metrics'));\n    Mousetrap.bind('i', () => findAndFollowLink('.shortcuts-new-issue'));\n\n    this.enabledHelp.push('.hidden-shortcut.project');\n  }\n}\n","import $ from 'jquery';\nimport AccessorUtilities from './lib/utils/accessor';\n\nexport default class ProjectSelectComboButton {\n  constructor(select) {\n    this.projectSelectInput = $(select);\n    this.newItemBtn = $('.new-project-item-link');\n    this.resourceType = this.newItemBtn.data('type');\n    this.resourceLabel = this.newItemBtn.data('label');\n    this.formattedText = this.deriveTextVariants();\n    this.groupId = this.projectSelectInput.data('groupId');\n    this.bindEvents();\n    this.initLocalStorage();\n  }\n\n  bindEvents() {\n    this.projectSelectInput\n      .siblings('.new-project-item-select-button')\n      .on('click', e => this.openDropdown(e));\n\n    this.newItemBtn.on('click', e => {\n      if (!this.getProjectFromLocalStorage()) {\n        e.preventDefault();\n        this.openDropdown(e);\n      }\n    });\n\n    this.projectSelectInput.on('change', () => this.selectProject());\n  }\n\n  initLocalStorage() {\n    const localStorageIsSafe = AccessorUtilities.isLocalStorageAccessSafe();\n\n    if (localStorageIsSafe) {\n      this.localStorageKey = [\n        'group',\n        this.groupId,\n        this.formattedText.localStorageItemType,\n        'recent-project',\n      ].join('-');\n      this.setBtnTextFromLocalStorage();\n    }\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  openDropdown(event) {\n    $(event.currentTarget)\n      .siblings('.project-item-select')\n      .select2('open');\n  }\n\n  selectProject() {\n    const selectedProjectData = JSON.parse(this.projectSelectInput.val());\n    const projectUrl = `${selectedProjectData.url}/${this.projectSelectInput.data('relativePath')}`;\n    const projectName = selectedProjectData.name;\n\n    const projectMeta = {\n      url: projectUrl,\n      name: projectName,\n    };\n\n    this.setNewItemBtnAttributes(projectMeta);\n    this.setProjectInLocalStorage(projectMeta);\n  }\n\n  setBtnTextFromLocalStorage() {\n    const cachedProjectData = this.getProjectFromLocalStorage();\n\n    this.setNewItemBtnAttributes(cachedProjectData);\n  }\n\n  setNewItemBtnAttributes(project) {\n    if (project) {\n      this.newItemBtn.attr('href', project.url);\n      this.newItemBtn.text(`${this.formattedText.defaultTextPrefix} in ${project.name}`);\n    } else {\n      this.newItemBtn.text(`Select project to create ${this.formattedText.presetTextSuffix}`);\n    }\n  }\n\n  getProjectFromLocalStorage() {\n    const projectString = localStorage.getItem(this.localStorageKey);\n\n    return JSON.parse(projectString);\n  }\n\n  setProjectInLocalStorage(projectMeta) {\n    const projectString = JSON.stringify(projectMeta);\n\n    localStorage.setItem(this.localStorageKey, projectString);\n  }\n\n  deriveTextVariants() {\n    const defaultTextPrefix = this.resourceLabel;\n\n    // the trailing slice call depluralizes each of these strings (e.g. new-issues -> new-issue)\n    const localStorageItemType = `new-${this.resourceType\n      .split('_')\n      .join('-')\n      .slice(0, -1)}`;\n    const presetTextSuffix = this.resourceType\n      .split('_')\n      .join(' ')\n      .slice(0, -1);\n\n    return {\n      localStorageItemType, // new-issue / new-merge-request\n      defaultTextPrefix, // New issue / New merge request\n      presetTextSuffix, // issue / merge request\n    };\n  }\n}\n","/* eslint-disable func-names, no-var, object-shorthand, one-var, no-else-return */\n\nimport $ from 'jquery';\nimport Api from './api';\nimport ProjectSelectComboButton from './project_select_combo_button';\n\nexport default function projectSelect() {\n  $('.ajax-project-select').each(function(i, select) {\n    var placeholder;\n    const simpleFilter = $(select).data('simpleFilter') || false;\n    this.groupId = $(select).data('groupId');\n    this.includeGroups = $(select).data('includeGroups');\n    this.allProjects = $(select).data('allProjects') || false;\n    this.orderBy = $(select).data('orderBy') || 'id';\n    this.withIssuesEnabled = $(select).data('withIssuesEnabled');\n    this.withMergeRequestsEnabled = $(select).data('withMergeRequestsEnabled');\n    this.withShared =\n      $(select).data('withShared') === undefined ? true : $(select).data('withShared');\n    this.includeProjectsInSubgroups = $(select).data('includeProjectsInSubgroups') || false;\n    this.allowClear = $(select).data('allowClear') || false;\n\n    placeholder = 'Search for project';\n    if (this.includeGroups) {\n      placeholder += ' or group';\n    }\n\n    $(select).select2({\n      placeholder: placeholder,\n      minimumInputLength: 0,\n      query: (function(_this) {\n        return function(query) {\n          var finalCallback, projectsCallback;\n          finalCallback = function(projects) {\n            var data;\n            data = {\n              results: projects,\n            };\n            return query.callback(data);\n          };\n          if (_this.includeGroups) {\n            projectsCallback = function(projects) {\n              var groupsCallback;\n              groupsCallback = function(groups) {\n                var data;\n                data = groups.concat(projects);\n                return finalCallback(data);\n              };\n              return Api.groups(query.term, {}, groupsCallback);\n            };\n          } else {\n            projectsCallback = finalCallback;\n          }\n          if (_this.groupId) {\n            return Api.groupProjects(\n              _this.groupId,\n              query.term,\n              {\n                with_issues_enabled: _this.withIssuesEnabled,\n                with_merge_requests_enabled: _this.withMergeRequestsEnabled,\n                with_shared: _this.withShared,\n                include_subgroups: _this.includeProjectsInSubgroups,\n              },\n              projectsCallback,\n            );\n          } else {\n            return Api.projects(\n              query.term,\n              {\n                order_by: _this.orderBy,\n                with_issues_enabled: _this.withIssuesEnabled,\n                with_merge_requests_enabled: _this.withMergeRequestsEnabled,\n                membership: !_this.allProjects,\n              },\n              projectsCallback,\n            );\n          }\n        };\n      })(this),\n      id: function(project) {\n        if (simpleFilter) return project.id;\n        return JSON.stringify({\n          name: project.name,\n          url: project.web_url,\n        });\n      },\n      text: function(project) {\n        return project.name_with_namespace || project.name;\n      },\n\n      initSelection: function(el, callback) {\n        return Api.project(el.val()).then(({ data }) => callback(data));\n      },\n\n      allowClear: this.allowClear,\n\n      dropdownCssClass: 'ajax-project-dropdown',\n    });\n    if (simpleFilter) return select;\n    return new ProjectSelectComboButton(select);\n  });\n}\n","import $ from 'jquery';\nimport Flash from './flash';\nimport { __ } from './locale';\nimport { parseBoolean } from './lib/utils/common_utils';\n\n/*\n example HAML:\n ```\n  %button.js-project-feature-toggle.project-feature-toggle{ type: \"button\",\n    class: \"#{'is-checked' if enabled?}\",\n    'aria-label': _('Toggle Kubernetes Cluster') }\n    %input{ type: \"hidden\", class: 'js-project-feature-toggle-input', value: enabled? }\n  ```\n*/\n\nfunction updateToggle(toggle, isOn) {\n  toggle.classList.toggle('is-checked', isOn);\n}\n\nfunction onToggleClicked(toggle, input, clickCallback) {\n  const previousIsOn = parseBoolean(input.value);\n\n  // Visually change the toggle and start loading\n  updateToggle(toggle, !previousIsOn);\n  toggle.setAttribute('disabled', true);\n  toggle.classList.toggle('is-loading', true);\n\n  Promise.resolve(clickCallback(!previousIsOn, toggle))\n    .then(() => {\n      // Actually change the input value\n      input.setAttribute('value', !previousIsOn);\n    })\n    .catch(() => {\n      // Revert the visuals if something goes wrong\n      updateToggle(toggle, previousIsOn);\n    })\n    .then(() => {\n      // Remove the loading indicator in any case\n      toggle.removeAttribute('disabled');\n      toggle.classList.toggle('is-loading', false);\n\n      $(input).trigger('trigger-change');\n    })\n    .catch(() => {\n      Flash(__('Something went wrong when toggling the button'));\n    });\n}\n\nexport default function setupToggleButtons(container, clickCallback = () => {}) {\n  const toggles = container.querySelectorAll('.js-project-feature-toggle');\n\n  toggles.forEach(toggle => {\n    const input = toggle.querySelector('.js-project-feature-toggle-input');\n    const isOn = parseBoolean(input.value);\n\n    // Get the visible toggle in sync with the hidden input\n    updateToggle(toggle, isOn);\n\n    toggle.addEventListener('click', onToggleClicked.bind(null, toggle, input, clickCallback));\n  });\n}\n","/* eslint-disable func-names, no-var, no-return-assign, one-var, object-shorthand, vars-on-top */\n\nimport $ from 'jquery';\nimport Cookies from 'js-cookie';\nimport { __ } from '~/locale';\nimport { visitUrl } from '~/lib/utils/url_utility';\nimport axios from '~/lib/utils/axios_utils';\nimport flash from '~/flash';\nimport projectSelect from '../../project_select';\n\nexport default class Project {\n  constructor() {\n    const $cloneOptions = $('ul.clone-options-dropdown');\n    const $projectCloneField = $('#project_clone');\n    const $cloneBtnLabel = $('.js-git-clone-holder .js-clone-dropdown-label');\n    const mobileCloneField = document.querySelector(\n      '.js-mobile-git-clone .js-clone-dropdown-label',\n    );\n\n    const selectedCloneOption = $cloneBtnLabel.text().trim();\n    if (selectedCloneOption.length > 0) {\n      $(`a:contains('${selectedCloneOption}')`, $cloneOptions).addClass('is-active');\n    }\n\n    $('a', $cloneOptions).on('click', e => {\n      e.preventDefault();\n      const $this = $(e.currentTarget);\n      const url = $this.attr('href');\n      const cloneType = $this.data('cloneType');\n\n      $('.is-active', $cloneOptions).removeClass('is-active');\n      $(`a[data-clone-type=\"${cloneType}\"]`).each(function() {\n        const $el = $(this);\n        const activeText = $el.find('.dropdown-menu-inner-title').text();\n        const $container = $el.closest('.project-clone-holder');\n        const $label = $container.find('.js-clone-dropdown-label');\n\n        $el.toggleClass('is-active');\n        $label.text(activeText);\n      });\n\n      if (mobileCloneField) {\n        mobileCloneField.dataset.clipboardText = url;\n      } else {\n        $projectCloneField.val(url);\n      }\n      $('.js-git-empty .js-clone').text(url);\n    });\n    // Ref switcher\n    Project.initRefSwitcher();\n    $('.project-refs-select').on('change', function() {\n      return $(this)\n        .parents('form')\n        .submit();\n    });\n    $('.hide-no-ssh-message').on('click', function(e) {\n      Cookies.set('hide_no_ssh_message', 'false');\n      $(this)\n        .parents('.no-ssh-key-message')\n        .remove();\n      return e.preventDefault();\n    });\n    $('.hide-no-password-message').on('click', function(e) {\n      Cookies.set('hide_no_password_message', 'false');\n      $(this)\n        .parents('.no-password-message')\n        .remove();\n      return e.preventDefault();\n    });\n    $('.hide-auto-devops-implicitly-enabled-banner').on('click', function(e) {\n      const projectId = $(this).data('project-id');\n      const cookieKey = `hide_auto_devops_implicitly_enabled_banner_${projectId}`;\n      Cookies.set(cookieKey, 'false');\n      $(this)\n        .parents('.auto-devops-implicitly-enabled-banner')\n        .remove();\n      return e.preventDefault();\n    });\n    Project.projectSelectDropdown();\n  }\n\n  static projectSelectDropdown() {\n    projectSelect();\n    $('.project-item-select').on('click', e => Project.changeProject($(e.currentTarget).val()));\n  }\n\n  static changeProject(url) {\n    return (window.location = url);\n  }\n\n  static initRefSwitcher() {\n    var refListItem = document.createElement('li');\n    var refLink = document.createElement('a');\n\n    refLink.href = '#';\n\n    return $('.js-project-refs-dropdown').each(function() {\n      var $dropdown, selected;\n      $dropdown = $(this);\n      selected = $dropdown.data('selected');\n      return $dropdown.glDropdown({\n        data(term, callback) {\n          axios\n            .get($dropdown.data('refsUrl'), {\n              params: {\n                ref: $dropdown.data('ref'),\n                search: term,\n              },\n            })\n            .then(({ data }) => callback(data))\n            .catch(() => flash(__('An error occurred while getting projects')));\n        },\n        selectable: true,\n        filterable: true,\n        filterRemote: true,\n        filterByText: true,\n        inputFieldName: $dropdown.data('inputFieldName'),\n        fieldName: $dropdown.data('fieldName'),\n        renderRow: function(ref) {\n          var li = refListItem.cloneNode(false);\n\n          if (ref.header != null) {\n            li.className = 'dropdown-header';\n            li.textContent = ref.header;\n          } else {\n            var link = refLink.cloneNode(false);\n\n            if (ref === selected) {\n              link.className = 'is-active';\n            }\n\n            link.textContent = ref;\n            link.dataset.ref = ref;\n\n            li.appendChild(link);\n          }\n\n          return li;\n        },\n        id: function(obj, $el) {\n          return $el.attr('data-ref');\n        },\n        toggleLabel: function(obj, $el) {\n          return $el.text().trim();\n        },\n        clicked: function(options) {\n          const { e } = options;\n          e.preventDefault();\n          if ($('input[name=\"ref\"]').length) {\n            var $form = $dropdown.closest('form');\n\n            var $visit = $dropdown.data('visit');\n            var shouldVisit = $visit ? true : $visit;\n            var action = $form.attr('action');\n            var divider = action.indexOf('?') === -1 ? '?' : '&';\n            if (shouldVisit) {\n              visitUrl(`${action}${divider}${$form.serialize()}`);\n            }\n          }\n        },\n      });\n    });\n  }\n}\n","import { n__ } from '../locale';\nimport { parseBoolean } from '../lib/utils/common_utils';\n\nexport default class SecretValues {\n  constructor({\n    container,\n    valueSelector = '.js-secret-value',\n    placeholderSelector = '.js-secret-value-placeholder',\n  }) {\n    this.container = container;\n    this.valueSelector = valueSelector;\n    this.placeholderSelector = placeholderSelector;\n  }\n\n  init() {\n    this.revealButton = this.container.querySelector('.js-secret-value-reveal-button');\n\n    if (this.revealButton) {\n      const isRevealed = parseBoolean(this.revealButton.dataset.secretRevealStatus);\n      this.updateDom(isRevealed);\n\n      this.revealButton.addEventListener('click', this.onRevealButtonClicked.bind(this));\n    }\n  }\n\n  onRevealButtonClicked() {\n    const previousIsRevealed = parseBoolean(this.revealButton.dataset.secretRevealStatus);\n    this.updateDom(!previousIsRevealed);\n  }\n\n  updateDom(isRevealed) {\n    const values = this.container.querySelectorAll(this.valueSelector);\n    values.forEach(value => {\n      value.classList.toggle('hide', !isRevealed);\n    });\n\n    const placeholders = this.container.querySelectorAll(this.placeholderSelector);\n    placeholders.forEach(placeholder => {\n      placeholder.classList.toggle('hide', isRevealed);\n    });\n\n    this.revealButton.textContent = isRevealed\n      ? n__('Hide value', 'Hide values', values.length)\n      : n__('Reveal value', 'Reveal values', values.length);\n    this.revealButton.dataset.secretRevealStatus = isRevealed;\n  }\n}\n","import $ from 'jquery';\nimport { parseBoolean } from '../lib/utils/common_utils';\nimport { s__ } from '../locale';\nimport setupToggleButtons from '../toggle_buttons';\nimport CreateItemDropdown from '../create_item_dropdown';\nimport SecretValues from '../behaviors/secret_values';\n\nconst ALL_ENVIRONMENTS_STRING = s__('CiVariable|All environments');\n\nfunction createEnvironmentItem(value) {\n  return {\n    title: value === '*' ? ALL_ENVIRONMENTS_STRING : value,\n    id: value,\n    text: value === '*' ? s__('CiVariable|* (All environments)') : value,\n  };\n}\n\nexport default class VariableList {\n  constructor({ container, formField }) {\n    this.$container = $(container);\n    this.formField = formField;\n    this.environmentDropdownMap = new WeakMap();\n\n    this.inputMap = {\n      id: {\n        selector: '.js-ci-variable-input-id',\n        default: '',\n      },\n      key: {\n        selector: '.js-ci-variable-input-key',\n        default: '',\n      },\n      secret_value: {\n        selector: '.js-ci-variable-input-value',\n        default: '',\n      },\n      protected: {\n        selector: '.js-ci-variable-input-protected',\n        // use `attr` instead of `data` as we don't want the value to be\n        // converted. we need the value as a string.\n        default: $('.js-ci-variable-input-protected').attr('data-default'),\n      },\n      environment_scope: {\n        // We can't use a `.js-` class here because\n        // gl_dropdown replaces the <input> and doesn't copy over the class\n        // See https://gitlab.com/gitlab-org/gitlab-ce/issues/42458\n        selector: `input[name=\"${this.formField}[variables_attributes][][environment_scope]\"]`,\n        default: '*',\n      },\n      _destroy: {\n        selector: '.js-ci-variable-input-destroy',\n        default: '',\n      },\n    };\n\n    this.secretValues = new SecretValues({\n      container: this.$container[0],\n      valueSelector: '.js-row:not(:last-child) .js-secret-value',\n      placeholderSelector: '.js-row:not(:last-child) .js-secret-value-placeholder',\n    });\n  }\n\n  init() {\n    this.bindEvents();\n    this.secretValues.init();\n  }\n\n  bindEvents() {\n    this.$container.find('.js-row').each((index, rowEl) => {\n      this.initRow(rowEl);\n    });\n\n    this.$container.on('click', '.js-row-remove-button', e => {\n      e.preventDefault();\n      this.removeRow($(e.currentTarget).closest('.js-row'));\n    });\n\n    const inputSelector = Object.keys(this.inputMap)\n      .map(name => this.inputMap[name].selector)\n      .join(',');\n\n    // Remove any empty rows except the last row\n    this.$container.on('blur', inputSelector, e => {\n      const $row = $(e.currentTarget).closest('.js-row');\n\n      if ($row.is(':not(:last-child)') && !this.checkIfRowTouched($row)) {\n        this.removeRow($row);\n      }\n    });\n\n    // Always make sure there is an empty last row\n    this.$container.on('input trigger-change', inputSelector, () => {\n      const $lastRow = this.$container.find('.js-row').last();\n\n      if (this.checkIfRowTouched($lastRow)) {\n        this.insertRow($lastRow);\n      }\n    });\n  }\n\n  initRow(rowEl) {\n    const $row = $(rowEl);\n\n    setupToggleButtons($row[0]);\n\n    // Reset the resizable textarea\n    $row.find(this.inputMap.secret_value.selector).css('height', '');\n\n    const $environmentSelect = $row.find('.js-variable-environment-toggle');\n    if ($environmentSelect.length) {\n      const createItemDropdown = new CreateItemDropdown({\n        $dropdown: $environmentSelect,\n        defaultToggleLabel: ALL_ENVIRONMENTS_STRING,\n        fieldName: `${this.formField}[variables_attributes][][environment_scope]`,\n        getData: (term, callback) => callback(this.getEnvironmentValues()),\n        createNewItemFromValue: createEnvironmentItem,\n        onSelect: () => {\n          // Refresh the other dropdowns in the variable list\n          // so they have the new value we just picked\n          this.refreshDropdownData();\n\n          $row.find(this.inputMap.environment_scope.selector).trigger('trigger-change');\n        },\n      });\n\n      // Clear out any data that might have been left-over from the row clone\n      createItemDropdown.clearDropdown();\n\n      this.environmentDropdownMap.set($row[0], createItemDropdown);\n    }\n  }\n\n  insertRow($row) {\n    const $rowClone = $row.clone();\n    $rowClone.removeAttr('data-is-persisted');\n\n    // Reset the inputs to their defaults\n    Object.keys(this.inputMap).forEach(name => {\n      const entry = this.inputMap[name];\n      $rowClone.find(entry.selector).val(entry.default);\n    });\n\n    // Close any dropdowns\n    $rowClone.find('.dropdown-menu.show').each((index, $dropdown) => {\n      $dropdown.classList.remove('show');\n    });\n\n    this.initRow($rowClone);\n\n    $row.after($rowClone);\n  }\n\n  removeRow(row) {\n    const $row = $(row);\n    const isPersisted = parseBoolean($row.attr('data-is-persisted'));\n\n    if (isPersisted) {\n      $row.hide();\n      $row\n        // eslint-disable-next-line no-underscore-dangle\n        .find(this.inputMap._destroy.selector)\n        .val(true);\n    } else {\n      $row.remove();\n    }\n\n    // Refresh the other dropdowns in the variable list\n    // so any value with the variable deleted is gone\n    this.refreshDropdownData();\n  }\n\n  checkIfRowTouched($row) {\n    return Object.keys(this.inputMap).some(name => {\n      const entry = this.inputMap[name];\n      const $el = $row.find(entry.selector);\n      return $el.length && $el.val() !== entry.default;\n    });\n  }\n\n  toggleEnableRow(isEnabled = true) {\n    this.$container.find(this.inputMap.key.selector).attr('disabled', !isEnabled);\n    this.$container.find('.js-row-remove-button').attr('disabled', !isEnabled);\n  }\n\n  hideValues() {\n    this.secretValues.updateDom(false);\n  }\n\n  getAllData() {\n    // Ignore the last empty row because we don't want to try persist\n    // a blank variable and run into validation problems.\n    const validRows = this.$container\n      .find('.js-row')\n      .toArray()\n      .slice(0, -1);\n\n    return validRows.map(rowEl => {\n      const resultant = {};\n      Object.keys(this.inputMap).forEach(name => {\n        const entry = this.inputMap[name];\n        const $input = $(rowEl).find(entry.selector);\n        if ($input.length) {\n          resultant[name] = $input.val();\n        }\n      });\n\n      return resultant;\n    });\n  }\n\n  getEnvironmentValues() {\n    const valueMap = this.$container\n      .find(this.inputMap.environment_scope.selector)\n      .toArray()\n      .reduce(\n        (prevValueMap, envInput) => ({\n          ...prevValueMap,\n          [envInput.value]: envInput.value,\n        }),\n        {},\n      );\n\n    return Object.keys(valueMap).map(createEnvironmentItem);\n  }\n\n  refreshDropdownData() {\n    this.$container.find('.js-row').each((index, rowEl) => {\n      const environmentDropdown = this.environmentDropdownMap.get(rowEl);\n      if (environmentDropdown) {\n        environmentDropdown.refreshData();\n      }\n    });\n  }\n}\n","import initGkeDropdowns from '~/projects/gke_cluster_dropdowns';\nimport PersistentUserCallout from '../../persistent_user_callout';\nimport Project from './project';\nimport ShortcutsNavigation from '../../behaviors/shortcuts/shortcuts_navigation';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const { page } = document.body.dataset;\n  const newClusterViews = [\n    'projects:clusters:new',\n    'projects:clusters:create_gcp',\n    'projects:clusters:create_user',\n  ];\n\n  if (newClusterViews.indexOf(page) > -1) {\n    const callout = document.querySelector('.gcp-signup-offer');\n    if (callout) new PersistentUserCallout(callout); // eslint-disable-line no-new\n\n    initGkeDropdowns();\n  }\n\n  new Project(); // eslint-disable-line no-new\n  new ShortcutsNavigation(); // eslint-disable-line no-new\n});\n","import _ from 'underscore';\nimport axios from '../lib/utils/axios_utils';\nimport { s__ } from '../locale';\nimport Flash from '../flash';\nimport { parseBoolean } from '../lib/utils/common_utils';\nimport statusCodes from '../lib/utils/http_status';\nimport VariableList from './ci_variable_list';\n\nfunction generateErrorBoxContent(errors) {\n  const errorList = [].concat(errors).map(\n    errorString => `\n    <li>\n      ${_.escape(errorString)}\n    </li>\n  `,\n  );\n\n  return `\n    <p>\n      ${s__('CiVariable|Validation failed')}\n    </p>\n    <ul>\n      ${errorList.join('')}\n    </ul>\n  `;\n}\n\n// Used for the variable list on CI/CD projects/groups settings page\nexport default class AjaxVariableList {\n  constructor({ container, saveButton, errorBox, formField = 'variables', saveEndpoint }) {\n    this.container = container;\n    this.saveButton = saveButton;\n    this.errorBox = errorBox;\n    this.saveEndpoint = saveEndpoint;\n\n    this.variableList = new VariableList({\n      container: this.container,\n      formField,\n    });\n\n    this.bindEvents();\n    this.variableList.init();\n  }\n\n  bindEvents() {\n    this.saveButton.addEventListener('click', this.onSaveClicked.bind(this));\n  }\n\n  onSaveClicked() {\n    const loadingIcon = this.saveButton.querySelector('.js-ci-variables-save-loading-icon');\n    loadingIcon.classList.toggle('hide', false);\n    this.errorBox.classList.toggle('hide', true);\n    // We use this to prevent a user from changing a key before we have a chance\n    // to match it up in `updateRowsWithPersistedVariables`\n    this.variableList.toggleEnableRow(false);\n\n    return axios\n      .patch(\n        this.saveEndpoint,\n        {\n          variables_attributes: this.variableList.getAllData(),\n        },\n        {\n          // We want to be able to process the `res.data` from a 400 error response\n          // and print the validation messages such as duplicate variable keys\n          validateStatus: status =>\n            (status >= statusCodes.OK && status < statusCodes.MULTIPLE_CHOICES) ||\n            status === statusCodes.BAD_REQUEST,\n        },\n      )\n      .then(res => {\n        loadingIcon.classList.toggle('hide', true);\n        this.variableList.toggleEnableRow(true);\n\n        if (res.status === statusCodes.OK && res.data) {\n          this.updateRowsWithPersistedVariables(res.data.variables);\n          this.variableList.hideValues();\n        } else if (res.status === statusCodes.BAD_REQUEST) {\n          // Validation failed\n          this.errorBox.innerHTML = generateErrorBoxContent(res.data);\n          this.errorBox.classList.toggle('hide', false);\n        }\n      })\n      .catch(() => {\n        loadingIcon.classList.toggle('hide', true);\n        this.variableList.toggleEnableRow(true);\n        Flash(s__('CiVariable|Error occurred while saving variables'));\n      });\n  }\n\n  updateRowsWithPersistedVariables(persistedVariables = []) {\n    const persistedVariableMap = [].concat(persistedVariables).reduce(\n      (variableMap, variable) => ({\n        ...variableMap,\n        [variable.key]: variable,\n      }),\n      {},\n    );\n\n    this.container.querySelectorAll('.js-row').forEach(row => {\n      // If we submitted a row that was destroyed, remove it so we don't try\n      // to destroy it again which would cause a BE error\n      const destroyInput = row.querySelector('.js-ci-variable-input-destroy');\n      if (parseBoolean(destroyInput.value)) {\n        row.remove();\n        // Update the ID input so any future edits and `_destroy` will apply on the BE\n      } else {\n        const key = row.querySelector('.js-ci-variable-input-key').value;\n        const persistedVariable = persistedVariableMap[key];\n\n        if (persistedVariable) {\n          // eslint-disable-next-line no-param-reassign\n          row.querySelector('.js-ci-variable-input-id').value = persistedVariable.id;\n          row.setAttribute('data-is-persisted', 'true');\n        }\n      }\n    });\n  }\n}\n","/**\n * exports HTTP status codes\n */\n\nconst httpStatusCodes = {\n  ABORTED: 0,\n  OK: 200,\n  CREATED: 201,\n  ACCEPTED: 202,\n  NON_AUTHORITATIVE_INFORMATION: 203,\n  NO_CONTENT: 204,\n  RESET_CONTENT: 205,\n  PARTIAL_CONTENT: 206,\n  MULTI_STATUS: 207,\n  ALREADY_REPORTED: 208,\n  IM_USED: 226,\n  MULTIPLE_CHOICES: 300,\n  BAD_REQUEST: 400,\n  FORBIDDEN: 403,\n  NOT_FOUND: 404,\n  UNPROCESSABLE_ENTITY: 422,\n};\n\nexport const successCodes = [\n  httpStatusCodes.OK,\n  httpStatusCodes.CREATED,\n  httpStatusCodes.ACCEPTED,\n  httpStatusCodes.NON_AUTHORITATIVE_INFORMATION,\n  httpStatusCodes.NO_CONTENT,\n  httpStatusCodes.RESET_CONTENT,\n  httpStatusCodes.PARTIAL_CONTENT,\n  httpStatusCodes.MULTI_STATUS,\n  httpStatusCodes.ALREADY_REPORTED,\n  httpStatusCodes.IM_USED,\n];\n\nexport default httpStatusCodes;\n"],"sourceRoot":""}