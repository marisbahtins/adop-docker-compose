{"version":3,"sources":["webpack:///./pages/projects/blob/show/index.js","webpack:///./new_commit_form.js","webpack:///./lib/utils/ace_utils.js","webpack:////home/git/gitlab/node_modules/visibilityjs/lib/visibility.timers.js","webpack:////home/git/gitlab/node_modules/visibilityjs/lib/visibility.core.js","webpack:///./blob/viewer/index.js","webpack:///./blob/file_template_selector.js","webpack:///./blob/template_selectors/type_selector.js","webpack:///./blob/template_selectors/ci_yaml_selector.js","webpack:///./blob/template_selectors/dockerfile_selector.js","webpack:///./blob/template_selectors/gitignore_selector.js","webpack:///./blob/template_selectors/license_selector.js","webpack:///./blob/file_template_mediator.js","webpack:///./blob_edit/edit_blob.js","webpack:///./blob/blob_file_dropzone.js","webpack:///./blob_edit/blob_bundle.js","webpack:///./gpg_badges.js","webpack:///./behaviors/shortcuts/shortcuts_navigation.js","webpack:///./project_select_combo_button.js","webpack:///./project_select.js","webpack:///./pages/projects/project.js","webpack:///./line_highlighter.js","webpack:///./blob/blob_fork_suggestion.js","webpack:///./projects/tree/components/commit_pipeline_status_component.vue?a5b7","webpack:///./projects/tree/services/commit_pipeline_service.js","webpack:///./projects/tree/components/commit_pipeline_status_component.vue?8f0a","webpack:///projects/tree/components/commit_pipeline_status_component.vue","webpack:///./projects/tree/components/commit_pipeline_status_component.vue","webpack:///./vue_shared/directives/tooltip.js","webpack:///./pages/projects/index.js","webpack:///./lib/utils/constants.js","webpack:///./blob/blob_line_permalink_updater.js","webpack:///./behaviors/shortcuts/shortcuts_blob.js","webpack:///./pages/projects/init_blob.js","webpack:////home/git/gitlab/node_modules/visibilityjs/index.js","webpack:///./lib/utils/http_status.js","webpack:///./vue_shared/components/ci_icon.vue?6866","webpack:///vue_shared/components/ci_icon.vue","webpack:///./vue_shared/components/ci_icon.vue?7353","webpack:///./vue_shared/components/ci_icon.vue","webpack:///./lib/utils/poll.js"],"names":["__webpack_require__","r","__webpack_exports__","vue__WEBPACK_IMPORTED_MODULE_0__","_projects_tree_components_commit_pipeline_status_component_vue__WEBPACK_IMPORTED_MODULE_1__","_blob_viewer_index__WEBPACK_IMPORTED_MODULE_2__","_pages_projects_init_blob__WEBPACK_IMPORTED_MODULE_3__","_gpg_badges__WEBPACK_IMPORTED_MODULE_4__","document","addEventListener","BlobViewer","initBlob","CommitPipelineStatusEl","querySelector","statusLink","remove","Vue","el","components","commitPipelineStatus","render","createElement","props","endpoint","dataset","GpgBadges","fetch","NewCommitForm","form","_classCallCheck","this","renderDestination","bind","branchName","find","originalBranch","createMergeRequest","createMergeRequestContainer","keyup","different","val","show","wasDifferent","prop","hide","getModeByFileExtension","path","ace","require","getModeForPath","mode","d","window","lastTimer","install","Visibility","every","interval","hiddenInterval","callback","_time","number","_timers","visible","hidden","_run","isSupported","_listen","stop","id","_stop","_timed","_wasHidden","change","_stopRun","runNow","timer","runner","last","Date","call","delay","setTimeout","setInterval","clearInterval","clearTimeout","event","isHidden","wasHidden","i","module","exports","global","lastId","self","onVisible","support","listener","e","state","unbind","_callbacks","afterPrerendering","_doc","webkitHidden","visibilityState","webkitVisibilityState","_change","_init","apply","arguments","attachEvent","initAuxiliaryViewer","initRichViewer","initMainViewers","auxiliaryViewer","loadViewer","viewer","richType","initViewer","promise","then","default","catch","error","Flash","Promise","all","viewerParam","url","getAttribute","resolve","setAttribute","axios","get","_ref","data","innerHTML","html","$fileHolder","$","length","switcher","switcherBtns","querySelectorAll","copySourceBtn","simpleViewer","richViewer","initBindings","switchToInitialViewer","initialViewerName","location","hash","indexOf","switchToViewer","_this","Array","from","forEach","switchViewHandler","classList","contains","blur","target","currentTarget","preventDefault","activeViewer","add","tooltip","name","_this2","newViewer","concat","oldButton","newButton","oldViewer","toggleCopyButtonState","renderGFM","trigger","handleLocationHash","FileTemplateSelector","mediator","$dropdown","$wrapper","cfg","config","dropdown","wrapper","$loadingIcon","$dropdownToggleText","initDropdown","init","removeClass","addClass","hasClass","text","options","query","selectTemplateFile","opts","selectedObj","reportSelection","FileTemplateTypeSelector","dropdownData","type_selector_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","glDropdown","filterable","selectable","toggleLabel","item","clicked","selectTemplateTypeOptions","BlobCiYamlSelector","ci_yaml_selector_classCallCheck","ci_yaml_selector_possibleConstructorReturn","ci_yaml_selector_getPrototypeOf","key","pattern","type","search","fields","reportSelectionName","DockerfileSelector","dockerfile_selector_classCallCheck","dockerfile_selector_possibleConstructorReturn","dockerfile_selector_getPrototypeOf","BlobGitignoreSelector","gitignore_selector_classCallCheck","gitignore_selector_possibleConstructorReturn","gitignore_selector_getPrototypeOf","BlobLicenseSelector","license_selector_classCallCheck","license_selector_possibleConstructorReturn","license_selector_getPrototypeOf","$el","project","fullname","FileTemplateMediator","editor","currentAction","projectId","file_template_mediator_classCallCheck","initTemplateSelectors","initTemplateTypeSelector","initDomElements","initDropdowns","initPageEvents","templateSelectors","GitignoreSelector","LicenseSelector","map","TemplateSelectorClass","typeSelector","templateSelector","$templatesMenu","$undoMenu","$fileEditor","$undoBtn","$templateSelectors","$filenameInput","$fileContent","$commitForm","$navLinks","hideTemplateSelectorMenu","displayMatchedTemplateSelector","listenForFilenameInput","prepFileContentForSubmit","listenForPreviewMode","on","_this3","submit","getValue","_this4","href","split","showTemplateSelectorMenu","selector","setToggleText","cacheToggleText","selectTemplateType","_this5","renderLoading","destroyUndoMenu","fetchFileTemplate","file","showUndoMenu","setEditorContent","setFilename","renderLoaded","err","_this6","currentInput","getFilename","test","_this7","undefined","Api","projectTemplate","newValue","content","setValue","focus","navigateFileStart","_this8","restoreFromCache","cacheFileContents","off","cachedToggleText","getTemplateSelectorToggleText","cachedContent","cachedFilename","setTemplateSelectorToggleText","getToggleText","selected","EditBlob","edit_blob_classCallCheck","configureAceEditor","initModePanesAndLinks","initSoftWrap","initFileSelectors","_this$options","filePath","assetsPath","isMarkdown","set","loadModule","edit","addEditorMarkdownListeners","$blockScrolling","Infinity","getSession","setMode","_this$options2","fileTemplateMediator","TemplateSelectorMediator","$editModePanes","$editModeLinks","editModeLinkClickHandler","currentLink","paneId","attr","currentPane","filter","parent","fadeIn","$toggleButton","post","empty","append","createFlash","__","isSoftWrapped","toggleSoftWrap","toggleClass","setUseWrapMode","toggleLoading","$icon","loading","disable","HIDDEN_CLASS","enable","Dropzone","autoDiscover","BlobFileDropzone","method","blob_file_dropzone_classCallCheck","formDropzone","submitButton","submitButtonLoadingIcon","dropzoneMessage","dropzone","autoProcessQueue","clickable","uploadMultiple","paramName","maxFilesize","gon","max_file_size","parallelUploads","maxFiles","addRemoveLinks","previewsContainer","headers","csrf","header","response","modal","visitUrl","removeFile","xhr","formData","errorMessage","stripped","stopPropagation","getQueuedFiles","alert","processQueue","editBlobForm","uploadBlobForm","deleteBlobForm","urlRoot","commitButton","onbeforeunload","gl","utils","disableButtonIfEmptyField","tag","badges","displayError","reject","Error","params","parseQueryStringIntoObject","serialize","signatures","signature","commit_sha","replaceWith","ShortcutsNavigation","Mousetrap","findAndFollowLink","enabledHelp","push","Shortcuts","ProjectSelectComboButton","select","projectSelectInput","newItemBtn","resourceType","resourceLabel","formattedText","deriveTextVariants","groupId","bindEvents","initLocalStorage","siblings","openDropdown","getProjectFromLocalStorage","selectProject","AccessorUtilities","isLocalStorageAccessSafe","localStorageKey","localStorageItemType","join","setBtnTextFromLocalStorage","select2","selectedProjectData","JSON","parse","projectMeta","setNewItemBtnAttributes","setProjectInLocalStorage","cachedProjectData","defaultTextPrefix","presetTextSuffix","projectString","localStorage","getItem","stringify","setItem","slice","projectSelect","each","placeholder","simpleFilter","includeGroups","allProjects","orderBy","withIssuesEnabled","withMergeRequestsEnabled","withShared","includeProjectsInSubgroups","allowClear","minimumInputLength","finalCallback","projectsCallback","projects","results","groupsCallback","groups","term","groupProjects","with_issues_enabled","with_merge_requests_enabled","with_shared","include_subgroups","order_by","membership","web_url","name_with_namespace","initSelection","dropdownCssClass","Project","$cloneOptions","$projectCloneField","$cloneBtnLabel","mobileCloneField","selectedCloneOption","trim","$this","cloneType","activeText","$label","closest","clipboardText","initRefSwitcher","parents","Cookies","cookieKey","projectSelectDropdown","changeProject","refListItem","refLink","ref","flash","filterRemote","filterByText","inputFieldName","fieldName","renderRow","li","cloneNode","className","textContent","link","appendChild","obj","$form","$visit","shouldVisit","action","divider","jquery__WEBPACK_IMPORTED_MODULE_0__","jquery__WEBPACK_IMPORTED_MODULE_0___default","n","LineHighlighter","highlightLineClass","fileHolderSelector","scrollFileHolder","_hash","setHash","highlightLine","clickHandler","highlightHash","prototype","newHash","range","clearHighlight","hashToRange","highlightRange","lineSelector","scrollOptions","offset","scrollTo","current","lineNumber","shiftKey","matches","match","parseInt","reverse","firstLineNumber","lastLineNumber","__setLocationHash__","value","history","pushState","title","defaults","openButtons","forkButtons","cancelButtons","suggestionSections","actionTextPieces","BlobForkSuggestion","elementMap","Object","assign","onOpenButtonClick","onCancelButtonClick","forkPath","showSuggestionSection","hideSuggestionSection","CommitPipelineService","components_commit_pipeline_status_componentvue_type_script_lang_js_","directives","ciIcon","ci_icon","GlLoadingIcon","dist","String","required","ciStatus","isLoading","computed","statusTitle","locale","commitText","mounted","service","commit_pipeline_service_CommitPipelineService","initPolling","methods","successCallback","res","pipelines","details","status","errorCallback","icon","group","poll","resource","visibilityjs_default","a","fetchPipelineCommitData","makeRequest","restart","fetchData","destroy","component","componentNormalizer","_h","$createElement","_c","_self","staticClass","attrs","size","label","details_path","rawName","aria-label","data-container","__file","componentUpdated","tooltipInstance","tip","getTipElement","setElementContent","getTitle","_projects_gke_cluster_dropdowns__WEBPACK_IMPORTED_MODULE_0__","_persistent_user_callout__WEBPACK_IMPORTED_MODULE_1__","_project__WEBPACK_IMPORTED_MODULE_2__","_behaviors_shortcuts_shortcuts_navigation__WEBPACK_IMPORTED_MODULE_3__","page","body","callout","PersistentUserCallout","initGkeDropdowns","BYTES_IN_KIB","lineNumberRe","updateLineNumbersOnBlobPermalinks","linksToUpdate","getLocationHash","hashUrlString","permalinkButton","baseHref","BlobLinePermalinkUpdater","blobContentHolder","lineNumberSelector","elementsToUpdate","updateBlameAndBlobPermalinkCb","skipResetBindings","fileBlobPermalinkUrl","ShortcutsBlob","moveToFilePermalink","_assertThisInitialized","fileBlobPermalinkUrlElement","initBlobBundle","successCodes","httpStatusCodes","ABORTED","OK","CREATED","ACCEPTED","NON_AUTHORITATIVE_INFORMATION","NO_CONTENT","RESET_CONTENT","PARTIAL_CONTENT","MULTI_STATUS","ALREADY_REPORTED","IM_USED","MULTIPLE_CHOICES","BAD_REQUEST","FORBIDDEN","NOT_FOUND","UNPROCESSABLE_ENTITY","validSizes","components_ci_iconvue_type_script_lang_js_","Icon","Number","validator","includes","borderless","Boolean","cssClass","class","Poll","notificationCallback","intervalHeader","timeoutID","canPoll","normalizeHeaders","pollInterval","checkConditions"],"mappings":"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","file":"pages.projects.blob.show.10aa79c7.chunk.js","sourcesContent":["import Vue from 'vue';\nimport commitPipelineStatus from '~/projects/tree/components/commit_pipeline_status_component.vue';\nimport BlobViewer from '~/blob/viewer/index';\nimport initBlob from '~/pages/projects/init_blob';\nimport GpgBadges from '~/gpg_badges';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  new BlobViewer(); // eslint-disable-line no-new\n  initBlob();\n\n  const CommitPipelineStatusEl = document.querySelector('.js-commit-pipeline-status');\n  const statusLink = document.querySelector('.commit-actions .ci-status-link');\n  if (statusLink) {\n    statusLink.remove();\n    // eslint-disable-next-line no-new\n    new Vue({\n      el: CommitPipelineStatusEl,\n      components: {\n        commitPipelineStatus,\n      },\n      render(createElement) {\n        return createElement('commit-pipeline-status', {\n          props: {\n            endpoint: CommitPipelineStatusEl.dataset.endpoint,\n          },\n        });\n      },\n    });\n  }\n\n  GpgBadges.fetch();\n});\n","/* eslint-disable no-var, no-return-assign */\nexport default class NewCommitForm {\n  constructor(form) {\n    this.form = form;\n    this.renderDestination = this.renderDestination.bind(this);\n    this.branchName = form.find('.js-branch-name');\n    this.originalBranch = form.find('.js-original-branch');\n    this.createMergeRequest = form.find('.js-create-merge-request');\n    this.createMergeRequestContainer = form.find('.js-create-merge-request-container');\n    this.branchName.keyup(this.renderDestination);\n    this.renderDestination();\n  }\n  renderDestination() {\n    var different;\n    different = this.branchName.val() !== this.originalBranch.val();\n    if (different) {\n      this.createMergeRequestContainer.show();\n      if (!this.wasDifferent) {\n        this.createMergeRequest.prop('checked', true);\n      }\n    } else {\n      this.createMergeRequestContainer.hide();\n      this.createMergeRequest.prop('checked', false);\n    }\n    return (this.wasDifferent = different);\n  }\n}\n","/* global ace */\n\nexport default function getModeByFileExtension(path) {\n  const modelist = ace.require('ace/ext/modelist');\n  return modelist.getModeForPath(path).mode;\n}\n",";(function (window) {\n    \"use strict\";\n\n    var lastTimer = -1;\n\n    var install = function (Visibility) {\n\n        // Run callback every `interval` milliseconds if page is visible and\n        // every `hiddenInterval` milliseconds if page is hidden.\n        //\n        //   Visibility.every(60 * 1000, 5 * 60 * 1000, function () {\n        //       checkNewMails();\n        //   });\n        //\n        // You can skip `hiddenInterval` and callback will be called only if\n        // page is visible.\n        //\n        //   Visibility.every(1000, function () {\n        //       updateCountdown();\n        //   });\n        //\n        // It is analog of `setInterval(callback, interval)` but use visibility\n        // state.\n        //\n        // It return timer ID, that you can use in `Visibility.stop(id)` to stop\n        // timer (`clearInterval` analog).\n        // Warning: timer ID is different from interval ID from `setInterval`,\n        // so donâ€™t use it in `clearInterval`.\n        //\n        // On change state from hidden to visible timers will be execute.\n        Visibility.every = function (interval, hiddenInterval, callback) {\n            Visibility._time();\n\n            if ( !callback ) {\n                callback = hiddenInterval;\n                hiddenInterval = null;\n            }\n\n            lastTimer += 1;\n            var number = lastTimer;\n\n            Visibility._timers[number] = {\n                visible:  interval,\n                hidden:   hiddenInterval,\n                callback: callback\n            };\n            Visibility._run(number, false);\n\n            if ( Visibility.isSupported() ) {\n                Visibility._listen();\n            }\n            return number;\n        };\n\n        // Stop timer from `every` method by it ID (`every` method return it).\n        //\n        //   slideshow = Visibility.every(5 * 1000, function () {\n        //       changeSlide();\n        //   });\n        //   $('.stopSlideshow').click(function () {\n        //       Visibility.stop(slideshow);\n        //   });\n        Visibility.stop = function(id) {\n            if ( !Visibility._timers[id] ) {\n                return false;\n            }\n            Visibility._stop(id);\n            delete Visibility._timers[id];\n            return true;\n        };\n\n        // Callbacks and intervals added by `every` method.\n        Visibility._timers = { };\n\n        // Initialize variables on page loading.\n        Visibility._time = function () {\n            if ( Visibility._timed ) {\n                return;\n            }\n            Visibility._timed     = true;\n            Visibility._wasHidden = Visibility.hidden();\n\n            Visibility.change(function () {\n                Visibility._stopRun();\n                Visibility._wasHidden = Visibility.hidden();\n            });\n        };\n\n        // Try to run timer from every method by itâ€™s ID. It will be use\n        // `interval` or `hiddenInterval` depending on visibility state.\n        // If page is hidden and `hiddenInterval` is null,\n        // it will not run timer.\n        //\n        // Argument `runNow` say, that timers must be execute now too.\n        Visibility._run = function (id, runNow) {\n            var interval,\n                timer = Visibility._timers[id];\n\n            if ( Visibility.hidden() ) {\n                if ( null === timer.hidden ) {\n                    return;\n                }\n                interval = timer.hidden;\n            } else {\n                interval = timer.visible;\n            }\n\n            var runner = function () {\n                timer.last = new Date();\n                timer.callback.call(window);\n            }\n\n            if ( runNow ) {\n                var now  = new Date();\n                var last = now - timer.last ;\n\n                if ( interval > last ) {\n                    timer.delay = setTimeout(function () {\n                        timer.id = setInterval(runner, interval);\n                        runner();\n                    }, interval - last);\n                } else {\n                    timer.id = setInterval(runner, interval);\n                    runner();\n                }\n\n            } else {\n              timer.id = setInterval(runner, interval);\n            }\n        };\n\n        // Stop timer from `every` method by itâ€™s ID.\n        Visibility._stop = function (id) {\n            var timer = Visibility._timers[id];\n            clearInterval(timer.id);\n            clearTimeout(timer.delay);\n            delete timer.id;\n            delete timer.delay;\n        };\n\n        // Listener for `visibilitychange` event.\n        Visibility._stopRun = function (event) {\n            var isHidden  = Visibility.hidden(),\n                wasHidden = Visibility._wasHidden;\n\n            if ( (isHidden && !wasHidden) || (!isHidden && wasHidden) ) {\n                for ( var i in Visibility._timers ) {\n                    Visibility._stop(i);\n                    Visibility._run(i, !isHidden);\n                }\n            }\n        };\n\n        return Visibility;\n    }\n\n    if ( typeof(module) != 'undefined' && module.exports ) {\n        module.exports = install(require('./visibility.core'));\n    } else {\n        install(window.Visibility)\n    }\n\n})(window);\n",";(function (global) {\n    \"use strict\";\n\n    var lastId = -1;\n\n    // Visibility.js allow you to know, that your web page is in the background\n    // tab and thus not visible to the user. This library is wrap under\n    // Page Visibility API. It fix problems with different vendor prefixes and\n    // add high-level useful functions.\n    var self = {\n\n        // Call callback only when page become to visible for user or\n        // call it now if page is visible now or Page Visibility API\n        // doesnâ€™t supported.\n        //\n        // Return false if API isnâ€™t supported, true if page is already visible\n        // or listener ID (you can use it in `unbind` method) if page isnâ€™t\n        // visible now.\n        //\n        //   Visibility.onVisible(function () {\n        //       startIntroAnimation();\n        //   });\n        onVisible: function (callback) {\n            var support = self.isSupported();\n            if ( !support || !self.hidden() ) {\n                callback();\n                return support;\n            }\n\n            var listener = self.change(function (e, state) {\n                if ( !self.hidden() ) {\n                    self.unbind(listener);\n                    callback();\n                }\n            });\n            return listener;\n        },\n\n        // Call callback when visibility will be changed. First argument for\n        // callback will be original event object, second will be visibility\n        // state name.\n        //\n        // Return listener ID to unbind listener by `unbind` method.\n        //\n        // If Page Visibility API doesnâ€™t supported method will be return false\n        // and callback never will be called.\n        //\n        //   Visibility.change(function(e, state) {\n        //       Statistics.visibilityChange(state);\n        //   });\n        //\n        // It is just proxy to `visibilitychange` event, but use vendor prefix.\n        change: function (callback) {\n            if ( !self.isSupported() ) {\n                return false;\n            }\n            lastId += 1;\n            var number = lastId;\n            self._callbacks[number] = callback;\n            self._listen();\n            return number;\n        },\n\n        // Remove `change` listener by it ID.\n        //\n        //   var id = Visibility.change(function(e, state) {\n        //       firstChangeCallback();\n        //       Visibility.unbind(id);\n        //   });\n        unbind: function (id) {\n            delete self._callbacks[id];\n        },\n\n        // Call `callback` in any state, expect â€œprerenderâ€. If current state\n        // is â€œprerenderâ€ it will wait until state will be changed.\n        // If Page Visibility API doesnâ€™t supported, it will call `callback`\n        // immediately.\n        //\n        // Return false if API isnâ€™t supported, true if page is already after\n        // prerendering or listener ID (you can use it in `unbind` method)\n        // if page is prerended now.\n        //\n        //   Visibility.afterPrerendering(function () {\n        //       Statistics.countVisitor();\n        //   });\n        afterPrerendering: function (callback) {\n            var support   = self.isSupported();\n            var prerender = 'prerender';\n\n            if ( !support || prerender != self.state() ) {\n                callback();\n                return support;\n            }\n\n            var listener = self.change(function (e, state) {\n                if ( prerender != state ) {\n                    self.unbind(listener);\n                    callback();\n                }\n            });\n            return listener;\n        },\n\n        // Return true if page now isnâ€™t visible to user.\n        //\n        //   if ( !Visibility.hidden() ) {\n        //       VideoPlayer.play();\n        //   }\n        //\n        // It is just proxy to `document.hidden`, but use vendor prefix.\n        hidden: function () {\n            return !!(self._doc.hidden || self._doc.webkitHidden);\n        },\n\n        // Return visibility state: 'visible', 'hidden' or 'prerender'.\n        //\n        //   if ( 'prerender' == Visibility.state() ) {\n        //       Statistics.pageIsPrerendering();\n        //   }\n        //\n        // Donâ€™t use `Visibility.state()` to detect, is page visible, because\n        // visibility states can extend in next API versions.\n        // Use more simpler and general `Visibility.hidden()` for this cases.\n        //\n        // It is just proxy to `document.visibilityState`, but use\n        // vendor prefix.\n        state: function () {\n            return self._doc.visibilityState       ||\n                   self._doc.webkitVisibilityState ||\n                   'visible';\n        },\n\n        // Return true if browser support Page Visibility API.\n        //\n        //   if ( Visibility.isSupported() ) {\n        //       Statistics.startTrackingVisibility();\n        //       Visibility.change(function(e, state)) {\n        //           Statistics.trackVisibility(state);\n        //       });\n        //   }\n        isSupported: function () {\n            return !!(self._doc.visibilityState ||\n                      self._doc.webkitVisibilityState);\n        },\n\n        // Link to document object to change it in tests.\n        _doc: document || {},\n\n        // Callbacks from `change` method, that wait visibility changes.\n        _callbacks: { },\n\n        // Listener for `visibilitychange` event.\n        _change: function(event) {\n            var state = self.state();\n\n            for ( var i in self._callbacks ) {\n                self._callbacks[i].call(self._doc, event, state);\n            }\n        },\n\n        // Set listener for `visibilitychange` event.\n        _listen: function () {\n            if ( self._init ) {\n                return;\n            }\n\n            var event = 'visibilitychange';\n            if ( self._doc.webkitVisibilityState ) {\n                event = 'webkit' + event;\n            }\n\n            var listener = function () {\n                self._change.apply(self, arguments);\n            };\n            if ( self._doc.addEventListener ) {\n                self._doc.addEventListener(event, listener);\n            } else {\n                self._doc.attachEvent(event, listener);\n            }\n            self._init = true;\n        }\n\n    };\n\n    if ( typeof(module) != 'undefined' && module.exports ) {\n        module.exports = self;\n    } else {\n        global.Visibility = self;\n    }\n\n})(this);\n","import $ from 'jquery';\nimport Flash from '../../flash';\nimport { handleLocationHash } from '../../lib/utils/common_utils';\nimport axios from '../../lib/utils/axios_utils';\n\nexport default class BlobViewer {\n  constructor() {\n    BlobViewer.initAuxiliaryViewer();\n    BlobViewer.initRichViewer();\n\n    this.initMainViewers();\n  }\n\n  static initAuxiliaryViewer() {\n    const auxiliaryViewer = document.querySelector('.blob-viewer[data-type=\"auxiliary\"]');\n    if (!auxiliaryViewer) return;\n\n    BlobViewer.loadViewer(auxiliaryViewer);\n  }\n\n  static initRichViewer() {\n    const viewer = document.querySelector('.blob-viewer[data-type=\"rich\"]');\n    if (!viewer || !viewer.dataset.richType) return;\n\n    const initViewer = promise =>\n      promise\n        .then(module => module.default(viewer))\n        .catch(error => {\n          Flash('Error loading file viewer.');\n          throw error;\n        });\n\n    switch (viewer.dataset.richType) {\n      case 'balsamiq':\n        initViewer(import(/* webpackChunkName: 'balsamiq_viewer' */ '../balsamiq_viewer'));\n        break;\n      case 'notebook':\n        initViewer(import(/* webpackChunkName: 'notebook_viewer' */ '../notebook_viewer'));\n        break;\n      case 'pdf':\n        initViewer(import(/* webpackChunkName: 'pdf_viewer' */ '../pdf_viewer'));\n        break;\n      case 'sketch':\n        initViewer(import(/* webpackChunkName: 'sketch_viewer' */ '../sketch_viewer'));\n        break;\n      case 'stl':\n        initViewer(import(/* webpackChunkName: 'stl_viewer' */ '../stl_viewer'));\n        break;\n      default:\n        break;\n    }\n  }\n\n  initMainViewers() {\n    this.$fileHolder = $('.file-holder');\n    if (!this.$fileHolder.length) return;\n\n    this.switcher = document.querySelector('.js-blob-viewer-switcher');\n    this.switcherBtns = document.querySelectorAll('.js-blob-viewer-switch-btn');\n    this.copySourceBtn = document.querySelector('.js-copy-blob-source-btn');\n\n    this.simpleViewer = this.$fileHolder[0].querySelector('.blob-viewer[data-type=\"simple\"]');\n    this.richViewer = this.$fileHolder[0].querySelector('.blob-viewer[data-type=\"rich\"]');\n\n    this.initBindings();\n\n    this.switchToInitialViewer();\n  }\n\n  switchToInitialViewer() {\n    const initialViewer = this.$fileHolder[0].querySelector('.blob-viewer:not(.hidden)');\n    let initialViewerName = initialViewer.getAttribute('data-type');\n\n    if (this.switcher && window.location.hash.indexOf('#L') === 0) {\n      initialViewerName = 'simple';\n    }\n\n    this.switchToViewer(initialViewerName);\n  }\n\n  initBindings() {\n    if (this.switcherBtns.length) {\n      Array.from(this.switcherBtns).forEach(el => {\n        el.addEventListener('click', this.switchViewHandler.bind(this));\n      });\n    }\n\n    if (this.copySourceBtn) {\n      this.copySourceBtn.addEventListener('click', () => {\n        if (this.copySourceBtn.classList.contains('disabled')) return this.copySourceBtn.blur();\n\n        return this.switchToViewer('simple');\n      });\n    }\n  }\n\n  switchViewHandler(e) {\n    const target = e.currentTarget;\n\n    e.preventDefault();\n\n    this.switchToViewer(target.getAttribute('data-viewer'));\n  }\n\n  toggleCopyButtonState() {\n    if (!this.copySourceBtn) return;\n\n    if (this.simpleViewer.getAttribute('data-loaded')) {\n      this.copySourceBtn.setAttribute('title', 'Copy source to clipboard');\n      this.copySourceBtn.classList.remove('disabled');\n    } else if (this.activeViewer === this.simpleViewer) {\n      this.copySourceBtn.setAttribute(\n        'title',\n        'Wait for the source to load to copy it to the clipboard',\n      );\n      this.copySourceBtn.classList.add('disabled');\n    } else {\n      this.copySourceBtn.setAttribute('title', 'Switch to the source to copy it to the clipboard');\n      this.copySourceBtn.classList.add('disabled');\n    }\n\n    $(this.copySourceBtn).tooltip('_fixTitle');\n  }\n\n  switchToViewer(name) {\n    const newViewer = this.$fileHolder[0].querySelector(`.blob-viewer[data-type='${name}']`);\n    if (this.activeViewer === newViewer) return;\n\n    const oldButton = document.querySelector('.js-blob-viewer-switch-btn.active');\n    const newButton = document.querySelector(`.js-blob-viewer-switch-btn[data-viewer='${name}']`);\n    const oldViewer = this.$fileHolder[0].querySelector(`.blob-viewer:not([data-type='${name}'])`);\n\n    if (oldButton) {\n      oldButton.classList.remove('active');\n    }\n\n    if (newButton) {\n      newButton.classList.add('active');\n      newButton.blur();\n    }\n\n    if (oldViewer) {\n      oldViewer.classList.add('hidden');\n    }\n\n    newViewer.classList.remove('hidden');\n\n    this.activeViewer = newViewer;\n\n    this.toggleCopyButtonState();\n\n    BlobViewer.loadViewer(newViewer)\n      .then(viewer => {\n        $(viewer).renderGFM();\n\n        this.$fileHolder.trigger('highlight:line');\n        handleLocationHash();\n\n        this.toggleCopyButtonState();\n      })\n      .catch(() => new Flash('Error loading viewer'));\n  }\n\n  static loadViewer(viewerParam) {\n    const viewer = viewerParam;\n    const url = viewer.getAttribute('data-url');\n\n    if (!url || viewer.getAttribute('data-loaded') || viewer.getAttribute('data-loading')) {\n      return Promise.resolve(viewer);\n    }\n\n    viewer.setAttribute('data-loading', 'true');\n\n    return axios.get(url).then(({ data }) => {\n      viewer.innerHTML = data.html;\n      viewer.setAttribute('data-loaded', 'true');\n\n      return viewer;\n    });\n  }\n}\n","import $ from 'jquery';\n\nexport default class FileTemplateSelector {\n  constructor(mediator) {\n    this.mediator = mediator;\n    this.$dropdown = null;\n    this.$wrapper = null;\n  }\n\n  init() {\n    const cfg = this.config;\n\n    this.$dropdown = $(cfg.dropdown);\n    this.$wrapper = $(cfg.wrapper);\n    this.$loadingIcon = this.$wrapper.find('.fa-chevron-down');\n    this.$dropdownToggleText = this.$wrapper.find('.dropdown-toggle-text');\n\n    this.initDropdown();\n  }\n\n  show() {\n    if (this.$dropdown === null) {\n      this.init();\n    }\n\n    this.$wrapper.removeClass('hidden');\n  }\n\n  hide() {\n    if (this.$dropdown !== null) {\n      this.$wrapper.addClass('hidden');\n    }\n  }\n\n  isHidden() {\n    return this.$wrapper.hasClass('hidden');\n  }\n\n  getToggleText() {\n    return this.$dropdownToggleText.text();\n  }\n\n  setToggleText(text) {\n    this.$dropdownToggleText.text(text);\n  }\n\n  renderLoading() {\n    this.$loadingIcon.addClass('fa-spinner fa-spin').removeClass('fa-chevron-down');\n  }\n\n  renderLoaded() {\n    this.$loadingIcon.addClass('fa-chevron-down').removeClass('fa-spinner fa-spin');\n  }\n\n  reportSelection(options) {\n    const { query, e, data } = options;\n    e.preventDefault();\n    return this.mediator.selectTemplateFile(this, query, data);\n  }\n\n  reportSelectionName(options) {\n    const opts = options;\n    opts.query = options.selectedObj.name;\n\n    this.reportSelection(opts);\n  }\n}\n","import FileTemplateSelector from '../file_template_selector';\n\nexport default class FileTemplateTypeSelector extends FileTemplateSelector {\n  constructor({ mediator, dropdownData }) {\n    super(mediator);\n    this.mediator = mediator;\n    this.config = {\n      dropdown: '.js-template-type-selector',\n      wrapper: '.js-template-type-selector-wrap',\n      dropdownData,\n    };\n  }\n\n  initDropdown() {\n    this.$dropdown.glDropdown({\n      data: this.config.dropdownData,\n      filterable: false,\n      selectable: true,\n      toggleLabel: item => item.name,\n      clicked: options => this.mediator.selectTemplateTypeOptions(options),\n      text: item => item.name,\n    });\n  }\n}\n","import FileTemplateSelector from '../file_template_selector';\n\nexport default class BlobCiYamlSelector extends FileTemplateSelector {\n  constructor({ mediator }) {\n    super(mediator);\n    this.config = {\n      key: 'gitlab-ci-yaml',\n      name: '.gitlab-ci.yml',\n      pattern: /(.gitlab-ci.yml)/,\n      type: 'gitlab_ci_ymls',\n      dropdown: '.js-gitlab-ci-yml-selector',\n      wrapper: '.js-gitlab-ci-yml-selector-wrap',\n    };\n  }\n\n  initDropdown() {\n    // maybe move to super class as well\n    this.$dropdown.glDropdown({\n      data: this.$dropdown.data('data'),\n      filterable: true,\n      selectable: true,\n      toggleLabel: item => item.name,\n      search: {\n        fields: ['name'],\n      },\n      clicked: options => this.reportSelectionName(options),\n      text: item => item.name,\n    });\n  }\n}\n","import FileTemplateSelector from '../file_template_selector';\n\nexport default class DockerfileSelector extends FileTemplateSelector {\n  constructor({ mediator }) {\n    super(mediator);\n    this.config = {\n      key: 'dockerfile',\n      name: 'Dockerfile',\n      pattern: /(Dockerfile)/,\n      type: 'dockerfiles',\n      dropdown: '.js-dockerfile-selector',\n      wrapper: '.js-dockerfile-selector-wrap',\n    };\n  }\n\n  initDropdown() {\n    // maybe move to super class as well\n    this.$dropdown.glDropdown({\n      data: this.$dropdown.data('data'),\n      filterable: true,\n      selectable: true,\n      toggleLabel: item => item.name,\n      search: {\n        fields: ['name'],\n      },\n      clicked: options => this.reportSelectionName(options),\n      text: item => item.name,\n    });\n  }\n}\n","import FileTemplateSelector from '../file_template_selector';\n\nexport default class BlobGitignoreSelector extends FileTemplateSelector {\n  constructor({ mediator }) {\n    super(mediator);\n    this.config = {\n      key: 'gitignore',\n      name: '.gitignore',\n      pattern: /(.gitignore)/,\n      type: 'gitignores',\n      dropdown: '.js-gitignore-selector',\n      wrapper: '.js-gitignore-selector-wrap',\n    };\n  }\n\n  initDropdown() {\n    this.$dropdown.glDropdown({\n      data: this.$dropdown.data('data'),\n      filterable: true,\n      selectable: true,\n      toggleLabel: item => item.name,\n      search: {\n        fields: ['name'],\n      },\n      clicked: options => this.reportSelectionName(options),\n      text: item => item.name,\n    });\n  }\n}\n","import FileTemplateSelector from '../file_template_selector';\n\nexport default class BlobLicenseSelector extends FileTemplateSelector {\n  constructor({ mediator }) {\n    super(mediator);\n    this.config = {\n      key: 'license',\n      name: 'LICENSE',\n      pattern: /^(.+\\/)?(licen[sc]e|copying)($|\\.)/i,\n      type: 'licenses',\n      dropdown: '.js-license-selector',\n      wrapper: '.js-license-selector-wrap',\n    };\n  }\n\n  initDropdown() {\n    this.$dropdown.glDropdown({\n      data: this.$dropdown.data('data'),\n      filterable: true,\n      selectable: true,\n      toggleLabel: item => item.name,\n      search: {\n        fields: ['name'],\n      },\n      clicked: options => {\n        const { e } = options;\n        const el = options.$el;\n        const query = options.selectedObj;\n\n        const data = {\n          project: this.$dropdown.data('project'),\n          fullname: this.$dropdown.data('fullname'),\n        };\n\n        this.reportSelection({\n          query: query.id,\n          el,\n          e,\n          data,\n        });\n      },\n      text: item => item.name,\n    });\n  }\n}\n","import Api from '~/api';\n\nimport $ from 'jquery';\nimport Flash from '../flash';\nimport FileTemplateTypeSelector from './template_selectors/type_selector';\nimport BlobCiYamlSelector from './template_selectors/ci_yaml_selector';\nimport DockerfileSelector from './template_selectors/dockerfile_selector';\nimport GitignoreSelector from './template_selectors/gitignore_selector';\nimport LicenseSelector from './template_selectors/license_selector';\n\nexport default class FileTemplateMediator {\n  constructor({ editor, currentAction, projectId }) {\n    this.editor = editor;\n    this.currentAction = currentAction;\n    this.projectId = projectId;\n\n    this.initTemplateSelectors();\n    this.initTemplateTypeSelector();\n    this.initDomElements();\n    this.initDropdowns();\n    this.initPageEvents();\n  }\n\n  initTemplateSelectors() {\n    // Order dictates template type dropdown item order\n    this.templateSelectors = [\n      GitignoreSelector,\n      BlobCiYamlSelector,\n      DockerfileSelector,\n      LicenseSelector,\n    ].map(TemplateSelectorClass => new TemplateSelectorClass({ mediator: this }));\n  }\n\n  initTemplateTypeSelector() {\n    this.typeSelector = new FileTemplateTypeSelector({\n      mediator: this,\n      dropdownData: this.templateSelectors.map(templateSelector => {\n        const cfg = templateSelector.config;\n\n        return {\n          name: cfg.name,\n          key: cfg.key,\n        };\n      }),\n    });\n  }\n\n  initDomElements() {\n    const $templatesMenu = $('.template-selectors-menu');\n    const $undoMenu = $templatesMenu.find('.template-selectors-undo-menu');\n    const $fileEditor = $('.file-editor');\n\n    this.$templatesMenu = $templatesMenu;\n    this.$undoMenu = $undoMenu;\n    this.$undoBtn = $undoMenu.find('button');\n    this.$templateSelectors = $templatesMenu.find('.template-selector-dropdowns-wrap');\n    this.$filenameInput = $fileEditor.find('.js-file-path-name-input');\n    this.$fileContent = $fileEditor.find('#file-content');\n    this.$commitForm = $fileEditor.find('form');\n    this.$navLinks = $fileEditor.find('.nav-links');\n  }\n\n  initDropdowns() {\n    if (this.currentAction === 'create') {\n      this.typeSelector.show();\n    } else {\n      this.hideTemplateSelectorMenu();\n    }\n\n    this.displayMatchedTemplateSelector();\n  }\n\n  initPageEvents() {\n    this.listenForFilenameInput();\n    this.prepFileContentForSubmit();\n    this.listenForPreviewMode();\n  }\n\n  listenForFilenameInput() {\n    this.$filenameInput.on('keyup blur', () => {\n      this.displayMatchedTemplateSelector();\n    });\n  }\n\n  prepFileContentForSubmit() {\n    this.$commitForm.submit(() => {\n      this.$fileContent.val(this.editor.getValue());\n    });\n  }\n\n  listenForPreviewMode() {\n    this.$navLinks.on('click', 'a', e => {\n      const urlPieces = e.target.href.split('#');\n      const hash = urlPieces[1];\n      if (hash === 'preview') {\n        this.hideTemplateSelectorMenu();\n      } else if (hash === 'editor' && !this.typeSelector.isHidden()) {\n        this.showTemplateSelectorMenu();\n      }\n    });\n  }\n\n  selectTemplateType(item, e) {\n    if (e) {\n      e.preventDefault();\n    }\n\n    this.templateSelectors.forEach(selector => {\n      if (selector.config.key === item.key) {\n        selector.show();\n      } else {\n        selector.hide();\n      }\n    });\n\n    this.typeSelector.setToggleText(item.name);\n\n    this.cacheToggleText();\n  }\n\n  selectTemplateTypeOptions(options) {\n    this.selectTemplateType(options.selectedObj, options.e);\n  }\n\n  selectTemplateFile(selector, query, data) {\n    selector.renderLoading();\n    // in case undo menu is already there\n    this.destroyUndoMenu();\n    this.fetchFileTemplate(selector.config.type, query, data)\n      .then(file => {\n        this.showUndoMenu();\n        this.setEditorContent(file);\n        this.setFilename(selector.config.name);\n        selector.renderLoaded();\n      })\n      .catch(err => new Flash(`An error occurred while fetching the template: ${err}`));\n  }\n\n  displayMatchedTemplateSelector() {\n    const currentInput = this.getFilename();\n    this.templateSelectors.forEach(selector => {\n      const match = selector.config.pattern.test(currentInput);\n\n      if (match) {\n        this.typeSelector.show();\n        this.selectTemplateType(selector.config);\n        this.showTemplateSelectorMenu();\n      }\n    });\n  }\n\n  fetchFileTemplate(type, query, data = {}) {\n    return new Promise(resolve => {\n      const resolveFile = file => resolve(file);\n\n      Api.projectTemplate(this.projectId, type, query, data, resolveFile);\n    });\n  }\n\n  setEditorContent(file) {\n    if (!file && file !== '') return;\n\n    const newValue = file.content || file;\n\n    this.editor.setValue(newValue, 1);\n\n    this.editor.focus();\n\n    this.editor.navigateFileStart();\n  }\n\n  findTemplateSelectorByKey(key) {\n    return this.templateSelectors.find(selector => selector.config.key === key);\n  }\n\n  showUndoMenu() {\n    this.$undoMenu.removeClass('hidden');\n\n    this.$undoBtn.on('click', () => {\n      this.restoreFromCache();\n      this.destroyUndoMenu();\n    });\n  }\n\n  destroyUndoMenu() {\n    this.cacheFileContents();\n    this.cacheToggleText();\n    this.$undoMenu.addClass('hidden');\n    this.$undoBtn.off('click');\n  }\n\n  hideTemplateSelectorMenu() {\n    this.$templatesMenu.hide();\n  }\n\n  showTemplateSelectorMenu() {\n    this.$templatesMenu.show();\n  }\n\n  cacheToggleText() {\n    this.cachedToggleText = this.getTemplateSelectorToggleText();\n  }\n\n  cacheFileContents() {\n    this.cachedContent = this.editor.getValue();\n    this.cachedFilename = this.getFilename();\n  }\n\n  restoreFromCache() {\n    this.setEditorContent(this.cachedContent);\n    this.setFilename(this.cachedFilename);\n    this.setTemplateSelectorToggleText();\n  }\n\n  getTemplateSelectorToggleText() {\n    return this.$templateSelectors\n      .find('.js-template-selector-wrap:visible .dropdown-toggle-text')\n      .text();\n  }\n\n  setTemplateSelectorToggleText() {\n    return this.$templateSelectors\n      .find('.js-template-selector-wrap:visible .dropdown-toggle-text')\n      .text(this.cachedToggleText);\n  }\n\n  getTypeSelectorToggleText() {\n    return this.typeSelector.getToggleText();\n  }\n\n  getFilename() {\n    return this.$filenameInput.val();\n  }\n\n  setFilename(name) {\n    this.$filenameInput.val(name).trigger('change');\n  }\n\n  getSelected() {\n    return this.templateSelectors.find(selector => selector.selected);\n  }\n}\n","/* global ace */\n\nimport $ from 'jquery';\nimport axios from '~/lib/utils/axios_utils';\nimport createFlash from '~/flash';\nimport { __ } from '~/locale';\nimport TemplateSelectorMediator from '../blob/file_template_mediator';\nimport getModeByFileExtension from '~/lib/utils/ace_utils';\nimport { addEditorMarkdownListeners } from '~/lib/utils/text_markdown';\n\nexport default class EditBlob {\n  // The options object has:\n  // assetsPath, filePath, currentAction, projectId, isMarkdown\n  constructor(options) {\n    this.options = options;\n    this.configureAceEditor();\n    this.initModePanesAndLinks();\n    this.initSoftWrap();\n    this.initFileSelectors();\n  }\n\n  configureAceEditor() {\n    const { filePath, assetsPath, isMarkdown } = this.options;\n    ace.config.set('modePath', `${assetsPath}/ace`);\n    ace.config.loadModule('ace/ext/searchbox');\n    ace.config.loadModule('ace/ext/modelist');\n\n    this.editor = ace.edit('editor');\n\n    if (isMarkdown) {\n      addEditorMarkdownListeners(this.editor);\n    }\n\n    // This prevents warnings re: automatic scrolling being logged\n    this.editor.$blockScrolling = Infinity;\n\n    this.editor.focus();\n\n    if (filePath) {\n      this.editor.getSession().setMode(getModeByFileExtension(filePath));\n    }\n  }\n\n  initFileSelectors() {\n    const { currentAction, projectId } = this.options;\n    this.fileTemplateMediator = new TemplateSelectorMediator({\n      currentAction,\n      editor: this.editor,\n      projectId,\n    });\n  }\n\n  initModePanesAndLinks() {\n    this.$editModePanes = $('.js-edit-mode-pane');\n    this.$editModeLinks = $('.js-edit-mode a');\n    this.$editModeLinks.on('click', e => this.editModeLinkClickHandler(e));\n  }\n\n  editModeLinkClickHandler(e) {\n    e.preventDefault();\n\n    const currentLink = $(e.target);\n    const paneId = currentLink.attr('href');\n    const currentPane = this.$editModePanes.filter(paneId);\n\n    this.$editModeLinks.parent().removeClass('active hover');\n\n    currentLink.parent().addClass('active hover');\n\n    this.$editModePanes.hide();\n\n    currentPane.fadeIn(200);\n\n    if (paneId === '#preview') {\n      this.$toggleButton.hide();\n      axios\n        .post(currentLink.data('previewUrl'), {\n          content: this.editor.getValue(),\n        })\n        .then(({ data }) => {\n          currentPane.empty().append(data);\n          currentPane.renderGFM();\n        })\n        .catch(() => createFlash(__('An error occurred previewing the blob')));\n    }\n\n    this.$toggleButton.show();\n\n    return this.editor.focus();\n  }\n\n  initSoftWrap() {\n    this.isSoftWrapped = false;\n    this.$toggleButton = $('.soft-wrap-toggle');\n    this.$toggleButton.on('click', () => this.toggleSoftWrap());\n  }\n\n  toggleSoftWrap() {\n    this.isSoftWrapped = !this.isSoftWrapped;\n    this.$toggleButton.toggleClass('soft-wrap-active', this.isSoftWrapped);\n    this.editor.getSession().setUseWrapMode(this.isSoftWrapped);\n  }\n}\n","/* eslint-disable func-names, object-shorthand, prefer-arrow-callback */\n\nimport $ from 'jquery';\nimport Dropzone from 'dropzone';\nimport { visitUrl } from '../lib/utils/url_utility';\nimport { HIDDEN_CLASS } from '../lib/utils/constants';\nimport csrf from '../lib/utils/csrf';\n\nDropzone.autoDiscover = false;\n\nfunction toggleLoading($el, $icon, loading) {\n  if (loading) {\n    $el.disable();\n    $icon.removeClass(HIDDEN_CLASS);\n  } else {\n    $el.enable();\n    $icon.addClass(HIDDEN_CLASS);\n  }\n}\nexport default class BlobFileDropzone {\n  constructor(form, method) {\n    const formDropzone = form.find('.dropzone');\n    const submitButton = form.find('#submit-all');\n    const submitButtonLoadingIcon = submitButton.find('.js-loading-icon');\n    const dropzoneMessage = form.find('.dz-message');\n    Dropzone.autoDiscover = false;\n\n    const dropzone = formDropzone.dropzone({\n      autoDiscover: false,\n      autoProcessQueue: false,\n      url: form.attr('action'),\n      // Rails uses a hidden input field for PUT\n      // http://stackoverflow.com/questions/21056482/how-to-set-method-put-in-form-tag-in-rails\n      method: method,\n      clickable: true,\n      uploadMultiple: false,\n      paramName: 'file',\n      maxFilesize: gon.max_file_size || 10,\n      parallelUploads: 1,\n      maxFiles: 1,\n      addRemoveLinks: true,\n      previewsContainer: '.dropzone-previews',\n      headers: csrf.headers,\n      init: function() {\n        this.on('addedfile', function() {\n          toggleLoading(submitButton, submitButtonLoadingIcon, false);\n          dropzoneMessage.addClass(HIDDEN_CLASS);\n          $('.dropzone-alerts')\n            .html('')\n            .hide();\n        });\n        this.on('removedfile', function() {\n          toggleLoading(submitButton, submitButtonLoadingIcon, false);\n          dropzoneMessage.removeClass(HIDDEN_CLASS);\n        });\n        this.on('success', function(header, response) {\n          $('#modal-upload-blob').modal('hide');\n          visitUrl(response.filePath);\n        });\n        this.on('maxfilesexceeded', function(file) {\n          dropzoneMessage.addClass(HIDDEN_CLASS);\n          this.removeFile(file);\n        });\n        this.on('sending', function(file, xhr, formData) {\n          formData.append('branch_name', form.find('.js-branch-name').val());\n          formData.append('create_merge_request', form.find('.js-create-merge-request').val());\n          formData.append('commit_message', form.find('.js-commit-message').val());\n        });\n      },\n      // Override behavior of adding error underneath preview\n      error: function(file, errorMessage) {\n        const stripped = $('<div/>')\n          .html(errorMessage)\n          .text();\n        $('.dropzone-alerts')\n          .html(`Error uploading file: \"${stripped}\"`)\n          .show();\n        this.removeFile(file);\n      },\n    });\n\n    submitButton.on('click', e => {\n      e.preventDefault();\n      e.stopPropagation();\n      if (dropzone[0].dropzone.getQueuedFiles().length === 0) {\n        // eslint-disable-next-line no-alert\n        alert('Please select a file');\n        return false;\n      }\n      toggleLoading(submitButton, submitButtonLoadingIcon, true);\n      dropzone[0].dropzone.processQueue();\n      return false;\n    });\n  }\n}\n","/* eslint-disable no-new */\n\nimport $ from 'jquery';\nimport NewCommitForm from '../new_commit_form';\nimport EditBlob from './edit_blob';\nimport BlobFileDropzone from '../blob/blob_file_dropzone';\n\nexport default () => {\n  const editBlobForm = $('.js-edit-blob-form');\n  const uploadBlobForm = $('.js-upload-blob-form');\n  const deleteBlobForm = $('.js-delete-blob-form');\n\n  if (editBlobForm.length) {\n    const urlRoot = editBlobForm.data('relativeUrlRoot');\n    const assetsPath = editBlobForm.data('assetsPrefix');\n    const filePath = editBlobForm.data('blobFilename');\n    const currentAction = $('.js-file-title').data('currentAction');\n    const projectId = editBlobForm.data('project-id');\n    const isMarkdown = editBlobForm.data('is-markdown');\n    const commitButton = $('.js-commit-button');\n    const cancelLink = $('.btn.btn-cancel');\n\n    cancelLink.on('click', () => {\n      window.onbeforeunload = null;\n    });\n\n    commitButton.on('click', () => {\n      window.onbeforeunload = null;\n    });\n\n    new EditBlob({\n      assetsPath: `${urlRoot}${assetsPath}`,\n      filePath,\n      currentAction,\n      projectId,\n      isMarkdown,\n    });\n    new NewCommitForm(editBlobForm);\n\n    // returning here blocks page navigation\n    window.onbeforeunload = () => '';\n  }\n\n  if (uploadBlobForm.length) {\n    const method = uploadBlobForm.data('method');\n\n    new BlobFileDropzone(uploadBlobForm, method);\n    new NewCommitForm(uploadBlobForm);\n\n    window.gl.utils.disableButtonIfEmptyField(\n      uploadBlobForm.find('.js-commit-message'),\n      '.btn-upload-file',\n    );\n  }\n\n  if (deleteBlobForm.length) {\n    new NewCommitForm(deleteBlobForm);\n  }\n};\n","import $ from 'jquery';\nimport { parseQueryStringIntoObject } from '~/lib/utils/common_utils';\nimport axios from '~/lib/utils/axios_utils';\nimport createFlash from '~/flash';\nimport { __ } from '~/locale';\n\nexport default class GpgBadges {\n  static fetch() {\n    const tag = $('.js-signature-container');\n    if (tag.length === 0) {\n      return Promise.resolve();\n    }\n\n    const badges = $('.js-loading-gpg-badge');\n\n    badges.html('<i class=\"fa fa-spinner fa-spin\"></i>');\n\n    const displayError = () => createFlash(__('An error occurred while loading commit signatures'));\n\n    const endpoint = tag.data('signaturesPath');\n    if (!endpoint) {\n      displayError();\n      return Promise.reject(new Error('Missing commit signatures endpoint!'));\n    }\n\n    const params = parseQueryStringIntoObject(tag.serialize());\n    return axios\n      .get(endpoint, { params })\n      .then(({ data }) => {\n        data.signatures.forEach(signature => {\n          badges.filter(`[data-commit-sha=\"${signature.commit_sha}\"]`).replaceWith(signature.html);\n        });\n      })\n      .catch(displayError);\n  }\n}\n","import Mousetrap from 'mousetrap';\nimport findAndFollowLink from '../../lib/utils/navigation_utility';\nimport Shortcuts from './shortcuts';\n\nexport default class ShortcutsNavigation extends Shortcuts {\n  constructor() {\n    super();\n\n    Mousetrap.bind('g p', () => findAndFollowLink('.shortcuts-project'));\n    Mousetrap.bind('g v', () => findAndFollowLink('.shortcuts-project-activity'));\n    Mousetrap.bind('g r', () => findAndFollowLink('.shortcuts-project-releases'));\n    Mousetrap.bind('g f', () => findAndFollowLink('.shortcuts-tree'));\n    Mousetrap.bind('g c', () => findAndFollowLink('.shortcuts-commits'));\n    Mousetrap.bind('g j', () => findAndFollowLink('.shortcuts-builds'));\n    Mousetrap.bind('g n', () => findAndFollowLink('.shortcuts-network'));\n    Mousetrap.bind('g d', () => findAndFollowLink('.shortcuts-repository-charts'));\n    Mousetrap.bind('g i', () => findAndFollowLink('.shortcuts-issues'));\n    Mousetrap.bind('g b', () => findAndFollowLink('.shortcuts-issue-boards'));\n    Mousetrap.bind('g m', () => findAndFollowLink('.shortcuts-merge_requests'));\n    Mousetrap.bind('g w', () => findAndFollowLink('.shortcuts-wiki'));\n    Mousetrap.bind('g s', () => findAndFollowLink('.shortcuts-snippets'));\n    Mousetrap.bind('g k', () => findAndFollowLink('.shortcuts-kubernetes'));\n    Mousetrap.bind('g e', () => findAndFollowLink('.shortcuts-environments'));\n    Mousetrap.bind('g l', () => findAndFollowLink('.shortcuts-metrics'));\n    Mousetrap.bind('i', () => findAndFollowLink('.shortcuts-new-issue'));\n\n    this.enabledHelp.push('.hidden-shortcut.project');\n  }\n}\n","import $ from 'jquery';\nimport AccessorUtilities from './lib/utils/accessor';\n\nexport default class ProjectSelectComboButton {\n  constructor(select) {\n    this.projectSelectInput = $(select);\n    this.newItemBtn = $('.new-project-item-link');\n    this.resourceType = this.newItemBtn.data('type');\n    this.resourceLabel = this.newItemBtn.data('label');\n    this.formattedText = this.deriveTextVariants();\n    this.groupId = this.projectSelectInput.data('groupId');\n    this.bindEvents();\n    this.initLocalStorage();\n  }\n\n  bindEvents() {\n    this.projectSelectInput\n      .siblings('.new-project-item-select-button')\n      .on('click', e => this.openDropdown(e));\n\n    this.newItemBtn.on('click', e => {\n      if (!this.getProjectFromLocalStorage()) {\n        e.preventDefault();\n        this.openDropdown(e);\n      }\n    });\n\n    this.projectSelectInput.on('change', () => this.selectProject());\n  }\n\n  initLocalStorage() {\n    const localStorageIsSafe = AccessorUtilities.isLocalStorageAccessSafe();\n\n    if (localStorageIsSafe) {\n      this.localStorageKey = [\n        'group',\n        this.groupId,\n        this.formattedText.localStorageItemType,\n        'recent-project',\n      ].join('-');\n      this.setBtnTextFromLocalStorage();\n    }\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  openDropdown(event) {\n    $(event.currentTarget)\n      .siblings('.project-item-select')\n      .select2('open');\n  }\n\n  selectProject() {\n    const selectedProjectData = JSON.parse(this.projectSelectInput.val());\n    const projectUrl = `${selectedProjectData.url}/${this.projectSelectInput.data('relativePath')}`;\n    const projectName = selectedProjectData.name;\n\n    const projectMeta = {\n      url: projectUrl,\n      name: projectName,\n    };\n\n    this.setNewItemBtnAttributes(projectMeta);\n    this.setProjectInLocalStorage(projectMeta);\n  }\n\n  setBtnTextFromLocalStorage() {\n    const cachedProjectData = this.getProjectFromLocalStorage();\n\n    this.setNewItemBtnAttributes(cachedProjectData);\n  }\n\n  setNewItemBtnAttributes(project) {\n    if (project) {\n      this.newItemBtn.attr('href', project.url);\n      this.newItemBtn.text(`${this.formattedText.defaultTextPrefix} in ${project.name}`);\n    } else {\n      this.newItemBtn.text(`Select project to create ${this.formattedText.presetTextSuffix}`);\n    }\n  }\n\n  getProjectFromLocalStorage() {\n    const projectString = localStorage.getItem(this.localStorageKey);\n\n    return JSON.parse(projectString);\n  }\n\n  setProjectInLocalStorage(projectMeta) {\n    const projectString = JSON.stringify(projectMeta);\n\n    localStorage.setItem(this.localStorageKey, projectString);\n  }\n\n  deriveTextVariants() {\n    const defaultTextPrefix = this.resourceLabel;\n\n    // the trailing slice call depluralizes each of these strings (e.g. new-issues -> new-issue)\n    const localStorageItemType = `new-${this.resourceType\n      .split('_')\n      .join('-')\n      .slice(0, -1)}`;\n    const presetTextSuffix = this.resourceType\n      .split('_')\n      .join(' ')\n      .slice(0, -1);\n\n    return {\n      localStorageItemType, // new-issue / new-merge-request\n      defaultTextPrefix, // New issue / New merge request\n      presetTextSuffix, // issue / merge request\n    };\n  }\n}\n","/* eslint-disable func-names, no-var, object-shorthand, one-var, no-else-return */\n\nimport $ from 'jquery';\nimport Api from './api';\nimport ProjectSelectComboButton from './project_select_combo_button';\n\nexport default function projectSelect() {\n  $('.ajax-project-select').each(function(i, select) {\n    var placeholder;\n    const simpleFilter = $(select).data('simpleFilter') || false;\n    this.groupId = $(select).data('groupId');\n    this.includeGroups = $(select).data('includeGroups');\n    this.allProjects = $(select).data('allProjects') || false;\n    this.orderBy = $(select).data('orderBy') || 'id';\n    this.withIssuesEnabled = $(select).data('withIssuesEnabled');\n    this.withMergeRequestsEnabled = $(select).data('withMergeRequestsEnabled');\n    this.withShared =\n      $(select).data('withShared') === undefined ? true : $(select).data('withShared');\n    this.includeProjectsInSubgroups = $(select).data('includeProjectsInSubgroups') || false;\n    this.allowClear = $(select).data('allowClear') || false;\n\n    placeholder = 'Search for project';\n    if (this.includeGroups) {\n      placeholder += ' or group';\n    }\n\n    $(select).select2({\n      placeholder: placeholder,\n      minimumInputLength: 0,\n      query: (function(_this) {\n        return function(query) {\n          var finalCallback, projectsCallback;\n          finalCallback = function(projects) {\n            var data;\n            data = {\n              results: projects,\n            };\n            return query.callback(data);\n          };\n          if (_this.includeGroups) {\n            projectsCallback = function(projects) {\n              var groupsCallback;\n              groupsCallback = function(groups) {\n                var data;\n                data = groups.concat(projects);\n                return finalCallback(data);\n              };\n              return Api.groups(query.term, {}, groupsCallback);\n            };\n          } else {\n            projectsCallback = finalCallback;\n          }\n          if (_this.groupId) {\n            return Api.groupProjects(\n              _this.groupId,\n              query.term,\n              {\n                with_issues_enabled: _this.withIssuesEnabled,\n                with_merge_requests_enabled: _this.withMergeRequestsEnabled,\n                with_shared: _this.withShared,\n                include_subgroups: _this.includeProjectsInSubgroups,\n              },\n              projectsCallback,\n            );\n          } else {\n            return Api.projects(\n              query.term,\n              {\n                order_by: _this.orderBy,\n                with_issues_enabled: _this.withIssuesEnabled,\n                with_merge_requests_enabled: _this.withMergeRequestsEnabled,\n                membership: !_this.allProjects,\n              },\n              projectsCallback,\n            );\n          }\n        };\n      })(this),\n      id: function(project) {\n        if (simpleFilter) return project.id;\n        return JSON.stringify({\n          name: project.name,\n          url: project.web_url,\n        });\n      },\n      text: function(project) {\n        return project.name_with_namespace || project.name;\n      },\n\n      initSelection: function(el, callback) {\n        return Api.project(el.val()).then(({ data }) => callback(data));\n      },\n\n      allowClear: this.allowClear,\n\n      dropdownCssClass: 'ajax-project-dropdown',\n    });\n    if (simpleFilter) return select;\n    return new ProjectSelectComboButton(select);\n  });\n}\n","/* eslint-disable func-names, no-var, no-return-assign, one-var, object-shorthand, vars-on-top */\n\nimport $ from 'jquery';\nimport Cookies from 'js-cookie';\nimport { __ } from '~/locale';\nimport { visitUrl } from '~/lib/utils/url_utility';\nimport axios from '~/lib/utils/axios_utils';\nimport flash from '~/flash';\nimport projectSelect from '../../project_select';\n\nexport default class Project {\n  constructor() {\n    const $cloneOptions = $('ul.clone-options-dropdown');\n    const $projectCloneField = $('#project_clone');\n    const $cloneBtnLabel = $('.js-git-clone-holder .js-clone-dropdown-label');\n    const mobileCloneField = document.querySelector(\n      '.js-mobile-git-clone .js-clone-dropdown-label',\n    );\n\n    const selectedCloneOption = $cloneBtnLabel.text().trim();\n    if (selectedCloneOption.length > 0) {\n      $(`a:contains('${selectedCloneOption}')`, $cloneOptions).addClass('is-active');\n    }\n\n    $('a', $cloneOptions).on('click', e => {\n      e.preventDefault();\n      const $this = $(e.currentTarget);\n      const url = $this.attr('href');\n      const cloneType = $this.data('cloneType');\n\n      $('.is-active', $cloneOptions).removeClass('is-active');\n      $(`a[data-clone-type=\"${cloneType}\"]`).each(function() {\n        const $el = $(this);\n        const activeText = $el.find('.dropdown-menu-inner-title').text();\n        const $container = $el.closest('.project-clone-holder');\n        const $label = $container.find('.js-clone-dropdown-label');\n\n        $el.toggleClass('is-active');\n        $label.text(activeText);\n      });\n\n      if (mobileCloneField) {\n        mobileCloneField.dataset.clipboardText = url;\n      } else {\n        $projectCloneField.val(url);\n      }\n      $('.js-git-empty .js-clone').text(url);\n    });\n    // Ref switcher\n    Project.initRefSwitcher();\n    $('.project-refs-select').on('change', function() {\n      return $(this)\n        .parents('form')\n        .submit();\n    });\n    $('.hide-no-ssh-message').on('click', function(e) {\n      Cookies.set('hide_no_ssh_message', 'false');\n      $(this)\n        .parents('.no-ssh-key-message')\n        .remove();\n      return e.preventDefault();\n    });\n    $('.hide-no-password-message').on('click', function(e) {\n      Cookies.set('hide_no_password_message', 'false');\n      $(this)\n        .parents('.no-password-message')\n        .remove();\n      return e.preventDefault();\n    });\n    $('.hide-auto-devops-implicitly-enabled-banner').on('click', function(e) {\n      const projectId = $(this).data('project-id');\n      const cookieKey = `hide_auto_devops_implicitly_enabled_banner_${projectId}`;\n      Cookies.set(cookieKey, 'false');\n      $(this)\n        .parents('.auto-devops-implicitly-enabled-banner')\n        .remove();\n      return e.preventDefault();\n    });\n    Project.projectSelectDropdown();\n  }\n\n  static projectSelectDropdown() {\n    projectSelect();\n    $('.project-item-select').on('click', e => Project.changeProject($(e.currentTarget).val()));\n  }\n\n  static changeProject(url) {\n    return (window.location = url);\n  }\n\n  static initRefSwitcher() {\n    var refListItem = document.createElement('li');\n    var refLink = document.createElement('a');\n\n    refLink.href = '#';\n\n    return $('.js-project-refs-dropdown').each(function() {\n      var $dropdown, selected;\n      $dropdown = $(this);\n      selected = $dropdown.data('selected');\n      return $dropdown.glDropdown({\n        data(term, callback) {\n          axios\n            .get($dropdown.data('refsUrl'), {\n              params: {\n                ref: $dropdown.data('ref'),\n                search: term,\n              },\n            })\n            .then(({ data }) => callback(data))\n            .catch(() => flash(__('An error occurred while getting projects')));\n        },\n        selectable: true,\n        filterable: true,\n        filterRemote: true,\n        filterByText: true,\n        inputFieldName: $dropdown.data('inputFieldName'),\n        fieldName: $dropdown.data('fieldName'),\n        renderRow: function(ref) {\n          var li = refListItem.cloneNode(false);\n\n          if (ref.header != null) {\n            li.className = 'dropdown-header';\n            li.textContent = ref.header;\n          } else {\n            var link = refLink.cloneNode(false);\n\n            if (ref === selected) {\n              link.className = 'is-active';\n            }\n\n            link.textContent = ref;\n            link.dataset.ref = ref;\n\n            li.appendChild(link);\n          }\n\n          return li;\n        },\n        id: function(obj, $el) {\n          return $el.attr('data-ref');\n        },\n        toggleLabel: function(obj, $el) {\n          return $el.text().trim();\n        },\n        clicked: function(options) {\n          const { e } = options;\n          e.preventDefault();\n          if ($('input[name=\"ref\"]').length) {\n            var $form = $dropdown.closest('form');\n\n            var $visit = $dropdown.data('visit');\n            var shouldVisit = $visit ? true : $visit;\n            var action = $form.attr('action');\n            var divider = action.indexOf('?') === -1 ? '?' : '&';\n            if (shouldVisit) {\n              visitUrl(`${action}${divider}${$form.serialize()}`);\n            }\n          }\n        },\n      });\n    });\n  }\n}\n","/* eslint-disable func-names, no-var, no-underscore-dangle, no-param-reassign, prefer-template, consistent-return, one-var, no-else-return */\n\nimport $ from 'jquery';\n\n// LineHighlighter\n//\n// Handles single- and multi-line selection and highlight for blob views.\n//\n//\n// ### Example Markup\n//\n//   <div id=\"blob-content-holder\">\n//     <div class=\"file-content\">\n//       <div class=\"line-numbers\">\n//         <a href=\"#L1\" id=\"L1\" data-line-number=\"1\">1</a>\n//         <a href=\"#L2\" id=\"L2\" data-line-number=\"2\">2</a>\n//         <a href=\"#L3\" id=\"L3\" data-line-number=\"3\">3</a>\n//         <a href=\"#L4\" id=\"L4\" data-line-number=\"4\">4</a>\n//         <a href=\"#L5\" id=\"L5\" data-line-number=\"5\">5</a>\n//       </div>\n//       <pre class=\"code highlight\">\n//         <code>\n//           <span id=\"LC1\" class=\"line\">...</span>\n//           <span id=\"LC2\" class=\"line\">...</span>\n//           <span id=\"LC3\" class=\"line\">...</span>\n//           <span id=\"LC4\" class=\"line\">...</span>\n//           <span id=\"LC5\" class=\"line\">...</span>\n//         </code>\n//       </pre>\n//     </div>\n//   </div>\n//\n\nconst LineHighlighter = function(options = {}) {\n  options.highlightLineClass = options.highlightLineClass || 'hll';\n  options.fileHolderSelector = options.fileHolderSelector || '.file-holder';\n  options.scrollFileHolder = options.scrollFileHolder || false;\n  options.hash = options.hash || window.location.hash;\n\n  this.options = options;\n  this._hash = options.hash;\n  this.highlightLineClass = options.highlightLineClass;\n  this.setHash = this.setHash.bind(this);\n  this.highlightLine = this.highlightLine.bind(this);\n  this.clickHandler = this.clickHandler.bind(this);\n  this.highlightHash = this.highlightHash.bind(this);\n\n  this.bindEvents();\n  this.highlightHash();\n};\n\nLineHighlighter.prototype.bindEvents = function() {\n  const $fileHolder = $(this.options.fileHolderSelector);\n\n  $fileHolder.on('click', 'a[data-line-number]', this.clickHandler);\n  $fileHolder.on('highlight:line', this.highlightHash);\n};\n\nLineHighlighter.prototype.highlightHash = function(newHash) {\n  let range;\n  if (newHash && typeof newHash === 'string') this._hash = newHash;\n\n  this.clearHighlight();\n\n  if (this._hash !== '') {\n    range = this.hashToRange(this._hash);\n    if (range[0]) {\n      this.highlightRange(range);\n      const lineSelector = `#L${range[0]}`;\n      const scrollOptions = {\n        // Scroll to the first highlighted line on initial load\n        // Offset -50 for the sticky top bar, and another -100 for some context\n        offset: -150,\n      };\n      if (this.options.scrollFileHolder) {\n        $(this.options.fileHolderSelector).scrollTo(lineSelector, scrollOptions);\n      } else {\n        $.scrollTo(lineSelector, scrollOptions);\n      }\n    }\n  }\n};\n\nLineHighlighter.prototype.clickHandler = function(event) {\n  var current, lineNumber, range;\n  event.preventDefault();\n  this.clearHighlight();\n  lineNumber = $(event.target)\n    .closest('a')\n    .data('lineNumber');\n  current = this.hashToRange(this._hash);\n  if (!(current[0] && event.shiftKey)) {\n    // If there's no current selection, or there is but Shift wasn't held,\n    // treat this like a single-line selection.\n    this.setHash(lineNumber);\n    return this.highlightLine(lineNumber);\n  } else if (event.shiftKey) {\n    if (lineNumber < current[0]) {\n      range = [lineNumber, current[0]];\n    } else {\n      range = [current[0], lineNumber];\n    }\n    this.setHash(range[0], range[1]);\n    return this.highlightRange(range);\n  }\n};\n\nLineHighlighter.prototype.clearHighlight = function() {\n  return $('.' + this.highlightLineClass).removeClass(this.highlightLineClass);\n};\n\n// Convert a URL hash String into line numbers\n//\n// hash - Hash String\n//\n// Examples:\n//\n//   hashToRange('#L5')    # => [5, null]\n//   hashToRange('#L5-15') # => [5, 15]\n//   hashToRange('#foo')   # => [null, null]\n//\n// Returns an Array\nLineHighlighter.prototype.hashToRange = function(hash) {\n  var first, last, matches;\n  // ?L(\\d+)(?:-(\\d+))?$/)\n  matches = hash.match(/^#?L(\\d+)(?:-(\\d+))?$/);\n  if (matches && matches.length) {\n    first = parseInt(matches[1], 10);\n    last = matches[2] ? parseInt(matches[2], 10) : null;\n    return [first, last];\n  } else {\n    return [null, null];\n  }\n};\n\n// Highlight a single line\n//\n// lineNumber - Line number to highlight\nLineHighlighter.prototype.highlightLine = function(lineNumber) {\n  return $('#LC' + lineNumber).addClass(this.highlightLineClass);\n};\n\n// Highlight all lines within a range\n//\n// range - Array containing the starting and ending line numbers\nLineHighlighter.prototype.highlightRange = function(range) {\n  if (range[1]) {\n    const results = [];\n    const ref = range[0] <= range[1] ? range : range.reverse();\n\n    for (let lineNumber = range[0]; lineNumber <= ref[1]; lineNumber += 1) {\n      results.push(this.highlightLine(lineNumber));\n    }\n\n    return results;\n  } else {\n    return this.highlightLine(range[0]);\n  }\n};\n\n// Set the URL hash string\nLineHighlighter.prototype.setHash = function(firstLineNumber, lastLineNumber) {\n  var hash;\n  if (lastLineNumber) {\n    hash = '#L' + firstLineNumber + '-' + lastLineNumber;\n  } else {\n    hash = '#L' + firstLineNumber;\n  }\n  this._hash = hash;\n  return this.__setLocationHash__(hash);\n};\n\n// Make the actual hash change in the browser\n//\n// This method is stubbed in tests.\nLineHighlighter.prototype.__setLocationHash__ = function(value) {\n  return window.history.pushState(\n    {\n      url: value,\n      // We're using pushState instead of assigning location.hash directly to\n      // prevent the page from scrolling on the hashchange event\n    },\n    document.title,\n    value,\n  );\n};\n\nexport default LineHighlighter;\n","import $ from 'jquery';\n\nconst defaults = {\n  // Buttons that will show the `suggestionSections`\n  // has `data-fork-path`, and `data-action`\n  openButtons: [],\n  // Update the href(from `openButton` -> `data-fork-path`)\n  // whenever a `openButton` is clicked\n  forkButtons: [],\n  // Buttons to hide the `suggestionSections`\n  cancelButtons: [],\n  // Section to show/hide\n  suggestionSections: [],\n  // Pieces of text that need updating depending on the action, `edit`, `replace`, `delete`\n  actionTextPieces: [],\n};\n\nclass BlobForkSuggestion {\n  constructor(options) {\n    this.elementMap = Object.assign({}, defaults, options);\n    this.onOpenButtonClick = this.onOpenButtonClick.bind(this);\n    this.onCancelButtonClick = this.onCancelButtonClick.bind(this);\n  }\n\n  init() {\n    this.bindEvents();\n\n    return this;\n  }\n\n  bindEvents() {\n    $(this.elementMap.openButtons).on('click', this.onOpenButtonClick);\n    $(this.elementMap.cancelButtons).on('click', this.onCancelButtonClick);\n  }\n\n  showSuggestionSection(forkPath, action = 'edit') {\n    $(this.elementMap.suggestionSections).removeClass('hidden');\n    $(this.elementMap.forkButtons).attr('href', forkPath);\n    $(this.elementMap.actionTextPieces).text(action);\n  }\n\n  hideSuggestionSection() {\n    $(this.elementMap.suggestionSections).addClass('hidden');\n  }\n\n  onOpenButtonClick(e) {\n    const forkPath = $(e.currentTarget).attr('data-fork-path');\n    const action = $(e.currentTarget).attr('data-action');\n    this.showSuggestionSection(forkPath, action);\n  }\n\n  onCancelButtonClick() {\n    this.hideSuggestionSection();\n  }\n\n  destroy() {\n    $(this.elementMap.openButtons).off('click', this.onOpenButtonClick);\n    $(this.elementMap.cancelButtons).off('click', this.onCancelButtonClick);\n  }\n}\n\nexport default BlobForkSuggestion;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ci-status-link\"},[(_vm.isLoading)?_c('gl-loading-icon',{attrs:{\"size\":3,\"label\":\"Loading pipeline status\"}}):_c('a',{attrs:{\"href\":_vm.ciStatus.details_path}},[_c('ci-icon',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\"}],attrs:{\"title\":_vm.statusTitle,\"aria-label\":_vm.statusTitle,\"status\":_vm.ciStatus,\"size\":24,\"data-container\":\"body\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import axios from '~/lib/utils/axios_utils';\n\nexport default class CommitPipelineService {\n  constructor(endpoint) {\n    this.endpoint = endpoint;\n  }\n\n  fetchData() {\n    return axios.get(this.endpoint);\n  }\n}\n","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./commit_pipeline_status_component.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./commit_pipeline_status_component.vue?vue&type=script&lang=js&\"","<script>\nimport Visibility from 'visibilityjs';\nimport ciIcon from '~/vue_shared/components/ci_icon.vue';\nimport Poll from '~/lib/utils/poll';\nimport Flash from '~/flash';\nimport { s__, sprintf } from '~/locale';\nimport tooltip from '~/vue_shared/directives/tooltip';\nimport { GlLoadingIcon } from '@gitlab/ui';\nimport CommitPipelineService from '../services/commit_pipeline_service';\n\nexport default {\n  directives: {\n    tooltip,\n  },\n  components: {\n    ciIcon,\n    GlLoadingIcon,\n  },\n  props: {\n    endpoint: {\n      type: String,\n      required: true,\n    },\n    /* This prop can be used to replace some of the `render_commit_status`\n      used across GitLab, this way we could use this vue component and add a\n      realtime status where it makes sense\n      realtime: {\n        type: Boolean,\n        required: false,\n        default: true,\n      }, */\n  },\n  data() {\n    return {\n      ciStatus: {},\n      isLoading: true,\n    };\n  },\n  computed: {\n    statusTitle() {\n      return sprintf(s__('Commits|Commit: %{commitText}'), { commitText: this.ciStatus.text });\n    },\n  },\n  mounted() {\n    this.service = new CommitPipelineService(this.endpoint);\n    this.initPolling();\n  },\n  methods: {\n    successCallback(res) {\n      const { pipelines } = res.data;\n      if (pipelines.length > 0) {\n        // The pipeline entity always keeps the latest pipeline info on the `details.status`\n        this.ciStatus = pipelines[0].details.status;\n      }\n      this.isLoading = false;\n    },\n    errorCallback() {\n      this.ciStatus = {\n        text: 'not found',\n        icon: 'status_notfound',\n        group: 'notfound',\n      };\n      this.isLoading = false;\n      Flash(s__('Something went wrong on our end'));\n    },\n    initPolling() {\n      this.poll = new Poll({\n        resource: this.service,\n        method: 'fetchData',\n        successCallback: response => this.successCallback(response),\n        errorCallback: this.errorCallback,\n      });\n\n      if (!Visibility.hidden()) {\n        this.isLoading = true;\n        this.poll.makeRequest();\n      } else {\n        this.fetchPipelineCommitData();\n      }\n\n      Visibility.change(() => {\n        if (!Visibility.hidden()) {\n          this.poll.restart();\n        } else {\n          this.poll.stop();\n        }\n      });\n    },\n    fetchPipelineCommitData() {\n      this.service\n        .fetchData()\n        .then(this.successCallback)\n        .catch(this.errorCallback);\n    },\n  },\n  destroy() {\n    this.poll.stop();\n  },\n};\n</script>\n<template>\n  <div class=\"ci-status-link\">\n    <gl-loading-icon v-if=\"isLoading\" :size=\"3\" label=\"Loading pipeline status\" />\n    <a v-else :href=\"ciStatus.details_path\">\n      <ci-icon\n        v-tooltip\n        :title=\"statusTitle\"\n        :aria-label=\"statusTitle\"\n        :status=\"ciStatus\"\n        :size=\"24\"\n        data-container=\"body\"\n      />\n    </a>\n  </div>\n</template>\n","import { render, staticRenderFns } from \"./commit_pipeline_status_component.vue?vue&type=template&id=5df4d4d5&\"\nimport script from \"./commit_pipeline_status_component.vue?vue&type=script&lang=js&\"\nexport * from \"./commit_pipeline_status_component.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"commit_pipeline_status_component.vue\"\nexport default component.exports","import $ from 'jquery';\n\nexport default {\n  bind(el) {\n    $(el).tooltip({\n      trigger: 'hover',\n    });\n  },\n\n  componentUpdated(el) {\n    $(el).tooltip('_fixTitle');\n\n    // update visible tooltips\n    const tooltipInstance = $(el).data('bs.tooltip');\n    const tip = tooltipInstance.getTipElement();\n    tooltipInstance.setElementContent(\n      $(tip.querySelectorAll('.tooltip-inner')),\n      tooltipInstance.getTitle(),\n    );\n  },\n\n  unbind(el) {\n    $(el).tooltip('dispose');\n  },\n};\n","import initGkeDropdowns from '~/projects/gke_cluster_dropdowns';\nimport PersistentUserCallout from '../../persistent_user_callout';\nimport Project from './project';\nimport ShortcutsNavigation from '../../behaviors/shortcuts/shortcuts_navigation';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const { page } = document.body.dataset;\n  const newClusterViews = [\n    'projects:clusters:new',\n    'projects:clusters:create_gcp',\n    'projects:clusters:create_user',\n  ];\n\n  if (newClusterViews.indexOf(page) > -1) {\n    const callout = document.querySelector('.gcp-signup-offer');\n    if (callout) new PersistentUserCallout(callout); // eslint-disable-line no-new\n\n    initGkeDropdowns();\n  }\n\n  new Project(); // eslint-disable-line no-new\n  new ShortcutsNavigation(); // eslint-disable-line no-new\n});\n","export const BYTES_IN_KIB = 1024;\nexport const HIDDEN_CLASS = 'hidden';\n","import { getLocationHash } from '../lib/utils/url_utility';\n\nconst lineNumberRe = /^L[0-9]+/;\n\nconst updateLineNumbersOnBlobPermalinks = linksToUpdate => {\n  const hash = getLocationHash();\n  if (hash && lineNumberRe.test(hash)) {\n    const hashUrlString = `#${hash}`;\n\n    [].concat(Array.prototype.slice.call(linksToUpdate)).forEach(permalinkButton => {\n      const baseHref =\n        permalinkButton.getAttribute('data-original-href') ||\n        (() => {\n          const href = permalinkButton.getAttribute('href');\n          permalinkButton.setAttribute('data-original-href', href);\n          return href;\n        })();\n      permalinkButton.setAttribute('href', `${baseHref}${hashUrlString}`);\n    });\n  }\n};\n\nfunction BlobLinePermalinkUpdater(blobContentHolder, lineNumberSelector, elementsToUpdate) {\n  const updateBlameAndBlobPermalinkCb = () => {\n    // Wait for the hash to update from the LineHighlighter callback\n    setTimeout(() => {\n      updateLineNumbersOnBlobPermalinks(elementsToUpdate);\n    }, 0);\n  };\n\n  blobContentHolder.addEventListener('click', e => {\n    if (e.target.matches(lineNumberSelector)) {\n      updateBlameAndBlobPermalinkCb();\n    }\n  });\n  updateBlameAndBlobPermalinkCb();\n}\n\nexport default BlobLinePermalinkUpdater;\n","import Mousetrap from 'mousetrap';\nimport { getLocationHash, visitUrl } from '../../lib/utils/url_utility';\nimport Shortcuts from './shortcuts';\n\nconst defaults = {\n  skipResetBindings: false,\n  fileBlobPermalinkUrl: null,\n};\n\nexport default class ShortcutsBlob extends Shortcuts {\n  constructor(opts) {\n    const options = Object.assign({}, defaults, opts);\n    super(options.skipResetBindings);\n    this.options = options;\n\n    Mousetrap.bind('y', this.moveToFilePermalink.bind(this));\n  }\n\n  moveToFilePermalink() {\n    if (this.options.fileBlobPermalinkUrl) {\n      const hash = getLocationHash();\n      const hashUrlString = hash ? `#${hash}` : '';\n      visitUrl(`${this.options.fileBlobPermalinkUrl}${hashUrlString}`);\n    }\n  }\n}\n","import LineHighlighter from '~/line_highlighter';\nimport BlobLinePermalinkUpdater from '~/blob/blob_line_permalink_updater';\nimport ShortcutsNavigation from '~/behaviors/shortcuts/shortcuts_navigation';\nimport ShortcutsBlob from '~/behaviors/shortcuts/shortcuts_blob';\nimport BlobForkSuggestion from '~/blob/blob_fork_suggestion';\nimport initBlobBundle from '~/blob_edit/blob_bundle';\n\nexport default () => {\n  new LineHighlighter(); // eslint-disable-line no-new\n\n  // eslint-disable-next-line no-new\n  new BlobLinePermalinkUpdater(\n    document.querySelector('#blob-content-holder'),\n    '.diff-line-num[data-line-number]',\n    document.querySelectorAll('.js-data-file-blob-permalink-url, .js-blob-blame-link'),\n  );\n\n  const fileBlobPermalinkUrlElement = document.querySelector('.js-data-file-blob-permalink-url');\n  const fileBlobPermalinkUrl =\n    fileBlobPermalinkUrlElement && fileBlobPermalinkUrlElement.getAttribute('href');\n\n  new ShortcutsNavigation(); // eslint-disable-line no-new\n\n  // eslint-disable-next-line no-new\n  new ShortcutsBlob({\n    skipResetBindings: true,\n    fileBlobPermalinkUrl,\n  });\n\n  new BlobForkSuggestion({\n    openButtons: document.querySelectorAll('.js-edit-blob-link-fork-toggler'),\n    forkButtons: document.querySelectorAll('.js-fork-suggestion-button'),\n    cancelButtons: document.querySelectorAll('.js-cancel-fork-suggestion-button'),\n    suggestionSections: document.querySelectorAll('.js-file-fork-suggestion-section'),\n    actionTextPieces: document.querySelectorAll('.js-file-fork-suggestion-section-action'),\n  }).init();\n\n  initBlobBundle();\n};\n","module.exports = require('./lib/visibility.timers.js')\n","/**\n * exports HTTP status codes\n */\n\nconst httpStatusCodes = {\n  ABORTED: 0,\n  OK: 200,\n  CREATED: 201,\n  ACCEPTED: 202,\n  NON_AUTHORITATIVE_INFORMATION: 203,\n  NO_CONTENT: 204,\n  RESET_CONTENT: 205,\n  PARTIAL_CONTENT: 206,\n  MULTI_STATUS: 207,\n  ALREADY_REPORTED: 208,\n  IM_USED: 226,\n  MULTIPLE_CHOICES: 300,\n  BAD_REQUEST: 400,\n  FORBIDDEN: 403,\n  NOT_FOUND: 404,\n  UNPROCESSABLE_ENTITY: 422,\n};\n\nexport const successCodes = [\n  httpStatusCodes.OK,\n  httpStatusCodes.CREATED,\n  httpStatusCodes.ACCEPTED,\n  httpStatusCodes.NON_AUTHORITATIVE_INFORMATION,\n  httpStatusCodes.NO_CONTENT,\n  httpStatusCodes.RESET_CONTENT,\n  httpStatusCodes.PARTIAL_CONTENT,\n  httpStatusCodes.MULTI_STATUS,\n  httpStatusCodes.ALREADY_REPORTED,\n  httpStatusCodes.IM_USED,\n];\n\nexport default httpStatusCodes;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{class:_vm.cssClass},[_c('icon',{attrs:{\"name\":_vm.icon,\"size\":_vm.size}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport Icon from '../../vue_shared/components/icon.vue';\n\n/**\n * Renders CI icon based on API response shared between all places where it is used.\n *\n * Receives status object containing:\n * status: {\n *   details_path: \"/gitlab-org/gitlab-ce/pipelines/8150156\" // url\n *   group:\"running\" // used for CSS class\n *   icon: \"icon_status_running\" // used to render the icon\n *   label:\"running\" // used for potential tooltip\n *   text:\"running\" // text rendered\n * }\n *\n * Used in:\n * - Pipelines table Badge\n * - Pipelines table mini graph\n * - Pipeline graph\n * - Pipeline show view badge\n * - Jobs table\n * - Jobs show view header\n * - Jobs show view sidebar\n */\nconst validSizes = [8, 12, 16, 18, 24, 32, 48, 72];\n\nexport default {\n  components: {\n    Icon,\n  },\n  props: {\n    status: {\n      type: Object,\n      required: true,\n    },\n    size: {\n      type: Number,\n      required: false,\n      default: 16,\n      validator(value) {\n        return validSizes.includes(value);\n      },\n    },\n    borderless: {\n      type: Boolean,\n      required: false,\n      default: false,\n    },\n  },\n  computed: {\n    cssClass() {\n      const status = this.status.group;\n      return `ci-status-icon ci-status-icon-${status} js-ci-status-icon-${status}`;\n    },\n    icon() {\n      return this.borderless ? `${this.status.icon}_borderless` : this.status.icon;\n    },\n  },\n};\n</script>\n<template>\n  <span :class=\"cssClass\"> <icon :name=\"icon\" :size=\"size\" /> </span>\n</template>\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--1!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ci_icon.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--1!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ci_icon.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ci_icon.vue?vue&type=template&id=4732472a&\"\nimport script from \"./ci_icon.vue?vue&type=script&lang=js&\"\nexport * from \"./ci_icon.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"ci_icon.vue\"\nexport default component.exports","import httpStatusCodes, { successCodes } from './http_status';\nimport { normalizeHeaders } from './common_utils';\n\n/**\n * Polling utility for handling realtime updates.\n * Requirements: Promise based HTTP client\n *\n * Service for promise based http client and method need to be provided as props\n *\n * @example\n * new Poll({\n *   resource: resource,\n *   method: 'name',\n *   data: {page: 1, scope: 'all'}, // optional\n *   successCallback: () => {},\n *   errorCallback: () => {},\n *   notificationCallback: () => {}, // optional\n * }).makeRequest();\n *\n * Usage in pipelines table with visibility lib:\n *\n * const poll = new Poll({\n *  resource: this.service,\n *  method: 'getPipelines',\n *  data: { page: pageNumber, scope },\n *  successCallback: this.successCallback,\n *  errorCallback: this.errorCallback,\n *  notificationCallback: this.updateLoading,\n * });\n *\n * if (!Visibility.hidden()) {\n *  poll.makeRequest();\n *  }\n *\n * Visibility.change(() => {\n *  if (!Visibility.hidden()) {\n *   poll.restart();\n *  } else {\n *   poll.stop();\n *  }\n * });\n *\n * 1. Checks for response and headers before start polling\n * 2. Interval is provided by `Poll-Interval` header.\n * 3. If `Poll-Interval` is -1, we stop polling\n * 4. If HTTP response is 200, we poll.\n * 5. If HTTP response is different from 200, we stop polling.\n *\n */\nexport default class Poll {\n  constructor(options = {}) {\n    this.options = options;\n    this.options.data = options.data || {};\n    this.options.notificationCallback =\n      options.notificationCallback || function notificationCallback() {};\n\n    this.intervalHeader = 'POLL-INTERVAL';\n    this.timeoutID = null;\n    this.canPoll = true;\n  }\n\n  checkConditions(response) {\n    const headers = normalizeHeaders(response.headers);\n    const pollInterval = parseInt(headers[this.intervalHeader], 10);\n    if (pollInterval > 0 && successCodes.indexOf(response.status) !== -1 && this.canPoll) {\n      this.timeoutID = setTimeout(() => {\n        this.makeRequest();\n      }, pollInterval);\n    }\n    this.options.successCallback(response);\n  }\n\n  makeRequest() {\n    const { resource, method, data, errorCallback, notificationCallback } = this.options;\n\n    // It's called everytime a new request is made. Useful to update the status.\n    notificationCallback(true);\n\n    return resource[method](data)\n      .then(response => {\n        this.checkConditions(response);\n        notificationCallback(false);\n      })\n      .catch(error => {\n        notificationCallback(false);\n        if (error.status === httpStatusCodes.ABORTED) {\n          return;\n        }\n        errorCallback(error);\n      });\n  }\n\n  /**\n   * Stops the polling recursive chain\n   * and guarantees if the timeout is already running it won't make another request by\n   * cancelling the previously established timeout.\n   */\n  stop() {\n    this.canPoll = false;\n    clearTimeout(this.timeoutID);\n  }\n\n  /**\n   * Restarts polling after it has been stoped\n   */\n  restart(options) {\n    // update data\n    if (options && options.data) {\n      this.options.data = options.data;\n    }\n\n    this.canPoll = true;\n    this.makeRequest();\n  }\n}\n"],"sourceRoot":""}