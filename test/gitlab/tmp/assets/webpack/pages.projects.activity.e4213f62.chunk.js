(this.webpackJsonp=this.webpackJsonp||[]).push([[91],{1204:function(t,e,n){n(42),n(44),t.exports=n(1205)},1205:function(t,e,n){"use strict";n.r(e);var r=n(210),o=n(27);document.addEventListener("DOMContentLoaded",function(){new r.a,new o.a})},158:function(t,e,n){"use strict";var r=n(0),o=n.n(r),i=n(13),a=n(6),c=n(19);e.a={init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.a.noop,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:o.a.noop,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";this.url=o()(".content_list").data("href")||Object(c.f)(["limit","offset"]),this.limit=t,this.offset=parseInt(Object(i.i)("offset"),10)||this.limit,this.disable=n,this.prepareData=r,this.callback=a,this.loading=o()("".concat(s," .loading")).first(),e&&(this.offset=0,this.getOld()),this.initLoadMore()},getOld:function(){var t=this;this.loading.show(),a.a.get(this.url,{params:{limit:this.limit,offset:this.offset}}).then(function(e){var n=e.data;t.append(n.count,t.prepareData(n.html)),t.callback(),t.disable||t.isScrollable()?t.loading.hide():t.getOld()}).catch(function(){return t.loading.hide()})},append:function(t,e){o()(".content_list").append(e),t>0?this.offset+=t:this.disable=!0},isScrollable:function(){var t=o()(window);return o()(document).height()>t.height()+t.scrollTop()+400},initLoadMore:function(){var t=this;o()(document).off("scroll"),o()(document).endlessScroll({bottomPixels:400,fireDelay:1e3,fireOnce:!0,ceaseFire:function(){return!0===t.disable},callback:function(){t.loading.is(":visible")||(t.loading.show(),t.getOld())}})}}},210:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(0),o=n.n(r),i=n(14),a=n.n(i),c=n(158),s=n(20);function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var l=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=n,c.a.init(20,!0,!1,function(t){return t},this.updateTooltips,this.container),o()(".event-filter-link").on("click",function(t){t.preventDefault(),e.toggleFilter(t.currentTarget),e.reloadActivities()})}var e,n,r;return e=t,(n=[{key:"updateTooltips",value:function(){Object(s.i)(o()(".js-timeago",".content_list"))}},{key:"reloadActivities",value:function(){o()(".content_list").html(""),c.a.init(20,!0,!1,function(t){return t},this.updateTooltips,this.container)}},{key:"toggleFilter",value:function(t){var e=o()(t),n=e.attr("id").split("_")[0];o()(".event-filter .active").removeClass("active"),a.a.set("event_filter",n),e.closest("li").toggleClass("active")}}])&&u(e.prototype,n),r&&u(e,r),t}()},27:function(t,e,n){"use strict";n.d(e,"a",function(){return d});var r=n(2),o=n.n(r),i=n(4),a=n(43);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=s(this,u(e).call(this)),o.a.bind("g p",function(){return Object(i.a)(".shortcuts-project")}),o.a.bind("g v",function(){return Object(i.a)(".shortcuts-project-activity")}),o.a.bind("g r",function(){return Object(i.a)(".shortcuts-project-releases")}),o.a.bind("g f",function(){return Object(i.a)(".shortcuts-tree")}),o.a.bind("g c",function(){return Object(i.a)(".shortcuts-commits")}),o.a.bind("g j",function(){return Object(i.a)(".shortcuts-builds")}),o.a.bind("g n",function(){return Object(i.a)(".shortcuts-network")}),o.a.bind("g d",function(){return Object(i.a)(".shortcuts-repository-charts")}),o.a.bind("g i",function(){return Object(i.a)(".shortcuts-issues")}),o.a.bind("g b",function(){return Object(i.a)(".shortcuts-issue-boards")}),o.a.bind("g m",function(){return Object(i.a)(".shortcuts-merge_requests")}),o.a.bind("g w",function(){return Object(i.a)(".shortcuts-wiki")}),o.a.bind("g s",function(){return Object(i.a)(".shortcuts-snippets")}),o.a.bind("g k",function(){return Object(i.a)(".shortcuts-kubernetes")}),o.a.bind("g e",function(){return Object(i.a)(".shortcuts-environments")}),o.a.bind("g l",function(){return Object(i.a)(".shortcuts-metrics")}),o.a.bind("i",function(){return Object(i.a)(".shortcuts-new-issue")}),t.enabledHelp.push(".hidden-shortcut.project"),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,a["a"]),e}()},28:function(t,e,n){"use strict";var r=n(0),o=n.n(r),i=n(12),a=n(31);function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.projectSelectInput=o()(e),this.newItemBtn=o()(".new-project-item-link"),this.resourceType=this.newItemBtn.data("type"),this.resourceLabel=this.newItemBtn.data("label"),this.formattedText=this.deriveTextVariants(),this.groupId=this.projectSelectInput.data("groupId"),this.bindEvents(),this.initLocalStorage()}var e,n,r;return e=t,(n=[{key:"bindEvents",value:function(){var t=this;this.projectSelectInput.siblings(".new-project-item-select-button").on("click",function(e){return t.openDropdown(e)}),this.newItemBtn.on("click",function(e){t.getProjectFromLocalStorage()||(e.preventDefault(),t.openDropdown(e))}),this.projectSelectInput.on("change",function(){return t.selectProject()})}},{key:"initLocalStorage",value:function(){a.a.isLocalStorageAccessSafe()&&(this.localStorageKey=["group",this.groupId,this.formattedText.localStorageItemType,"recent-project"].join("-"),this.setBtnTextFromLocalStorage())}},{key:"openDropdown",value:function(t){o()(t.currentTarget).siblings(".project-item-select").select2("open")}},{key:"selectProject",value:function(){var t=JSON.parse(this.projectSelectInput.val()),e={url:"".concat(t.url,"/").concat(this.projectSelectInput.data("relativePath")),name:t.name};this.setNewItemBtnAttributes(e),this.setProjectInLocalStorage(e)}},{key:"setBtnTextFromLocalStorage",value:function(){var t=this.getProjectFromLocalStorage();this.setNewItemBtnAttributes(t)}},{key:"setNewItemBtnAttributes",value:function(t){t?(this.newItemBtn.attr("href",t.url),this.newItemBtn.text("".concat(this.formattedText.defaultTextPrefix," in ").concat(t.name))):this.newItemBtn.text("Select project to create ".concat(this.formattedText.presetTextSuffix))}},{key:"getProjectFromLocalStorage",value:function(){var t=localStorage.getItem(this.localStorageKey);return JSON.parse(t)}},{key:"setProjectInLocalStorage",value:function(t){var e=JSON.stringify(t);localStorage.setItem(this.localStorageKey,e)}},{key:"deriveTextVariants",value:function(){var t=this.resourceLabel;return{localStorageItemType:"new-".concat(this.resourceType.split("_").join("-").slice(0,-1)),defaultTextPrefix:t,presetTextSuffix:this.resourceType.split("_").join(" ").slice(0,-1)}}}])&&c(e.prototype,n),r&&c(e,r),t}();function u(){o()(".ajax-project-select").each(function(t,e){var n,r,a=o()(e).data("simpleFilter")||!1;return this.groupId=o()(e).data("groupId"),this.includeGroups=o()(e).data("includeGroups"),this.allProjects=o()(e).data("allProjects")||!1,this.orderBy=o()(e).data("orderBy")||"id",this.withIssuesEnabled=o()(e).data("withIssuesEnabled"),this.withMergeRequestsEnabled=o()(e).data("withMergeRequestsEnabled"),this.withShared=void 0===o()(e).data("withShared")||o()(e).data("withShared"),this.includeProjectsInSubgroups=o()(e).data("includeProjectsInSubgroups")||!1,this.allowClear=o()(e).data("allowClear")||!1,n="Search for project",this.includeGroups&&(n+=" or group"),o()(e).select2({placeholder:n,minimumInputLength:0,query:(r=this,function(t){var e,n;return e=function(e){var n;return n={results:e},t.callback(n)},n=r.includeGroups?function(n){var r;return r=function(t){var r;return r=t.concat(n),e(r)},i.a.groups(t.term,{},r)}:e,r.groupId?i.a.groupProjects(r.groupId,t.term,{with_issues_enabled:r.withIssuesEnabled,with_merge_requests_enabled:r.withMergeRequestsEnabled,with_shared:r.withShared,include_subgroups:r.includeProjectsInSubgroups},n):i.a.projects(t.term,{order_by:r.orderBy,with_issues_enabled:r.withIssuesEnabled,with_merge_requests_enabled:r.withMergeRequestsEnabled,membership:!r.allProjects},n)}),id:function(t){return a?t.id:JSON.stringify({name:t.name,url:t.web_url})},text:function(t){return t.name_with_namespace||t.name},initSelection:function(t,e){return i.a.project(t.val()).then(function(t){var n=t.data;return e(n)})},allowClear:this.allowClear,dropdownCssClass:"ajax-project-dropdown"}),a?e:new s(e)})}n.d(e,"a",function(){return u})},29:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n(0),o=n.n(r),i=n(14),a=n.n(i),c=n(1),s=n(19),u=n(6),l=n(7),d=n(28);function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=o()("ul.clone-options-dropdown"),n=o()("#project_clone"),r=o()(".js-git-clone-holder .js-clone-dropdown-label"),i=document.querySelector(".js-mobile-git-clone .js-clone-dropdown-label"),c=r.text().trim();c.length>0&&o()("a:contains('".concat(c,"')"),e).addClass("is-active"),o()("a",e).on("click",function(t){t.preventDefault();var r=o()(t.currentTarget),a=r.attr("href"),c=r.data("cloneType");o()(".is-active",e).removeClass("is-active"),o()('a[data-clone-type="'.concat(c,'"]')).each(function(){var t=o()(this),e=t.find(".dropdown-menu-inner-title").text(),n=t.closest(".project-clone-holder").find(".js-clone-dropdown-label");t.toggleClass("is-active"),n.text(e)}),i?i.dataset.clipboardText=a:n.val(a),o()(".js-git-empty .js-clone").text(a)}),t.initRefSwitcher(),o()(".project-refs-select").on("change",function(){return o()(this).parents("form").submit()}),o()(".hide-no-ssh-message").on("click",function(t){return a.a.set("hide_no_ssh_message","false"),o()(this).parents(".no-ssh-key-message").remove(),t.preventDefault()}),o()(".hide-no-password-message").on("click",function(t){return a.a.set("hide_no_password_message","false"),o()(this).parents(".no-password-message").remove(),t.preventDefault()}),o()(".hide-auto-devops-implicitly-enabled-banner").on("click",function(t){var e=o()(this).data("project-id"),n="hide_auto_devops_implicitly_enabled_banner_".concat(e);return a.a.set(n,"false"),o()(this).parents(".auto-devops-implicitly-enabled-banner").remove(),t.preventDefault()}),t.projectSelectDropdown()}var e,n,r;return e=t,r=[{key:"projectSelectDropdown",value:function(){Object(d.a)(),o()(".project-item-select").on("click",function(e){return t.changeProject(o()(e.currentTarget).val())})}},{key:"changeProject",value:function(t){return window.location=t}},{key:"initRefSwitcher",value:function(){var t=document.createElement("li"),e=document.createElement("a");return e.href="#",o()(".js-project-refs-dropdown").each(function(){var n,r;return n=o()(this),r=n.data("selected"),n.glDropdown({data:function(t,e){u.a.get(n.data("refsUrl"),{params:{ref:n.data("ref"),search:t}}).then(function(t){var n=t.data;return e(n)}).catch(function(){return Object(l.a)(Object(c.a)("An error occurred while getting projects"))})},selectable:!0,filterable:!0,filterRemote:!0,filterByText:!0,inputFieldName:n.data("inputFieldName"),fieldName:n.data("fieldName"),renderRow:function(n){var o=t.cloneNode(!1);if(null!=n.header)o.className="dropdown-header",o.textContent=n.header;else{var i=e.cloneNode(!1);n===r&&(i.className="is-active"),i.textContent=n,i.dataset.ref=n,o.appendChild(i)}return o},id:function(t,e){return e.attr("data-ref")},toggleLabel:function(t,e){return e.text().trim()},clicked:function(t){if(t.e.preventDefault(),o()('input[name="ref"]').length){var e=n.closest("form"),r=n.data("visit"),i=!!r||r,a=e.attr("action"),c=-1===a.indexOf("?")?"?":"&";i&&Object(s.g)("".concat(a).concat(c).concat(e.serialize()))}}})})}}],(n=null)&&f(e.prototype,n),r&&f(e,r),t}()},44:function(t,e,n){"use strict";n.r(e);var r=n(38),o=n(36),i=n(29),a=n(27);document.addEventListener("DOMContentLoaded",function(){var t=document.body.dataset.page;if(["projects:clusters:new","projects:clusters:create_gcp","projects:clusters:create_user"].indexOf(t)>-1){var e=document.querySelector(".gcp-signup-offer");e&&new o.a(e),Object(r.a)()}new i.a,new a.a})}},[[1204,1,0,2]]]);
//# sourceMappingURL=pages.projects.activity.e4213f62.chunk.js.map