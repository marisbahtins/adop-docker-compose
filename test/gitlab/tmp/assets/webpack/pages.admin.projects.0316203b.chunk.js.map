{"version":3,"sources":["webpack:///./pages/admin/admin.js","webpack:///./pages/admin/application_settings/account_and_limits.js","webpack:///./pages/admin/index.js","webpack:///./filterable_list.js","webpack:///./projects_list.js","webpack:///./namespace_select.js","webpack:///./pages/admin/projects/index.js"],"names":["showBlacklistType","$","val","show","hide","PLACEHOLDER_USER_EXTERNAL_DEFAULT_TRUE","__","PLACEHOLDER_USER_EXTERNAL_DEFAULT_FALSE","setUserInternalRegexPlaceholder","checkbox","userInternalRegex","document","getElementById","checked","readOnly","placeholder","addEventListener","modal","on","$elems","this","attr","prop","e","preventDefault","toggleClass","tab","$visibleLog","animate","scrollTop","find","height","refreshCurrentPage","FilterableList","form","filter","holder","filterInputField","arguments","length","undefined","_classCallCheck","filterForm","listFilterElement","listHolderElement","isBusy","concat","getAttribute","serialize","getFilterEndpoint","debounceFilter","_","debounce","onFilterInput","bind","unbindEvents","bindEvents","queryData","filterGroupsParam","filterResults","setDefaultFilterOption","removeEventListener","params","_this","fadeTo","axios","get","then","res","onFilterSuccess","onFilterComplete","catch","response","data","html","innerHTML","currentPath","getPagePath","window","history","replaceState","page","title","ProjectsList","querySelector","initSearch","NamespaceSelect","opts","isFilter","parseBoolean","dropdown","dataset","fieldName","glDropdown","filterable","selectable","filterRemote","search","fields","toggleLabel","selected","id","text","kind","full_path","term","dataCallback","Api","namespaces","unshift","splice","namespace","renderRow","clicked","options","url","mergeUrlParams","location","href","querySelectorAll","forEach"],"mappings":"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","file":"pages.admin.projects.0316203b.chunk.js","sourcesContent":["import $ from 'jquery';\nimport { refreshCurrentPage } from '../../lib/utils/url_utility';\n\nfunction showBlacklistType() {\n  if ($('input[name=\"blacklist_type\"]:checked').val() === 'file') {\n    $('.blacklist-file').show();\n    $('.blacklist-raw').hide();\n  } else {\n    $('.blacklist-file').hide();\n    $('.blacklist-raw').show();\n  }\n}\n\nexport default function adminInit() {\n  const modal = $('.change-owner-holder');\n\n  $('input#user_force_random_password').on('change', function randomPasswordClick() {\n    const $elems = $('#user_password, #user_password_confirmation');\n    if ($(this).attr('checked')) {\n      $elems.val('').prop('disabled', true);\n    } else {\n      $elems.prop('disabled', false);\n    }\n  });\n\n  $('body').on('click', '.js-toggle-colors-link', e => {\n    e.preventDefault();\n    $('.js-toggle-colors-container').toggleClass('hide');\n  });\n\n  $('.log-tabs a').on('click', function logTabsClick(e) {\n    e.preventDefault();\n    $(this).tab('show');\n  });\n\n  $('.log-bottom').on('click', e => {\n    e.preventDefault();\n    const $visibleLog = $('.file-content:visible');\n    $visibleLog.animate(\n      {\n        scrollTop: $visibleLog.find('ol').height(),\n      },\n      'fast',\n    );\n  });\n\n  $('.change-owner-link').on('click', function changeOwnerLinkClick(e) {\n    e.preventDefault();\n    $(this).hide();\n    modal.show();\n  });\n\n  $('.change-owner-cancel-link').on('click', e => {\n    e.preventDefault();\n    modal.hide();\n    $('.change-owner-link').show();\n  });\n\n  $('li.project_member, li.group_member').on('ajax:success', refreshCurrentPage);\n\n  $(\"input[name='blacklist_type']\").on('click', showBlacklistType);\n  showBlacklistType();\n}\n","import { __ } from '~/locale';\n\nexport const PLACEHOLDER_USER_EXTERNAL_DEFAULT_TRUE = __('Regex pattern');\nexport const PLACEHOLDER_USER_EXTERNAL_DEFAULT_FALSE = __(\n  'To define internal users, first enable new users set to external',\n);\n\nfunction setUserInternalRegexPlaceholder(checkbox) {\n  const userInternalRegex = document.getElementById(\n    'application_setting_user_default_internal_regex',\n  );\n  if (checkbox && userInternalRegex) {\n    if (checkbox.checked) {\n      userInternalRegex.readOnly = false;\n      userInternalRegex.placeholder = PLACEHOLDER_USER_EXTERNAL_DEFAULT_TRUE;\n    } else {\n      userInternalRegex.readOnly = true;\n      userInternalRegex.placeholder = PLACEHOLDER_USER_EXTERNAL_DEFAULT_FALSE;\n    }\n  }\n}\n\nexport default function initUserInternalRegexPlaceholder() {\n  const checkbox = document.getElementById('application_setting_user_default_external');\n  setUserInternalRegexPlaceholder(checkbox);\n  checkbox.addEventListener('change', () => {\n    setUserInternalRegexPlaceholder(checkbox);\n  });\n}\n","import initAdmin from './admin';\nimport initUserInternalRegexPlaceholder from './application_settings/account_and_limits';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  initAdmin();\n  initUserInternalRegexPlaceholder();\n});\n","import $ from 'jquery';\nimport _ from 'underscore';\nimport axios from './lib/utils/axios_utils';\n\n/**\n * Makes search request for content when user types a value in the search input.\n * Updates the html content of the page with the received one.\n */\n\nexport default class FilterableList {\n  constructor(form, filter, holder, filterInputField = 'filter_groups') {\n    this.filterForm = form;\n    this.listFilterElement = filter;\n    this.listHolderElement = holder;\n    this.filterInputField = filterInputField;\n    this.isBusy = false;\n  }\n\n  getFilterEndpoint() {\n    return `${this.filterForm.getAttribute('action')}?${$(this.filterForm).serialize()}`;\n  }\n\n  getPagePath() {\n    return this.getFilterEndpoint();\n  }\n\n  initSearch() {\n    // Wrap to prevent passing event arguments to .filterResults;\n    this.debounceFilter = _.debounce(this.onFilterInput.bind(this), 500);\n\n    this.unbindEvents();\n    this.bindEvents();\n  }\n\n  onFilterInput() {\n    const $form = $(this.filterForm);\n    const queryData = {};\n    const filterGroupsParam = $form.find(`[name=\"${this.filterInputField}\"]`).val();\n\n    if (filterGroupsParam) {\n      queryData[this.filterInputField] = filterGroupsParam;\n    }\n\n    this.filterResults(queryData);\n\n    if (this.setDefaultFilterOption) {\n      this.setDefaultFilterOption();\n    }\n  }\n\n  bindEvents() {\n    this.listFilterElement.addEventListener('input', this.debounceFilter);\n  }\n\n  unbindEvents() {\n    this.listFilterElement.removeEventListener('input', this.debounceFilter);\n  }\n\n  filterResults(params) {\n    if (this.isBusy) {\n      return false;\n    }\n\n    $(this.listHolderElement).fadeTo(250, 0.5);\n\n    this.isBusy = true;\n\n    return axios\n      .get(this.getFilterEndpoint(), {\n        params,\n      })\n      .then(res => {\n        this.onFilterSuccess(res, params);\n        this.onFilterComplete();\n      })\n      .catch(() => this.onFilterComplete());\n  }\n\n  onFilterSuccess(response, queryData) {\n    if (response.data.html) {\n      this.listHolderElement.innerHTML = response.data.html;\n    }\n\n    // Change url so if user reload a page - search results are saved\n    const currentPath = this.getPagePath(queryData);\n\n    return window.history.replaceState(\n      {\n        page: currentPath,\n      },\n      document.title,\n      currentPath,\n    );\n  }\n\n  onFilterComplete() {\n    this.isBusy = false;\n    $(this.listHolderElement).fadeTo(250, 1);\n  }\n}\n","import FilterableList from './filterable_list';\n\n/**\n * Makes search request for projects when user types a value in the search input.\n * Updates the html content of the page with the received one.\n */\nexport default class ProjectsList {\n  constructor() {\n    const form = document.querySelector('form#project-filter-form');\n    const filter = document.querySelector('.js-projects-list-filter');\n    const holder = document.querySelector('.js-projects-list-holder');\n\n    if (form && filter && holder) {\n      const list = new FilterableList(form, filter, holder);\n      list.initSearch();\n    }\n  }\n}\n","/* eslint-disable func-names, object-shorthand, no-else-return, prefer-template, prefer-arrow-callback */\n\nimport $ from 'jquery';\nimport Api from './api';\nimport { mergeUrlParams } from './lib/utils/url_utility';\nimport { parseBoolean } from '~/lib/utils/common_utils';\n\nexport default class NamespaceSelect {\n  constructor(opts) {\n    const isFilter = parseBoolean(opts.dropdown.dataset.isFilter);\n    const fieldName = opts.dropdown.dataset.fieldName || 'namespace_id';\n\n    $(opts.dropdown).glDropdown({\n      filterable: true,\n      selectable: true,\n      filterRemote: true,\n      search: {\n        fields: ['path'],\n      },\n      fieldName: fieldName,\n      toggleLabel: function(selected) {\n        if (selected.id == null) {\n          return selected.text;\n        } else {\n          return selected.kind + ': ' + selected.full_path;\n        }\n      },\n      data: function(term, dataCallback) {\n        return Api.namespaces(term, function(namespaces) {\n          if (isFilter) {\n            const anyNamespace = {\n              text: 'Any namespace',\n              id: null,\n            };\n            namespaces.unshift(anyNamespace);\n            namespaces.splice(1, 0, 'divider');\n          }\n          return dataCallback(namespaces);\n        });\n      },\n      text: function(namespace) {\n        if (namespace.id == null) {\n          return namespace.text;\n        } else {\n          return namespace.kind + ': ' + namespace.full_path;\n        }\n      },\n      renderRow: this.renderRow,\n      clicked(options) {\n        if (!isFilter) {\n          const { e } = options;\n          e.preventDefault();\n        }\n      },\n      url(namespace) {\n        return mergeUrlParams({ [fieldName]: namespace.id }, window.location.href);\n      },\n    });\n  }\n}\n","import ProjectsList from '../../../projects_list';\nimport NamespaceSelect from '../../../namespace_select';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  new ProjectsList(); // eslint-disable-line no-new\n\n  document\n    .querySelectorAll('.js-namespace-select')\n    .forEach(dropdown => new NamespaceSelect({ dropdown }));\n});\n"],"sourceRoot":""}