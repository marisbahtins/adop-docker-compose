{"version":3,"sources":["webpack:///./create_label.js","webpack:///./labels_select.js","webpack:///./milestone_select.js","webpack:///./pages/projects/merge_requests/index/index.js","webpack:///./filtered_search/issuable_filtered_search_token_keys.js","webpack:///./boards/stores/boards_store.js","webpack:///./filtered_search/event_hub.js","webpack:///./filtered_search/components/recent_searches_dropdown_content.vue?2a16","webpack:///filtered_search/components/recent_searches_dropdown_content.vue","webpack:///./filtered_search/components/recent_searches_dropdown_content.vue","webpack:///./filtered_search/components/recent_searches_dropdown_content.vue?1dc7","webpack:///./filtered_search/recent_searches_root.js","webpack:///./filtered_search/stores/recent_searches_store.js","webpack:///./filtered_search/services/recent_searches_service_error.js","webpack:///./filtered_search/services/recent_searches_service.js","webpack:///./filtered_search/filtered_search_manager.js","webpack:///./pages/search/init_filtered_search.js","webpack:///./pages/constants.js","webpack:///./behaviors/shortcuts/shortcuts_navigation.js","webpack:///./project_select_combo_button.js","webpack:///./project_select.js","webpack:///./pages/projects/project.js","webpack:///./pages/projects/index.js","webpack:///./pages/projects/constants.js","webpack:///./issuable_bulk_update_sidebar.js","webpack:///./issue_status_select.js","webpack:///./subscription_select.js","webpack:///./issuable_index.js","webpack:///./issuable_bulk_update_actions.js"],"names":["CreateLabelDropdown","$el","namespacePath","projectPath","_classCallCheck","this","$dropdownBack","$","closest","$cancelButton","$newLabelField","$newColorField","$colorPreview","$newLabelError","$newLabelCreateButton","$colorSuggestions","hide","disable","cleanBinding","addBinding","off","self","on","e","$this","addColorValue","enableLabelCreateButton","bind","resetForm","preventDefault","stopPropagation","trigger","saveLabel","val","data","css","parent","addClass","enable","removeClass","_this","Api","newLabel","title","color","label","errors","message","Object","keys","map","key","concat","humanize","join","html","show","document","LabelsSelect","els","$els","options","arguments","length","undefined","each","i","dropdown","$block","$dropdown","$form","$loading","$selectbox","$sidebarCollapsedValue","$value","abilityName","defaultLabel","issueUpdateURL","labelUrl","saveLabelData","selectedLabel","showAny","showNo","$sidebarLabelTooltip","initialSelected","fieldName","showMenuAbove","$dropdownContainer","find","hasClass","split","__","fadeOut","is","value","get","handleClick","tooltip","selected","_","isEqual","label_ids","fadeIn","axios","put","then","_ref","labelCount","template","labelTooltipTitle","labelTitles","labels","getLabelTemplate","removeAttr","text","slice","push","attr","container","catch","flash","glDropdown","term","callback","res","extraData","unshift","id","isAny","positionMenuAbove","renderRow","instance","$a","$li","colorEl","indeterminate","removesAll","selectedClass","marked","dropdownName","dropdownValue","indexOf","splice","toString","replace","escape","prop","search","fields","selectable","filterable","toggleLabel","el","$dropdownParent","$dropdownInputField","isSelected","selectedLabels","index","sprintf","firstLabel","hidden","isIssueIndex","isMRIndex","page","Issuable","filterResults","submit","multiSelect","vue","clicked","clickEvent","boardsModel","isMarking","selectedObj","fadeOutLoader","enableBulkLabelDropdown","setDropdownData","ModalStore","store","filter","boardsStore","detail","issue","ListLabel","textColor","update","opened","previousSelection","updateLabel","preserveContext","setOriginalDropdownData","bindEvents","tplData","tpl","onSelectCheckboxIssue","IssuableBulkUpdateActions","willUpdateLabels","markedIds","unmarkedIds","indeterminateIds","getOriginalIndeterminateIds","getOriginalCommonIds","$container","MilestoneSelect","currentProject","JSON","parse","init","milestoneLinkNoneTemplate","milestoneLinkTemplate","selectedMilestone","selectedMilestoneDefault","milestonesUrl","showUpcoming","showStarted","useId","defaultNo","$selectBox","extraOptions","name","milestone","currentTarget","dataset","modalStoreFilter","isSelecting","milestone_id","_ref2","remaining","timeFor","due_date","boardStoreIssueSet","ListMilestone","boardStoreIssueDelete","window","__webpack_require__","r","__webpack_exports__","_issuable_index__WEBPACK_IMPORTED_MODULE_0__","_behaviors_shortcuts_shortcuts_navigation__WEBPACK_IMPORTED_MODULE_1__","_users_select__WEBPACK_IMPORTED_MODULE_2__","_pages_search_init_filtered_search__WEBPACK_IMPORTED_MODULE_3__","_filtered_search_issuable_filtered_search_token_keys__WEBPACK_IMPORTED_MODULE_4__","_pages_constants__WEBPACK_IMPORTED_MODULE_5__","_pages_projects_constants__WEBPACK_IMPORTED_MODULE_6__","addEventListener","IssuableFilteredSearchTokenKeys","addExtraTokensForMergeRequests","initFilteredSearch","FILTERED_SEARCH","MERGE_REQUESTS","filteredSearchTokenKeys","IssuableIndex","ISSUABLE_INDEX","MERGE_REQUEST","ShortcutsNavigation","UsersSelect","_filtered_search_token_keys__WEBPACK_IMPORTED_MODULE_0__","tokenKeys","type","param","symbol","icon","tag","gon","current_user_id","FilteredSearchTokenKeys","url","tokenKey","d","jquery__WEBPACK_IMPORTED_MODULE_0__","jquery__WEBPACK_IMPORTED_MODULE_0___default","n","underscore__WEBPACK_IMPORTED_MODULE_1__","underscore__WEBPACK_IMPORTED_MODULE_1___default","vue__WEBPACK_IMPORTED_MODULE_2__","js_cookie__WEBPACK_IMPORTED_MODULE_3__","js_cookie__WEBPACK_IMPORTED_MODULE_3___default","_lib_utils_common_utils__WEBPACK_IMPORTED_MODULE_4__","disabled","path","state","moving","list","create","lists","getUrlParamsArray","addList","listObj","defaultAvatar","List","new","backlogList","findList","save","issues","forEach","removeIssue","sortBy","removeBlankState","updateNewListDropdown","listId","shouldAddBlankState","addBlankState","welcomeIsHidden","list_type","position","removeList","Cookies","set","expires","parseBoolean","moveList","listFrom","orderLists","_this2","parseInt","moveIssueToList","listTo","newIndex","issueTo","findIssue","issueLists","getLists","listLabels","listIssue","updateIssueLabel","removeLabel","findAssignee","assignee","removeAssignee","currentMilestone","currentLists","some","removeMilestone","addMilestone","currentList","addIssue","removeLabels","shouldRemoveIssue","moveIssueInList","oldIndex","idArray","beforeId","afterId","moveIssue","byType","findListByLabelId","updateFiltersUrl","history","pushState","_len","args","Array","_key","Vue","apply","_len2","_key2","delete","event_hub","components_recent_searches_dropdown_contentvue_type_script_lang_js_","props","items","required","isLocalStorageAvailable","Boolean","default","allowedKeys","computed","processedItems","item","_FilteredSearchTokeni","filtered_search_tokenizer","processTokens","tokens","searchToken","token","prefix","suffix","hasItems","methods","onItemActivated","$emit","onRequestClearRecentSearches","component","componentNormalizer","_vm","_h","$createElement","_c","_self","_l","staticClass","attrs","click","$event","tokenIndex","_v","_s","__file","recent_searches_dropdown_content","RecentSearchesRoot","recentSearchesStore","recentSearchesService","wrapperElement","service","render","onRequestClearRecentSearchesWrapper","eventHub","$on","$off","vm","components","RecentSearchesDropdownContent","resultantSearches","setRecentSearches","unbindEvents","$destroy","RecentSearchesStore","initialState","recent_searches_store_classCallCheck","assign","recentSearches","newSearch","trimmedSearches","trim","uniq","RecentSearchesServiceError","recent_searches_service_error_classCallCheck","prototype","Error","RecentSearchesService","localStorageKey","recent_searches_service_classCallCheck","AccessorUtilities","isLocalStorageAccessSafe","isAvailable","error","Promise","reject","input","localStorage","getItem","searches","err","resolve","setItem","stringify","FilteredSearchManager","_ref$isGroup","isGroup","_ref$isGroupAncestor","isGroupAncestor","_ref$isGroupDecendent","isGroupDecendent","_ref$filteredSearchTo","_ref$stateFiltersSele","stateFiltersSelector","filtered_search_manager_classCallCheck","states","FilteredSearchContainer","filteredSearchInput","querySelector","filteredSearchInputForm","form","clearSearchButton","tokensContainer","recentsStorageKeyNames","merge_requests","getKeys","searchHistoryDropdownElement","fullPath","recentSearchesKey","fetchingRecentSearchesPromise","fetch","Flash","tokenizer","FilteredSearchTokenizer","dropdownManager","FilteredSearchDropdownManager","baseEndpoint","getAttribute","recentSearchesRoot","loadSearchParamsFromURL","setDropdown","cleanupWrapper","cleanup","removeEventListener","destroy","stateFilters","searchStateWrapper","searchState","applyToStateFilters","filterEl","_this3","_this4","querySelectorAll","handleFormSubmit","setDropdownWrapper","toggleClearSearchButtonWrapper","toggleClearSearchButton","handleInputPlaceholderWrapper","handleInputPlaceholder","handleInputVisualTokenWrapper","handleInputVisualToken","checkForEnterWrapper","checkForEnter","onClearSearchWrapper","onClearSearch","checkForBackspaceWrapper","checkForBackspace","call","removeSelectedTokenKeydownWrapper","removeSelectedTokenKeydown","unselectEditTokensWrapper","unselectEditTokens","editTokenWrapper","editToken","tokenChange","addInputContainerFocusWrapper","addInputContainerFocus","removeInputContainerFocusWrapper","removeInputContainerFocus","onrecentSearchesItemSelectedWrapper","onrecentSearchesItemSelected","removeTokenWrapper","removeToken","bindStateEvents","unbindStateEvents","_this5","backspaceCount","keyCode","lastVisualToken","FilteredSearchVisualTokens","getLastVisualTokenBeforeInput","_DropdownUtils$getVis","DropdownUtils","getVisualTokenValues","tokenName","tokenValue","canEdit","getLastTokenPartial","removeLastTokenPartial","updateCurrentDropdownOffset","selectionStart","setSelectionRange","activeElements","mapping","currentDropdown","element","isHandledAsync","stopImmediatePropagation","blur","resetDropdowns","destroyDroplab","addClassIfElementExists","inputContainer","isElementInFilteredSearch","contains","target","isElementInDynamicFilterDropdown","isElementInStaticFilterDropdown","classList","remove","button","selectToken","removeSelectedToken","isElementInFilterDropdown","isElementTokensContainer","moveInputToTheRight","sanitizedTokenName","textContent","query","getSearchQuery","hasHidden","add","currentPlaceholder","placeholder","clearSearch","_this6","removeElements","children","t","canClearToken","_DropdownUtils$getVis2","parentElement","removeChild","_this7","_this$tokenizer$proce","isLastVisualTokenValid","addFilterVisualToken","uppercaseTokenName","shouldUppercaseTokenName","capitalizeTokenValue","shouldCapitalizeTokenValue","fragments","inputValues","last","pop","searchTerms","addSearchVisualToken","match","_this8","searchQuery","addRecentSearch","urlParams","modifyUrlParams","_this9","params","getAllParams","usernameParams","getUsernameParams","hasFilteredSearch","p","keyParam","decodeURIComponent","condition","searchByConditionUrl","sanitizedValue","searchByKeyParam","lastIndexOf","sanitizedKey","quotationsToUse","saveCurrentSearchQuery","_this10","paths","_this$tokenizer$proce2","currentState","getParameterByName","searchByConditionKeyValue","toLowerCase","tokenConfig","searchByKey","underscoredKey","tokenPath","lowercaseValueOnSubmit","encodeURIComponent","sanitized","parameterizedUrl","updateObject","visitUrl","usernamesById","attribute","user","username","currentDropdownRef","reference","dispatchInputEvent","dispatchEvent","CustomEvent","_filtered_search_filtered_search_manager__WEBPACK_IMPORTED_MODULE_0__","setup","ISSUES","ADMIN_RUNNERS","_possibleConstructorReturn","_getPrototypeOf","Mousetrap","findAndFollowLink","enabledHelp","Shortcuts","ProjectSelectComboButton","select","projectSelectInput","newItemBtn","resourceType","resourceLabel","formattedText","deriveTextVariants","groupId","initLocalStorage","siblings","openDropdown","getProjectFromLocalStorage","selectProject","localStorageItemType","setBtnTextFromLocalStorage","event","select2","selectedProjectData","projectMeta","setNewItemBtnAttributes","setProjectInLocalStorage","cachedProjectData","project","defaultTextPrefix","presetTextSuffix","projectString","projectSelect","simpleFilter","includeGroups","allProjects","orderBy","withIssuesEnabled","withMergeRequestsEnabled","withShared","includeProjectsInSubgroups","allowClear","minimumInputLength","finalCallback","projectsCallback","projects","results","groupsCallback","groups","groupProjects","with_issues_enabled","with_merge_requests_enabled","with_shared","include_subgroups","order_by","membership","web_url","name_with_namespace","initSelection","dropdownCssClass","Project","$cloneOptions","$projectCloneField","$cloneBtnLabel","mobileCloneField","selectedCloneOption","cloneType","activeText","$label","toggleClass","clipboardText","initRefSwitcher","parents","projectId","cookieKey","projectSelectDropdown","changeProject","location","refListItem","createElement","refLink","href","ref","filterRemote","filterByText","inputFieldName","li","cloneNode","header","className","link","appendChild","obj","$visit","shouldVisit","action","divider","serialize","_projects_gke_cluster_dropdowns__WEBPACK_IMPORTED_MODULE_0__","_persistent_user_callout__WEBPACK_IMPORTED_MODULE_1__","_project__WEBPACK_IMPORTED_MODULE_2__","_behaviors_shortcuts_shortcuts_navigation__WEBPACK_IMPORTED_MODULE_3__","body","callout","PersistentUserCallout","initGkeDropdowns","ISSUE","IssuableBulkUpdateSidebar","initDomElements","initDropdowns","setupBulkUpdateActions","$checkedIssues","$page","$sidebar","$sidebarInnerContainer","$bulkEditCancelBtn","$bulkEditSubmitBtn","$bulkUpdateEnableBtn","$otherFilters","$checkAllContainer","$issueChecks","$issuesList","$issuableIdsInput","toggleBulkEdit","selectAll","updateFormState","prepForSubmit","$item","noCheckedIssues","toggleSubmitButtonDisabled","updateSelectedIssuableIds","setTimeout","toggleSidebarDisplay","toggleBulkEditButtonDisabled","toggleOtherFiltersDisabled","toggleCheckboxDisplay","getCheckedIssueIds","checkAllButtonState","pagePrefix","issuable_index_classCallCheck","initBulkUpdate","resetIncomingEmailToken","$resetToken","new_address","focus","userCanBulkUpdate","alreadyInitialized","bulkUpdateSidebar","prefixId","_lib_utils_axios_utils__WEBPACK_IMPORTED_MODULE_2__","_flash__WEBPACK_IMPORTED_MODULE_3__","getElement","$labelDropdown","onFormSubmit","getFormDataAsObject","reload","onFormSubmitFailure","getSelectedIssues","has","getLabelsFromSelection","labelsData","labelId","getUnmarkedIndeterminedLabels","result","labelsToKeep","formData","state_event","assignee_id","assignee_ids","issuable_ids","subscription_event","add_label_ids","remove_label_ids","$labelSelect","getOriginalMarkedIds","labelIds","intersection","uniqueIds","issuableLabels","difference","selector","scopeEl"],"mappings":"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","file":"pages.projects.merge_requests.index.8d3e8bce.chunk.js","sourcesContent":["/* eslint-disable func-names, prefer-arrow-callback */\n\nimport $ from 'jquery';\nimport Api from './api';\nimport { humanize } from './lib/utils/text_utility';\n\nexport default class CreateLabelDropdown {\n  constructor($el, namespacePath, projectPath) {\n    this.$el = $el;\n    this.namespacePath = namespacePath;\n    this.projectPath = projectPath;\n    this.$dropdownBack = $('.dropdown-menu-back', this.$el.closest('.dropdown'));\n    this.$cancelButton = $('.js-cancel-label-btn', this.$el);\n    this.$newLabelField = $('#new_label_name', this.$el);\n    this.$newColorField = $('#new_label_color', this.$el);\n    this.$colorPreview = $('.js-dropdown-label-color-preview', this.$el);\n    this.$newLabelError = $('.js-label-error', this.$el);\n    this.$newLabelCreateButton = $('.js-new-label-btn', this.$el);\n    this.$colorSuggestions = $('.suggest-colors-dropdown a', this.$el);\n\n    this.$newLabelError.hide();\n    this.$newLabelCreateButton.disable();\n\n    this.cleanBinding();\n    this.addBinding();\n  }\n\n  cleanBinding() {\n    this.$colorSuggestions.off('click');\n    this.$newLabelField.off('keyup change');\n    this.$newColorField.off('keyup change');\n    this.$dropdownBack.off('click');\n    this.$cancelButton.off('click');\n    this.$newLabelCreateButton.off('click');\n  }\n\n  addBinding() {\n    const self = this;\n\n    this.$colorSuggestions.on('click', function(e) {\n      const $this = $(this);\n      self.addColorValue(e, $this);\n    });\n\n    this.$newLabelField.on('keyup change', this.enableLabelCreateButton.bind(this));\n    this.$newColorField.on('keyup change', this.enableLabelCreateButton.bind(this));\n\n    this.$dropdownBack.on('click', this.resetForm.bind(this));\n\n    this.$cancelButton.on('click', function(e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      self.resetForm();\n      self.$dropdownBack.trigger('click');\n    });\n\n    this.$newLabelCreateButton.on('click', this.saveLabel.bind(this));\n  }\n\n  addColorValue(e, $this) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.$newColorField.val($this.data('color')).trigger('change');\n    this.$colorPreview\n      .css('background-color', $this.data('color'))\n      .parent()\n      .addClass('is-active');\n  }\n\n  enableLabelCreateButton() {\n    if (this.$newLabelField.val() !== '' && this.$newColorField.val() !== '') {\n      this.$newLabelError.hide();\n      this.$newLabelCreateButton.enable();\n    } else {\n      this.$newLabelCreateButton.disable();\n    }\n  }\n\n  resetForm() {\n    this.$newLabelField.val('').trigger('change');\n\n    this.$newColorField.val('').trigger('change');\n\n    this.$colorPreview\n      .css('background-color', '')\n      .parent()\n      .removeClass('is-active');\n  }\n\n  saveLabel(e) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    Api.newLabel(\n      this.namespacePath,\n      this.projectPath,\n      {\n        title: this.$newLabelField.val(),\n        color: this.$newColorField.val(),\n      },\n      label => {\n        this.$newLabelCreateButton.enable();\n\n        if (label.message) {\n          let errors;\n\n          if (typeof label.message === 'string') {\n            errors = label.message;\n          } else {\n            errors = Object.keys(label.message)\n              .map(key => `${humanize(key)} ${label.message[key].join(', ')}`)\n              .join('<br/>');\n          }\n\n          this.$newLabelError.html(errors).show();\n        } else {\n          this.$dropdownBack.trigger('click');\n\n          $(document).trigger('created.label', label);\n        }\n      },\n    );\n  }\n}\n","/* eslint-disable no-useless-return, func-names, no-var, no-underscore-dangle, prefer-arrow-callback, one-var, no-unused-vars, prefer-template, no-new, consistent-return, object-shorthand, no-shadow, no-param-reassign, vars-on-top, no-lonely-if, no-else-return, dot-notation, no-empty */\n/* global Issuable */\n/* global ListLabel */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport { sprintf, __ } from './locale';\nimport axios from './lib/utils/axios_utils';\nimport IssuableBulkUpdateActions from './issuable_bulk_update_actions';\nimport CreateLabelDropdown from './create_label';\nimport flash from './flash';\nimport ModalStore from './boards/stores/modal_store';\nimport boardsStore from './boards/stores/boards_store';\n\nexport default class LabelsSelect {\n  constructor(els, options = {}) {\n    var _this, $els;\n    _this = this;\n\n    $els = $(els);\n\n    if (!els) {\n      $els = $('.js-label-select');\n    }\n\n    $els.each(function(i, dropdown) {\n      var $block,\n        $colorPreview,\n        $dropdown,\n        $form,\n        $loading,\n        $selectbox,\n        $sidebarCollapsedValue,\n        $value,\n        abilityName,\n        defaultLabel,\n        enableLabelCreateButton,\n        issueURLSplit,\n        issueUpdateURL,\n        labelUrl,\n        namespacePath,\n        projectPath,\n        saveLabelData,\n        selectedLabel,\n        showAny,\n        showNo,\n        $sidebarLabelTooltip,\n        initialSelected,\n        $toggleText,\n        fieldName,\n        useId,\n        propertyName,\n        showMenuAbove,\n        $container,\n        $dropdownContainer;\n      $dropdown = $(dropdown);\n      $dropdownContainer = $dropdown.closest('.labels-filter');\n      $toggleText = $dropdown.find('.dropdown-toggle-text');\n      namespacePath = $dropdown.data('namespacePath');\n      projectPath = $dropdown.data('projectPath');\n      issueUpdateURL = $dropdown.data('issueUpdate');\n      selectedLabel = $dropdown.data('selected');\n      if (selectedLabel != null && !$dropdown.hasClass('js-multiselect')) {\n        selectedLabel = selectedLabel.split(',');\n      }\n      showNo = $dropdown.data('showNo');\n      showAny = $dropdown.data('showAny');\n      showMenuAbove = $dropdown.data('showMenuAbove');\n      defaultLabel = $dropdown.data('defaultLabel') || __('Label');\n      abilityName = $dropdown.data('abilityName');\n      $selectbox = $dropdown.closest('.selectbox');\n      $block = $selectbox.closest('.block');\n      $form = $dropdown.closest('form, .js-issuable-update');\n      $sidebarCollapsedValue = $block.find('.sidebar-collapsed-icon span');\n      $sidebarLabelTooltip = $block.find('.js-sidebar-labels-tooltip');\n      $value = $block.find('.value');\n      $loading = $block.find('.block-loading').fadeOut();\n      fieldName = $dropdown.data('fieldName');\n      useId = $dropdown.is(\n        '.js-issuable-form-dropdown, .js-filter-bulk-update, .js-label-sidebar-dropdown',\n      );\n      propertyName = useId ? 'id' : 'title';\n      initialSelected = $selectbox\n        .find('input[name=\"' + $dropdown.data('fieldName') + '\"]')\n        .map(function() {\n          return this.value;\n        })\n        .get();\n      const { handleClick } = options;\n\n      $sidebarLabelTooltip.tooltip();\n\n      if ($dropdown.closest('.dropdown').find('.dropdown-new-label').length) {\n        new CreateLabelDropdown(\n          $dropdown.closest('.dropdown').find('.dropdown-new-label'),\n          namespacePath,\n          projectPath,\n        );\n      }\n\n      saveLabelData = function() {\n        var data, selected;\n        selected = $dropdown\n          .closest('.selectbox')\n          .find(\"input[name='\" + fieldName + \"']\")\n          .map(function() {\n            return this.value;\n          })\n          .get();\n\n        if (_.isEqual(initialSelected, selected)) return;\n        initialSelected = selected;\n\n        data = {};\n        data[abilityName] = {};\n        data[abilityName].label_ids = selected;\n        if (!selected.length) {\n          data[abilityName].label_ids = [''];\n        }\n        $loading.removeClass('hidden').fadeIn();\n        $dropdown.trigger('loading.gl.dropdown');\n        axios\n          .put(issueUpdateURL, data)\n          .then(({ data }) => {\n            var labelCount, template, labelTooltipTitle, labelTitles, formattedLabels;\n            $loading.fadeOut();\n            $dropdown.trigger('loaded.gl.dropdown');\n            $selectbox.hide();\n            data.issueUpdateURL = issueUpdateURL;\n            labelCount = 0;\n            if (data.labels.length && issueUpdateURL) {\n              template = LabelsSelect.getLabelTemplate({\n                labels: data.labels,\n                issueUpdateURL,\n              });\n              labelCount = data.labels.length;\n            } else {\n              template = '<span class=\"no-value\">None</span>';\n            }\n            $value.removeAttr('style').html(template);\n            $sidebarCollapsedValue.text(labelCount);\n\n            if (data.labels.length) {\n              labelTitles = data.labels.map(function(label) {\n                return label.title;\n              });\n\n              if (labelTitles.length > 5) {\n                labelTitles = labelTitles.slice(0, 5);\n                labelTitles.push('and ' + (data.labels.length - 5) + ' more');\n              }\n\n              labelTooltipTitle = labelTitles.join(', ');\n            } else {\n              labelTooltipTitle = __('Labels');\n            }\n\n            $sidebarLabelTooltip.attr('title', labelTooltipTitle).tooltip('_fixTitle');\n\n            $('.has-tooltip', $value).tooltip({\n              container: 'body',\n            });\n          })\n          .catch(() => flash(__('Error saving label update.')));\n      };\n      $dropdown.glDropdown({\n        showMenuAbove: showMenuAbove,\n        data: function(term, callback) {\n          labelUrl = $dropdown.attr('data-labels');\n          axios\n            .get(labelUrl)\n            .then(res => {\n              let { data } = res;\n              if ($dropdown.hasClass('js-extra-options')) {\n                var extraData = [];\n                if (showNo) {\n                  extraData.unshift({\n                    id: 0,\n                    title: 'No Label',\n                  });\n                }\n                if (showAny) {\n                  extraData.unshift({\n                    isAny: true,\n                    title: 'Any Label',\n                  });\n                }\n                if (extraData.length) {\n                  extraData.push('divider');\n                  data = extraData.concat(data);\n                }\n              }\n\n              callback(data);\n              if (showMenuAbove) {\n                $dropdown.data('glDropdown').positionMenuAbove();\n              }\n            })\n            .catch(() => flash(__('Error fetching labels.')));\n        },\n        renderRow: function(label, instance) {\n          var $a,\n            $li,\n            color,\n            colorEl,\n            indeterminate,\n            removesAll,\n            selectedClass,\n            spacing,\n            i,\n            marked,\n            dropdownName,\n            dropdownValue;\n          $li = $('<li>');\n          $a = $('<a href=\"#\">');\n          selectedClass = [];\n          removesAll = label.id <= 0 || label.id == null;\n          if ($dropdown.hasClass('js-filter-bulk-update')) {\n            indeterminate = $dropdown.data('indeterminate') || [];\n            marked = $dropdown.data('marked') || [];\n\n            if (indeterminate.indexOf(label.id) !== -1) {\n              selectedClass.push('is-indeterminate');\n            }\n\n            if (marked.indexOf(label.id) !== -1) {\n              // Remove is-indeterminate class if the item will be marked as active\n              i = selectedClass.indexOf('is-indeterminate');\n              if (i !== -1) {\n                selectedClass.splice(i, 1);\n              }\n              selectedClass.push('is-active');\n            }\n          } else {\n            if (this.id(label)) {\n              dropdownName = $dropdown.data('fieldName');\n              dropdownValue = this.id(label)\n                .toString()\n                .replace(/'/g, \"\\\\'\");\n\n              if (\n                $form.find(\n                  \"input[type='hidden'][name='\" +\n                    dropdownName +\n                    \"'][value='\" +\n                    dropdownValue +\n                    \"']\",\n                ).length\n              ) {\n                selectedClass.push('is-active');\n              }\n            }\n\n            if ($dropdown.hasClass('js-multiselect') && removesAll) {\n              selectedClass.push('dropdown-clear-active');\n            }\n          }\n          if (label.color) {\n            colorEl =\n              \"<span class='dropdown-label-box' style='background: \" + label.color + \"'></span>\";\n          } else {\n            colorEl = '';\n          }\n          // We need to identify which items are actually labels\n          if (label.id) {\n            selectedClass.push('label-item');\n            $a.attr('data-label-id', label.id);\n          }\n          $a.addClass(selectedClass.join(' ')).html(`${colorEl} ${_.escape(label.title)}`);\n          // Return generated html\n          return $li.html($a).prop('outerHTML');\n        },\n        search: {\n          fields: ['title'],\n        },\n        selectable: true,\n        filterable: true,\n        selected: $dropdown.data('selected') || [],\n        toggleLabel: function(selected, el) {\n          var $dropdownParent = $dropdown.parent();\n          var $dropdownInputField = $dropdownParent.find('.dropdown-input-field');\n          var isSelected = el !== null ? el.hasClass('is-active') : false;\n\n          var title = selected ? selected.title : null;\n          var selectedLabels = this.selected;\n\n          if ($dropdownInputField.length && $dropdownInputField.val().length) {\n            $dropdownParent.find('.dropdown-input-clear').trigger('click');\n          }\n\n          if (selected && selected.id === 0) {\n            this.selected = [];\n            return 'No Label';\n          } else if (isSelected) {\n            this.selected.push(title);\n          } else if (!isSelected && title) {\n            var index = this.selected.indexOf(title);\n            this.selected.splice(index, 1);\n          }\n\n          if (selectedLabels.length === 1) {\n            return selectedLabels;\n          } else if (selectedLabels.length) {\n            return sprintf(__('%{firstLabel} +%{labelCount} more'), {\n              firstLabel: selectedLabels[0],\n              labelCount: selectedLabels.length - 1,\n            });\n          } else {\n            return defaultLabel;\n          }\n        },\n        fieldName: $dropdown.data('fieldName'),\n        id: function(label) {\n          if (label.id <= 0) return label.title;\n\n          if ($dropdown.hasClass('js-issuable-form-dropdown')) {\n            return label.id;\n          }\n\n          if ($dropdown.hasClass('js-filter-submit') && label.isAny == null) {\n            return label.title;\n          } else {\n            return label.id;\n          }\n        },\n        hidden: function() {\n          var isIssueIndex, isMRIndex, page, selectedLabels;\n          page = $('body').attr('data-page');\n          isIssueIndex = page === 'projects:issues:index';\n          isMRIndex = page === 'projects:merge_requests:index';\n          $selectbox.hide();\n          // display:block overrides the hide-collapse rule\n          $value.removeAttr('style');\n\n          if ($dropdown.hasClass('js-issuable-form-dropdown')) {\n            return;\n          }\n\n          if ($('html').hasClass('issue-boards-page')) {\n            return;\n          }\n          if ($dropdown.hasClass('js-multiselect')) {\n            if ($dropdown.hasClass('js-filter-submit') && (isIssueIndex || isMRIndex)) {\n              selectedLabels = $dropdown\n                .closest('form')\n                .find(\"input:hidden[name='\" + $dropdown.data('fieldName') + \"']\");\n              Issuable.filterResults($dropdown.closest('form'));\n            } else if ($dropdown.hasClass('js-filter-submit')) {\n              $dropdown.closest('form').submit();\n            } else {\n              if (!$dropdown.hasClass('js-filter-bulk-update')) {\n                saveLabelData();\n              }\n            }\n          }\n        },\n        multiSelect: $dropdown.hasClass('js-multiselect'),\n        vue: $dropdown.hasClass('js-issue-board-sidebar'),\n        clicked: function(clickEvent) {\n          const { $el, e, isMarking } = clickEvent;\n          const label = clickEvent.selectedObj;\n\n          var isIssueIndex, isMRIndex, page, boardsModel;\n          var fadeOutLoader = () => {\n            $loading.fadeOut();\n          };\n\n          page = $('body').attr('data-page');\n          isIssueIndex = page === 'projects:issues:index';\n          isMRIndex = page === 'projects:merge_requests:index';\n\n          if ($dropdown.parent().find('.is-active:not(.dropdown-clear-active)').length) {\n            $dropdown\n              .parent()\n              .find('.dropdown-clear-active')\n              .removeClass('is-active');\n          }\n\n          if ($dropdown.hasClass('js-issuable-form-dropdown')) {\n            return;\n          }\n\n          if ($dropdown.hasClass('js-filter-bulk-update')) {\n            _this.enableBulkLabelDropdown();\n            _this.setDropdownData($dropdown, isMarking, label.id);\n            return;\n          }\n\n          if ($dropdown.closest('.add-issues-modal').length) {\n            boardsModel = ModalStore.store.filter;\n          }\n\n          if (boardsModel) {\n            if (label.isAny) {\n              boardsModel['label_name'] = [];\n            } else if ($el.hasClass('is-active')) {\n              boardsModel['label_name'].push(label.title);\n            }\n\n            e.preventDefault();\n            return;\n          } else if ($dropdown.hasClass('js-filter-submit') && (isIssueIndex || isMRIndex)) {\n            if (!$dropdown.hasClass('js-multiselect')) {\n              selectedLabel = label.title;\n              return Issuable.filterResults($dropdown.closest('form'));\n            }\n          } else if ($dropdown.hasClass('js-filter-submit')) {\n            return $dropdown.closest('form').submit();\n          } else if ($dropdown.hasClass('js-issue-board-sidebar')) {\n            if ($el.hasClass('is-active')) {\n              boardsStore.detail.issue.labels.push(\n                new ListLabel({\n                  id: label.id,\n                  title: label.title,\n                  color: label.color,\n                  textColor: '#fff',\n                }),\n              );\n            } else {\n              var { labels } = boardsStore.detail.issue;\n              labels = labels.filter(function(selectedLabel) {\n                return selectedLabel.id !== label.id;\n              });\n              boardsStore.detail.issue.labels = labels;\n            }\n\n            $loading.fadeIn();\n\n            boardsStore.detail.issue\n              .update($dropdown.attr('data-issue-update'))\n              .then(fadeOutLoader)\n              .catch(fadeOutLoader);\n          } else if (handleClick) {\n            e.preventDefault();\n            handleClick(label);\n          } else {\n            if ($dropdown.hasClass('js-multiselect')) {\n            } else {\n              return saveLabelData();\n            }\n          }\n        },\n        opened: function(e) {\n          if ($dropdown.hasClass('js-issue-board-sidebar')) {\n            const previousSelection = $dropdown.attr('data-selected');\n            this.selected = previousSelection ? previousSelection.split(',') : [];\n            $dropdown.data('glDropdown').updateLabel();\n          }\n        },\n        preserveContext: true,\n      });\n\n      // Set dropdown data\n      _this.setOriginalDropdownData($dropdownContainer, $dropdown);\n    });\n    this.bindEvents();\n  }\n\n  static getLabelTemplate(tplData) {\n    // We could use ES6 template string here\n    // and properly indent markup for readability\n    // but that also introduces unintended white-space\n    // so best approach is to use traditional way of\n    // concatenation\n    // see: http://2ality.com/2016/05/template-literal-whitespace.html#joining-arrays\n    const tpl = _.template(\n      [\n        '<% _.each(labels, function(label){ %>',\n        '<a href=\"<%- issueUpdateURL.slice(0, issueUpdateURL.lastIndexOf(\"/\")) %>?label_name[]=<%- encodeURIComponent(label.title) %>\">',\n        '<span class=\"badge label has-tooltip color-label\" title=\"<%- label.description %>\" style=\"background-color: <%- label.color %>; color: <%- label.text_color %>;\">',\n        '<%- label.title %>',\n        '</span>',\n        '</a>',\n        '<% }); %>',\n      ].join(''),\n    );\n\n    return tpl(tplData);\n  }\n\n  bindEvents() {\n    return $('body').on('change', '.selected-issuable', this.onSelectCheckboxIssue);\n  }\n  // eslint-disable-next-line class-methods-use-this\n  onSelectCheckboxIssue() {\n    if ($('.selected-issuable:checked').length) {\n      return;\n    }\n    return $('.issues-bulk-update .labels-filter .dropdown-toggle-text').text('Label');\n  }\n  // eslint-disable-next-line class-methods-use-this\n  enableBulkLabelDropdown() {\n    IssuableBulkUpdateActions.willUpdateLabels = true;\n  }\n  // eslint-disable-next-line class-methods-use-this\n  setDropdownData($dropdown, isMarking, value) {\n    var i, markedIds, unmarkedIds, indeterminateIds;\n\n    markedIds = $dropdown.data('marked') || [];\n    unmarkedIds = $dropdown.data('unmarked') || [];\n    indeterminateIds = $dropdown.data('indeterminate') || [];\n\n    if (isMarking) {\n      markedIds.push(value);\n\n      i = indeterminateIds.indexOf(value);\n      if (i > -1) {\n        indeterminateIds.splice(i, 1);\n      }\n\n      i = unmarkedIds.indexOf(value);\n      if (i > -1) {\n        unmarkedIds.splice(i, 1);\n      }\n    } else {\n      // If marked item (not common) is unmarked\n      i = markedIds.indexOf(value);\n      if (i > -1) {\n        markedIds.splice(i, 1);\n      }\n\n      // If an indeterminate item is being unmarked\n      if (IssuableBulkUpdateActions.getOriginalIndeterminateIds().indexOf(value) > -1) {\n        unmarkedIds.push(value);\n      }\n\n      // If a marked item is being unmarked\n      // (a marked item could also be a label that is present in all selection)\n      if (IssuableBulkUpdateActions.getOriginalCommonIds().indexOf(value) > -1) {\n        unmarkedIds.push(value);\n      }\n    }\n\n    $dropdown.data('marked', markedIds);\n    $dropdown.data('unmarked', unmarkedIds);\n    $dropdown.data('indeterminate', indeterminateIds);\n  }\n  // eslint-disable-next-line class-methods-use-this\n  setOriginalDropdownData($container, $dropdown) {\n    const labels = [];\n    $container.find('[name=\"label_name[]\"]').map(function() {\n      return labels.push(this.value);\n    });\n    $dropdown.data('marked', labels);\n  }\n}\n","/* eslint-disable one-var, no-unused-vars, object-shorthand, no-else-return, no-self-compare, consistent-return, no-param-reassign, no-shadow */\n/* global Issuable */\n/* global ListMilestone */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport { __ } from '~/locale';\nimport '~/gl_dropdown';\nimport axios from './lib/utils/axios_utils';\nimport { timeFor } from './lib/utils/datetime_utility';\nimport ModalStore from './boards/stores/modal_store';\nimport boardsStore, {\n  boardStoreIssueSet,\n  boardStoreIssueDelete,\n} from './boards/stores/boards_store';\n\nexport default class MilestoneSelect {\n  constructor(currentProject, els, options = {}) {\n    if (currentProject !== null) {\n      this.currentProject =\n        typeof currentProject === 'string' ? JSON.parse(currentProject) : currentProject;\n    }\n\n    MilestoneSelect.init(els, options);\n  }\n\n  static init(els, options) {\n    let $els = $(els);\n\n    if (!els) {\n      $els = $('.js-milestone-select');\n    }\n\n    $els.each((i, dropdown) => {\n      let milestoneLinkNoneTemplate,\n        milestoneLinkTemplate,\n        selectedMilestone,\n        selectedMilestoneDefault;\n      const $dropdown = $(dropdown);\n      const projectId = $dropdown.data('projectId');\n      const milestonesUrl = $dropdown.data('milestones');\n      const issueUpdateURL = $dropdown.data('issueUpdate');\n      const showNo = $dropdown.data('showNo');\n      const showAny = $dropdown.data('showAny');\n      const showMenuAbove = $dropdown.data('showMenuAbove');\n      const showUpcoming = $dropdown.data('showUpcoming');\n      const showStarted = $dropdown.data('showStarted');\n      const useId = $dropdown.data('useId');\n      const defaultLabel = $dropdown.data('defaultLabel');\n      const defaultNo = $dropdown.data('defaultNo');\n      const issuableId = $dropdown.data('issuableId');\n      const abilityName = $dropdown.data('abilityName');\n      const $selectBox = $dropdown.closest('.selectbox');\n      const $block = $selectBox.closest('.block');\n      const $sidebarCollapsedValue = $block.find('.sidebar-collapsed-icon');\n      const $value = $block.find('.value');\n      const $loading = $block.find('.block-loading').fadeOut();\n      selectedMilestoneDefault = showAny ? '' : null;\n      selectedMilestoneDefault = showNo && defaultNo ? 'No Milestone' : selectedMilestoneDefault;\n      selectedMilestone = $dropdown.data('selected') || selectedMilestoneDefault;\n\n      if (issueUpdateURL) {\n        milestoneLinkTemplate = _.template(\n          '<a href=\"<%- web_url %>\" class=\"bold has-tooltip\" data-container=\"body\" title=\"<%- remaining %>\"><%- title %></a>',\n        );\n        milestoneLinkNoneTemplate = '<span class=\"no-value\">None</span>';\n      }\n      return $dropdown.glDropdown({\n        showMenuAbove: showMenuAbove,\n        data: (term, callback) =>\n          axios.get(milestonesUrl).then(({ data }) => {\n            const extraOptions = [];\n            if (showAny) {\n              extraOptions.push({\n                id: null,\n                name: null,\n                title: 'Any Milestone',\n              });\n            }\n            if (showNo) {\n              extraOptions.push({\n                id: -1,\n                name: 'No Milestone',\n                title: 'No Milestone',\n              });\n            }\n            if (showUpcoming) {\n              extraOptions.push({\n                id: -2,\n                name: '#upcoming',\n                title: 'Upcoming',\n              });\n            }\n            if (showStarted) {\n              extraOptions.push({\n                id: -3,\n                name: '#started',\n                title: 'Started',\n              });\n            }\n            if (extraOptions.length) {\n              extraOptions.push('divider');\n            }\n\n            callback(extraOptions.concat(data));\n            if (showMenuAbove) {\n              $dropdown.data('glDropdown').positionMenuAbove();\n            }\n            $(`[data-milestone-id=\"${_.escape(selectedMilestone)}\"] > a`).addClass('is-active');\n          }),\n        renderRow: milestone => `\n          <li data-milestone-id=\"${_.escape(milestone.name)}\">\n            <a href='#' class='dropdown-menu-milestone-link'>\n              ${_.escape(milestone.title)}\n            </a>\n          </li>\n        `,\n        filterable: true,\n        search: {\n          fields: ['title'],\n        },\n        selectable: true,\n        toggleLabel: (selected, el, e) => {\n          if (selected && 'id' in selected && $(el).hasClass('is-active')) {\n            return selected.title;\n          } else {\n            return defaultLabel;\n          }\n        },\n        defaultLabel: defaultLabel,\n        fieldName: $dropdown.data('fieldName'),\n        text: milestone => _.escape(milestone.title),\n        id: milestone => {\n          if (!useId && !$dropdown.is('.js-issuable-form-dropdown')) {\n            return milestone.name;\n          } else {\n            return milestone.id;\n          }\n        },\n        hidden: () => {\n          $selectBox.hide();\n          // display:block overrides the hide-collapse rule\n          return $value.css('display', '');\n        },\n        opened: e => {\n          const $el = $(e.currentTarget);\n          if ($dropdown.hasClass('js-issue-board-sidebar') || options.handleClick) {\n            selectedMilestone = $dropdown[0].dataset.selected || selectedMilestoneDefault;\n          }\n          $('a.is-active', $el).removeClass('is-active');\n          $(`[data-milestone-id=\"${_.escape(selectedMilestone)}\"] > a`, $el).addClass('is-active');\n        },\n        vue: $dropdown.hasClass('js-issue-board-sidebar'),\n        clicked: clickEvent => {\n          const { $el, e } = clickEvent;\n          let selected = clickEvent.selectedObj;\n\n          let data, modalStoreFilter;\n          if (!selected) return;\n\n          if (options.handleClick) {\n            e.preventDefault();\n            options.handleClick(selected);\n            return;\n          }\n\n          const page = $('body').attr('data-page');\n          const isIssueIndex = page === 'projects:issues:index';\n          const isMRIndex = page === page && page === 'projects:merge_requests:index';\n          const isSelecting = selected.name !== selectedMilestone;\n          selectedMilestone = isSelecting ? selected.name : selectedMilestoneDefault;\n\n          if (\n            $dropdown.hasClass('js-filter-bulk-update') ||\n            $dropdown.hasClass('js-issuable-form-dropdown')\n          ) {\n            e.preventDefault();\n            return;\n          }\n\n          if ($dropdown.closest('.add-issues-modal').length) {\n            modalStoreFilter = ModalStore.store.filter;\n          }\n\n          if (modalStoreFilter) {\n            modalStoreFilter[$dropdown.data('fieldName')] = selected.name;\n            e.preventDefault();\n          } else if ($dropdown.hasClass('js-filter-submit') && (isIssueIndex || isMRIndex)) {\n            return Issuable.filterResults($dropdown.closest('form'));\n          } else if ($dropdown.hasClass('js-filter-submit')) {\n            return $dropdown.closest('form').submit();\n          } else if ($dropdown.hasClass('js-issue-board-sidebar')) {\n            if (selected.id !== -1 && isSelecting) {\n              boardStoreIssueSet(\n                'milestone',\n                new ListMilestone({\n                  id: selected.id,\n                  title: selected.name,\n                }),\n              );\n            } else {\n              boardStoreIssueDelete('milestone');\n            }\n\n            $dropdown.trigger('loading.gl.dropdown');\n            $loading.removeClass('hidden').fadeIn();\n\n            boardsStore.detail.issue\n              .update($dropdown.attr('data-issue-update'))\n              .then(() => {\n                $dropdown.trigger('loaded.gl.dropdown');\n                $loading.fadeOut();\n              })\n              .catch(() => {\n                $loading.fadeOut();\n              });\n          } else {\n            selected = $selectBox.find('input[type=\"hidden\"]').val();\n            data = {};\n            data[abilityName] = {};\n            data[abilityName].milestone_id = selected != null ? selected : null;\n            $loading.removeClass('hidden').fadeIn();\n            $dropdown.trigger('loading.gl.dropdown');\n            return axios\n              .put(issueUpdateURL, data)\n              .then(({ data }) => {\n                $dropdown.trigger('loaded.gl.dropdown');\n                $loading.fadeOut();\n                $selectBox.hide();\n                $value.css('display', '');\n                if (data.milestone != null) {\n                  data.milestone.remaining = timeFor(data.milestone.due_date);\n                  data.milestone.name = data.milestone.title;\n                  $value.html(milestoneLinkTemplate(data.milestone));\n                  return $sidebarCollapsedValue\n                    .attr(\n                      'data-original-title',\n                      `${data.milestone.name}<br />${data.milestone.remaining}`,\n                    )\n                    .find('span')\n                    .text(data.milestone.title);\n                } else {\n                  $value.html(milestoneLinkNoneTemplate);\n                  return $sidebarCollapsedValue\n                    .attr('data-original-title', __('Milestone'))\n                    .find('span')\n                    .text(__('None'));\n                }\n              })\n              .catch(() => {\n                $loading.fadeOut();\n              });\n          }\n        },\n      });\n    });\n  }\n}\n\nwindow.MilestoneSelect = MilestoneSelect;\n","import IssuableIndex from '~/issuable_index';\nimport ShortcutsNavigation from '~/behaviors/shortcuts/shortcuts_navigation';\nimport UsersSelect from '~/users_select';\nimport initFilteredSearch from '~/pages/search/init_filtered_search';\nimport IssuableFilteredSearchTokenKeys from '~/filtered_search/issuable_filtered_search_token_keys';\nimport { FILTERED_SEARCH } from '~/pages/constants';\nimport { ISSUABLE_INDEX } from '~/pages/projects/constants';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  IssuableFilteredSearchTokenKeys.addExtraTokensForMergeRequests();\n\n  initFilteredSearch({\n    page: FILTERED_SEARCH.MERGE_REQUESTS,\n    filteredSearchTokenKeys: IssuableFilteredSearchTokenKeys,\n  });\n\n  new IssuableIndex(ISSUABLE_INDEX.MERGE_REQUEST); // eslint-disable-line no-new\n  new ShortcutsNavigation(); // eslint-disable-line no-new\n  new UsersSelect(); // eslint-disable-line no-new\n});\n","import FilteredSearchTokenKeys from './filtered_search_token_keys';\n\nexport const tokenKeys = [\n  {\n    key: 'author',\n    type: 'string',\n    param: 'username',\n    symbol: '@',\n    icon: 'pencil',\n    tag: '@author',\n  },\n  {\n    key: 'assignee',\n    type: 'string',\n    param: 'username',\n    symbol: '@',\n    icon: 'user',\n    tag: '@assignee',\n  },\n  {\n    key: 'milestone',\n    type: 'string',\n    param: 'title',\n    symbol: '%',\n    icon: 'clock',\n    tag: '%milestone',\n  },\n  {\n    key: 'label',\n    type: 'array',\n    param: 'name[]',\n    symbol: '~',\n    icon: 'labels',\n    tag: '~label',\n  },\n];\n\nif (gon.current_user_id) {\n  // Appending tokenkeys only logged-in\n  tokenKeys.push({\n    key: 'my-reaction',\n    type: 'string',\n    param: 'emoji',\n    symbol: '',\n    icon: 'thumb-up',\n    tag: 'emoji',\n  });\n}\n\nexport const alternativeTokenKeys = [\n  {\n    key: 'label',\n    type: 'string',\n    param: 'name',\n    symbol: '~',\n  },\n];\n\nexport const conditions = [\n  {\n    url: 'assignee_id=None',\n    tokenKey: 'assignee',\n    value: 'none',\n  },\n  {\n    url: 'assignee_id=Any',\n    tokenKey: 'assignee',\n    value: 'any',\n  },\n  {\n    url: 'milestone_title=None',\n    tokenKey: 'milestone',\n    value: 'none',\n  },\n  {\n    url: 'milestone_title=Any',\n    tokenKey: 'milestone',\n    value: 'any',\n  },\n  {\n    url: 'milestone_title=%23upcoming',\n    tokenKey: 'milestone',\n    value: 'upcoming',\n  },\n  {\n    url: 'milestone_title=%23started',\n    tokenKey: 'milestone',\n    value: 'started',\n  },\n  {\n    url: 'label_name[]=None',\n    tokenKey: 'label',\n    value: 'none',\n  },\n  {\n    url: 'label_name[]=Any',\n    tokenKey: 'any',\n    value: 'any',\n  },\n  {\n    url: 'my_reaction_emoji=None',\n    tokenKey: 'my-reaction',\n    value: 'none',\n  },\n  {\n    url: 'my_reaction_emoji=Any',\n    tokenKey: 'my-reaction',\n    value: 'any',\n  },\n];\n\nconst IssuableFilteredSearchTokenKeys = new FilteredSearchTokenKeys(\n  tokenKeys,\n  alternativeTokenKeys,\n  conditions,\n);\n\nexport default IssuableFilteredSearchTokenKeys;\n","/* eslint-disable no-shadow */\n/* global List */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport Vue from 'vue';\nimport Cookies from 'js-cookie';\nimport { getUrlParamsArray, parseBoolean } from '~/lib/utils/common_utils';\n\nconst boardsStore = {\n  disabled: false,\n  filter: {\n    path: '',\n  },\n  state: {},\n  detail: {\n    issue: {},\n  },\n  moving: {\n    issue: {},\n    list: {},\n  },\n  create() {\n    this.state.lists = [];\n    this.filter.path = getUrlParamsArray().join('&');\n    this.detail = {\n      issue: {},\n    };\n  },\n  addList(listObj, defaultAvatar) {\n    const list = new List(listObj, defaultAvatar);\n    this.state.lists.push(list);\n\n    return list;\n  },\n  new(listObj) {\n    const list = this.addList(listObj);\n    const backlogList = this.findList('type', 'backlog', 'backlog');\n\n    list\n      .save()\n      .then(() => {\n        // Remove any new issues from the backlog\n        // as they will be visible in the new list\n        list.issues.forEach(backlogList.removeIssue.bind(backlogList));\n        this.state.lists = _.sortBy(this.state.lists, 'position');\n      })\n      .catch(() => {\n        // https://gitlab.com/gitlab-org/gitlab-ce/issues/30821\n      });\n    this.removeBlankState();\n  },\n  updateNewListDropdown(listId) {\n    $(`.js-board-list-${listId}`).removeClass('is-active');\n  },\n  shouldAddBlankState() {\n    // Decide whether to add the blank state\n    return !this.state.lists.filter(list => list.type !== 'backlog' && list.type !== 'closed')[0];\n  },\n  addBlankState() {\n    if (!this.shouldAddBlankState() || this.welcomeIsHidden() || this.disabled) return;\n\n    this.addList({\n      id: 'blank',\n      list_type: 'blank',\n      title: 'Welcome to your Issue Board!',\n      position: 0,\n    });\n\n    this.state.lists = _.sortBy(this.state.lists, 'position');\n  },\n  removeBlankState() {\n    this.removeList('blank');\n\n    Cookies.set('issue_board_welcome_hidden', 'true', {\n      expires: 365 * 10,\n      path: '',\n    });\n  },\n  welcomeIsHidden() {\n    return parseBoolean(Cookies.get('issue_board_welcome_hidden'));\n  },\n  removeList(id, type = 'blank') {\n    const list = this.findList('id', id, type);\n\n    if (!list) return;\n\n    this.state.lists = this.state.lists.filter(list => list.id !== id);\n  },\n  moveList(listFrom, orderLists) {\n    orderLists.forEach((id, i) => {\n      const list = this.findList('id', parseInt(id, 10));\n\n      list.position = i;\n    });\n    listFrom.update();\n  },\n  moveIssueToList(listFrom, listTo, issue, newIndex) {\n    const issueTo = listTo.findIssue(issue.id);\n    const issueLists = issue.getLists();\n    const listLabels = issueLists.map(listIssue => listIssue.label);\n\n    if (!issueTo) {\n      // Check if target list assignee is already present in this issue\n      if (\n        listTo.type === 'assignee' &&\n        listFrom.type === 'assignee' &&\n        issue.findAssignee(listTo.assignee)\n      ) {\n        const targetIssue = listTo.findIssue(issue.id);\n        targetIssue.removeAssignee(listFrom.assignee);\n      } else if (listTo.type === 'milestone') {\n        const currentMilestone = issue.milestone;\n        const currentLists = this.state.lists\n          .filter(list => list.type === 'milestone' && list.id !== listTo.id)\n          .filter(list => list.issues.some(listIssue => issue.id === listIssue.id));\n\n        issue.removeMilestone(currentMilestone);\n        issue.addMilestone(listTo.milestone);\n        currentLists.forEach(currentList => currentList.removeIssue(issue));\n        listTo.addIssue(issue, listFrom, newIndex);\n      } else {\n        // Add to new lists issues if it doesn't already exist\n        listTo.addIssue(issue, listFrom, newIndex);\n      }\n    } else {\n      listTo.updateIssueLabel(issue, listFrom);\n      issueTo.removeLabel(listFrom.label);\n    }\n\n    if (listTo.type === 'closed' && listFrom.type !== 'backlog') {\n      issueLists.forEach(list => {\n        list.removeIssue(issue);\n      });\n      issue.removeLabels(listLabels);\n    } else if (listTo.type === 'backlog' && listFrom.type === 'assignee') {\n      issue.removeAssignee(listFrom.assignee);\n      listFrom.removeIssue(issue);\n    } else if (listTo.type === 'backlog' && listFrom.type === 'milestone') {\n      issue.removeMilestone(listFrom.milestone);\n      listFrom.removeIssue(issue);\n    } else if (this.shouldRemoveIssue(listFrom, listTo)) {\n      listFrom.removeIssue(issue);\n    }\n  },\n  shouldRemoveIssue(listFrom, listTo) {\n    return (\n      (listTo.type !== 'label' && listFrom.type === 'assignee') ||\n      (listTo.type !== 'assignee' && listFrom.type === 'label') ||\n      listFrom.type === 'backlog'\n    );\n  },\n  moveIssueInList(list, issue, oldIndex, newIndex, idArray) {\n    const beforeId = parseInt(idArray[newIndex - 1], 10) || null;\n    const afterId = parseInt(idArray[newIndex + 1], 10) || null;\n\n    list.moveIssue(issue, oldIndex, newIndex, beforeId, afterId);\n  },\n  findList(key, val, type = 'label') {\n    const filteredList = this.state.lists.filter(list => {\n      const byType = type\n        ? list.type === type || list.type === 'assignee' || list.type === 'milestone'\n        : true;\n\n      return list[key] === val && byType;\n    });\n    return filteredList[0];\n  },\n  findListByLabelId(id) {\n    return this.state.lists.find(list => list.type === 'label' && list.label.id === id);\n  },\n  updateFiltersUrl() {\n    window.history.pushState(null, null, `?${this.filter.path}`);\n  },\n};\n\n// hacks added in order to allow milestone_select to function properly\n// TODO: remove these\n\nexport function boardStoreIssueSet(...args) {\n  Vue.set(boardsStore.detail.issue, ...args);\n}\n\nexport function boardStoreIssueDelete(...args) {\n  Vue.delete(boardsStore.detail.issue, ...args);\n}\n\nexport default boardsStore;\n","import Vue from 'vue';\n\nexport default new Vue();\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--1!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./recent_searches_dropdown_content.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--1!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./recent_searches_dropdown_content.vue?vue&type=script&lang=js&\"","<script>\nimport eventHub from '../event_hub';\nimport FilteredSearchTokenizer from '../filtered_search_tokenizer';\n\nexport default {\n  name: 'RecentSearchesDropdownContent',\n  props: {\n    items: {\n      type: Array,\n      required: true,\n    },\n    isLocalStorageAvailable: {\n      type: Boolean,\n      required: false,\n      default: true,\n    },\n    allowedKeys: {\n      type: Array,\n      required: true,\n    },\n  },\n  computed: {\n    processedItems() {\n      return this.items.map(item => {\n        const { tokens, searchToken } = FilteredSearchTokenizer.processTokens(\n          item,\n          this.allowedKeys,\n        );\n\n        const resultantTokens = tokens.map(token => ({\n          prefix: `${token.key}:`,\n          suffix: `${token.symbol}${token.value}`,\n        }));\n\n        return {\n          text: item,\n          tokens: resultantTokens,\n          searchToken,\n        };\n      });\n    },\n    hasItems() {\n      return this.items.length > 0;\n    },\n  },\n  methods: {\n    onItemActivated(text) {\n      eventHub.$emit('recentSearchesItemSelected', text);\n    },\n    onRequestClearRecentSearches(e) {\n      // Stop the dropdown from closing\n      e.stopPropagation();\n\n      eventHub.$emit('requestClearRecentSearches');\n    },\n  },\n};\n</script>\n<template>\n  <div>\n    <div v-if=\"!isLocalStorageAvailable\" class=\"dropdown-info-note\">\n      This feature requires local storage to be enabled\n    </div>\n    <ul v-else-if=\"hasItems\">\n      <li v-for=\"(item, index) in processedItems\" :key=\"`processed-items-${index}`\">\n        <button\n          type=\"button\"\n          class=\"filtered-search-history-dropdown-item\"\n          @click=\"onItemActivated(item.text);\"\n        >\n          <span>\n            <span\n              v-for=\"(token, tokenIndex) in item.tokens\"\n              :key=\"`dropdown-token-${tokenIndex}`\"\n              class=\"filtered-search-history-dropdown-token\"\n            >\n              <span class=\"name\">{{ token.prefix }}</span>\n              <span class=\"value\">{{ token.suffix }}</span>\n            </span>\n          </span>\n          <span class=\"filtered-search-history-dropdown-search-token\">\n            {{ item.searchToken }}\n          </span>\n        </button>\n      </li>\n      <li class=\"divider\"></li>\n      <li>\n        <button\n          type=\"button\"\n          class=\"filtered-search-history-clear-button\"\n          @click=\"onRequestClearRecentSearches($event);\"\n        >\n          Clear recent searches\n        </button>\n      </li>\n    </ul>\n    <div v-else class=\"dropdown-info-note\">You don't have any recent searches</div>\n  </div>\n</template>\n","import { render, staticRenderFns } from \"./recent_searches_dropdown_content.vue?vue&type=template&id=bbbc6146&\"\nimport script from \"./recent_searches_dropdown_content.vue?vue&type=script&lang=js&\"\nexport * from \"./recent_searches_dropdown_content.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"recent_searches_dropdown_content.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(!_vm.isLocalStorageAvailable)?_c('div',{staticClass:\"dropdown-info-note\"},[_vm._v(\"\\n    This feature requires local storage to be enabled\\n  \")]):(_vm.hasItems)?_c('ul',[_vm._l((_vm.processedItems),function(item,index){return _c('li',{key:(\"processed-items-\" + index)},[_c('button',{staticClass:\"filtered-search-history-dropdown-item\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.onItemActivated(item.text);}}},[_c('span',_vm._l((item.tokens),function(token,tokenIndex){return _c('span',{key:(\"dropdown-token-\" + tokenIndex),staticClass:\"filtered-search-history-dropdown-token\"},[_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(token.prefix))]),_vm._v(\" \"),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(token.suffix))])])}),0),_vm._v(\" \"),_c('span',{staticClass:\"filtered-search-history-dropdown-search-token\"},[_vm._v(\"\\n          \"+_vm._s(item.searchToken)+\"\\n        \")])])])}),_vm._v(\" \"),_c('li',{staticClass:\"divider\"}),_vm._v(\" \"),_c('li',[_c('button',{staticClass:\"filtered-search-history-clear-button\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.onRequestClearRecentSearches($event);}}},[_vm._v(\"\\n        Clear recent searches\\n      \")])])],2):_c('div',{staticClass:\"dropdown-info-note\"},[_vm._v(\"You don't have any recent searches\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from 'vue';\nimport RecentSearchesDropdownContent from './components/recent_searches_dropdown_content.vue';\nimport eventHub from './event_hub';\n\nclass RecentSearchesRoot {\n  constructor(recentSearchesStore, recentSearchesService, wrapperElement) {\n    this.store = recentSearchesStore;\n    this.service = recentSearchesService;\n    this.wrapperElement = wrapperElement;\n  }\n\n  init() {\n    this.bindEvents();\n    this.render();\n  }\n\n  bindEvents() {\n    this.onRequestClearRecentSearchesWrapper = this.onRequestClearRecentSearches.bind(this);\n\n    eventHub.$on('requestClearRecentSearches', this.onRequestClearRecentSearchesWrapper);\n  }\n\n  unbindEvents() {\n    eventHub.$off('requestClearRecentSearches', this.onRequestClearRecentSearchesWrapper);\n  }\n\n  render() {\n    const { state } = this.store;\n    this.vm = new Vue({\n      el: this.wrapperElement,\n      components: {\n        RecentSearchesDropdownContent,\n      },\n      data() {\n        return state;\n      },\n      template: `\n        <recent-searches-dropdown-content\n          :items=\"recentSearches\"\n          :is-local-storage-available=\"isLocalStorageAvailable\"\n          :allowed-keys=\"allowedKeys\"\n          />\n      `,\n    });\n  }\n\n  onRequestClearRecentSearches() {\n    const resultantSearches = this.store.setRecentSearches([]);\n    this.service.save(resultantSearches);\n  }\n\n  destroy() {\n    this.unbindEvents();\n    if (this.vm) {\n      this.vm.$destroy();\n    }\n  }\n}\n\nexport default RecentSearchesRoot;\n","import _ from 'underscore';\n\nclass RecentSearchesStore {\n  constructor(initialState = {}, allowedKeys) {\n    this.state = Object.assign(\n      {\n        isLocalStorageAvailable: true,\n        recentSearches: [],\n        allowedKeys,\n      },\n      initialState,\n    );\n  }\n\n  addRecentSearch(newSearch) {\n    this.setRecentSearches([newSearch].concat(this.state.recentSearches));\n\n    return this.state.recentSearches;\n  }\n\n  setRecentSearches(searches = []) {\n    const trimmedSearches = searches.map(search => search.trim());\n    this.state.recentSearches = _.uniq(trimmedSearches).slice(0, 5);\n    return this.state.recentSearches;\n  }\n}\n\nexport default RecentSearchesStore;\n","class RecentSearchesServiceError {\n  constructor(message) {\n    this.name = 'RecentSearchesServiceError';\n    this.message = message || 'Recent Searches Service is unavailable';\n  }\n}\n\n// Can't use `extends` for builtin prototypes and get true inheritance yet\nRecentSearchesServiceError.prototype = Error.prototype;\n\nexport default RecentSearchesServiceError;\n","import RecentSearchesServiceError from './recent_searches_service_error';\nimport AccessorUtilities from '../../lib/utils/accessor';\n\nclass RecentSearchesService {\n  constructor(localStorageKey = 'issuable-recent-searches') {\n    this.localStorageKey = localStorageKey;\n  }\n\n  fetch() {\n    if (!RecentSearchesService.isAvailable()) {\n      const error = new RecentSearchesServiceError();\n      return Promise.reject(error);\n    }\n\n    const input = window.localStorage.getItem(this.localStorageKey);\n\n    let searches = [];\n    if (input && input.length > 0) {\n      try {\n        searches = JSON.parse(input);\n      } catch (err) {\n        return Promise.reject(err);\n      }\n    }\n\n    return Promise.resolve(searches);\n  }\n\n  save(searches = []) {\n    if (!RecentSearchesService.isAvailable()) return;\n\n    window.localStorage.setItem(this.localStorageKey, JSON.stringify(searches));\n  }\n\n  static isAvailable() {\n    return AccessorUtilities.isLocalStorageAccessSafe();\n  }\n}\n\nexport default RecentSearchesService;\n","import _ from 'underscore';\nimport { getParameterByName, getUrlParamsArray } from '~/lib/utils/common_utils';\nimport IssuableFilteredSearchTokenKeys from '~/filtered_search/issuable_filtered_search_token_keys';\nimport { visitUrl } from '../lib/utils/url_utility';\nimport Flash from '../flash';\nimport FilteredSearchContainer from './container';\nimport RecentSearchesRoot from './recent_searches_root';\nimport RecentSearchesStore from './stores/recent_searches_store';\nimport RecentSearchesService from './services/recent_searches_service';\nimport eventHub from './event_hub';\nimport { addClassIfElementExists } from '../lib/utils/dom_utils';\nimport FilteredSearchTokenizer from './filtered_search_tokenizer';\nimport FilteredSearchDropdownManager from './filtered_search_dropdown_manager';\nimport FilteredSearchVisualTokens from './filtered_search_visual_tokens';\nimport DropdownUtils from './dropdown_utils';\n\nexport default class FilteredSearchManager {\n  constructor({\n    page,\n    isGroup = false,\n    isGroupAncestor = true,\n    isGroupDecendent = false,\n    filteredSearchTokenKeys = IssuableFilteredSearchTokenKeys,\n    stateFiltersSelector = '.issues-state-filters',\n  }) {\n    this.isGroup = isGroup;\n    this.isGroupAncestor = isGroupAncestor;\n    this.isGroupDecendent = isGroupDecendent;\n    this.states = ['opened', 'closed', 'merged', 'all'];\n\n    this.page = page;\n    this.container = FilteredSearchContainer.container;\n    this.filteredSearchInput = this.container.querySelector('.filtered-search');\n    this.filteredSearchInputForm = this.filteredSearchInput.form;\n    this.clearSearchButton = this.container.querySelector('.clear-search');\n    this.tokensContainer = this.container.querySelector('.tokens-container');\n    this.filteredSearchTokenKeys = filteredSearchTokenKeys;\n    this.stateFiltersSelector = stateFiltersSelector;\n    this.recentsStorageKeyNames = {\n      issues: 'issue-recent-searches',\n      merge_requests: 'merge-request-recent-searches',\n    };\n\n    this.recentSearchesStore = new RecentSearchesStore({\n      isLocalStorageAvailable: RecentSearchesService.isAvailable(),\n      allowedKeys: this.filteredSearchTokenKeys.getKeys(),\n    });\n    this.searchHistoryDropdownElement = document.querySelector(\n      '.js-filtered-search-history-dropdown',\n    );\n    const fullPath = this.searchHistoryDropdownElement\n      ? this.searchHistoryDropdownElement.dataset.fullPath\n      : 'project';\n    const recentSearchesKey = `${fullPath}-${this.recentsStorageKeyNames[this.page]}`;\n    this.recentSearchesService = new RecentSearchesService(recentSearchesKey);\n  }\n\n  setup() {\n    // Fetch recent searches from localStorage\n    this.fetchingRecentSearchesPromise = this.recentSearchesService\n      .fetch()\n      .catch(error => {\n        if (error.name === 'RecentSearchesServiceError') return undefined;\n        // eslint-disable-next-line no-new\n        new Flash('An error occurred while parsing recent searches');\n        // Gracefully fail to empty array\n        return [];\n      })\n      .then(searches => {\n        if (!searches) {\n          return;\n        }\n\n        // Put any searches that may have come in before\n        // we fetched the saved searches ahead of the already saved ones\n        const resultantSearches = this.recentSearchesStore.setRecentSearches(\n          this.recentSearchesStore.state.recentSearches.concat(searches),\n        );\n        this.recentSearchesService.save(resultantSearches);\n      });\n\n    if (this.filteredSearchInput) {\n      this.tokenizer = FilteredSearchTokenizer;\n      this.dropdownManager = new FilteredSearchDropdownManager({\n        baseEndpoint: this.filteredSearchInput.getAttribute('data-base-endpoint') || '',\n        tokenizer: this.tokenizer,\n        page: this.page,\n        isGroup: this.isGroup,\n        isGroupAncestor: this.isGroupAncestor,\n        isGroupDecendent: this.isGroupDecendent,\n        filteredSearchTokenKeys: this.filteredSearchTokenKeys,\n      });\n\n      this.recentSearchesRoot = new RecentSearchesRoot(\n        this.recentSearchesStore,\n        this.recentSearchesService,\n        this.searchHistoryDropdownElement,\n      );\n      this.recentSearchesRoot.init();\n\n      this.bindEvents();\n      this.loadSearchParamsFromURL();\n      this.dropdownManager.setDropdown();\n      this.cleanupWrapper = this.cleanup.bind(this);\n      document.addEventListener('beforeunload', this.cleanupWrapper);\n    }\n  }\n\n  cleanup() {\n    this.unbindEvents();\n    document.removeEventListener('beforeunload', this.cleanupWrapper);\n\n    if (this.recentSearchesRoot) {\n      this.recentSearchesRoot.destroy();\n    }\n  }\n\n  bindStateEvents() {\n    this.stateFilters = document.querySelector(`.container-fluid ${this.stateFiltersSelector}`);\n\n    if (this.stateFilters) {\n      this.searchStateWrapper = this.searchState.bind(this);\n\n      this.applyToStateFilters(filterEl => {\n        filterEl.addEventListener('click', this.searchStateWrapper);\n      });\n    }\n  }\n\n  unbindStateEvents() {\n    if (this.stateFilters) {\n      this.applyToStateFilters(filterEl => {\n        filterEl.removeEventListener('click', this.searchStateWrapper);\n      });\n    }\n  }\n\n  applyToStateFilters(callback) {\n    this.stateFilters.querySelectorAll('a[data-state]').forEach(filterEl => {\n      if (this.states.indexOf(filterEl.dataset.state) > -1) {\n        callback(filterEl);\n      }\n    });\n  }\n\n  bindEvents() {\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\n    this.setDropdownWrapper = this.dropdownManager.setDropdown.bind(this.dropdownManager);\n    this.toggleClearSearchButtonWrapper = this.toggleClearSearchButton.bind(this);\n    this.handleInputPlaceholderWrapper = this.handleInputPlaceholder.bind(this);\n    this.handleInputVisualTokenWrapper = this.handleInputVisualToken.bind(this);\n    this.checkForEnterWrapper = this.checkForEnter.bind(this);\n    this.onClearSearchWrapper = this.onClearSearch.bind(this);\n    this.checkForBackspaceWrapper = this.checkForBackspace.call(this);\n    this.removeSelectedTokenKeydownWrapper = this.removeSelectedTokenKeydown.bind(this);\n    this.unselectEditTokensWrapper = this.unselectEditTokens.bind(this);\n    this.editTokenWrapper = this.editToken.bind(this);\n    this.tokenChange = this.tokenChange.bind(this);\n    this.addInputContainerFocusWrapper = this.addInputContainerFocus.bind(this);\n    this.removeInputContainerFocusWrapper = this.removeInputContainerFocus.bind(this);\n    this.onrecentSearchesItemSelectedWrapper = this.onrecentSearchesItemSelected.bind(this);\n    this.removeTokenWrapper = this.removeToken.bind(this);\n\n    this.filteredSearchInputForm.addEventListener('submit', this.handleFormSubmit);\n    this.filteredSearchInput.addEventListener('input', this.setDropdownWrapper);\n    this.filteredSearchInput.addEventListener('input', this.toggleClearSearchButtonWrapper);\n    this.filteredSearchInput.addEventListener('input', this.handleInputPlaceholderWrapper);\n    this.filteredSearchInput.addEventListener('input', this.handleInputVisualTokenWrapper);\n    this.filteredSearchInput.addEventListener('keydown', this.checkForEnterWrapper);\n    this.filteredSearchInput.addEventListener('keyup', this.checkForBackspaceWrapper);\n    this.filteredSearchInput.addEventListener('click', this.tokenChange);\n    this.filteredSearchInput.addEventListener('keyup', this.tokenChange);\n    this.filteredSearchInput.addEventListener('focus', this.addInputContainerFocusWrapper);\n    this.tokensContainer.addEventListener('click', this.removeTokenWrapper);\n    this.tokensContainer.addEventListener('click', this.editTokenWrapper);\n    this.clearSearchButton.addEventListener('click', this.onClearSearchWrapper);\n    document.addEventListener('click', this.unselectEditTokensWrapper);\n    document.addEventListener('click', this.removeInputContainerFocusWrapper);\n    document.addEventListener('keydown', this.removeSelectedTokenKeydownWrapper);\n    eventHub.$on('recentSearchesItemSelected', this.onrecentSearchesItemSelectedWrapper);\n\n    this.bindStateEvents();\n  }\n\n  unbindEvents() {\n    this.filteredSearchInputForm.removeEventListener('submit', this.handleFormSubmit);\n    this.filteredSearchInput.removeEventListener('input', this.setDropdownWrapper);\n    this.filteredSearchInput.removeEventListener('input', this.toggleClearSearchButtonWrapper);\n    this.filteredSearchInput.removeEventListener('input', this.handleInputPlaceholderWrapper);\n    this.filteredSearchInput.removeEventListener('input', this.handleInputVisualTokenWrapper);\n    this.filteredSearchInput.removeEventListener('keydown', this.checkForEnterWrapper);\n    this.filteredSearchInput.removeEventListener('keyup', this.checkForBackspaceWrapper);\n    this.filteredSearchInput.removeEventListener('click', this.tokenChange);\n    this.filteredSearchInput.removeEventListener('keyup', this.tokenChange);\n    this.filteredSearchInput.removeEventListener('focus', this.addInputContainerFocusWrapper);\n    this.tokensContainer.removeEventListener('click', this.removeTokenWrapper);\n    this.tokensContainer.removeEventListener('click', this.editTokenWrapper);\n    this.clearSearchButton.removeEventListener('click', this.onClearSearchWrapper);\n    document.removeEventListener('click', this.unselectEditTokensWrapper);\n    document.removeEventListener('click', this.removeInputContainerFocusWrapper);\n    document.removeEventListener('keydown', this.removeSelectedTokenKeydownWrapper);\n    eventHub.$off('recentSearchesItemSelected', this.onrecentSearchesItemSelectedWrapper);\n\n    this.unbindStateEvents();\n  }\n\n  checkForBackspace() {\n    let backspaceCount = 0;\n\n    // closure for keeping track of the number of backspace keystrokes\n    return e => {\n      // 8 = Backspace Key\n      // 46 = Delete Key\n      if (e.keyCode === 8 || e.keyCode === 46) {\n        const { lastVisualToken } = FilteredSearchVisualTokens.getLastVisualTokenBeforeInput();\n        const { tokenName, tokenValue } = DropdownUtils.getVisualTokenValues(lastVisualToken);\n        const canEdit = tokenName && this.canEdit && this.canEdit(tokenName, tokenValue);\n\n        if (this.filteredSearchInput.value === '' && lastVisualToken && canEdit) {\n          backspaceCount += 1;\n\n          if (backspaceCount === 2) {\n            backspaceCount = 0;\n            this.filteredSearchInput.value = FilteredSearchVisualTokens.getLastTokenPartial();\n            FilteredSearchVisualTokens.removeLastTokenPartial();\n          }\n        }\n\n        // Reposition dropdown so that it is aligned with cursor\n        this.dropdownManager.updateCurrentDropdownOffset();\n      } else {\n        backspaceCount = 0;\n      }\n    };\n  }\n\n  checkForEnter(e) {\n    if (e.keyCode === 38 || e.keyCode === 40) {\n      const { selectionStart } = this.filteredSearchInput;\n\n      e.preventDefault();\n      this.filteredSearchInput.setSelectionRange(selectionStart, selectionStart);\n    }\n\n    if (e.keyCode === 13) {\n      const dropdown = this.dropdownManager.mapping[this.dropdownManager.currentDropdown];\n      const dropdownEl = dropdown.element;\n      const activeElements = dropdownEl.querySelectorAll('.droplab-item-active');\n\n      e.preventDefault();\n\n      if (!activeElements.length) {\n        if (this.isHandledAsync) {\n          e.stopImmediatePropagation();\n\n          this.filteredSearchInput.blur();\n          this.dropdownManager.resetDropdowns();\n        } else {\n          // Prevent droplab from opening dropdown\n          this.dropdownManager.destroyDroplab();\n        }\n\n        this.search();\n      }\n    }\n  }\n\n  addInputContainerFocus() {\n    addClassIfElementExists(this.filteredSearchInput.closest('.filtered-search-box'), 'focus');\n  }\n\n  removeInputContainerFocus(e) {\n    const inputContainer = this.filteredSearchInput.closest('.filtered-search-box');\n    const isElementInFilteredSearch = inputContainer && inputContainer.contains(e.target);\n    const isElementInDynamicFilterDropdown = e.target.closest('.filter-dropdown') !== null;\n    const isElementInStaticFilterDropdown = e.target.closest('ul[data-dropdown]') !== null;\n\n    if (\n      !isElementInFilteredSearch &&\n      !isElementInDynamicFilterDropdown &&\n      !isElementInStaticFilterDropdown &&\n      inputContainer\n    ) {\n      inputContainer.classList.remove('focus');\n    }\n  }\n\n  removeToken(e) {\n    const removeButtonSelected = e.target.closest('.remove-token');\n\n    if (removeButtonSelected) {\n      e.preventDefault();\n      // Prevent editToken from being triggered after token is removed\n      e.stopImmediatePropagation();\n\n      const button = e.target.closest('.selectable');\n      FilteredSearchVisualTokens.selectToken(button, true);\n      this.removeSelectedToken();\n    }\n  }\n\n  unselectEditTokens(e) {\n    const inputContainer = this.container.querySelector('.filtered-search-box');\n    const isElementInFilteredSearch = inputContainer && inputContainer.contains(e.target);\n    const isElementInFilterDropdown = e.target.closest('.filter-dropdown') !== null;\n    const isElementTokensContainer = e.target.classList.contains('tokens-container');\n\n    if ((!isElementInFilteredSearch && !isElementInFilterDropdown) || isElementTokensContainer) {\n      FilteredSearchVisualTokens.moveInputToTheRight();\n      this.dropdownManager.resetDropdowns();\n    }\n  }\n\n  editToken(e) {\n    const token = e.target.closest('.js-visual-token');\n    const sanitizedTokenName = token && token.querySelector('.name').textContent.trim();\n    const canEdit = this.canEdit && this.canEdit(sanitizedTokenName);\n\n    if (token && canEdit) {\n      e.preventDefault();\n      e.stopPropagation();\n      FilteredSearchVisualTokens.editToken(token);\n      this.tokenChange();\n    }\n  }\n\n  toggleClearSearchButton() {\n    const query = DropdownUtils.getSearchQuery();\n    const hidden = 'hidden';\n    const hasHidden = this.clearSearchButton.classList.contains(hidden);\n\n    if (query.length === 0 && !hasHidden) {\n      this.clearSearchButton.classList.add(hidden);\n    } else if (query.length && hasHidden) {\n      this.clearSearchButton.classList.remove(hidden);\n    }\n  }\n\n  handleInputPlaceholder() {\n    const query = DropdownUtils.getSearchQuery();\n    const placeholder = 'Search or filter results...';\n    const currentPlaceholder = this.filteredSearchInput.placeholder;\n\n    if (query.length === 0 && currentPlaceholder !== placeholder) {\n      this.filteredSearchInput.placeholder = placeholder;\n    } else if (query.length > 0 && currentPlaceholder !== '') {\n      this.filteredSearchInput.placeholder = '';\n    }\n  }\n\n  removeSelectedTokenKeydown(e) {\n    // 8 = Backspace Key\n    // 46 = Delete Key\n    if (e.keyCode === 8 || e.keyCode === 46) {\n      this.removeSelectedToken();\n    }\n  }\n\n  removeSelectedToken() {\n    FilteredSearchVisualTokens.removeSelectedToken();\n    this.handleInputPlaceholder();\n    this.toggleClearSearchButton();\n    this.dropdownManager.updateCurrentDropdownOffset();\n  }\n\n  onClearSearch(e) {\n    e.preventDefault();\n    this.clearSearch();\n  }\n\n  clearSearch() {\n    this.filteredSearchInput.value = '';\n\n    const removeElements = [];\n\n    [].forEach.call(this.tokensContainer.children, t => {\n      let canClearToken = t.classList.contains('js-visual-token');\n\n      if (canClearToken) {\n        const { tokenName, tokenValue } = DropdownUtils.getVisualTokenValues(t);\n        canClearToken = this.canEdit && this.canEdit(tokenName, tokenValue);\n      }\n\n      if (canClearToken) {\n        removeElements.push(t);\n      }\n    });\n\n    removeElements.forEach(el => {\n      el.parentElement.removeChild(el);\n    });\n\n    this.clearSearchButton.classList.add('hidden');\n    this.handleInputPlaceholder();\n\n    this.dropdownManager.resetDropdowns();\n\n    if (this.isHandledAsync) {\n      this.search();\n    }\n  }\n\n  handleInputVisualToken() {\n    const input = this.filteredSearchInput;\n    const { tokens, searchToken } = this.tokenizer.processTokens(\n      input.value,\n      this.filteredSearchTokenKeys.getKeys(),\n    );\n    const { isLastVisualTokenValid } = FilteredSearchVisualTokens.getLastVisualTokenBeforeInput();\n\n    if (isLastVisualTokenValid) {\n      tokens.forEach(t => {\n        input.value = input.value.replace(`${t.key}:${t.symbol}${t.value}`, '');\n        FilteredSearchVisualTokens.addFilterVisualToken(t.key, `${t.symbol}${t.value}`, {\n          uppercaseTokenName: this.filteredSearchTokenKeys.shouldUppercaseTokenName(t.key),\n          capitalizeTokenValue: this.filteredSearchTokenKeys.shouldCapitalizeTokenValue(t.key),\n        });\n      });\n\n      const fragments = searchToken.split(':');\n      if (fragments.length > 1) {\n        const inputValues = fragments[0].split(' ');\n        const tokenKey = _.last(inputValues);\n\n        if (inputValues.length > 1) {\n          inputValues.pop();\n          const searchTerms = inputValues.join(' ');\n\n          input.value = input.value.replace(searchTerms, '');\n          FilteredSearchVisualTokens.addSearchVisualToken(searchTerms);\n        }\n\n        FilteredSearchVisualTokens.addFilterVisualToken(tokenKey, null, {\n          uppercaseTokenName: this.filteredSearchTokenKeys.shouldUppercaseTokenName(tokenKey),\n          capitalizeTokenValue: this.filteredSearchTokenKeys.shouldCapitalizeTokenValue(tokenKey),\n        });\n        input.value = input.value.replace(`${tokenKey}:`, '');\n      }\n    } else {\n      // Keep listening to token until we determine that the user is done typing the token value\n      const valueCompletedRegex = /([~%@]{0,1}\".+\")|([~%@]{0,1}'.+')|^((?![~%@]')(?![~%@]\")(?!')(?!\")).*/g;\n\n      if (searchToken.match(valueCompletedRegex) && input.value[input.value.length - 1] === ' ') {\n        const tokenKey = FilteredSearchVisualTokens.getLastTokenPartial();\n        FilteredSearchVisualTokens.addFilterVisualToken(searchToken, null, {\n          capitalizeTokenValue: this.filteredSearchTokenKeys.shouldCapitalizeTokenValue(tokenKey),\n        });\n\n        // Trim the last space as seen in the if statement above\n        input.value = input.value.replace(searchToken, '').trim();\n      }\n    }\n  }\n\n  handleFormSubmit(e) {\n    e.preventDefault();\n    this.search();\n  }\n\n  saveCurrentSearchQuery() {\n    // Don't save before we have fetched the already saved searches\n    this.fetchingRecentSearchesPromise\n      .then(() => {\n        const searchQuery = DropdownUtils.getSearchQuery();\n        if (searchQuery.length > 0) {\n          const resultantSearches = this.recentSearchesStore.addRecentSearch(searchQuery);\n          this.recentSearchesService.save(resultantSearches);\n        }\n      })\n      .catch(() => {\n        // https://gitlab.com/gitlab-org/gitlab-ce/issues/30821\n      });\n  }\n\n  // allows for modifying params array when a param can't be included in the URL (e.g. Service Desk)\n  getAllParams(urlParams) {\n    return this.modifyUrlParams ? this.modifyUrlParams(urlParams) : urlParams;\n  }\n\n  loadSearchParamsFromURL() {\n    const urlParams = getUrlParamsArray();\n    const params = this.getAllParams(urlParams);\n    const usernameParams = this.getUsernameParams();\n    let hasFilteredSearch = false;\n\n    params.forEach(p => {\n      const split = p.split('=');\n      const keyParam = decodeURIComponent(split[0]);\n      const value = split[1];\n\n      // Check if it matches edge conditions listed in this.filteredSearchTokenKeys\n      const condition = this.filteredSearchTokenKeys.searchByConditionUrl(p);\n\n      if (condition) {\n        hasFilteredSearch = true;\n        const canEdit = this.canEdit && this.canEdit(condition.tokenKey);\n        FilteredSearchVisualTokens.addFilterVisualToken(condition.tokenKey, condition.value, {\n          canEdit,\n        });\n      } else {\n        // Sanitize value since URL converts spaces into +\n        // Replace before decode so that we know what was originally + versus the encoded +\n        const sanitizedValue = value ? decodeURIComponent(value.replace(/\\+/g, ' ')) : value;\n        const match = this.filteredSearchTokenKeys.searchByKeyParam(keyParam);\n\n        if (match) {\n          // Use lastIndexOf because the token key is allowed to contain underscore\n          // e.g. 'my_reaction' is the token key of 'my_reaction_emoji'\n          const lastIndexOf = keyParam.lastIndexOf('_');\n          let sanitizedKey = lastIndexOf !== -1 ? keyParam.slice(0, lastIndexOf) : keyParam;\n          // Replace underscore with hyphen in the sanitizedkey.\n          // e.g. 'my_reaction' => 'my-reaction'\n          sanitizedKey = sanitizedKey.replace('_', '-');\n          const { symbol } = match;\n          let quotationsToUse = '';\n\n          if (sanitizedValue.indexOf(' ') !== -1) {\n            // Prefer \", but use ' if required\n            quotationsToUse = sanitizedValue.indexOf('\"') === -1 ? '\"' : \"'\";\n          }\n\n          hasFilteredSearch = true;\n          const canEdit = this.canEdit && this.canEdit(sanitizedKey, sanitizedValue);\n          const { uppercaseTokenName, capitalizeTokenValue } = match;\n          FilteredSearchVisualTokens.addFilterVisualToken(\n            sanitizedKey,\n            `${symbol}${quotationsToUse}${sanitizedValue}${quotationsToUse}`,\n            {\n              canEdit,\n              uppercaseTokenName,\n              capitalizeTokenValue,\n            },\n          );\n        } else if (!match && keyParam === 'assignee_id') {\n          const id = parseInt(value, 10);\n          if (usernameParams[id]) {\n            hasFilteredSearch = true;\n            const tokenName = 'assignee';\n            const canEdit = this.canEdit && this.canEdit(tokenName);\n            FilteredSearchVisualTokens.addFilterVisualToken(tokenName, `@${usernameParams[id]}`, {\n              canEdit,\n            });\n          }\n        } else if (!match && keyParam === 'author_id') {\n          const id = parseInt(value, 10);\n          if (usernameParams[id]) {\n            hasFilteredSearch = true;\n            const tokenName = 'author';\n            const canEdit = this.canEdit && this.canEdit(tokenName);\n            FilteredSearchVisualTokens.addFilterVisualToken(tokenName, `@${usernameParams[id]}`, {\n              canEdit,\n            });\n          }\n        } else if (!match && keyParam === 'search') {\n          hasFilteredSearch = true;\n          this.filteredSearchInput.value = sanitizedValue;\n        }\n      }\n    });\n\n    this.saveCurrentSearchQuery();\n\n    if (hasFilteredSearch) {\n      this.clearSearchButton.classList.remove('hidden');\n      this.handleInputPlaceholder();\n    }\n  }\n\n  searchState(e) {\n    e.preventDefault();\n    const target = e.currentTarget;\n    // remove focus outline after click\n    target.blur();\n\n    const state = target.dataset && target.dataset.state;\n\n    if (state) {\n      this.search(state);\n    }\n  }\n\n  search(state = null) {\n    const paths = [];\n    const searchQuery = DropdownUtils.getSearchQuery();\n\n    this.saveCurrentSearchQuery();\n\n    const tokenKeys = this.filteredSearchTokenKeys.getKeys();\n    const { tokens, searchToken } = this.tokenizer.processTokens(searchQuery, tokenKeys);\n    const currentState = state || getParameterByName('state') || 'opened';\n    paths.push(`state=${currentState}`);\n\n    tokens.forEach(token => {\n      const condition = this.filteredSearchTokenKeys.searchByConditionKeyValue(\n        token.key,\n        token.value.toLowerCase(),\n      );\n      const tokenConfig = this.filteredSearchTokenKeys.searchByKey(token.key) || {};\n      const { param } = tokenConfig;\n\n      // Replace hyphen with underscore to use as request parameter\n      // e.g. 'my-reaction' => 'my_reaction'\n      const underscoredKey = token.key.replace('-', '_');\n      const keyParam = param ? `${underscoredKey}_${param}` : underscoredKey;\n      let tokenPath = '';\n\n      if (condition) {\n        tokenPath = condition.url;\n      } else {\n        let tokenValue = token.value;\n\n        if (tokenConfig.lowercaseValueOnSubmit) {\n          tokenValue = tokenValue.toLowerCase();\n        }\n\n        if (\n          (tokenValue[0] === \"'\" && tokenValue[tokenValue.length - 1] === \"'\") ||\n          (tokenValue[0] === '\"' && tokenValue[tokenValue.length - 1] === '\"')\n        ) {\n          tokenValue = tokenValue.slice(1, tokenValue.length - 1);\n        }\n\n        tokenPath = `${keyParam}=${encodeURIComponent(tokenValue)}`;\n      }\n\n      paths.push(tokenPath);\n    });\n\n    if (searchToken) {\n      const sanitized = searchToken\n        .split(' ')\n        .map(t => encodeURIComponent(t))\n        .join('+');\n      paths.push(`search=${sanitized}`);\n    }\n\n    const parameterizedUrl = `?scope=all&utf8=%E2%9C%93&${paths.join('&')}`;\n\n    if (this.updateObject) {\n      this.updateObject(parameterizedUrl);\n    } else {\n      visitUrl(parameterizedUrl);\n    }\n  }\n\n  getUsernameParams() {\n    const usernamesById = {};\n    try {\n      const attribute = this.filteredSearchInput.getAttribute('data-username-params');\n      JSON.parse(attribute).forEach(user => {\n        usernamesById[user.id] = user.username;\n      });\n    } catch (e) {\n      // do nothing\n    }\n    return usernamesById;\n  }\n\n  tokenChange() {\n    const dropdown = this.dropdownManager.mapping[this.dropdownManager.currentDropdown];\n\n    if (dropdown) {\n      const currentDropdownRef = dropdown.reference;\n\n      this.setDropdownWrapper();\n      currentDropdownRef.dispatchInputEvent();\n    }\n  }\n\n  onrecentSearchesItemSelected(text) {\n    this.clearSearch();\n    this.filteredSearchInput.value = text;\n    this.filteredSearchInput.dispatchEvent(new CustomEvent('input'));\n    this.search();\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  canEdit() {\n    return true;\n  }\n}\n","import FilteredSearchManager from '~/filtered_search/filtered_search_manager';\n\nexport default ({\n  page,\n  filteredSearchTokenKeys,\n  isGroup,\n  isGroupAncestor,\n  isGroupDecendent,\n  stateFiltersSelector,\n}) => {\n  const filteredSearchEnabled = FilteredSearchManager && document.querySelector('.filtered-search');\n  if (filteredSearchEnabled) {\n    const filteredSearchManager = new FilteredSearchManager({\n      page,\n      isGroup,\n      isGroupAncestor,\n      isGroupDecendent,\n      filteredSearchTokenKeys,\n      stateFiltersSelector,\n    });\n    filteredSearchManager.setup();\n  }\n};\n","/* eslint-disable import/prefer-default-export  */\n\nexport const FILTERED_SEARCH = {\n  MERGE_REQUESTS: 'merge_requests',\n  ISSUES: 'issues',\n  ADMIN_RUNNERS: 'admin/runners',\n};\n","import Mousetrap from 'mousetrap';\nimport findAndFollowLink from '../../lib/utils/navigation_utility';\nimport Shortcuts from './shortcuts';\n\nexport default class ShortcutsNavigation extends Shortcuts {\n  constructor() {\n    super();\n\n    Mousetrap.bind('g p', () => findAndFollowLink('.shortcuts-project'));\n    Mousetrap.bind('g v', () => findAndFollowLink('.shortcuts-project-activity'));\n    Mousetrap.bind('g r', () => findAndFollowLink('.shortcuts-project-releases'));\n    Mousetrap.bind('g f', () => findAndFollowLink('.shortcuts-tree'));\n    Mousetrap.bind('g c', () => findAndFollowLink('.shortcuts-commits'));\n    Mousetrap.bind('g j', () => findAndFollowLink('.shortcuts-builds'));\n    Mousetrap.bind('g n', () => findAndFollowLink('.shortcuts-network'));\n    Mousetrap.bind('g d', () => findAndFollowLink('.shortcuts-repository-charts'));\n    Mousetrap.bind('g i', () => findAndFollowLink('.shortcuts-issues'));\n    Mousetrap.bind('g b', () => findAndFollowLink('.shortcuts-issue-boards'));\n    Mousetrap.bind('g m', () => findAndFollowLink('.shortcuts-merge_requests'));\n    Mousetrap.bind('g w', () => findAndFollowLink('.shortcuts-wiki'));\n    Mousetrap.bind('g s', () => findAndFollowLink('.shortcuts-snippets'));\n    Mousetrap.bind('g k', () => findAndFollowLink('.shortcuts-kubernetes'));\n    Mousetrap.bind('g e', () => findAndFollowLink('.shortcuts-environments'));\n    Mousetrap.bind('g l', () => findAndFollowLink('.shortcuts-metrics'));\n    Mousetrap.bind('i', () => findAndFollowLink('.shortcuts-new-issue'));\n\n    this.enabledHelp.push('.hidden-shortcut.project');\n  }\n}\n","import $ from 'jquery';\nimport AccessorUtilities from './lib/utils/accessor';\n\nexport default class ProjectSelectComboButton {\n  constructor(select) {\n    this.projectSelectInput = $(select);\n    this.newItemBtn = $('.new-project-item-link');\n    this.resourceType = this.newItemBtn.data('type');\n    this.resourceLabel = this.newItemBtn.data('label');\n    this.formattedText = this.deriveTextVariants();\n    this.groupId = this.projectSelectInput.data('groupId');\n    this.bindEvents();\n    this.initLocalStorage();\n  }\n\n  bindEvents() {\n    this.projectSelectInput\n      .siblings('.new-project-item-select-button')\n      .on('click', e => this.openDropdown(e));\n\n    this.newItemBtn.on('click', e => {\n      if (!this.getProjectFromLocalStorage()) {\n        e.preventDefault();\n        this.openDropdown(e);\n      }\n    });\n\n    this.projectSelectInput.on('change', () => this.selectProject());\n  }\n\n  initLocalStorage() {\n    const localStorageIsSafe = AccessorUtilities.isLocalStorageAccessSafe();\n\n    if (localStorageIsSafe) {\n      this.localStorageKey = [\n        'group',\n        this.groupId,\n        this.formattedText.localStorageItemType,\n        'recent-project',\n      ].join('-');\n      this.setBtnTextFromLocalStorage();\n    }\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  openDropdown(event) {\n    $(event.currentTarget)\n      .siblings('.project-item-select')\n      .select2('open');\n  }\n\n  selectProject() {\n    const selectedProjectData = JSON.parse(this.projectSelectInput.val());\n    const projectUrl = `${selectedProjectData.url}/${this.projectSelectInput.data('relativePath')}`;\n    const projectName = selectedProjectData.name;\n\n    const projectMeta = {\n      url: projectUrl,\n      name: projectName,\n    };\n\n    this.setNewItemBtnAttributes(projectMeta);\n    this.setProjectInLocalStorage(projectMeta);\n  }\n\n  setBtnTextFromLocalStorage() {\n    const cachedProjectData = this.getProjectFromLocalStorage();\n\n    this.setNewItemBtnAttributes(cachedProjectData);\n  }\n\n  setNewItemBtnAttributes(project) {\n    if (project) {\n      this.newItemBtn.attr('href', project.url);\n      this.newItemBtn.text(`${this.formattedText.defaultTextPrefix} in ${project.name}`);\n    } else {\n      this.newItemBtn.text(`Select project to create ${this.formattedText.presetTextSuffix}`);\n    }\n  }\n\n  getProjectFromLocalStorage() {\n    const projectString = localStorage.getItem(this.localStorageKey);\n\n    return JSON.parse(projectString);\n  }\n\n  setProjectInLocalStorage(projectMeta) {\n    const projectString = JSON.stringify(projectMeta);\n\n    localStorage.setItem(this.localStorageKey, projectString);\n  }\n\n  deriveTextVariants() {\n    const defaultTextPrefix = this.resourceLabel;\n\n    // the trailing slice call depluralizes each of these strings (e.g. new-issues -> new-issue)\n    const localStorageItemType = `new-${this.resourceType\n      .split('_')\n      .join('-')\n      .slice(0, -1)}`;\n    const presetTextSuffix = this.resourceType\n      .split('_')\n      .join(' ')\n      .slice(0, -1);\n\n    return {\n      localStorageItemType, // new-issue / new-merge-request\n      defaultTextPrefix, // New issue / New merge request\n      presetTextSuffix, // issue / merge request\n    };\n  }\n}\n","/* eslint-disable func-names, no-var, object-shorthand, one-var, no-else-return */\n\nimport $ from 'jquery';\nimport Api from './api';\nimport ProjectSelectComboButton from './project_select_combo_button';\n\nexport default function projectSelect() {\n  $('.ajax-project-select').each(function(i, select) {\n    var placeholder;\n    const simpleFilter = $(select).data('simpleFilter') || false;\n    this.groupId = $(select).data('groupId');\n    this.includeGroups = $(select).data('includeGroups');\n    this.allProjects = $(select).data('allProjects') || false;\n    this.orderBy = $(select).data('orderBy') || 'id';\n    this.withIssuesEnabled = $(select).data('withIssuesEnabled');\n    this.withMergeRequestsEnabled = $(select).data('withMergeRequestsEnabled');\n    this.withShared =\n      $(select).data('withShared') === undefined ? true : $(select).data('withShared');\n    this.includeProjectsInSubgroups = $(select).data('includeProjectsInSubgroups') || false;\n    this.allowClear = $(select).data('allowClear') || false;\n\n    placeholder = 'Search for project';\n    if (this.includeGroups) {\n      placeholder += ' or group';\n    }\n\n    $(select).select2({\n      placeholder: placeholder,\n      minimumInputLength: 0,\n      query: (function(_this) {\n        return function(query) {\n          var finalCallback, projectsCallback;\n          finalCallback = function(projects) {\n            var data;\n            data = {\n              results: projects,\n            };\n            return query.callback(data);\n          };\n          if (_this.includeGroups) {\n            projectsCallback = function(projects) {\n              var groupsCallback;\n              groupsCallback = function(groups) {\n                var data;\n                data = groups.concat(projects);\n                return finalCallback(data);\n              };\n              return Api.groups(query.term, {}, groupsCallback);\n            };\n          } else {\n            projectsCallback = finalCallback;\n          }\n          if (_this.groupId) {\n            return Api.groupProjects(\n              _this.groupId,\n              query.term,\n              {\n                with_issues_enabled: _this.withIssuesEnabled,\n                with_merge_requests_enabled: _this.withMergeRequestsEnabled,\n                with_shared: _this.withShared,\n                include_subgroups: _this.includeProjectsInSubgroups,\n              },\n              projectsCallback,\n            );\n          } else {\n            return Api.projects(\n              query.term,\n              {\n                order_by: _this.orderBy,\n                with_issues_enabled: _this.withIssuesEnabled,\n                with_merge_requests_enabled: _this.withMergeRequestsEnabled,\n                membership: !_this.allProjects,\n              },\n              projectsCallback,\n            );\n          }\n        };\n      })(this),\n      id: function(project) {\n        if (simpleFilter) return project.id;\n        return JSON.stringify({\n          name: project.name,\n          url: project.web_url,\n        });\n      },\n      text: function(project) {\n        return project.name_with_namespace || project.name;\n      },\n\n      initSelection: function(el, callback) {\n        return Api.project(el.val()).then(({ data }) => callback(data));\n      },\n\n      allowClear: this.allowClear,\n\n      dropdownCssClass: 'ajax-project-dropdown',\n    });\n    if (simpleFilter) return select;\n    return new ProjectSelectComboButton(select);\n  });\n}\n","/* eslint-disable func-names, no-var, no-return-assign, one-var, object-shorthand, vars-on-top */\n\nimport $ from 'jquery';\nimport Cookies from 'js-cookie';\nimport { __ } from '~/locale';\nimport { visitUrl } from '~/lib/utils/url_utility';\nimport axios from '~/lib/utils/axios_utils';\nimport flash from '~/flash';\nimport projectSelect from '../../project_select';\n\nexport default class Project {\n  constructor() {\n    const $cloneOptions = $('ul.clone-options-dropdown');\n    const $projectCloneField = $('#project_clone');\n    const $cloneBtnLabel = $('.js-git-clone-holder .js-clone-dropdown-label');\n    const mobileCloneField = document.querySelector(\n      '.js-mobile-git-clone .js-clone-dropdown-label',\n    );\n\n    const selectedCloneOption = $cloneBtnLabel.text().trim();\n    if (selectedCloneOption.length > 0) {\n      $(`a:contains('${selectedCloneOption}')`, $cloneOptions).addClass('is-active');\n    }\n\n    $('a', $cloneOptions).on('click', e => {\n      e.preventDefault();\n      const $this = $(e.currentTarget);\n      const url = $this.attr('href');\n      const cloneType = $this.data('cloneType');\n\n      $('.is-active', $cloneOptions).removeClass('is-active');\n      $(`a[data-clone-type=\"${cloneType}\"]`).each(function() {\n        const $el = $(this);\n        const activeText = $el.find('.dropdown-menu-inner-title').text();\n        const $container = $el.closest('.project-clone-holder');\n        const $label = $container.find('.js-clone-dropdown-label');\n\n        $el.toggleClass('is-active');\n        $label.text(activeText);\n      });\n\n      if (mobileCloneField) {\n        mobileCloneField.dataset.clipboardText = url;\n      } else {\n        $projectCloneField.val(url);\n      }\n      $('.js-git-empty .js-clone').text(url);\n    });\n    // Ref switcher\n    Project.initRefSwitcher();\n    $('.project-refs-select').on('change', function() {\n      return $(this)\n        .parents('form')\n        .submit();\n    });\n    $('.hide-no-ssh-message').on('click', function(e) {\n      Cookies.set('hide_no_ssh_message', 'false');\n      $(this)\n        .parents('.no-ssh-key-message')\n        .remove();\n      return e.preventDefault();\n    });\n    $('.hide-no-password-message').on('click', function(e) {\n      Cookies.set('hide_no_password_message', 'false');\n      $(this)\n        .parents('.no-password-message')\n        .remove();\n      return e.preventDefault();\n    });\n    $('.hide-auto-devops-implicitly-enabled-banner').on('click', function(e) {\n      const projectId = $(this).data('project-id');\n      const cookieKey = `hide_auto_devops_implicitly_enabled_banner_${projectId}`;\n      Cookies.set(cookieKey, 'false');\n      $(this)\n        .parents('.auto-devops-implicitly-enabled-banner')\n        .remove();\n      return e.preventDefault();\n    });\n    Project.projectSelectDropdown();\n  }\n\n  static projectSelectDropdown() {\n    projectSelect();\n    $('.project-item-select').on('click', e => Project.changeProject($(e.currentTarget).val()));\n  }\n\n  static changeProject(url) {\n    return (window.location = url);\n  }\n\n  static initRefSwitcher() {\n    var refListItem = document.createElement('li');\n    var refLink = document.createElement('a');\n\n    refLink.href = '#';\n\n    return $('.js-project-refs-dropdown').each(function() {\n      var $dropdown, selected;\n      $dropdown = $(this);\n      selected = $dropdown.data('selected');\n      return $dropdown.glDropdown({\n        data(term, callback) {\n          axios\n            .get($dropdown.data('refsUrl'), {\n              params: {\n                ref: $dropdown.data('ref'),\n                search: term,\n              },\n            })\n            .then(({ data }) => callback(data))\n            .catch(() => flash(__('An error occurred while getting projects')));\n        },\n        selectable: true,\n        filterable: true,\n        filterRemote: true,\n        filterByText: true,\n        inputFieldName: $dropdown.data('inputFieldName'),\n        fieldName: $dropdown.data('fieldName'),\n        renderRow: function(ref) {\n          var li = refListItem.cloneNode(false);\n\n          if (ref.header != null) {\n            li.className = 'dropdown-header';\n            li.textContent = ref.header;\n          } else {\n            var link = refLink.cloneNode(false);\n\n            if (ref === selected) {\n              link.className = 'is-active';\n            }\n\n            link.textContent = ref;\n            link.dataset.ref = ref;\n\n            li.appendChild(link);\n          }\n\n          return li;\n        },\n        id: function(obj, $el) {\n          return $el.attr('data-ref');\n        },\n        toggleLabel: function(obj, $el) {\n          return $el.text().trim();\n        },\n        clicked: function(options) {\n          const { e } = options;\n          e.preventDefault();\n          if ($('input[name=\"ref\"]').length) {\n            var $form = $dropdown.closest('form');\n\n            var $visit = $dropdown.data('visit');\n            var shouldVisit = $visit ? true : $visit;\n            var action = $form.attr('action');\n            var divider = action.indexOf('?') === -1 ? '?' : '&';\n            if (shouldVisit) {\n              visitUrl(`${action}${divider}${$form.serialize()}`);\n            }\n          }\n        },\n      });\n    });\n  }\n}\n","import initGkeDropdowns from '~/projects/gke_cluster_dropdowns';\nimport PersistentUserCallout from '../../persistent_user_callout';\nimport Project from './project';\nimport ShortcutsNavigation from '../../behaviors/shortcuts/shortcuts_navigation';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const { page } = document.body.dataset;\n  const newClusterViews = [\n    'projects:clusters:new',\n    'projects:clusters:create_gcp',\n    'projects:clusters:create_user',\n  ];\n\n  if (newClusterViews.indexOf(page) > -1) {\n    const callout = document.querySelector('.gcp-signup-offer');\n    if (callout) new PersistentUserCallout(callout); // eslint-disable-line no-new\n\n    initGkeDropdowns();\n  }\n\n  new Project(); // eslint-disable-line no-new\n  new ShortcutsNavigation(); // eslint-disable-line no-new\n});\n","/* eslint-disable import/prefer-default-export  */\n\nexport const ISSUABLE_INDEX = {\n  MERGE_REQUEST: 'merge_request_',\n  ISSUE: 'issue_',\n};\n","/* eslint-disable class-methods-use-this, no-new */\n\nimport $ from 'jquery';\nimport IssuableBulkUpdateActions from './issuable_bulk_update_actions';\nimport MilestoneSelect from './milestone_select';\nimport issueStatusSelect from './issue_status_select';\nimport subscriptionSelect from './subscription_select';\nimport LabelsSelect from './labels_select';\n\nconst HIDDEN_CLASS = 'hidden';\nconst DISABLED_CONTENT_CLASS = 'disabled-content';\nconst SIDEBAR_EXPANDED_CLASS = 'right-sidebar-expanded issuable-bulk-update-sidebar';\nconst SIDEBAR_COLLAPSED_CLASS = 'right-sidebar-collapsed issuable-bulk-update-sidebar';\n\nexport default class IssuableBulkUpdateSidebar {\n  constructor() {\n    this.initDomElements();\n    this.bindEvents();\n    this.initDropdowns();\n    this.setupBulkUpdateActions();\n  }\n\n  initDomElements() {\n    this.$page = $('.layout-page');\n    this.$sidebar = $('.right-sidebar');\n    this.$sidebarInnerContainer = this.$sidebar.find('.issuable-sidebar');\n    this.$bulkEditCancelBtn = $('.js-bulk-update-menu-hide');\n    this.$bulkEditSubmitBtn = $('.update-selected-issues');\n    this.$bulkUpdateEnableBtn = $('.js-bulk-update-toggle');\n    this.$otherFilters = $('.issues-other-filters');\n    this.$checkAllContainer = $('.check-all-holder');\n    this.$issueChecks = $('.issue-check');\n    this.$issuesList = $('.selected-issuable');\n    this.$issuableIdsInput = $('#update_issuable_ids');\n  }\n\n  bindEvents() {\n    this.$bulkUpdateEnableBtn.on('click', e => this.toggleBulkEdit(e, true));\n    this.$bulkEditCancelBtn.on('click', e => this.toggleBulkEdit(e, false));\n    this.$checkAllContainer.on('click', e => this.selectAll(e));\n    this.$issuesList.on('change', () => this.updateFormState());\n    this.$bulkEditSubmitBtn.on('click', () => this.prepForSubmit());\n    this.$checkAllContainer.on('click', () => this.updateFormState());\n  }\n\n  initDropdowns() {\n    new LabelsSelect();\n    new MilestoneSelect();\n    issueStatusSelect();\n    subscriptionSelect();\n  }\n\n  setupBulkUpdateActions() {\n    IssuableBulkUpdateActions.setOriginalDropdownData();\n  }\n\n  updateFormState() {\n    const noCheckedIssues = !$('.selected-issuable:checked').length;\n\n    this.toggleSubmitButtonDisabled(noCheckedIssues);\n    this.updateSelectedIssuableIds();\n\n    IssuableBulkUpdateActions.setOriginalDropdownData();\n  }\n\n  prepForSubmit() {\n    // if submit button is disabled, submission is blocked. This ensures we disable after\n    // form submission is carried out\n    setTimeout(() => this.$bulkEditSubmitBtn.disable());\n    this.updateSelectedIssuableIds();\n  }\n\n  toggleBulkEdit(e, enable) {\n    e.preventDefault();\n\n    this.toggleSidebarDisplay(enable);\n    this.toggleBulkEditButtonDisabled(enable);\n    this.toggleOtherFiltersDisabled(enable);\n    this.toggleCheckboxDisplay(enable);\n  }\n\n  updateSelectedIssuableIds() {\n    this.$issuableIdsInput.val(IssuableBulkUpdateSidebar.getCheckedIssueIds());\n  }\n\n  selectAll() {\n    const checkAllButtonState = this.$checkAllContainer.find('input').prop('checked');\n\n    this.$issuesList.prop('checked', checkAllButtonState);\n  }\n\n  toggleSidebarDisplay(show) {\n    this.$page.toggleClass(SIDEBAR_EXPANDED_CLASS, show);\n    this.$page.toggleClass(SIDEBAR_COLLAPSED_CLASS, !show);\n    this.$sidebarInnerContainer.toggleClass(HIDDEN_CLASS, !show);\n    this.$sidebar.toggleClass(SIDEBAR_EXPANDED_CLASS, show);\n    this.$sidebar.toggleClass(SIDEBAR_COLLAPSED_CLASS, !show);\n  }\n\n  toggleBulkEditButtonDisabled(disable) {\n    if (disable) {\n      this.$bulkUpdateEnableBtn.disable();\n    } else {\n      this.$bulkUpdateEnableBtn.enable();\n    }\n  }\n\n  toggleCheckboxDisplay(show) {\n    this.$checkAllContainer.toggleClass(HIDDEN_CLASS, !show);\n    this.$issueChecks.toggleClass(HIDDEN_CLASS, !show);\n  }\n\n  toggleOtherFiltersDisabled(disable) {\n    this.$otherFilters.toggleClass(DISABLED_CONTENT_CLASS, disable);\n  }\n\n  toggleSubmitButtonDisabled(disable) {\n    if (disable) {\n      this.$bulkEditSubmitBtn.disable();\n    } else {\n      this.$bulkEditSubmitBtn.enable();\n    }\n  }\n\n  static getCheckedIssueIds() {\n    const $checkedIssues = $('.selected-issuable:checked');\n\n    if ($checkedIssues.length > 0) {\n      return $.map($checkedIssues, value => $(value).data('id'));\n    }\n\n    return [];\n  }\n}\n","import $ from 'jquery';\n\nexport default function issueStatusSelect() {\n  $('.js-issue-status').each((i, el) => {\n    const fieldName = $(el).data('fieldName');\n    return $(el).glDropdown({\n      selectable: true,\n      fieldName,\n      toggleLabel(selected, element, instance) {\n        let label = 'Author';\n        const $item = instance.dropdown.find('.is-active');\n        if ($item.length) {\n          label = $item.text();\n        }\n        return label;\n      },\n      clicked(options) {\n        return options.e.preventDefault();\n      },\n      id(obj, element) {\n        return $(element).data('id');\n      },\n    });\n  });\n}\n","import $ from 'jquery';\n\nexport default function subscriptionSelect() {\n  $('.js-subscription-event').each((i, element) => {\n    const fieldName = $(element).data('fieldName');\n\n    return $(element).glDropdown({\n      selectable: true,\n      fieldName,\n      toggleLabel(selected, el, instance) {\n        let label = 'Subscription';\n        const $item = instance.dropdown.find('.is-active');\n        if ($item.length) {\n          label = $item.text();\n        }\n        return label;\n      },\n      clicked(options) {\n        return options.e.preventDefault();\n      },\n      id(obj, el) {\n        return $(el).data('id');\n      },\n    });\n  });\n}\n","import $ from 'jquery';\nimport axios from './lib/utils/axios_utils';\nimport flash from './flash';\nimport { __ } from './locale';\nimport IssuableBulkUpdateSidebar from './issuable_bulk_update_sidebar';\nimport IssuableBulkUpdateActions from './issuable_bulk_update_actions';\n\nexport default class IssuableIndex {\n  constructor(pagePrefix) {\n    this.initBulkUpdate(pagePrefix);\n    IssuableIndex.resetIncomingEmailToken();\n  }\n  initBulkUpdate(pagePrefix) {\n    const userCanBulkUpdate = $('.issues-bulk-update').length > 0;\n    const alreadyInitialized = !!this.bulkUpdateSidebar;\n\n    if (userCanBulkUpdate && !alreadyInitialized) {\n      IssuableBulkUpdateActions.init({\n        prefixId: pagePrefix,\n      });\n\n      this.bulkUpdateSidebar = new IssuableBulkUpdateSidebar();\n    }\n  }\n\n  static resetIncomingEmailToken() {\n    const $resetToken = $('.incoming-email-token-reset');\n\n    $resetToken.on('click', e => {\n      e.preventDefault();\n\n      $resetToken.text('resetting...');\n\n      axios\n        .put($resetToken.attr('href'))\n        .then(({ data }) => {\n          $('#issuable_email')\n            .val(data.new_address)\n            .focus();\n\n          $resetToken.text('reset it');\n        })\n        .catch(() => {\n          flash(__('There was an error when reseting email token.'));\n\n          $resetToken.text('reset it');\n        });\n    });\n  }\n}\n","/* eslint-disable consistent-return, func-names, array-callback-return, prefer-arrow-callback, no-unused-vars */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport axios from './lib/utils/axios_utils';\nimport Flash from './flash';\n\nexport default {\n  init({ container, form, issues, prefixId } = {}) {\n    this.prefixId = prefixId || 'issue_';\n    this.form = form || this.getElement('.bulk-update');\n    this.$labelDropdown = this.form.find('.js-label-select');\n    this.issues = issues || this.getElement('.issues-list .issue');\n    this.willUpdateLabels = false;\n    this.bindEvents();\n  },\n\n  bindEvents() {\n    return this.form.off('submit').on('submit', this.onFormSubmit.bind(this));\n  },\n\n  onFormSubmit(e) {\n    e.preventDefault();\n    return this.submit();\n  },\n\n  submit() {\n    axios[this.form.attr('method')](this.form.attr('action'), this.getFormDataAsObject())\n      .then(() => window.location.reload())\n      .catch(() => this.onFormSubmitFailure());\n  },\n\n  onFormSubmitFailure() {\n    this.form.find('[type=\"submit\"]').enable();\n    return new Flash('Issue update failed');\n  },\n\n  getSelectedIssues() {\n    return this.issues.has('.selected-issuable:checked');\n  },\n\n  getLabelsFromSelection() {\n    const labels = [];\n    this.getSelectedIssues().map(function() {\n      const labelsData = $(this).data('labels');\n      if (labelsData) {\n        return labelsData.map(function(labelId) {\n          if (labels.indexOf(labelId) === -1) {\n            return labels.push(labelId);\n          }\n        });\n      }\n    });\n    return labels;\n  },\n\n  /**\n   * Will return only labels that were marked previously and the user has unmarked\n   * @return {Array} Label IDs\n   */\n\n  getUnmarkedIndeterminedLabels() {\n    const result = [];\n    const labelsToKeep = this.$labelDropdown.data('indeterminate');\n\n    this.getLabelsFromSelection().forEach(id => {\n      if (labelsToKeep.indexOf(id) === -1) {\n        result.push(id);\n      }\n    });\n\n    return result;\n  },\n\n  /**\n   * Simple form serialization, it will return just what we need\n   * Returns key/value pairs from form data\n   */\n\n  getFormDataAsObject() {\n    const formData = {\n      update: {\n        state_event: this.form.find('input[name=\"update[state_event]\"]').val(),\n        // For Merge Requests\n        assignee_id: this.form.find('input[name=\"update[assignee_id]\"]').val(),\n        // For Issues\n        assignee_ids: [this.form.find('input[name=\"update[assignee_ids][]\"]').val()],\n        milestone_id: this.form.find('input[name=\"update[milestone_id]\"]').val(),\n        issuable_ids: this.form.find('input[name=\"update[issuable_ids]\"]').val(),\n        subscription_event: this.form.find('input[name=\"update[subscription_event]\"]').val(),\n        add_label_ids: [],\n        remove_label_ids: [],\n      },\n    };\n    if (this.willUpdateLabels) {\n      formData.update.add_label_ids = this.$labelDropdown.data('marked');\n      formData.update.remove_label_ids = this.$labelDropdown.data('unmarked');\n    }\n    return formData;\n  },\n\n  setOriginalDropdownData() {\n    const $labelSelect = $('.bulk-update .js-label-select');\n    $labelSelect.data('common', this.getOriginalCommonIds());\n    $labelSelect.data('marked', this.getOriginalMarkedIds());\n    $labelSelect.data('indeterminate', this.getOriginalIndeterminateIds());\n  },\n\n  // From issuable's initial bulk selection\n  getOriginalCommonIds() {\n    const labelIds = [];\n\n    this.getElement('.selected-issuable:checked').each((i, el) => {\n      labelIds.push(this.getElement(`#${this.prefixId}${el.dataset.id}`).data('labels'));\n    });\n    return _.intersection.apply(this, labelIds);\n  },\n\n  // From issuable's initial bulk selection\n  getOriginalMarkedIds() {\n    const labelIds = [];\n    this.getElement('.selected-issuable:checked').each((i, el) => {\n      labelIds.push(this.getElement(`#${this.prefixId}${el.dataset.id}`).data('labels'));\n    });\n    return _.intersection.apply(this, labelIds);\n  },\n\n  // From issuable's initial bulk selection\n  getOriginalIndeterminateIds() {\n    const uniqueIds = [];\n    const labelIds = [];\n    let issuableLabels = [];\n\n    // Collect unique label IDs for all checked issues\n    this.getElement('.selected-issuable:checked').each((i, el) => {\n      issuableLabels = this.getElement(`#${this.prefixId}${el.dataset.id}`).data('labels');\n      issuableLabels.forEach(labelId => {\n        // Store unique IDs\n        if (uniqueIds.indexOf(labelId) === -1) {\n          uniqueIds.push(labelId);\n        }\n      });\n      // Store array of IDs per issuable\n      labelIds.push(issuableLabels);\n    });\n    // Add uniqueIds to add it as argument for _.intersection\n    labelIds.unshift(uniqueIds);\n    // Return IDs that are present but not in all selected issueables\n    return _.difference(uniqueIds, _.intersection.apply(this, labelIds));\n  },\n\n  getElement(selector) {\n    this.scopeEl = this.scopeEl || $('.content');\n    return this.scopeEl.find(selector);\n  },\n};\n"],"sourceRoot":""}