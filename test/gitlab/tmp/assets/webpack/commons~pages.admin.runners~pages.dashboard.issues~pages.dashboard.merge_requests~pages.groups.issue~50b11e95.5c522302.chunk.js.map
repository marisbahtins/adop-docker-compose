{"version":3,"sources":["webpack:///./filtered_search/issuable_filtered_search_token_keys.js","webpack:///./filtered_search/event_hub.js","webpack:///./filtered_search/components/recent_searches_dropdown_content.vue?2a16","webpack:///filtered_search/components/recent_searches_dropdown_content.vue","webpack:///./filtered_search/components/recent_searches_dropdown_content.vue","webpack:///./filtered_search/components/recent_searches_dropdown_content.vue?1dc7","webpack:///./filtered_search/recent_searches_root.js","webpack:///./filtered_search/stores/recent_searches_store.js","webpack:///./filtered_search/services/recent_searches_service_error.js","webpack:///./filtered_search/services/recent_searches_service.js","webpack:///./filtered_search/filtered_search_manager.js","webpack:///./pages/search/init_filtered_search.js","webpack:///./pages/constants.js"],"names":["_filtered_search_token_keys__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","tokenKeys","key","type","param","symbol","icon","tag","gon","current_user_id","push","IssuableFilteredSearchTokenKeys","FilteredSearchTokenKeys","url","tokenKey","value","event_hub","Vue","components_recent_searches_dropdown_contentvue_type_script_lang_js_","name","props","items","Array","required","isLocalStorageAvailable","Boolean","default","allowedKeys","computed","processedItems","_this","this","map","item","_FilteredSearchTokeni","filtered_search_tokenizer","processTokens","tokens","searchToken","text","token","prefix","concat","suffix","hasItems","length","methods","onItemActivated","$emit","onRequestClearRecentSearches","e","stopPropagation","component","Object","componentNormalizer","_vm","_h","$createElement","_c","_self","_l","index","staticClass","attrs","on","click","$event","tokenIndex","_v","_s","options","__file","recent_searches_dropdown_content","RecentSearchesRoot","recentSearchesStore","recentSearchesService","wrapperElement","_classCallCheck","store","service","bindEvents","render","onRequestClearRecentSearchesWrapper","bind","eventHub","$on","$off","state","vm","el","components","RecentSearchesDropdownContent","data","template","resultantSearches","setRecentSearches","save","unbindEvents","$destroy","RecentSearchesStore","initialState","arguments","undefined","recent_searches_store_classCallCheck","assign","recentSearches","newSearch","trimmedSearches","search","trim","_","uniq","slice","RecentSearchesServiceError","message","recent_searches_service_error_classCallCheck","prototype","Error","RecentSearchesService","localStorageKey","recent_searches_service_classCallCheck","AccessorUtilities","isLocalStorageAccessSafe","isAvailable","error","Promise","reject","input","window","localStorage","getItem","searches","JSON","parse","err","resolve","setItem","stringify","FilteredSearchManager","_ref","page","_ref$isGroup","isGroup","_ref$isGroupAncestor","isGroupAncestor","_ref$isGroupDecendent","isGroupDecendent","_ref$filteredSearchTo","filteredSearchTokenKeys","_ref$stateFiltersSele","stateFiltersSelector","filtered_search_manager_classCallCheck","states","container","FilteredSearchContainer","filteredSearchInput","querySelector","filteredSearchInputForm","form","clearSearchButton","tokensContainer","recentsStorageKeyNames","issues","merge_requests","getKeys","searchHistoryDropdownElement","document","fullPath","dataset","recentSearchesKey","fetchingRecentSearchesPromise","fetch","catch","Flash","then","tokenizer","FilteredSearchTokenizer","dropdownManager","FilteredSearchDropdownManager","baseEndpoint","getAttribute","recentSearchesRoot","init","loadSearchParamsFromURL","setDropdown","cleanupWrapper","cleanup","addEventListener","removeEventListener","destroy","_this2","stateFilters","searchStateWrapper","searchState","applyToStateFilters","filterEl","_this3","callback","_this4","querySelectorAll","forEach","indexOf","handleFormSubmit","setDropdownWrapper","toggleClearSearchButtonWrapper","toggleClearSearchButton","handleInputPlaceholderWrapper","handleInputPlaceholder","handleInputVisualTokenWrapper","handleInputVisualToken","checkForEnterWrapper","checkForEnter","onClearSearchWrapper","onClearSearch","checkForBackspaceWrapper","checkForBackspace","call","removeSelectedTokenKeydownWrapper","removeSelectedTokenKeydown","unselectEditTokensWrapper","unselectEditTokens","editTokenWrapper","editToken","tokenChange","addInputContainerFocusWrapper","addInputContainerFocus","removeInputContainerFocusWrapper","removeInputContainerFocus","onrecentSearchesItemSelectedWrapper","onrecentSearchesItemSelected","removeTokenWrapper","removeToken","bindStateEvents","unbindStateEvents","_this5","backspaceCount","keyCode","lastVisualToken","FilteredSearchVisualTokens","getLastVisualTokenBeforeInput","_DropdownUtils$getVis","DropdownUtils","getVisualTokenValues","tokenName","tokenValue","canEdit","getLastTokenPartial","removeLastTokenPartial","updateCurrentDropdownOffset","selectionStart","preventDefault","setSelectionRange","activeElements","mapping","currentDropdown","element","isHandledAsync","stopImmediatePropagation","blur","resetDropdowns","destroyDroplab","addClassIfElementExists","closest","inputContainer","isElementInFilteredSearch","contains","target","isElementInDynamicFilterDropdown","isElementInStaticFilterDropdown","classList","remove","button","selectToken","removeSelectedToken","isElementInFilterDropdown","isElementTokensContainer","moveInputToTheRight","sanitizedTokenName","textContent","query","getSearchQuery","hasHidden","add","currentPlaceholder","placeholder","clearSearch","_this6","removeElements","children","t","canClearToken","_DropdownUtils$getVis2","parentElement","removeChild","_this7","_this$tokenizer$proce","isLastVisualTokenValid","replace","addFilterVisualToken","uppercaseTokenName","shouldUppercaseTokenName","capitalizeTokenValue","shouldCapitalizeTokenValue","fragments","split","inputValues","last","pop","searchTerms","join","addSearchVisualToken","match","_this8","searchQuery","addRecentSearch","urlParams","modifyUrlParams","_this9","getUrlParamsArray","params","getAllParams","usernameParams","getUsernameParams","hasFilteredSearch","p","keyParam","decodeURIComponent","condition","searchByConditionUrl","sanitizedValue","searchByKeyParam","lastIndexOf","sanitizedKey","quotationsToUse","id","parseInt","saveCurrentSearchQuery","currentTarget","_this10","paths","_this$tokenizer$proce2","currentState","getParameterByName","searchByConditionKeyValue","toLowerCase","tokenConfig","searchByKey","underscoredKey","tokenPath","lowercaseValueOnSubmit","encodeURIComponent","sanitized","parameterizedUrl","updateObject","visitUrl","usernamesById","attribute","user","username","dropdown","currentDropdownRef","reference","dispatchInputEvent","dispatchEvent","CustomEvent","_filtered_search_filtered_search_manager__WEBPACK_IMPORTED_MODULE_0__","__webpack_exports__","setup","d","FILTERED_SEARCH","MERGE_REQUESTS","ISSUES","ADMIN_RUNNERS"],"mappings":"sFAAA,IAAAA,EAAAC,EAAA,KAEaC,IAETC,IAAK,SACLC,KAAM,SACNC,MAAO,WACPC,OAAQ,IACRC,KAAM,SACNC,IAAK,YAGLL,IAAK,WACLC,KAAM,SACNC,MAAO,WACPC,OAAQ,IACRC,KAAM,OACNC,IAAK,cAGLL,IAAK,YACLC,KAAM,SACNC,MAAO,QACPC,OAAQ,IACRC,KAAM,QACNC,IAAK,eAGLL,IAAK,QACLC,KAAM,QACNC,MAAO,SACPC,OAAQ,IACRC,KAAM,SACNC,IAAK,WAILC,IAAIC,iBAENR,EAAUS,MACRR,IAAK,cACLC,KAAM,SACNC,MAAO,QACPC,OAAQ,GACRC,KAAM,WACNC,IAAK,UAIF,IA8DDI,EAAkC,IAAIC,IAC1CX,IA7DEC,IAAK,QACLC,KAAM,SACNC,MAAO,OACPC,OAAQ,QAMRQ,IAAK,mBACLC,SAAU,WACVC,MAAO,SAGPF,IAAK,kBACLC,SAAU,WACVC,MAAO,QAGPF,IAAK,uBACLC,SAAU,YACVC,MAAO,SAGPF,IAAK,sBACLC,SAAU,YACVC,MAAO,QAGPF,IAAK,8BACLC,SAAU,YACVC,MAAO,aAGPF,IAAK,6BACLC,SAAU,YACVC,MAAO,YAGPF,IAAK,oBACLC,SAAU,QACVC,MAAO,SAGPF,IAAK,mBACLC,SAAU,MACVC,MAAO,QAGPF,IAAK,yBACLC,SAAU,cACVC,MAAO,SAGPF,IAAK,wBACLC,SAAU,cACVC,MAAO,SAUIJ,6GCnHAK,EAAA,IAAIC,mBCFuNC,GCK1OC,KAAA,gCACAC,OACAC,OACAlB,KAAAmB,MACAC,UAAA,GAEAC,yBACArB,KAAAsB,QACAF,UAAA,EACAG,SAAA,GAEAC,aACAxB,KAAAmB,MACAC,UAAA,IAGAK,UACAC,eADA,WACA,IAAAC,EAAAC,KACA,OAAAA,KAAAV,MAAAW,IAAA,SAAAC,GAAA,IAAAC,EACAC,EAAA,EAAAC,cACAH,EACAH,EAAAH,aAFAU,EADAH,EACAG,OAAAC,EADAJ,EACAI,YAUA,OACAC,KAAAN,EACAI,OAPAA,EAAAL,IAAA,SAAAQ,GAAA,OACAC,OAAA,GAAAC,OAAAF,EAAAtC,IAAA,KACAyC,OAAA,GAAAD,OAAAF,EAAAnC,QAAAqC,OAAAF,EAAAzB,UAMAuB,kBAIAM,SApBA,WAqBA,OAAAb,KAAAV,MAAAwB,OAAA,IAGAC,SACAC,gBADA,SACAR,GACAvB,EAAAgC,MAAA,6BAAAT,IAEAU,6BAJA,SAIAC,GAEAA,EAAAC,kBAEAnC,EAAAgC,MAAA,wCC9CAI,EAAgBC,OAAAC,EAAA,EAAAD,CACdnC,ECRQ,WAAgB,IAAAqC,EAAAxB,KAAayB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAH,EAAA/B,wBAA2F+B,EAAA,SAAAG,EAAA,MAAAH,EAAAK,GAAAL,EAAA,wBAAAtB,EAAA4B,GAAmJ,OAAAH,EAAA,MAAgBxD,IAAA,mBAAA2D,IAAiCH,EAAA,UAAeI,YAAA,wCAAAC,OAA2D5D,KAAA,UAAgB6D,IAAKC,MAAA,SAAAC,GAAyBX,EAAAR,gBAAAd,EAAAM,UAAkCmB,EAAA,OAAAH,EAAAK,GAAA3B,EAAA,gBAAAO,EAAA2B,GAA4D,OAAAT,EAAA,QAAkBxD,IAAA,kBAAAiE,EAAAL,YAAA,2CAA0FJ,EAAA,QAAaI,YAAA,SAAmBP,EAAAa,GAAAb,EAAAc,GAAA7B,EAAAC,WAAAc,EAAAa,GAAA,KAAAV,EAAA,QAAwDI,YAAA,UAAoBP,EAAAa,GAAAb,EAAAc,GAAA7B,EAAAG,eAAmC,GAAAY,EAAAa,GAAA,KAAAV,EAAA,QAA4BI,YAAA,kDAA4DP,EAAAa,GAAA,eAAAb,EAAAc,GAAApC,EAAAK,aAAA,sBAAqEiB,EAAAa,GAAA,KAAAV,EAAA,MAAuBI,YAAA,YAAsBP,EAAAa,GAAA,KAAAV,EAAA,MAAAA,EAAA,UAAoCI,YAAA,uCAAAC,OAA0D5D,KAAA,UAAgB6D,IAAKC,MAAA,SAAAC,GAAyBX,EAAAN,6BAAAiB,OAA4CX,EAAAa,GAAA,mDAAAV,EAAA,OAAsEI,YAAA,uBAAiCP,EAAAa,GAAA,wCAAztCV,EAAA,OAA0DI,YAAA,uBAAiCP,EAAAa,GAAA,wEDWpL,EACA,KACA,KACA,MAIAhB,EAAAkB,QAAAC,OAAA,uCACe,IAAAC,EAAApB,oLEwCAqB,aAtDb,SAAAA,EAAYC,EAAqBC,EAAuBC,gGAAgBC,CAAA9C,KAAA0C,GACtE1C,KAAK+C,MAAQJ,EACb3C,KAAKgD,QAAUJ,EACf5C,KAAK6C,eAAiBA,wDAItB7C,KAAKiD,aACLjD,KAAKkD,8CAILlD,KAAKmD,oCAAsCnD,KAAKkB,6BAA6BkC,KAAKpD,MAElFqD,EAASC,IAAI,6BAA8BtD,KAAKmD,4EAIhDE,EAASE,KAAK,6BAA8BvD,KAAKmD,sEAG1C,IACCK,EAAUxD,KAAK+C,MAAfS,MACRxD,KAAKyD,GAAK,IAAIvE,WACZwE,GAAI1D,KAAK6C,eACTc,YACEC,iCAEFC,KALgB,WAMd,OAAOL,GAETM,SAAQ,wQAWV,IAAMC,EAAoB/D,KAAK+C,MAAMiB,sBACrChE,KAAKgD,QAAQiB,KAAKF,qCAIlB/D,KAAKkE,eACDlE,KAAKyD,IACPzD,KAAKyD,GAAGU,0NC3BCC,aAxBb,SAAAA,IAA4C,IAAhCC,EAAgCC,UAAAxD,OAAA,QAAAyD,IAAAD,UAAA,GAAAA,UAAA,MAAb1E,EAAa0E,UAAAxD,OAAA,EAAAwD,UAAA,QAAAC,+FAAAC,CAAAxE,KAAAoE,GAC1CpE,KAAKwD,MAAQlC,OAAOmD,QAEhBhF,yBAAyB,EACzBiF,kBACA9E,eAEFyE,kEAIYM,GAGd,OAFA3E,KAAKgE,mBAAmBW,GAAWhE,OAAOX,KAAKwD,MAAMkB,iBAE9C1E,KAAKwD,MAAMkB,2DAGa,IACzBE,GADyBN,UAAAxD,OAAA,QAAAyD,IAAAD,UAAA,GAAAA,UAAA,OACErE,IAAI,SAAA4E,GAAM,OAAIA,EAAOC,SAEtD,OADA9E,KAAKwD,MAAMkB,eAAiBK,IAAEC,KAAKJ,GAAiBK,MAAM,EAAG,GACtDjF,KAAKwD,MAAMkB,wDCvBhBQ,EACJ,SAAAA,EAAYC,gGAASC,CAAApF,KAAAkF,GACnBlF,KAAKZ,KAAO,6BACZY,KAAKmF,QAAUA,GAAW,0CAK9BD,EAA2BG,UAAYC,MAAMD,UAE9BH,0LC6BAK,aAnCb,SAAAA,IAA0D,IAA9CC,EAA8ClB,UAAAxD,OAAA,QAAAyD,IAAAD,UAAA,GAAAA,UAAA,GAA5B,wHAA4BmB,CAAAzF,KAAAuF,GACxDvF,KAAKwF,gBAAkBA,8DA8BvB,OAAOE,IAAkBC,gEA1BzB,IAAKJ,EAAsBK,cAAe,CACxC,IAAMC,EAAQ,IAAIX,EAClB,OAAOY,QAAQC,OAAOF,GAGxB,IAAMG,EAAQC,OAAOC,aAAaC,QAAQnG,KAAKwF,iBAE3CY,KACJ,GAAIJ,GAASA,EAAMlF,OAAS,EAC1B,IACEsF,EAAWC,KAAKC,MAAMN,GACtB,MAAOO,GACP,OAAOT,QAAQC,OAAOQ,GAI1B,OAAOT,QAAQU,QAAQJ,kCAGL,IAAfA,EAAe9B,UAAAxD,OAAA,QAAAyD,IAAAD,UAAA,GAAAA,UAAA,MACbiB,EAAsBK,eAE3BK,OAAOC,aAAaO,QAAQzG,KAAKwF,gBAAiBa,KAAKK,UAAUN,qRCfhDO,aACnB,SAAAA,EAAAC,GAOG,IANDC,EAMCD,EANDC,KAMCC,EAAAF,EALDG,eAKC,IAAAD,KAAAE,EAAAJ,EAJDK,uBAIC,IAAAD,KAAAE,EAAAN,EAHDO,wBAGC,IAAAD,KAAAE,EAAAR,EAFDS,+BAEC,IAAAD,EAFyBxI,IAEzBwI,EAAAE,EAAAV,EADDW,4BACC,IAAAD,EADsB,wBACtBA,+FAAAE,CAAAxH,KAAA2G,GACD3G,KAAK+G,QAAUA,EACf/G,KAAKiH,gBAAkBA,EACvBjH,KAAKmH,iBAAmBA,EACxBnH,KAAKyH,QAAU,SAAU,SAAU,SAAU,OAE7CzH,KAAK6G,KAAOA,EACZ7G,KAAK0H,UAAYC,IAAwBD,UACzC1H,KAAK4H,oBAAsB5H,KAAK0H,UAAUG,cAAc,oBACxD7H,KAAK8H,wBAA0B9H,KAAK4H,oBAAoBG,KACxD/H,KAAKgI,kBAAoBhI,KAAK0H,UAAUG,cAAc,iBACtD7H,KAAKiI,gBAAkBjI,KAAK0H,UAAUG,cAAc,qBACpD7H,KAAKqH,wBAA0BA,EAC/BrH,KAAKuH,qBAAuBA,EAC5BvH,KAAKkI,wBACHC,OAAQ,wBACRC,eAAgB,iCAGlBpI,KAAK2C,oBAAsB,IAAIyB,GAC7B3E,wBAAyB8F,EAAsBK,cAC/ChG,YAAaI,KAAKqH,wBAAwBgB,YAE5CrI,KAAKsI,6BAA+BC,SAASV,cAC3C,wCAEF,IAAMW,EAAWxI,KAAKsI,6BAClBtI,KAAKsI,6BAA6BG,QAAQD,SAC1C,UACEE,EAAiB,GAAA/H,OAAM6H,EAAN,KAAA7H,OAAkBX,KAAKkI,uBAAuBlI,KAAK6G,OAC1E7G,KAAK4C,sBAAwB,IAAI2C,EAAsBmD,0DAGjD,IAAA3I,EAAAC,KAENA,KAAK2I,8BAAgC3I,KAAK4C,sBACvCgG,QACAC,MAAM,SAAAhD,GACL,GAAmB,+BAAfA,EAAMzG,KAIV,OAFA,IAAI0J,IAAM,wDAIXC,KAAK,SAAA3C,GACJ,GAAKA,EAAL,CAMA,IAAMrC,EAAoBhE,EAAK4C,oBAAoBqB,kBACjDjE,EAAK4C,oBAAoBa,MAAMkB,eAAe/D,OAAOyF,IAEvDrG,EAAK6C,sBAAsBqB,KAAKF,MAGhC/D,KAAK4H,sBACP5H,KAAKgJ,UAAYC,IACjBjJ,KAAKkJ,gBAAkB,IAAIC,KACzBC,aAAcpJ,KAAK4H,oBAAoByB,aAAa,uBAAyB,GAC7EL,UAAWhJ,KAAKgJ,UAChBnC,KAAM7G,KAAK6G,KACXE,QAAS/G,KAAK+G,QACdE,gBAAiBjH,KAAKiH,gBACtBE,iBAAkBnH,KAAKmH,iBACvBE,wBAAyBrH,KAAKqH,0BAGhCrH,KAAKsJ,mBAAqB,IAAI5G,EAC5B1C,KAAK2C,oBACL3C,KAAK4C,sBACL5C,KAAKsI,8BAEPtI,KAAKsJ,mBAAmBC,OAExBvJ,KAAKiD,aACLjD,KAAKwJ,0BACLxJ,KAAKkJ,gBAAgBO,cACrBzJ,KAAK0J,eAAiB1J,KAAK2J,QAAQvG,KAAKpD,MACxCuI,SAASqB,iBAAiB,eAAgB5J,KAAK0J,mDAKjD1J,KAAKkE,eACLqE,SAASsB,oBAAoB,eAAgB7J,KAAK0J,gBAE9C1J,KAAKsJ,oBACPtJ,KAAKsJ,mBAAmBQ,oDAIV,IAAAC,EAAA/J,KAChBA,KAAKgK,aAAezB,SAASV,cAAT,oBAAAlH,OAA2CX,KAAKuH,uBAEhEvH,KAAKgK,eACPhK,KAAKiK,mBAAqBjK,KAAKkK,YAAY9G,KAAKpD,MAEhDA,KAAKmK,oBAAoB,SAAAC,GACvBA,EAASR,iBAAiB,QAASG,EAAKE,mEAK1B,IAAAI,EAAArK,KACdA,KAAKgK,cACPhK,KAAKmK,oBAAoB,SAAAC,GACvBA,EAASP,oBAAoB,QAASQ,EAAKJ,kEAK7BK,GAAU,IAAAC,EAAAvK,KAC5BA,KAAKgK,aAAaQ,iBAAiB,iBAAiBC,QAAQ,SAAAL,GACtDG,EAAK9C,OAAOiD,QAAQN,EAAS3B,QAAQjF,QAAU,GACjD8G,EAASF,0CAMbpK,KAAK2K,iBAAmB3K,KAAK2K,iBAAiBvH,KAAKpD,MACnDA,KAAK4K,mBAAqB5K,KAAKkJ,gBAAgBO,YAAYrG,KAAKpD,KAAKkJ,iBACrElJ,KAAK6K,+BAAiC7K,KAAK8K,wBAAwB1H,KAAKpD,MACxEA,KAAK+K,8BAAgC/K,KAAKgL,uBAAuB5H,KAAKpD,MACtEA,KAAKiL,8BAAgCjL,KAAKkL,uBAAuB9H,KAAKpD,MACtEA,KAAKmL,qBAAuBnL,KAAKoL,cAAchI,KAAKpD,MACpDA,KAAKqL,qBAAuBrL,KAAKsL,cAAclI,KAAKpD,MACpDA,KAAKuL,yBAA2BvL,KAAKwL,kBAAkBC,KAAKzL,MAC5DA,KAAK0L,kCAAoC1L,KAAK2L,2BAA2BvI,KAAKpD,MAC9EA,KAAK4L,0BAA4B5L,KAAK6L,mBAAmBzI,KAAKpD,MAC9DA,KAAK8L,iBAAmB9L,KAAK+L,UAAU3I,KAAKpD,MAC5CA,KAAKgM,YAAchM,KAAKgM,YAAY5I,KAAKpD,MACzCA,KAAKiM,8BAAgCjM,KAAKkM,uBAAuB9I,KAAKpD,MACtEA,KAAKmM,iCAAmCnM,KAAKoM,0BAA0BhJ,KAAKpD,MAC5EA,KAAKqM,oCAAsCrM,KAAKsM,6BAA6BlJ,KAAKpD,MAClFA,KAAKuM,mBAAqBvM,KAAKwM,YAAYpJ,KAAKpD,MAEhDA,KAAK8H,wBAAwB8B,iBAAiB,SAAU5J,KAAK2K,kBAC7D3K,KAAK4H,oBAAoBgC,iBAAiB,QAAS5J,KAAK4K,oBACxD5K,KAAK4H,oBAAoBgC,iBAAiB,QAAS5J,KAAK6K,gCACxD7K,KAAK4H,oBAAoBgC,iBAAiB,QAAS5J,KAAK+K,+BACxD/K,KAAK4H,oBAAoBgC,iBAAiB,QAAS5J,KAAKiL,+BACxDjL,KAAK4H,oBAAoBgC,iBAAiB,UAAW5J,KAAKmL,sBAC1DnL,KAAK4H,oBAAoBgC,iBAAiB,QAAS5J,KAAKuL,0BACxDvL,KAAK4H,oBAAoBgC,iBAAiB,QAAS5J,KAAKgM,aACxDhM,KAAK4H,oBAAoBgC,iBAAiB,QAAS5J,KAAKgM,aACxDhM,KAAK4H,oBAAoBgC,iBAAiB,QAAS5J,KAAKiM,+BACxDjM,KAAKiI,gBAAgB2B,iBAAiB,QAAS5J,KAAKuM,oBACpDvM,KAAKiI,gBAAgB2B,iBAAiB,QAAS5J,KAAK8L,kBACpD9L,KAAKgI,kBAAkB4B,iBAAiB,QAAS5J,KAAKqL,sBACtD9C,SAASqB,iBAAiB,QAAS5J,KAAK4L,2BACxCrD,SAASqB,iBAAiB,QAAS5J,KAAKmM,kCACxC5D,SAASqB,iBAAiB,UAAW5J,KAAK0L,mCAC1CrI,EAASC,IAAI,6BAA8BtD,KAAKqM,qCAEhDrM,KAAKyM,yDAILzM,KAAK8H,wBAAwB+B,oBAAoB,SAAU7J,KAAK2K,kBAChE3K,KAAK4H,oBAAoBiC,oBAAoB,QAAS7J,KAAK4K,oBAC3D5K,KAAK4H,oBAAoBiC,oBAAoB,QAAS7J,KAAK6K,gCAC3D7K,KAAK4H,oBAAoBiC,oBAAoB,QAAS7J,KAAK+K,+BAC3D/K,KAAK4H,oBAAoBiC,oBAAoB,QAAS7J,KAAKiL,+BAC3DjL,KAAK4H,oBAAoBiC,oBAAoB,UAAW7J,KAAKmL,sBAC7DnL,KAAK4H,oBAAoBiC,oBAAoB,QAAS7J,KAAKuL,0BAC3DvL,KAAK4H,oBAAoBiC,oBAAoB,QAAS7J,KAAKgM,aAC3DhM,KAAK4H,oBAAoBiC,oBAAoB,QAAS7J,KAAKgM,aAC3DhM,KAAK4H,oBAAoBiC,oBAAoB,QAAS7J,KAAKiM,+BAC3DjM,KAAKiI,gBAAgB4B,oBAAoB,QAAS7J,KAAKuM,oBACvDvM,KAAKiI,gBAAgB4B,oBAAoB,QAAS7J,KAAK8L,kBACvD9L,KAAKgI,kBAAkB6B,oBAAoB,QAAS7J,KAAKqL,sBACzD9C,SAASsB,oBAAoB,QAAS7J,KAAK4L,2BAC3CrD,SAASsB,oBAAoB,QAAS7J,KAAKmM,kCAC3C5D,SAASsB,oBAAoB,UAAW7J,KAAK0L,mCAC7CrI,EAASE,KAAK,6BAA8BvD,KAAKqM,qCAEjDrM,KAAK0M,gEAGa,IAAAC,EAAA3M,KACd4M,EAAiB,EAGrB,OAAO,SAAAzL,GAGL,GAAkB,IAAdA,EAAE0L,SAA+B,KAAd1L,EAAE0L,QAAgB,KAC/BC,EAAoBC,IAA2BC,gCAA/CF,gBAD+BG,EAELC,IAAcC,qBAAqBL,GAA7DM,EAF+BH,EAE/BG,UAAWC,EAFoBJ,EAEpBI,WACbC,EAAUF,GAAaT,EAAKW,SAAWX,EAAKW,QAAQF,EAAWC,GAE9B,KAAnCV,EAAK/E,oBAAoB5I,OAAgB8N,GAAmBQ,GAGvC,KAFvBV,GAAkB,KAGhBA,EAAiB,EACjBD,EAAK/E,oBAAoB5I,MAAQ+N,IAA2BQ,sBAC5DR,IAA2BS,0BAK/Bb,EAAKzD,gBAAgBuE,mCAErBb,EAAiB,yCAKTzL,GACZ,GAAkB,KAAdA,EAAE0L,SAAgC,KAAd1L,EAAE0L,QAAgB,KAChCa,EAAmB1N,KAAK4H,oBAAxB8F,eAERvM,EAAEwM,iBACF3N,KAAK4H,oBAAoBgG,kBAAkBF,EAAgBA,GAG7D,GAAkB,KAAdvM,EAAE0L,QAAgB,CACpB,IAEMgB,EAFW7N,KAAKkJ,gBAAgB4E,QAAQ9N,KAAKkJ,gBAAgB6E,iBACvCC,QACMxD,iBAAiB,wBAEnDrJ,EAAEwM,iBAEGE,EAAe/M,SACdd,KAAKiO,gBACP9M,EAAE+M,2BAEFlO,KAAK4H,oBAAoBuG,OACzBnO,KAAKkJ,gBAAgBkF,kBAGrBpO,KAAKkJ,gBAAgBmF,iBAGvBrO,KAAK6E,4DAMTyJ,YAAwBtO,KAAK4H,oBAAoB2G,QAAQ,wBAAyB,2DAG1DpN,GACxB,IAAMqN,EAAiBxO,KAAK4H,oBAAoB2G,QAAQ,wBAClDE,EAA4BD,GAAkBA,EAAeE,SAASvN,EAAEwN,QACxEC,EAA4E,OAAzCzN,EAAEwN,OAAOJ,QAAQ,oBACpDM,EAA4E,OAA1C1N,EAAEwN,OAAOJ,QAAQ,qBAGtDE,GACAG,GACAC,IACDL,GAEAA,EAAeM,UAAUC,OAAO,6CAIxB5N,GAGV,GAF6BA,EAAEwN,OAAOJ,QAAQ,iBAEpB,CACxBpN,EAAEwM,iBAEFxM,EAAE+M,2BAEF,IAAMc,EAAS7N,EAAEwN,OAAOJ,QAAQ,eAChCxB,IAA2BkC,YAAYD,GAAQ,GAC/ChP,KAAKkP,kEAIU/N,GACjB,IAAMqN,EAAiBxO,KAAK0H,UAAUG,cAAc,wBAC9C4G,EAA4BD,GAAkBA,EAAeE,SAASvN,EAAEwN,QACxEQ,EAAqE,OAAzChO,EAAEwN,OAAOJ,QAAQ,oBAC7Ca,EAA2BjO,EAAEwN,OAAOG,UAAUJ,SAAS,sBAEvDD,IAA8BU,GAA8BC,KAChErC,IAA2BsC,sBAC3BrP,KAAKkJ,gBAAgBkF,oDAIfjN,GACR,IAAMV,EAAQU,EAAEwN,OAAOJ,QAAQ,oBACzBe,EAAqB7O,GAASA,EAAMoH,cAAc,SAAS0H,YAAYzK,OACvEwI,EAAUtN,KAAKsN,SAAWtN,KAAKsN,QAAQgC,GAEzC7O,GAAS6M,IACXnM,EAAEwM,iBACFxM,EAAEC,kBACF2L,IAA2BhB,UAAUtL,GACrCT,KAAKgM,iEAKP,IAAMwD,EAAQtC,IAAcuC,iBAEtBC,EAAY1P,KAAKgI,kBAAkB8G,UAAUJ,SADpC,UAGM,IAAjBc,EAAM1O,QAAiB4O,EAEhBF,EAAM1O,QAAU4O,GACzB1P,KAAKgI,kBAAkB8G,UAAUC,OANpB,UAIb/O,KAAKgI,kBAAkB8G,UAAUa,IAJpB,2DAWf,IAAMH,EAAQtC,IAAcuC,iBAEtBG,EAAqB5P,KAAK4H,oBAAoBiI,YAE/B,IAAjBL,EAAM1O,QAHU,gCAGM8O,EACxB5P,KAAK4H,oBAAoBiI,YAJP,8BAKTL,EAAM1O,OAAS,GAA4B,KAAvB8O,IAC7B5P,KAAK4H,oBAAoBiI,YAAc,uDAIhB1O,GAGP,IAAdA,EAAE0L,SAA+B,KAAd1L,EAAE0L,SACvB7M,KAAKkP,oEAKPnC,IAA2BmC,sBAC3BlP,KAAKgL,yBACLhL,KAAK8K,0BACL9K,KAAKkJ,gBAAgBuE,oEAGTtM,GACZA,EAAEwM,iBACF3N,KAAK8P,oDAGO,IAAAC,EAAA/P,KACZA,KAAK4H,oBAAoB5I,MAAQ,GAEjC,IAAMgR,QAEHvF,QAAQgB,KAAKzL,KAAKiI,gBAAgBgI,SAAU,SAAAC,GAC7C,IAAIC,EAAgBD,EAAEpB,UAAUJ,SAAS,mBAEzC,GAAIyB,EAAe,KAAAC,EACiBlD,IAAcC,qBAAqB+C,GAA7D9C,EADSgD,EACThD,UAAWC,EADF+C,EACE/C,WACnB8C,EAAgBJ,EAAKzC,SAAWyC,EAAKzC,QAAQF,EAAWC,GAGtD8C,GACFH,EAAerR,KAAKuR,KAIxBF,EAAevF,QAAQ,SAAA/G,GACrBA,EAAG2M,cAAcC,YAAY5M,KAG/B1D,KAAKgI,kBAAkB8G,UAAUa,IAAI,UACrC3P,KAAKgL,yBAELhL,KAAKkJ,gBAAgBkF,iBAEjBpO,KAAKiO,gBACPjO,KAAK6E,0DAIgB,IAAA0L,EAAAvQ,KACjBgG,EAAQhG,KAAK4H,oBADI4I,EAESxQ,KAAKgJ,UAAU3I,cAC7C2F,EAAMhH,MACNgB,KAAKqH,wBAAwBgB,WAFvB/H,EAFekQ,EAEflQ,OAAQC,EAFOiQ,EAEPjQ,YAMhB,GAFmCwM,IAA2BC,gCAAtDyD,uBAEoB,CAC1BnQ,EAAOmK,QAAQ,SAAAyF,GACblK,EAAMhH,MAAQgH,EAAMhH,MAAM0R,QAAZ,GAAA/P,OAAuBuP,EAAE/R,IAAzB,KAAAwC,OAAgCuP,EAAE5R,QAAlCqC,OAA2CuP,EAAElR,OAAS,IACpE+N,IAA2B4D,qBAAqBT,EAAE/R,IAAlD,GAAAwC,OAA0DuP,EAAE5R,QAA5DqC,OAAqEuP,EAAElR,QACrE4R,mBAAoBL,EAAKlJ,wBAAwBwJ,yBAAyBX,EAAE/R,KAC5E2S,qBAAsBP,EAAKlJ,wBAAwB0J,2BAA2Bb,EAAE/R,SAIpF,IAAM6S,EAAYzQ,EAAY0Q,MAAM,KACpC,GAAID,EAAUlQ,OAAS,EAAG,CACxB,IAAMoQ,EAAcF,EAAU,GAAGC,MAAM,KACjClS,EAAWgG,IAAEoM,KAAKD,GAExB,GAAIA,EAAYpQ,OAAS,EAAG,CAC1BoQ,EAAYE,MACZ,IAAMC,EAAcH,EAAYI,KAAK,KAErCtL,EAAMhH,MAAQgH,EAAMhH,MAAM0R,QAAQW,EAAa,IAC/CtE,IAA2BwE,qBAAqBF,GAGlDtE,IAA2B4D,qBAAqB5R,EAAU,MACxD6R,mBAAoB5Q,KAAKqH,wBAAwBwJ,yBAAyB9R,GAC1E+R,qBAAsB9Q,KAAKqH,wBAAwB0J,2BAA2BhS,KAEhFiH,EAAMhH,MAAQgH,EAAMhH,MAAM0R,QAAZ,GAAA/P,OAAuB5B,EAAvB,KAAoC,SAE/C,CAIL,GAAIwB,EAAYiR,MAFY,2EAE0D,MAAxCxL,EAAMhH,MAAMgH,EAAMhH,MAAM8B,OAAS,GAAY,CACzF,IAAM/B,EAAWgO,IAA2BQ,sBAC5CR,IAA2B4D,qBAAqBpQ,EAAa,MAC3DuQ,qBAAsB9Q,KAAKqH,wBAAwB0J,2BAA2BhS,KAIhFiH,EAAMhH,MAAQgH,EAAMhH,MAAM0R,QAAQnQ,EAAa,IAAIuE,kDAKxC3D,GACfA,EAAEwM,iBACF3N,KAAK6E,0DAGkB,IAAA4M,EAAAzR,KAEvBA,KAAK2I,8BACFI,KAAK,WACJ,IAAM2I,EAAcxE,IAAcuC,iBAClC,GAAIiC,EAAY5Q,OAAS,EAAG,CAC1B,IAAMiD,EAAoB0N,EAAK9O,oBAAoBgP,gBAAgBD,GACnED,EAAK7O,sBAAsBqB,KAAKF,MAGnC8E,MAAM,mDAME+I,GACX,OAAO5R,KAAK6R,gBAAkB7R,KAAK6R,gBAAgBD,GAAaA,oDAGxC,IAAAE,EAAA9R,KAClB4R,EAAYG,cACZC,EAAShS,KAAKiS,aAAaL,GAC3BM,EAAiBlS,KAAKmS,oBACxBC,GAAoB,EAExBJ,EAAOvH,QAAQ,SAAA4H,GACb,IAAMpB,EAAQoB,EAAEpB,MAAM,KAChBqB,EAAWC,mBAAmBtB,EAAM,IACpCjS,EAAQiS,EAAM,GAGduB,EAAYV,EAAKzK,wBAAwBoL,qBAAqBJ,GAEpE,GAAIG,EAAW,CACbJ,GAAoB,EACpB,IAAM9E,EAAUwE,EAAKxE,SAAWwE,EAAKxE,QAAQkF,EAAUzT,UACvDgO,IAA2B4D,qBAAqB6B,EAAUzT,SAAUyT,EAAUxT,OAC5EsO,gBAEG,CAGL,IAAMoF,EAAiB1T,EAAQuT,mBAAmBvT,EAAM0R,QAAQ,MAAO,MAAQ1R,EACzEwS,EAAQM,EAAKzK,wBAAwBsL,iBAAiBL,GAE5D,GAAId,EAAO,CAGT,IAAMoB,EAAcN,EAASM,YAAY,KACrCC,GAAgC,IAAjBD,EAAqBN,EAASrN,MAAM,EAAG2N,GAAeN,EAGzEO,EAAeA,EAAanC,QAAQ,IAAK,KAPhC,IAQDpS,EAAWkT,EAAXlT,OACJwU,EAAkB,IAEe,IAAjCJ,EAAehI,QAAQ,OAEzBoI,GAAmD,IAAjCJ,EAAehI,QAAQ,KAAc,IAAM,KAG/D0H,GAAoB,EACpB,IAAM9E,EAAUwE,EAAKxE,SAAWwE,EAAKxE,QAAQuF,EAAcH,GACnD9B,EAA6CY,EAA7CZ,mBAAoBE,EAAyBU,EAAzBV,qBAC5B/D,IAA2B4D,qBACzBkC,EADF,GAAAlS,OAEKrC,GAFLqC,OAEcmS,GAFdnS,OAEgC+R,GAFhC/R,OAEiDmS,IAE7CxF,UACAsD,qBACAE,8BAGC,GAAKU,GAAsB,gBAAbc,EAUd,GAAKd,GAAsB,cAAbc,EAUTd,GAAsB,WAAbc,IACnBF,GAAoB,EACpBN,EAAKlK,oBAAoB5I,MAAQ0T,OAZY,CAC7C,IAAMK,EAAKC,SAAShU,EAAO,IAC3B,GAAIkT,EAAea,GAAK,CACtBX,GAAoB,EACpB,IACM9E,EAAUwE,EAAKxE,SAAWwE,EAAKxE,QADnB,UAElBP,IAA2B4D,qBAFT,SAElB,IAAAhQ,OAA+DuR,EAAea,KAC5EzF,iBAjB2C,CAC/C,IAAMyF,EAAKC,SAAShU,EAAO,IAC3B,GAAIkT,EAAea,GAAK,CACtBX,GAAoB,EACpB,IACM9E,EAAUwE,EAAKxE,SAAWwE,EAAKxE,QADnB,YAElBP,IAA2B4D,qBAFT,WAElB,IAAAhQ,OAA+DuR,EAAea,KAC5EzF,iBAoBVtN,KAAKiT,yBAEDb,IACFpS,KAAKgI,kBAAkB8G,UAAUC,OAAO,UACxC/O,KAAKgL,8DAIG7J,GACVA,EAAEwM,iBACF,IAAMgB,EAASxN,EAAE+R,cAEjBvE,EAAOR,OAEP,IAAM3K,EAAQmL,EAAOlG,SAAWkG,EAAOlG,QAAQjF,MAE3CA,GACFxD,KAAK6E,OAAOrB,oCAIK,IAAA2P,EAAAnT,KAAdwD,EAAcc,UAAAxD,OAAA,QAAAyD,IAAAD,UAAA,GAAAA,UAAA,GAAN,KACP8O,KACA1B,EAAcxE,IAAcuC,iBAElCzP,KAAKiT,yBAEL,IAAM/U,EAAY8B,KAAKqH,wBAAwBgB,UAN5BgL,EAOarT,KAAKgJ,UAAU3I,cAAcqR,EAAaxT,GAAlEoC,EAPW+S,EAOX/S,OAAQC,EAPG8S,EAOH9S,YACV+S,EAAe9P,GAAS+P,YAAmB,UAAY,SAuC7D,GAtCAH,EAAMzU,KAAN,SAAAgC,OAAoB2S,IAEpBhT,EAAOmK,QAAQ,SAAAhK,GACb,IAAM+R,EAAYW,EAAK9L,wBAAwBmM,0BAC7C/S,EAAMtC,IACNsC,EAAMzB,MAAMyU,eAERC,EAAcP,EAAK9L,wBAAwBsM,YAAYlT,EAAMtC,SAC3DE,EAAUqV,EAAVrV,MAIFuV,EAAiBnT,EAAMtC,IAAIuS,QAAQ,IAAK,KACxC4B,EAAWjU,EAAK,GAAAsC,OAAMiT,EAAN,KAAAjT,OAAwBtC,GAAUuV,EACpDC,EAAY,GAEhB,GAAIrB,EACFqB,EAAYrB,EAAU1T,QACjB,CACL,IAAIuO,EAAa5M,EAAMzB,MAEnB0U,EAAYI,yBACdzG,EAAaA,EAAWoG,gBAIL,MAAlBpG,EAAW,IAAoD,MAAtCA,EAAWA,EAAWvM,OAAS,IACtC,MAAlBuM,EAAW,IAAoD,MAAtCA,EAAWA,EAAWvM,OAAS,MAEzDuM,EAAaA,EAAWpI,MAAM,EAAGoI,EAAWvM,OAAS,IAGvD+S,EAAS,GAAAlT,OAAM2R,EAAN,KAAA3R,OAAkBoT,mBAAmB1G,IAGhD+F,EAAMzU,KAAKkV,KAGTtT,EAAa,CACf,IAAMyT,EAAYzT,EACf0Q,MAAM,KACNhR,IAAI,SAAAiQ,GAAC,OAAI6D,mBAAmB7D,KAC5BoB,KAAK,KACR8B,EAAMzU,KAAN,UAAAgC,OAAqBqT,IAGvB,IAAMC,EAAgB,6BAAAtT,OAAgCyS,EAAM9B,KAAK,MAE7DtR,KAAKkU,aACPlU,KAAKkU,aAAaD,GAElBE,YAASF,+CAKX,IAAMG,KACN,IACE,IAAMC,EAAYrU,KAAK4H,oBAAoByB,aAAa,wBACxDhD,KAAKC,MAAM+N,GAAW5J,QAAQ,SAAA6J,GAC5BF,EAAcE,EAAKvB,IAAMuB,EAAKC,WAEhC,MAAOpT,IAGT,OAAOiT,wCAIP,IAAMI,EAAWxU,KAAKkJ,gBAAgB4E,QAAQ9N,KAAKkJ,gBAAgB6E,iBAEnE,GAAIyG,EAAU,CACZ,IAAMC,EAAqBD,EAASE,UAEpC1U,KAAK4K,qBACL6J,EAAmBE,2EAIMnU,GAC3BR,KAAK8P,cACL9P,KAAK4H,oBAAoB5I,MAAQwB,EACjCR,KAAK4H,oBAAoBgN,cAAc,IAAIC,YAAY,UACvD7U,KAAK6E,2CAKL,OAAO,yECtqBX,IAAAiQ,EAAA7W,EAAA,KAEe8W,EAAA,WAAAnO,GAOT,IANJC,EAMID,EANJC,KACAQ,EAKIT,EALJS,wBACAN,EAIIH,EAJJG,QACAE,EAGIL,EAHJK,gBACAE,EAEIP,EAFJO,iBACAI,EACIX,EADJW,qBAE8BZ,KAAyB4B,SAASV,cAAc,qBAE9C,IAAIlB,KAChCE,OACAE,UACAE,kBACAE,mBACAE,0BACAE,yBAEoByN,2CCpB1B/W,EAAAgX,EAAAF,EAAA,sBAAAG,IAEO,IAAMA,GACXC,eAAgB,iBAChBC,OAAQ,SACRC,cAAe","file":"commons~pages.admin.runners~pages.dashboard.issues~pages.dashboard.merge_requests~pages.groups.issue~50b11e95.5c522302.chunk.js","sourcesContent":["import FilteredSearchTokenKeys from './filtered_search_token_keys';\n\nexport const tokenKeys = [\n  {\n    key: 'author',\n    type: 'string',\n    param: 'username',\n    symbol: '@',\n    icon: 'pencil',\n    tag: '@author',\n  },\n  {\n    key: 'assignee',\n    type: 'string',\n    param: 'username',\n    symbol: '@',\n    icon: 'user',\n    tag: '@assignee',\n  },\n  {\n    key: 'milestone',\n    type: 'string',\n    param: 'title',\n    symbol: '%',\n    icon: 'clock',\n    tag: '%milestone',\n  },\n  {\n    key: 'label',\n    type: 'array',\n    param: 'name[]',\n    symbol: '~',\n    icon: 'labels',\n    tag: '~label',\n  },\n];\n\nif (gon.current_user_id) {\n  // Appending tokenkeys only logged-in\n  tokenKeys.push({\n    key: 'my-reaction',\n    type: 'string',\n    param: 'emoji',\n    symbol: '',\n    icon: 'thumb-up',\n    tag: 'emoji',\n  });\n}\n\nexport const alternativeTokenKeys = [\n  {\n    key: 'label',\n    type: 'string',\n    param: 'name',\n    symbol: '~',\n  },\n];\n\nexport const conditions = [\n  {\n    url: 'assignee_id=None',\n    tokenKey: 'assignee',\n    value: 'none',\n  },\n  {\n    url: 'assignee_id=Any',\n    tokenKey: 'assignee',\n    value: 'any',\n  },\n  {\n    url: 'milestone_title=None',\n    tokenKey: 'milestone',\n    value: 'none',\n  },\n  {\n    url: 'milestone_title=Any',\n    tokenKey: 'milestone',\n    value: 'any',\n  },\n  {\n    url: 'milestone_title=%23upcoming',\n    tokenKey: 'milestone',\n    value: 'upcoming',\n  },\n  {\n    url: 'milestone_title=%23started',\n    tokenKey: 'milestone',\n    value: 'started',\n  },\n  {\n    url: 'label_name[]=None',\n    tokenKey: 'label',\n    value: 'none',\n  },\n  {\n    url: 'label_name[]=Any',\n    tokenKey: 'any',\n    value: 'any',\n  },\n  {\n    url: 'my_reaction_emoji=None',\n    tokenKey: 'my-reaction',\n    value: 'none',\n  },\n  {\n    url: 'my_reaction_emoji=Any',\n    tokenKey: 'my-reaction',\n    value: 'any',\n  },\n];\n\nconst IssuableFilteredSearchTokenKeys = new FilteredSearchTokenKeys(\n  tokenKeys,\n  alternativeTokenKeys,\n  conditions,\n);\n\nexport default IssuableFilteredSearchTokenKeys;\n","import Vue from 'vue';\n\nexport default new Vue();\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--1!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./recent_searches_dropdown_content.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--1!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./recent_searches_dropdown_content.vue?vue&type=script&lang=js&\"","<script>\nimport eventHub from '../event_hub';\nimport FilteredSearchTokenizer from '../filtered_search_tokenizer';\n\nexport default {\n  name: 'RecentSearchesDropdownContent',\n  props: {\n    items: {\n      type: Array,\n      required: true,\n    },\n    isLocalStorageAvailable: {\n      type: Boolean,\n      required: false,\n      default: true,\n    },\n    allowedKeys: {\n      type: Array,\n      required: true,\n    },\n  },\n  computed: {\n    processedItems() {\n      return this.items.map(item => {\n        const { tokens, searchToken } = FilteredSearchTokenizer.processTokens(\n          item,\n          this.allowedKeys,\n        );\n\n        const resultantTokens = tokens.map(token => ({\n          prefix: `${token.key}:`,\n          suffix: `${token.symbol}${token.value}`,\n        }));\n\n        return {\n          text: item,\n          tokens: resultantTokens,\n          searchToken,\n        };\n      });\n    },\n    hasItems() {\n      return this.items.length > 0;\n    },\n  },\n  methods: {\n    onItemActivated(text) {\n      eventHub.$emit('recentSearchesItemSelected', text);\n    },\n    onRequestClearRecentSearches(e) {\n      // Stop the dropdown from closing\n      e.stopPropagation();\n\n      eventHub.$emit('requestClearRecentSearches');\n    },\n  },\n};\n</script>\n<template>\n  <div>\n    <div v-if=\"!isLocalStorageAvailable\" class=\"dropdown-info-note\">\n      This feature requires local storage to be enabled\n    </div>\n    <ul v-else-if=\"hasItems\">\n      <li v-for=\"(item, index) in processedItems\" :key=\"`processed-items-${index}`\">\n        <button\n          type=\"button\"\n          class=\"filtered-search-history-dropdown-item\"\n          @click=\"onItemActivated(item.text);\"\n        >\n          <span>\n            <span\n              v-for=\"(token, tokenIndex) in item.tokens\"\n              :key=\"`dropdown-token-${tokenIndex}`\"\n              class=\"filtered-search-history-dropdown-token\"\n            >\n              <span class=\"name\">{{ token.prefix }}</span>\n              <span class=\"value\">{{ token.suffix }}</span>\n            </span>\n          </span>\n          <span class=\"filtered-search-history-dropdown-search-token\">\n            {{ item.searchToken }}\n          </span>\n        </button>\n      </li>\n      <li class=\"divider\"></li>\n      <li>\n        <button\n          type=\"button\"\n          class=\"filtered-search-history-clear-button\"\n          @click=\"onRequestClearRecentSearches($event);\"\n        >\n          Clear recent searches\n        </button>\n      </li>\n    </ul>\n    <div v-else class=\"dropdown-info-note\">You don't have any recent searches</div>\n  </div>\n</template>\n","import { render, staticRenderFns } from \"./recent_searches_dropdown_content.vue?vue&type=template&id=bbbc6146&\"\nimport script from \"./recent_searches_dropdown_content.vue?vue&type=script&lang=js&\"\nexport * from \"./recent_searches_dropdown_content.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"recent_searches_dropdown_content.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(!_vm.isLocalStorageAvailable)?_c('div',{staticClass:\"dropdown-info-note\"},[_vm._v(\"\\n    This feature requires local storage to be enabled\\n  \")]):(_vm.hasItems)?_c('ul',[_vm._l((_vm.processedItems),function(item,index){return _c('li',{key:(\"processed-items-\" + index)},[_c('button',{staticClass:\"filtered-search-history-dropdown-item\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.onItemActivated(item.text);}}},[_c('span',_vm._l((item.tokens),function(token,tokenIndex){return _c('span',{key:(\"dropdown-token-\" + tokenIndex),staticClass:\"filtered-search-history-dropdown-token\"},[_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(token.prefix))]),_vm._v(\" \"),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(token.suffix))])])}),0),_vm._v(\" \"),_c('span',{staticClass:\"filtered-search-history-dropdown-search-token\"},[_vm._v(\"\\n          \"+_vm._s(item.searchToken)+\"\\n        \")])])])}),_vm._v(\" \"),_c('li',{staticClass:\"divider\"}),_vm._v(\" \"),_c('li',[_c('button',{staticClass:\"filtered-search-history-clear-button\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.onRequestClearRecentSearches($event);}}},[_vm._v(\"\\n        Clear recent searches\\n      \")])])],2):_c('div',{staticClass:\"dropdown-info-note\"},[_vm._v(\"You don't have any recent searches\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from 'vue';\nimport RecentSearchesDropdownContent from './components/recent_searches_dropdown_content.vue';\nimport eventHub from './event_hub';\n\nclass RecentSearchesRoot {\n  constructor(recentSearchesStore, recentSearchesService, wrapperElement) {\n    this.store = recentSearchesStore;\n    this.service = recentSearchesService;\n    this.wrapperElement = wrapperElement;\n  }\n\n  init() {\n    this.bindEvents();\n    this.render();\n  }\n\n  bindEvents() {\n    this.onRequestClearRecentSearchesWrapper = this.onRequestClearRecentSearches.bind(this);\n\n    eventHub.$on('requestClearRecentSearches', this.onRequestClearRecentSearchesWrapper);\n  }\n\n  unbindEvents() {\n    eventHub.$off('requestClearRecentSearches', this.onRequestClearRecentSearchesWrapper);\n  }\n\n  render() {\n    const { state } = this.store;\n    this.vm = new Vue({\n      el: this.wrapperElement,\n      components: {\n        RecentSearchesDropdownContent,\n      },\n      data() {\n        return state;\n      },\n      template: `\n        <recent-searches-dropdown-content\n          :items=\"recentSearches\"\n          :is-local-storage-available=\"isLocalStorageAvailable\"\n          :allowed-keys=\"allowedKeys\"\n          />\n      `,\n    });\n  }\n\n  onRequestClearRecentSearches() {\n    const resultantSearches = this.store.setRecentSearches([]);\n    this.service.save(resultantSearches);\n  }\n\n  destroy() {\n    this.unbindEvents();\n    if (this.vm) {\n      this.vm.$destroy();\n    }\n  }\n}\n\nexport default RecentSearchesRoot;\n","import _ from 'underscore';\n\nclass RecentSearchesStore {\n  constructor(initialState = {}, allowedKeys) {\n    this.state = Object.assign(\n      {\n        isLocalStorageAvailable: true,\n        recentSearches: [],\n        allowedKeys,\n      },\n      initialState,\n    );\n  }\n\n  addRecentSearch(newSearch) {\n    this.setRecentSearches([newSearch].concat(this.state.recentSearches));\n\n    return this.state.recentSearches;\n  }\n\n  setRecentSearches(searches = []) {\n    const trimmedSearches = searches.map(search => search.trim());\n    this.state.recentSearches = _.uniq(trimmedSearches).slice(0, 5);\n    return this.state.recentSearches;\n  }\n}\n\nexport default RecentSearchesStore;\n","class RecentSearchesServiceError {\n  constructor(message) {\n    this.name = 'RecentSearchesServiceError';\n    this.message = message || 'Recent Searches Service is unavailable';\n  }\n}\n\n// Can't use `extends` for builtin prototypes and get true inheritance yet\nRecentSearchesServiceError.prototype = Error.prototype;\n\nexport default RecentSearchesServiceError;\n","import RecentSearchesServiceError from './recent_searches_service_error';\nimport AccessorUtilities from '../../lib/utils/accessor';\n\nclass RecentSearchesService {\n  constructor(localStorageKey = 'issuable-recent-searches') {\n    this.localStorageKey = localStorageKey;\n  }\n\n  fetch() {\n    if (!RecentSearchesService.isAvailable()) {\n      const error = new RecentSearchesServiceError();\n      return Promise.reject(error);\n    }\n\n    const input = window.localStorage.getItem(this.localStorageKey);\n\n    let searches = [];\n    if (input && input.length > 0) {\n      try {\n        searches = JSON.parse(input);\n      } catch (err) {\n        return Promise.reject(err);\n      }\n    }\n\n    return Promise.resolve(searches);\n  }\n\n  save(searches = []) {\n    if (!RecentSearchesService.isAvailable()) return;\n\n    window.localStorage.setItem(this.localStorageKey, JSON.stringify(searches));\n  }\n\n  static isAvailable() {\n    return AccessorUtilities.isLocalStorageAccessSafe();\n  }\n}\n\nexport default RecentSearchesService;\n","import _ from 'underscore';\nimport { getParameterByName, getUrlParamsArray } from '~/lib/utils/common_utils';\nimport IssuableFilteredSearchTokenKeys from '~/filtered_search/issuable_filtered_search_token_keys';\nimport { visitUrl } from '../lib/utils/url_utility';\nimport Flash from '../flash';\nimport FilteredSearchContainer from './container';\nimport RecentSearchesRoot from './recent_searches_root';\nimport RecentSearchesStore from './stores/recent_searches_store';\nimport RecentSearchesService from './services/recent_searches_service';\nimport eventHub from './event_hub';\nimport { addClassIfElementExists } from '../lib/utils/dom_utils';\nimport FilteredSearchTokenizer from './filtered_search_tokenizer';\nimport FilteredSearchDropdownManager from './filtered_search_dropdown_manager';\nimport FilteredSearchVisualTokens from './filtered_search_visual_tokens';\nimport DropdownUtils from './dropdown_utils';\n\nexport default class FilteredSearchManager {\n  constructor({\n    page,\n    isGroup = false,\n    isGroupAncestor = true,\n    isGroupDecendent = false,\n    filteredSearchTokenKeys = IssuableFilteredSearchTokenKeys,\n    stateFiltersSelector = '.issues-state-filters',\n  }) {\n    this.isGroup = isGroup;\n    this.isGroupAncestor = isGroupAncestor;\n    this.isGroupDecendent = isGroupDecendent;\n    this.states = ['opened', 'closed', 'merged', 'all'];\n\n    this.page = page;\n    this.container = FilteredSearchContainer.container;\n    this.filteredSearchInput = this.container.querySelector('.filtered-search');\n    this.filteredSearchInputForm = this.filteredSearchInput.form;\n    this.clearSearchButton = this.container.querySelector('.clear-search');\n    this.tokensContainer = this.container.querySelector('.tokens-container');\n    this.filteredSearchTokenKeys = filteredSearchTokenKeys;\n    this.stateFiltersSelector = stateFiltersSelector;\n    this.recentsStorageKeyNames = {\n      issues: 'issue-recent-searches',\n      merge_requests: 'merge-request-recent-searches',\n    };\n\n    this.recentSearchesStore = new RecentSearchesStore({\n      isLocalStorageAvailable: RecentSearchesService.isAvailable(),\n      allowedKeys: this.filteredSearchTokenKeys.getKeys(),\n    });\n    this.searchHistoryDropdownElement = document.querySelector(\n      '.js-filtered-search-history-dropdown',\n    );\n    const fullPath = this.searchHistoryDropdownElement\n      ? this.searchHistoryDropdownElement.dataset.fullPath\n      : 'project';\n    const recentSearchesKey = `${fullPath}-${this.recentsStorageKeyNames[this.page]}`;\n    this.recentSearchesService = new RecentSearchesService(recentSearchesKey);\n  }\n\n  setup() {\n    // Fetch recent searches from localStorage\n    this.fetchingRecentSearchesPromise = this.recentSearchesService\n      .fetch()\n      .catch(error => {\n        if (error.name === 'RecentSearchesServiceError') return undefined;\n        // eslint-disable-next-line no-new\n        new Flash('An error occurred while parsing recent searches');\n        // Gracefully fail to empty array\n        return [];\n      })\n      .then(searches => {\n        if (!searches) {\n          return;\n        }\n\n        // Put any searches that may have come in before\n        // we fetched the saved searches ahead of the already saved ones\n        const resultantSearches = this.recentSearchesStore.setRecentSearches(\n          this.recentSearchesStore.state.recentSearches.concat(searches),\n        );\n        this.recentSearchesService.save(resultantSearches);\n      });\n\n    if (this.filteredSearchInput) {\n      this.tokenizer = FilteredSearchTokenizer;\n      this.dropdownManager = new FilteredSearchDropdownManager({\n        baseEndpoint: this.filteredSearchInput.getAttribute('data-base-endpoint') || '',\n        tokenizer: this.tokenizer,\n        page: this.page,\n        isGroup: this.isGroup,\n        isGroupAncestor: this.isGroupAncestor,\n        isGroupDecendent: this.isGroupDecendent,\n        filteredSearchTokenKeys: this.filteredSearchTokenKeys,\n      });\n\n      this.recentSearchesRoot = new RecentSearchesRoot(\n        this.recentSearchesStore,\n        this.recentSearchesService,\n        this.searchHistoryDropdownElement,\n      );\n      this.recentSearchesRoot.init();\n\n      this.bindEvents();\n      this.loadSearchParamsFromURL();\n      this.dropdownManager.setDropdown();\n      this.cleanupWrapper = this.cleanup.bind(this);\n      document.addEventListener('beforeunload', this.cleanupWrapper);\n    }\n  }\n\n  cleanup() {\n    this.unbindEvents();\n    document.removeEventListener('beforeunload', this.cleanupWrapper);\n\n    if (this.recentSearchesRoot) {\n      this.recentSearchesRoot.destroy();\n    }\n  }\n\n  bindStateEvents() {\n    this.stateFilters = document.querySelector(`.container-fluid ${this.stateFiltersSelector}`);\n\n    if (this.stateFilters) {\n      this.searchStateWrapper = this.searchState.bind(this);\n\n      this.applyToStateFilters(filterEl => {\n        filterEl.addEventListener('click', this.searchStateWrapper);\n      });\n    }\n  }\n\n  unbindStateEvents() {\n    if (this.stateFilters) {\n      this.applyToStateFilters(filterEl => {\n        filterEl.removeEventListener('click', this.searchStateWrapper);\n      });\n    }\n  }\n\n  applyToStateFilters(callback) {\n    this.stateFilters.querySelectorAll('a[data-state]').forEach(filterEl => {\n      if (this.states.indexOf(filterEl.dataset.state) > -1) {\n        callback(filterEl);\n      }\n    });\n  }\n\n  bindEvents() {\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\n    this.setDropdownWrapper = this.dropdownManager.setDropdown.bind(this.dropdownManager);\n    this.toggleClearSearchButtonWrapper = this.toggleClearSearchButton.bind(this);\n    this.handleInputPlaceholderWrapper = this.handleInputPlaceholder.bind(this);\n    this.handleInputVisualTokenWrapper = this.handleInputVisualToken.bind(this);\n    this.checkForEnterWrapper = this.checkForEnter.bind(this);\n    this.onClearSearchWrapper = this.onClearSearch.bind(this);\n    this.checkForBackspaceWrapper = this.checkForBackspace.call(this);\n    this.removeSelectedTokenKeydownWrapper = this.removeSelectedTokenKeydown.bind(this);\n    this.unselectEditTokensWrapper = this.unselectEditTokens.bind(this);\n    this.editTokenWrapper = this.editToken.bind(this);\n    this.tokenChange = this.tokenChange.bind(this);\n    this.addInputContainerFocusWrapper = this.addInputContainerFocus.bind(this);\n    this.removeInputContainerFocusWrapper = this.removeInputContainerFocus.bind(this);\n    this.onrecentSearchesItemSelectedWrapper = this.onrecentSearchesItemSelected.bind(this);\n    this.removeTokenWrapper = this.removeToken.bind(this);\n\n    this.filteredSearchInputForm.addEventListener('submit', this.handleFormSubmit);\n    this.filteredSearchInput.addEventListener('input', this.setDropdownWrapper);\n    this.filteredSearchInput.addEventListener('input', this.toggleClearSearchButtonWrapper);\n    this.filteredSearchInput.addEventListener('input', this.handleInputPlaceholderWrapper);\n    this.filteredSearchInput.addEventListener('input', this.handleInputVisualTokenWrapper);\n    this.filteredSearchInput.addEventListener('keydown', this.checkForEnterWrapper);\n    this.filteredSearchInput.addEventListener('keyup', this.checkForBackspaceWrapper);\n    this.filteredSearchInput.addEventListener('click', this.tokenChange);\n    this.filteredSearchInput.addEventListener('keyup', this.tokenChange);\n    this.filteredSearchInput.addEventListener('focus', this.addInputContainerFocusWrapper);\n    this.tokensContainer.addEventListener('click', this.removeTokenWrapper);\n    this.tokensContainer.addEventListener('click', this.editTokenWrapper);\n    this.clearSearchButton.addEventListener('click', this.onClearSearchWrapper);\n    document.addEventListener('click', this.unselectEditTokensWrapper);\n    document.addEventListener('click', this.removeInputContainerFocusWrapper);\n    document.addEventListener('keydown', this.removeSelectedTokenKeydownWrapper);\n    eventHub.$on('recentSearchesItemSelected', this.onrecentSearchesItemSelectedWrapper);\n\n    this.bindStateEvents();\n  }\n\n  unbindEvents() {\n    this.filteredSearchInputForm.removeEventListener('submit', this.handleFormSubmit);\n    this.filteredSearchInput.removeEventListener('input', this.setDropdownWrapper);\n    this.filteredSearchInput.removeEventListener('input', this.toggleClearSearchButtonWrapper);\n    this.filteredSearchInput.removeEventListener('input', this.handleInputPlaceholderWrapper);\n    this.filteredSearchInput.removeEventListener('input', this.handleInputVisualTokenWrapper);\n    this.filteredSearchInput.removeEventListener('keydown', this.checkForEnterWrapper);\n    this.filteredSearchInput.removeEventListener('keyup', this.checkForBackspaceWrapper);\n    this.filteredSearchInput.removeEventListener('click', this.tokenChange);\n    this.filteredSearchInput.removeEventListener('keyup', this.tokenChange);\n    this.filteredSearchInput.removeEventListener('focus', this.addInputContainerFocusWrapper);\n    this.tokensContainer.removeEventListener('click', this.removeTokenWrapper);\n    this.tokensContainer.removeEventListener('click', this.editTokenWrapper);\n    this.clearSearchButton.removeEventListener('click', this.onClearSearchWrapper);\n    document.removeEventListener('click', this.unselectEditTokensWrapper);\n    document.removeEventListener('click', this.removeInputContainerFocusWrapper);\n    document.removeEventListener('keydown', this.removeSelectedTokenKeydownWrapper);\n    eventHub.$off('recentSearchesItemSelected', this.onrecentSearchesItemSelectedWrapper);\n\n    this.unbindStateEvents();\n  }\n\n  checkForBackspace() {\n    let backspaceCount = 0;\n\n    // closure for keeping track of the number of backspace keystrokes\n    return e => {\n      // 8 = Backspace Key\n      // 46 = Delete Key\n      if (e.keyCode === 8 || e.keyCode === 46) {\n        const { lastVisualToken } = FilteredSearchVisualTokens.getLastVisualTokenBeforeInput();\n        const { tokenName, tokenValue } = DropdownUtils.getVisualTokenValues(lastVisualToken);\n        const canEdit = tokenName && this.canEdit && this.canEdit(tokenName, tokenValue);\n\n        if (this.filteredSearchInput.value === '' && lastVisualToken && canEdit) {\n          backspaceCount += 1;\n\n          if (backspaceCount === 2) {\n            backspaceCount = 0;\n            this.filteredSearchInput.value = FilteredSearchVisualTokens.getLastTokenPartial();\n            FilteredSearchVisualTokens.removeLastTokenPartial();\n          }\n        }\n\n        // Reposition dropdown so that it is aligned with cursor\n        this.dropdownManager.updateCurrentDropdownOffset();\n      } else {\n        backspaceCount = 0;\n      }\n    };\n  }\n\n  checkForEnter(e) {\n    if (e.keyCode === 38 || e.keyCode === 40) {\n      const { selectionStart } = this.filteredSearchInput;\n\n      e.preventDefault();\n      this.filteredSearchInput.setSelectionRange(selectionStart, selectionStart);\n    }\n\n    if (e.keyCode === 13) {\n      const dropdown = this.dropdownManager.mapping[this.dropdownManager.currentDropdown];\n      const dropdownEl = dropdown.element;\n      const activeElements = dropdownEl.querySelectorAll('.droplab-item-active');\n\n      e.preventDefault();\n\n      if (!activeElements.length) {\n        if (this.isHandledAsync) {\n          e.stopImmediatePropagation();\n\n          this.filteredSearchInput.blur();\n          this.dropdownManager.resetDropdowns();\n        } else {\n          // Prevent droplab from opening dropdown\n          this.dropdownManager.destroyDroplab();\n        }\n\n        this.search();\n      }\n    }\n  }\n\n  addInputContainerFocus() {\n    addClassIfElementExists(this.filteredSearchInput.closest('.filtered-search-box'), 'focus');\n  }\n\n  removeInputContainerFocus(e) {\n    const inputContainer = this.filteredSearchInput.closest('.filtered-search-box');\n    const isElementInFilteredSearch = inputContainer && inputContainer.contains(e.target);\n    const isElementInDynamicFilterDropdown = e.target.closest('.filter-dropdown') !== null;\n    const isElementInStaticFilterDropdown = e.target.closest('ul[data-dropdown]') !== null;\n\n    if (\n      !isElementInFilteredSearch &&\n      !isElementInDynamicFilterDropdown &&\n      !isElementInStaticFilterDropdown &&\n      inputContainer\n    ) {\n      inputContainer.classList.remove('focus');\n    }\n  }\n\n  removeToken(e) {\n    const removeButtonSelected = e.target.closest('.remove-token');\n\n    if (removeButtonSelected) {\n      e.preventDefault();\n      // Prevent editToken from being triggered after token is removed\n      e.stopImmediatePropagation();\n\n      const button = e.target.closest('.selectable');\n      FilteredSearchVisualTokens.selectToken(button, true);\n      this.removeSelectedToken();\n    }\n  }\n\n  unselectEditTokens(e) {\n    const inputContainer = this.container.querySelector('.filtered-search-box');\n    const isElementInFilteredSearch = inputContainer && inputContainer.contains(e.target);\n    const isElementInFilterDropdown = e.target.closest('.filter-dropdown') !== null;\n    const isElementTokensContainer = e.target.classList.contains('tokens-container');\n\n    if ((!isElementInFilteredSearch && !isElementInFilterDropdown) || isElementTokensContainer) {\n      FilteredSearchVisualTokens.moveInputToTheRight();\n      this.dropdownManager.resetDropdowns();\n    }\n  }\n\n  editToken(e) {\n    const token = e.target.closest('.js-visual-token');\n    const sanitizedTokenName = token && token.querySelector('.name').textContent.trim();\n    const canEdit = this.canEdit && this.canEdit(sanitizedTokenName);\n\n    if (token && canEdit) {\n      e.preventDefault();\n      e.stopPropagation();\n      FilteredSearchVisualTokens.editToken(token);\n      this.tokenChange();\n    }\n  }\n\n  toggleClearSearchButton() {\n    const query = DropdownUtils.getSearchQuery();\n    const hidden = 'hidden';\n    const hasHidden = this.clearSearchButton.classList.contains(hidden);\n\n    if (query.length === 0 && !hasHidden) {\n      this.clearSearchButton.classList.add(hidden);\n    } else if (query.length && hasHidden) {\n      this.clearSearchButton.classList.remove(hidden);\n    }\n  }\n\n  handleInputPlaceholder() {\n    const query = DropdownUtils.getSearchQuery();\n    const placeholder = 'Search or filter results...';\n    const currentPlaceholder = this.filteredSearchInput.placeholder;\n\n    if (query.length === 0 && currentPlaceholder !== placeholder) {\n      this.filteredSearchInput.placeholder = placeholder;\n    } else if (query.length > 0 && currentPlaceholder !== '') {\n      this.filteredSearchInput.placeholder = '';\n    }\n  }\n\n  removeSelectedTokenKeydown(e) {\n    // 8 = Backspace Key\n    // 46 = Delete Key\n    if (e.keyCode === 8 || e.keyCode === 46) {\n      this.removeSelectedToken();\n    }\n  }\n\n  removeSelectedToken() {\n    FilteredSearchVisualTokens.removeSelectedToken();\n    this.handleInputPlaceholder();\n    this.toggleClearSearchButton();\n    this.dropdownManager.updateCurrentDropdownOffset();\n  }\n\n  onClearSearch(e) {\n    e.preventDefault();\n    this.clearSearch();\n  }\n\n  clearSearch() {\n    this.filteredSearchInput.value = '';\n\n    const removeElements = [];\n\n    [].forEach.call(this.tokensContainer.children, t => {\n      let canClearToken = t.classList.contains('js-visual-token');\n\n      if (canClearToken) {\n        const { tokenName, tokenValue } = DropdownUtils.getVisualTokenValues(t);\n        canClearToken = this.canEdit && this.canEdit(tokenName, tokenValue);\n      }\n\n      if (canClearToken) {\n        removeElements.push(t);\n      }\n    });\n\n    removeElements.forEach(el => {\n      el.parentElement.removeChild(el);\n    });\n\n    this.clearSearchButton.classList.add('hidden');\n    this.handleInputPlaceholder();\n\n    this.dropdownManager.resetDropdowns();\n\n    if (this.isHandledAsync) {\n      this.search();\n    }\n  }\n\n  handleInputVisualToken() {\n    const input = this.filteredSearchInput;\n    const { tokens, searchToken } = this.tokenizer.processTokens(\n      input.value,\n      this.filteredSearchTokenKeys.getKeys(),\n    );\n    const { isLastVisualTokenValid } = FilteredSearchVisualTokens.getLastVisualTokenBeforeInput();\n\n    if (isLastVisualTokenValid) {\n      tokens.forEach(t => {\n        input.value = input.value.replace(`${t.key}:${t.symbol}${t.value}`, '');\n        FilteredSearchVisualTokens.addFilterVisualToken(t.key, `${t.symbol}${t.value}`, {\n          uppercaseTokenName: this.filteredSearchTokenKeys.shouldUppercaseTokenName(t.key),\n          capitalizeTokenValue: this.filteredSearchTokenKeys.shouldCapitalizeTokenValue(t.key),\n        });\n      });\n\n      const fragments = searchToken.split(':');\n      if (fragments.length > 1) {\n        const inputValues = fragments[0].split(' ');\n        const tokenKey = _.last(inputValues);\n\n        if (inputValues.length > 1) {\n          inputValues.pop();\n          const searchTerms = inputValues.join(' ');\n\n          input.value = input.value.replace(searchTerms, '');\n          FilteredSearchVisualTokens.addSearchVisualToken(searchTerms);\n        }\n\n        FilteredSearchVisualTokens.addFilterVisualToken(tokenKey, null, {\n          uppercaseTokenName: this.filteredSearchTokenKeys.shouldUppercaseTokenName(tokenKey),\n          capitalizeTokenValue: this.filteredSearchTokenKeys.shouldCapitalizeTokenValue(tokenKey),\n        });\n        input.value = input.value.replace(`${tokenKey}:`, '');\n      }\n    } else {\n      // Keep listening to token until we determine that the user is done typing the token value\n      const valueCompletedRegex = /([~%@]{0,1}\".+\")|([~%@]{0,1}'.+')|^((?![~%@]')(?![~%@]\")(?!')(?!\")).*/g;\n\n      if (searchToken.match(valueCompletedRegex) && input.value[input.value.length - 1] === ' ') {\n        const tokenKey = FilteredSearchVisualTokens.getLastTokenPartial();\n        FilteredSearchVisualTokens.addFilterVisualToken(searchToken, null, {\n          capitalizeTokenValue: this.filteredSearchTokenKeys.shouldCapitalizeTokenValue(tokenKey),\n        });\n\n        // Trim the last space as seen in the if statement above\n        input.value = input.value.replace(searchToken, '').trim();\n      }\n    }\n  }\n\n  handleFormSubmit(e) {\n    e.preventDefault();\n    this.search();\n  }\n\n  saveCurrentSearchQuery() {\n    // Don't save before we have fetched the already saved searches\n    this.fetchingRecentSearchesPromise\n      .then(() => {\n        const searchQuery = DropdownUtils.getSearchQuery();\n        if (searchQuery.length > 0) {\n          const resultantSearches = this.recentSearchesStore.addRecentSearch(searchQuery);\n          this.recentSearchesService.save(resultantSearches);\n        }\n      })\n      .catch(() => {\n        // https://gitlab.com/gitlab-org/gitlab-ce/issues/30821\n      });\n  }\n\n  // allows for modifying params array when a param can't be included in the URL (e.g. Service Desk)\n  getAllParams(urlParams) {\n    return this.modifyUrlParams ? this.modifyUrlParams(urlParams) : urlParams;\n  }\n\n  loadSearchParamsFromURL() {\n    const urlParams = getUrlParamsArray();\n    const params = this.getAllParams(urlParams);\n    const usernameParams = this.getUsernameParams();\n    let hasFilteredSearch = false;\n\n    params.forEach(p => {\n      const split = p.split('=');\n      const keyParam = decodeURIComponent(split[0]);\n      const value = split[1];\n\n      // Check if it matches edge conditions listed in this.filteredSearchTokenKeys\n      const condition = this.filteredSearchTokenKeys.searchByConditionUrl(p);\n\n      if (condition) {\n        hasFilteredSearch = true;\n        const canEdit = this.canEdit && this.canEdit(condition.tokenKey);\n        FilteredSearchVisualTokens.addFilterVisualToken(condition.tokenKey, condition.value, {\n          canEdit,\n        });\n      } else {\n        // Sanitize value since URL converts spaces into +\n        // Replace before decode so that we know what was originally + versus the encoded +\n        const sanitizedValue = value ? decodeURIComponent(value.replace(/\\+/g, ' ')) : value;\n        const match = this.filteredSearchTokenKeys.searchByKeyParam(keyParam);\n\n        if (match) {\n          // Use lastIndexOf because the token key is allowed to contain underscore\n          // e.g. 'my_reaction' is the token key of 'my_reaction_emoji'\n          const lastIndexOf = keyParam.lastIndexOf('_');\n          let sanitizedKey = lastIndexOf !== -1 ? keyParam.slice(0, lastIndexOf) : keyParam;\n          // Replace underscore with hyphen in the sanitizedkey.\n          // e.g. 'my_reaction' => 'my-reaction'\n          sanitizedKey = sanitizedKey.replace('_', '-');\n          const { symbol } = match;\n          let quotationsToUse = '';\n\n          if (sanitizedValue.indexOf(' ') !== -1) {\n            // Prefer \", but use ' if required\n            quotationsToUse = sanitizedValue.indexOf('\"') === -1 ? '\"' : \"'\";\n          }\n\n          hasFilteredSearch = true;\n          const canEdit = this.canEdit && this.canEdit(sanitizedKey, sanitizedValue);\n          const { uppercaseTokenName, capitalizeTokenValue } = match;\n          FilteredSearchVisualTokens.addFilterVisualToken(\n            sanitizedKey,\n            `${symbol}${quotationsToUse}${sanitizedValue}${quotationsToUse}`,\n            {\n              canEdit,\n              uppercaseTokenName,\n              capitalizeTokenValue,\n            },\n          );\n        } else if (!match && keyParam === 'assignee_id') {\n          const id = parseInt(value, 10);\n          if (usernameParams[id]) {\n            hasFilteredSearch = true;\n            const tokenName = 'assignee';\n            const canEdit = this.canEdit && this.canEdit(tokenName);\n            FilteredSearchVisualTokens.addFilterVisualToken(tokenName, `@${usernameParams[id]}`, {\n              canEdit,\n            });\n          }\n        } else if (!match && keyParam === 'author_id') {\n          const id = parseInt(value, 10);\n          if (usernameParams[id]) {\n            hasFilteredSearch = true;\n            const tokenName = 'author';\n            const canEdit = this.canEdit && this.canEdit(tokenName);\n            FilteredSearchVisualTokens.addFilterVisualToken(tokenName, `@${usernameParams[id]}`, {\n              canEdit,\n            });\n          }\n        } else if (!match && keyParam === 'search') {\n          hasFilteredSearch = true;\n          this.filteredSearchInput.value = sanitizedValue;\n        }\n      }\n    });\n\n    this.saveCurrentSearchQuery();\n\n    if (hasFilteredSearch) {\n      this.clearSearchButton.classList.remove('hidden');\n      this.handleInputPlaceholder();\n    }\n  }\n\n  searchState(e) {\n    e.preventDefault();\n    const target = e.currentTarget;\n    // remove focus outline after click\n    target.blur();\n\n    const state = target.dataset && target.dataset.state;\n\n    if (state) {\n      this.search(state);\n    }\n  }\n\n  search(state = null) {\n    const paths = [];\n    const searchQuery = DropdownUtils.getSearchQuery();\n\n    this.saveCurrentSearchQuery();\n\n    const tokenKeys = this.filteredSearchTokenKeys.getKeys();\n    const { tokens, searchToken } = this.tokenizer.processTokens(searchQuery, tokenKeys);\n    const currentState = state || getParameterByName('state') || 'opened';\n    paths.push(`state=${currentState}`);\n\n    tokens.forEach(token => {\n      const condition = this.filteredSearchTokenKeys.searchByConditionKeyValue(\n        token.key,\n        token.value.toLowerCase(),\n      );\n      const tokenConfig = this.filteredSearchTokenKeys.searchByKey(token.key) || {};\n      const { param } = tokenConfig;\n\n      // Replace hyphen with underscore to use as request parameter\n      // e.g. 'my-reaction' => 'my_reaction'\n      const underscoredKey = token.key.replace('-', '_');\n      const keyParam = param ? `${underscoredKey}_${param}` : underscoredKey;\n      let tokenPath = '';\n\n      if (condition) {\n        tokenPath = condition.url;\n      } else {\n        let tokenValue = token.value;\n\n        if (tokenConfig.lowercaseValueOnSubmit) {\n          tokenValue = tokenValue.toLowerCase();\n        }\n\n        if (\n          (tokenValue[0] === \"'\" && tokenValue[tokenValue.length - 1] === \"'\") ||\n          (tokenValue[0] === '\"' && tokenValue[tokenValue.length - 1] === '\"')\n        ) {\n          tokenValue = tokenValue.slice(1, tokenValue.length - 1);\n        }\n\n        tokenPath = `${keyParam}=${encodeURIComponent(tokenValue)}`;\n      }\n\n      paths.push(tokenPath);\n    });\n\n    if (searchToken) {\n      const sanitized = searchToken\n        .split(' ')\n        .map(t => encodeURIComponent(t))\n        .join('+');\n      paths.push(`search=${sanitized}`);\n    }\n\n    const parameterizedUrl = `?scope=all&utf8=%E2%9C%93&${paths.join('&')}`;\n\n    if (this.updateObject) {\n      this.updateObject(parameterizedUrl);\n    } else {\n      visitUrl(parameterizedUrl);\n    }\n  }\n\n  getUsernameParams() {\n    const usernamesById = {};\n    try {\n      const attribute = this.filteredSearchInput.getAttribute('data-username-params');\n      JSON.parse(attribute).forEach(user => {\n        usernamesById[user.id] = user.username;\n      });\n    } catch (e) {\n      // do nothing\n    }\n    return usernamesById;\n  }\n\n  tokenChange() {\n    const dropdown = this.dropdownManager.mapping[this.dropdownManager.currentDropdown];\n\n    if (dropdown) {\n      const currentDropdownRef = dropdown.reference;\n\n      this.setDropdownWrapper();\n      currentDropdownRef.dispatchInputEvent();\n    }\n  }\n\n  onrecentSearchesItemSelected(text) {\n    this.clearSearch();\n    this.filteredSearchInput.value = text;\n    this.filteredSearchInput.dispatchEvent(new CustomEvent('input'));\n    this.search();\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  canEdit() {\n    return true;\n  }\n}\n","import FilteredSearchManager from '~/filtered_search/filtered_search_manager';\n\nexport default ({\n  page,\n  filteredSearchTokenKeys,\n  isGroup,\n  isGroupAncestor,\n  isGroupDecendent,\n  stateFiltersSelector,\n}) => {\n  const filteredSearchEnabled = FilteredSearchManager && document.querySelector('.filtered-search');\n  if (filteredSearchEnabled) {\n    const filteredSearchManager = new FilteredSearchManager({\n      page,\n      isGroup,\n      isGroupAncestor,\n      isGroupDecendent,\n      filteredSearchTokenKeys,\n      stateFiltersSelector,\n    });\n    filteredSearchManager.setup();\n  }\n};\n","/* eslint-disable import/prefer-default-export  */\n\nexport const FILTERED_SEARCH = {\n  MERGE_REQUESTS: 'merge_requests',\n  ISSUES: 'issues',\n  ADMIN_RUNNERS: 'admin/runners',\n};\n"],"sourceRoot":""}