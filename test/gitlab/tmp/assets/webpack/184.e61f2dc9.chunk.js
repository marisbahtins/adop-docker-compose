(this.webpackJsonp=this.webpackJsonp||[]).push([[184],{106:function(t,e,r){"use strict";var s=r(0),i=r.n(s),n=["danger","primary","success","warning"],a=["sm","md","lg","xl"],l={name:"GlModal",props:{id:{type:String,required:!1,default:null},modalSize:{type:String,required:!1,default:"md",validator:function(t){return a.includes(t)}},headerTitleText:{type:String,required:!1,default:""},footerPrimaryButtonVariant:{type:String,required:!1,default:"primary",validator:function(t){return n.includes(t)}},footerPrimaryButtonText:{type:String,required:!1,default:""}},computed:{modalSizeClass:function(){return"md"===this.modalSize?"":"modal-".concat(this.modalSize)}},mounted:function(){i()(this.$el).on("shown.bs.modal",this.opened).on("hidden.bs.modal",this.closed)},beforeDestroy:function(){i()(this.$el).off("shown.bs.modal",this.opened).off("hidden.bs.modal",this.closed)},methods:{emitCancel:function(t){this.$emit("cancel",t)},emitSubmit:function(t){this.$emit("submit",t)},opened:function(){this.$emit("open")},closed:function(){this.$emit("closed")}}},u=r(3),o=Object(u.a)(l,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"modal fade",attrs:{id:t.id,tabindex:"-1",role:"dialog"}},[r("div",{staticClass:"modal-dialog",class:t.modalSizeClass,attrs:{role:"document"}},[r("div",{staticClass:"modal-content"},[r("div",{staticClass:"modal-header"},[t._t("header",[r("h4",{staticClass:"modal-title"},[t._t("title",[t._v(" "+t._s(t.headerTitleText)+" ")])],2),t._v(" "),r("button",{staticClass:"close js-modal-close-action",attrs:{"aria-label":t.s__("Modal|Close"),type:"button","data-dismiss":"modal"},on:{click:function(e){t.emitCancel(e)}}},[r("span",{attrs:{"aria-hidden":"true"}},[t._v("Ã—")])])])],2),t._v(" "),r("div",{staticClass:"modal-body"},[t._t("default")],2),t._v(" "),r("div",{staticClass:"modal-footer"},[t._t("footer",[r("button",{staticClass:"btn js-modal-cancel-action qa-modal-cancel-button",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){t.emitCancel(e)}}},[t._v("\n            "+t._s(t.s__("Modal|Cancel"))+"\n          ")]),t._v(" "),r("button",{staticClass:"btn js-modal-primary-action qa-modal-primary-button",class:"btn-"+t.footerPrimaryButtonVariant,attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){t.emitSubmit(e)}}},[t._v("\n            "+t._s(t.footerPrimaryButtonText)+"\n          ")])])],2)])])])},[],!1,null,null,null);o.options.__file="gl_modal.vue";e.a=o.exports},1979:function(t,e,r){"use strict";r.r(e);var s=r(0),i=r.n(s),n=r(252),a={components:{GlModal:r(106).a},props:{currentRequest:{type:Object,required:!0},metric:{type:String,required:!0},header:{type:String,required:!0},details:{type:String,required:!0},keys:{type:Array,required:!0}},computed:{metricDetails:function(){return this.currentRequest.details[this.metric]},detailsList:function(){return this.metricDetails[this.details]}}},l=r(3),u=Object(l.a)(a,function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.currentRequest.details?r("div",{staticClass:"view",attrs:{id:"peek-view-"+t.metric}},[r("button",{staticClass:"btn-blank btn-link bold",attrs:{"data-target":"#modal-peek-"+t.metric+"-details",type:"button","data-toggle":"modal"}},[t._v("\n    "+t._s(t.metricDetails.duration)+" / "+t._s(t.metricDetails.calls)+"\n  ")]),t._v(" "),r("gl-modal",{staticClass:"performance-bar-modal",attrs:{id:"modal-peek-"+t.metric+"-details","header-title-text":t.header,"modal-size":"xl"}},[r("table",{staticClass:"table"},[t.detailsList.length?t._l(t.detailsList,function(e,s){return r("tr",{key:s},[r("td",[r("strong",[t._v(t._s(e.duration)+"ms")])]),t._v(" "),t._l(t.keys,function(s){return r("td",{key:s,staticClass:"break-word"},[t._v(t._s(e[s]))])})],2)}):[r("tr",[r("td",[t._v("No "+t._s(t.header.toLowerCase())+" for this request.")])])]],2),t._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"})]),t._v("\n  "+t._s(t.metric)+"\n")],1):t._e()},[],!1,null,null,null);u.options.__file="detailed_metric.vue";var o=u.exports,c={props:{currentRequest:{type:Object,required:!0},requests:{type:Array,required:!0}},data:function(){return{currentRequestId:this.currentRequest.id}},watch:{currentRequestId:function(t){this.$emit("change-current-request",t)}},methods:{truncatedUrl:function(t){var e=t.replace(/\/$/,"").split("/"),r=e[e.length-1];return r.match(/^\d+$/)&&(r="".concat(e[e.length-2],"/").concat(r)),r}}},d=Object(l.a)(c,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"peek-request-selector"}},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.currentRequestId,expression:"currentRequestId"}],on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.currentRequestId=e.target.multiple?r:r[0]}}},t._l(t.requests,function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v("\n      "+t._s(t.truncatedUrl(e.url))+"\n    ")])}),0)])},[],!1,null,null,null);d.options.__file="request_selector.vue";var m=d.exports,p={props:{currentRequest:{type:Object,required:!0},metric:{type:String,required:!0}},computed:{duration:function(){return this.currentRequest.details[this.metric]&&this.currentRequest.details[this.metric].duration},calls:function(){return this.currentRequest.details[this.metric]&&this.currentRequest.details[this.metric].calls}}},_=Object(l.a)(p,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"view",attrs:{id:"peek-view-"+t.metric}},[t.currentRequest.details?r("span",{staticClass:"bold"},[t._v(" "+t._s(t.duration)+" / "+t._s(t.calls)+" ")]):t._e(),t._v("\n  "+t._s(t.metric)+"\n")])},[],!1,null,null,null);_.options.__file="simple_metric.vue";var h={components:{detailedMetric:o,requestSelector:m,simpleMetric:_.exports},props:{store:{type:Object,required:!0},env:{type:String,required:!0},requestId:{type:String,required:!0},peekUrl:{type:String,required:!0},profileUrl:{type:String,required:!0}},detailedMetrics:[{metric:"pg",header:"SQL queries",details:"queries",keys:["sql"]},{metric:"gitaly",header:"Gitaly calls",details:"details",keys:["feature","request"]}],simpleMetrics:["redis"],data:function(){return{currentRequestId:""}},computed:{requests:function(){return this.store.requestsWithDetails()},currentRequest:{get:function(){return this.store.findRequest(this.currentRequestId)},set:function(t){this.currentRequestId=t}},initialRequest:function(){return this.currentRequestId===this.requestId},lineProfileModal:function(){return i()("#modal-peek-line-profile")},hasHost:function(){return this.currentRequest&&this.currentRequest.details&&this.currentRequest.details.host},birdEmoji:function(){return this.hasHost&&this.currentRequest.details.host.canary?Object(n.glEmojiTag)("baby_chick"):""}},mounted:function(){this.currentRequest=this.requestId,this.lineProfileModal.length&&this.lineProfileModal.modal("toggle")},methods:{changeCurrentRequest:function(t){this.currentRequest=t}}},f=Object(l.a)(h,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:t.env,attrs:{id:"js-peek"}},[t.currentRequest?r("div",{staticClass:"d-flex container-fluid container-limited"},[r("div",{staticClass:"view",attrs:{id:"peek-view-host"}},[t.hasHost?r("span",{staticClass:"current-host",class:{canary:t.currentRequest.details.host.canary}},[r("span",{domProps:{innerHTML:t._s(t.birdEmoji)}}),t._v(" "+t._s(t.currentRequest.details.host.hostname)+"\n      ")]):t._e()]),t._v(" "),t._l(t.$options.detailedMetrics,function(e){return r("detailed-metric",{key:e.metric,attrs:{"current-request":t.currentRequest,metric:e.metric,header:e.header,details:e.details,keys:e.keys}})}),t._v(" "),t.initialRequest?r("div",{staticClass:"view",attrs:{id:"peek-view-rblineprof"}},[t.lineProfileModal.length?r("button",{staticClass:"btn-link btn-blank",attrs:{"data-toggle":"modal","data-target":"#modal-peek-line-profile"}},[t._v("\n        profile\n      ")]):r("a",{attrs:{href:t.profileUrl}},[t._v(" profile ")])]):t._e(),t._v(" "),t._l(t.$options.simpleMetrics,function(e){return r("simple-metric",{key:e,attrs:{"current-request":t.currentRequest,metric:e}})}),t._v(" "),r("div",{staticClass:"view",attrs:{id:"peek-view-gc"}},[t.currentRequest.details?r("span",{staticClass:"bold"},[r("span",{attrs:{title:"Invoke Time"}},[t._v(t._s(t.currentRequest.details.gc.gc_time))]),t._v("ms / "),r("span",{attrs:{title:"Invoke Count"}},[t._v(t._s(t.currentRequest.details.gc.invokes))]),t._v(" gc\n      ")]):t._e()]),t._v(" "),t.currentRequest?r("request-selector",{staticClass:"ml-auto",attrs:{"current-request":t.currentRequest,requests:t.requests},on:{"change-current-request":t.changeCurrentRequest}}):t._e()],2):t._e()])},[],!1,null,null,null);f.options.__file="performance_bar_app.vue";e.default=f.exports}}]);
//# sourceMappingURL=184.e61f2dc9.chunk.js.map