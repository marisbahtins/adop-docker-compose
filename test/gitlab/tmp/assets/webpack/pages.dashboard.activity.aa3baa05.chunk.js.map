{"version":3,"sources":["webpack:///./pager.js","webpack:///./activities.js","webpack:///./pages/dashboard/activity/index.js"],"names":["jquery__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","jquery__WEBPACK_IMPORTED_MODULE_0___default","n","_lib_utils_common_utils__WEBPACK_IMPORTED_MODULE_1__","_lib_utils_axios_utils__WEBPACK_IMPORTED_MODULE_2__","_lib_utils_url_utility__WEBPACK_IMPORTED_MODULE_3__","__webpack_exports__","init","limit","arguments","length","undefined","preload","disable","prepareData","$","noop","callback","container","this","url","data","removeParams","offset","parseInt","getParameterByName","loading","concat","first","getOld","initLoadMore","_this","show","axios","get","params","then","_ref","append","count","html","isScrollable","hide","catch","$w","window","document","height","scrollTop","_this2","off","endlessScroll","bottomPixels","fireDelay","fireOnce","ceaseFire","is","Activities","_classCallCheck","Pager","updateTooltips","on","e","preventDefault","toggleFilter","currentTarget","reloadActivities","localTimeAgo","sender","$sender","filter","attr","split","removeClass","Cookies","set","closest","toggleClass","r","_activities__WEBPACK_IMPORTED_MODULE_0__","addEventListener"],"mappings":"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","file":"pages.dashboard.activity.aa3baa05.chunk.js","sourcesContent":["import $ from 'jquery';\nimport { getParameterByName } from '~/lib/utils/common_utils';\nimport axios from './lib/utils/axios_utils';\nimport { removeParams } from './lib/utils/url_utility';\n\nconst ENDLESS_SCROLL_BOTTOM_PX = 400;\nconst ENDLESS_SCROLL_FIRE_DELAY_MS = 1000;\n\nexport default {\n  init(\n    limit = 0,\n    preload = false,\n    disable = false,\n    prepareData = $.noop,\n    callback = $.noop,\n    container = '',\n  ) {\n    this.url = $('.content_list').data('href') || removeParams(['limit', 'offset']);\n    this.limit = limit;\n    this.offset = parseInt(getParameterByName('offset'), 10) || this.limit;\n    this.disable = disable;\n    this.prepareData = prepareData;\n    this.callback = callback;\n    this.loading = $(`${container} .loading`).first();\n    if (preload) {\n      this.offset = 0;\n      this.getOld();\n    }\n    this.initLoadMore();\n  },\n\n  getOld() {\n    this.loading.show();\n    axios\n      .get(this.url, {\n        params: {\n          limit: this.limit,\n          offset: this.offset,\n        },\n      })\n      .then(({ data }) => {\n        this.append(data.count, this.prepareData(data.html));\n        this.callback();\n\n        // keep loading until we've filled the viewport height\n        if (!this.disable && !this.isScrollable()) {\n          this.getOld();\n        } else {\n          this.loading.hide();\n        }\n      })\n      .catch(() => this.loading.hide());\n  },\n\n  append(count, html) {\n    $('.content_list').append(html);\n    if (count > 0) {\n      this.offset += count;\n    } else {\n      this.disable = true;\n    }\n  },\n\n  isScrollable() {\n    const $w = $(window);\n    return $(document).height() > $w.height() + $w.scrollTop() + ENDLESS_SCROLL_BOTTOM_PX;\n  },\n\n  initLoadMore() {\n    $(document).off('scroll');\n    $(document).endlessScroll({\n      bottomPixels: ENDLESS_SCROLL_BOTTOM_PX,\n      fireDelay: ENDLESS_SCROLL_FIRE_DELAY_MS,\n      fireOnce: true,\n      ceaseFire: () => this.disable === true,\n      callback: () => {\n        if (!this.loading.is(':visible')) {\n          this.loading.show();\n          this.getOld();\n        }\n      },\n    });\n  },\n};\n","/* eslint-disable class-methods-use-this */\n\nimport $ from 'jquery';\nimport Cookies from 'js-cookie';\nimport Pager from './pager';\nimport { localTimeAgo } from './lib/utils/datetime_utility';\n\nexport default class Activities {\n  constructor(container = '') {\n    this.container = container;\n\n    Pager.init(20, true, false, data => data, this.updateTooltips, this.container);\n\n    $('.event-filter-link').on('click', e => {\n      e.preventDefault();\n      this.toggleFilter(e.currentTarget);\n      this.reloadActivities();\n    });\n  }\n\n  updateTooltips() {\n    localTimeAgo($('.js-timeago', '.content_list'));\n  }\n\n  reloadActivities() {\n    $('.content_list').html('');\n    Pager.init(20, true, false, data => data, this.updateTooltips, this.container);\n  }\n\n  toggleFilter(sender) {\n    const $sender = $(sender);\n    const filter = $sender.attr('id').split('_')[0];\n\n    $('.event-filter .active').removeClass('active');\n    Cookies.set('event_filter', filter);\n\n    $sender.closest('li').toggleClass('active');\n  }\n}\n","import Activities from '~/activities';\n\ndocument.addEventListener('DOMContentLoaded', () => new Activities());\n"],"sourceRoot":""}