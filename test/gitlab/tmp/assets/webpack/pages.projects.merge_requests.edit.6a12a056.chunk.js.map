{"version":3,"sources":["webpack:///./users_select.js","webpack:///./autosave.js","webpack:////home/git/gitlab/node_modules/mousetrap/plugins/pause/mousetrap-pause.js","webpack:///./create_label.js","webpack:///./labels_select.js","webpack:///./milestone_select.js","webpack:///./image_diff/helpers/badge_helper.js","webpack:///./image_diff/helpers/comment_indicator_helper.js","webpack:///./image_diff/image_badge.js","webpack:///./image_diff/image_diff.js","webpack:///./lib/utils/image_utility.js","webpack:///./image_diff/view_types.js","webpack:///./image_diff/replaced_image_diff.js","webpack:///./commit/image_file.js","webpack:///./image_diff/helpers/index.js","webpack:///./image_diff/helpers/dom_helper.js","webpack:///./image_diff/helpers/utils_helper.js","webpack:///./pages/projects/merge_requests/edit/index.js","webpack:///./files_comment_button.js","webpack:///./single_file_diff.js","webpack:///./diff.js","webpack:///./boards/stores/boards_store.js","webpack:///./blob/template_selector.js","webpack:///./templates/issuable_template_selector.js","webpack:///./templates/issuable_template_selectors.js","webpack:///./issuable/auto_width_dropdown_select.js","webpack:///./issuable_form.js","webpack:///./behaviors/shortcuts/shortcuts_navigation.js","webpack:///./project_select_combo_button.js","webpack:///./project_select.js","webpack:///./pages/projects/project.js","webpack:///./pages/projects/merge_requests/init_merge_request.js","webpack:///./pages/projects/index.js","webpack:///./boards/stores/modal_store.js","webpack:///./dropzone_input.js","webpack:///./gl_form.js","webpack:///./issuable_bulk_update_actions.js","webpack:///./zen_mode.js","webpack:////home/git/gitlab/node_modules/pikaday/pikaday.js"],"names":["UsersSelect","currentUser","els","$els","options","arguments","length","undefined","this","users","bind","user","usersPath","userPath","_typeof","JSON","parse","_this","handleClick","$","each","i","dropdown","$block","$collapsedSidebar","$dropdown","$loading","$selectbox","$value","abilityName","assignTo","assigneeTemplate","collapsedAssigneeTemplate","defaultLabel","defaultNullUser","firstUser","issueURL","selectedId","selectedIdDefault","showAnyUser","showNullUser","showMenuAbove","projectId","data","groupId","showCurrentUser","todoFilter","todoStateFilter","authorId","closest","find","fadeOut","assignYourself","unassignedSelected","concat","remove","input","document","createElement","type","name","currentUserInfo","value","id","dataset","meta","_","escape","parent","before","after","addEventListener","getSelectedUserInputs","getSelected","map","index","parseInt","get","checkMaxSelect","maxSelect","selected","firstSelectedId","emitSidebarEvent","getMultiSelectDropdownTitle","selectedUser","isSelected","selectedUsers","filter","u","otherSelected","s","on","e","preventDefault","currentTarget","hide","text","removeClass","$input","val","gon","current_user_id","current_user_fullname","assignee_id","fadeIn","trigger","axios","put","then","_ref","tooltipTitle","assignee","username","avatar","avatar_url","__","html","attr","tooltip","template","glDropdown","term","callback","instance","processData","anyUser","len","obj","showDivider","hasClass","selectedInputs","uniq","a","userId","_input$dataset","avatarUrl","splice","unshift","beforeDivider","header","indexOf","sort","b","forEach","positionMenuAbove","filterable","filterRemote","search","fields","selectable","fieldName","toggleLabel","el","inputValue","filterInput","multiSelect","filteredFullData","parseData","addClass","hidden","css","inputMeta","clicked","isIssueIndex","isMRIndex","page","$el","isMarking","selectedObj","isActive","previouslySelected","toLowerCase","element","addInput","show","isSelecting","ModalStore","store","Issuable","filterResults","submit","opened","highlightSelected","updateLabel","renderRow","img","default_avatar_url","select","showEmailUser","skipLdap","skipUsers","select2","placeholder","multiple","minimumInputLength","query","emailUser","nullUser","ref","results","match","trimmed","trim","invite","initSelection","args","slice","call","apply","formatResult","formatSelection","dropdownCssClass","escapeMarkup","m","window","noop","prototype","user_id","test","url","buildUrl","replace","_ref2","params","active","project_id","group_id","skip_ldap","todo_filter","todo_state_filter","current_user","author_id","skip_users","_ref3","relative_url_root","Autosave","field","key","_classCallCheck","isLocalStorageAvailable","AccessorUtilities","isLocalStorageAccessSafe","join","restore","save","localStorage","getItem","event","Event","bubbles","cancelable","dispatchEvent","setItem","reset","removeItem","off","Mousetrap","self","_originalStopCallback","stopCallback","enabled","combo","pause","unpause","CreateLabelDropdown","namespacePath","projectPath","$dropdownBack","$cancelButton","$newLabelField","$newColorField","$colorPreview","$newLabelError","$newLabelCreateButton","$colorSuggestions","disable","cleanBinding","addBinding","$this","addColorValue","enableLabelCreateButton","resetForm","stopPropagation","saveLabel","enable","Api","newLabel","title","color","label","errors","message","Object","keys","humanize","LabelsSelect","$form","$sidebarCollapsedValue","issueUpdateURL","labelUrl","saveLabelData","selectedLabel","showAny","showNo","$sidebarLabelTooltip","initialSelected","$dropdownContainer","split","is","isEqual","label_ids","labelCount","labelTooltipTitle","labelTitles","labels","getLabelTemplate","removeAttr","push","container","catch","flash","res","extraData","isAny","$a","$li","colorEl","indeterminate","removesAll","selectedClass","marked","dropdownName","dropdownValue","toString","prop","$dropdownParent","$dropdownInputField","selectedLabels","sprintf","firstLabel","vue","clickEvent","boardsModel","fadeOutLoader","enableBulkLabelDropdown","setDropdownData","boardsStore","detail","issue","ListLabel","textColor","update","previousSelection","preserveContext","setOriginalDropdownData","bindEvents","tplData","tpl","onSelectCheckboxIssue","IssuableBulkUpdateActions","willUpdateLabels","markedIds","unmarkedIds","indeterminateIds","getOriginalIndeterminateIds","getOriginalCommonIds","$container","MilestoneSelect","currentProject","init","milestoneLinkNoneTemplate","milestoneLinkTemplate","selectedMilestone","selectedMilestoneDefault","milestonesUrl","showUpcoming","showStarted","useId","defaultNo","$selectBox","extraOptions","milestone","modalStoreFilter","milestone_id","remaining","timeFor","due_date","boardStoreIssueSet","ListMilestone","boardStoreIssueDelete","createImageBadge","noteId","x","y","classNames","buttonEl","className","classList","add","setAttribute","style","left","top","addCommentIndicator","containerEl","innerHTML","gl","utils","spriteIcon","appendChild","defaultMeta","width","height","ImageBadge","discussionId","actual","browser","imageEl","imageDiffHelper","resizeCoordinatesToImageElement","ImageDiff","image_diff_classCallCheck","canCreateNote","renderCommentBadge","$noteContainer","imageBadges","imageFrameEl","querySelector","imageClickedWrapper","imageClicked","imageBlurredWrapper","removeCommentIndicator","addBadgeWrapper","addBadge","removeBadgeWrapper","removeBadge","renderBadgesWrapper","renderBadges","complete","naturalHeight","toggleCollapsed","commentIndicatorOnClick","customEvent","selection","getTargetSelection","setPositionDataAttribute","showCommentIndicator","_toConsumableArray","querySelectorAll","renderBadge","discussionEl","imageBadge","generateBadgeFromDiscussionDOM","coordinate","addImageCommentBadge","numberBadgeOptions","assign","badgeText","addImageBadge","_event$detail","addAvatarBadge","badgeNumber","updateDiscussionBadgeNumber","indexToRemove","imageBadgeEls","badge","updatedBadgeNumber","innerText","updateDiscussionAvatarBadgeNumber","viewTypes","TWO_UP","SWIPE","ONION_SKIN","ReplacedImageDiff","_this$imageFrameEls","_this$viewModesEls","defaultViewType","imageFrameEls","_defineProperty","viewModesEl","viewModesEls","currentView","generateImageEls","imageEls","getOwnPropertyNames","viewType","_get","_getPrototypeOf","changeToViewTwoUp","changeView","changeToViewSwipe","changeToViewOnionSkin","newView","validate","indicator","replaced_image_diff_toConsumableArray","setTimeout","renderNewView","removed","normalizedIndicator","image","availWidth","viewModes","ImageFile","file","image_file_classCallCheck","two-up","wrap","requestImageInfo","swipe","maxHeight","maxWidth","view","$swipeWrap","$swipeBar","$swipeFrame","wrapPadding","_slicedToArray","prepareFrames","initDraggable","onion-skin","dragTrackWidth","_ref4","$frame","$track","$dragger","$frameAdded","framePadding","opacity","deletedWidth","deletedHeight","initViewModes","waitForImages","initView","viewMode","activateViewMode","views","padding","dragging","$body","$offsetEl","pageX","offset","frame","domImg","naturalWidth","helpers","__webpack_exports__","commentIndicatorHelper","commentIndicatorEl","willRemove","focus","avatarBadgeEl","position","positionObject","stringify","newBadgeNumber","discussionNotesEl","formEl","isCollapsed","contains","display","imageWidth","imageHeight","widthRatio","heightRatio","Math","round","firstNoteEl","offsetX","offsetY","actualWidth","actualHeight","normalizedX","max","min","normalizedY","initImageDiff","fileEl","diff","__webpack_require__","r","_pages_projects_merge_requests_init_merge_request__WEBPACK_IMPORTED_MODULE_0__","initMergeRequest","LINE_COLUMN_CLASSES","files_comment_button","$diffFile","userCanCreateNote","isParallelView","Cookies","showButton","hideButton","buttonParentElement","getButtonParent","validateButtonParent","nextElementSibling","hoveredElement","previousElementSibling","parentNode","WRAPPER","LOADING_HTML","COLLAPSED_HTML","SingleFileDiff","toggleDiff","content","$toggleIcon","diffForPath","isOpen","collapsedContent","loadingContent","target","$target","cb","hasError","getContentHTML","diffNotesCompileComponents","syntaxHighlight","$file","FilesCommentButton","createFlash","isBound","Diff","diff_classCallCheck","tab","getElementById","isLocked","firstFile","first","hasAttribute","handleClickUnfold","handleClickLineNum","handleParallelLineDown","getLocationHash","highlightSelectedLine","openAnchoredDiff","since","to","_this$lineNumbers2","lineNumbers","oldLineNumber","newLineNumber","bottom","unfold","lineNumber","prevNewLine","prev","parents","link","replaceWith","locationHash","anchoredDiff","diffFile","clickTarget","hash","history","pushState","location","line","table","lineClass","children","toArray","elm","$diffFiles","d","jquery__WEBPACK_IMPORTED_MODULE_0__","jquery__WEBPACK_IMPORTED_MODULE_0___default","n","underscore__WEBPACK_IMPORTED_MODULE_1__","underscore__WEBPACK_IMPORTED_MODULE_1___default","vue__WEBPACK_IMPORTED_MODULE_2__","js_cookie__WEBPACK_IMPORTED_MODULE_3__","js_cookie__WEBPACK_IMPORTED_MODULE_3___default","_lib_utils_common_utils__WEBPACK_IMPORTED_MODULE_4__","disabled","path","state","moving","list","create","lists","getUrlParamsArray","addList","listObj","defaultAvatar","List","new","backlogList","findList","issues","removeIssue","sortBy","removeBlankState","updateNewListDropdown","listId","shouldAddBlankState","addBlankState","welcomeIsHidden","list_type","removeList","set","expires","parseBoolean","moveList","listFrom","orderLists","_this2","moveIssueToList","listTo","newIndex","issueTo","findIssue","issueLists","getLists","listLabels","listIssue","updateIssueLabel","removeLabel","findAssignee","removeAssignee","currentMilestone","currentLists","some","removeMilestone","addMilestone","currentList","addIssue","removeLabels","shouldRemoveIssue","moveIssueInList","oldIndex","idArray","beforeId","afterId","moveIssue","byType","findListByLabelId","updateFiltersUrl","_len","Array","_key","Vue","_len2","_key2","delete","TemplateSelector","pattern","wrapper","editor","$filenameInput","$dropdownIcon","initDropdown","listenForFilenameInput","renderMatchedDropdown","initAutosizeUpdateEvent","item","fetchFileTemplate","autosizeUpdateEvent","createEvent","initEvent","requestFile","skipFocus","newValue","setValue","IssuableTemplateSelector","_getPrototypeOf2","issuable_template_selector_classCallCheck","_possibleConstructorReturn","issuableType","titleInput","initialQuery","setInputValueToTemplateContent","currentTemplate","startLoadingSpinner","issueTemplate","err","stopLoadingSpinner","setEditorContent","IssuableTemplateSelectors","$dropdowns","issuable_template_selectors_classCallCheck","initEditor","getValue","instanceCount","AutoWidthDropdownSelect","selectElement","$selectElement","dropdownClass","dropdownCss","resultantWidth","offsetParentWidth","offsetParent","outerWidth","_objectSpread","selectOptions","IssuableForm","form","issuable_form_classCallCheck","toggleWip","renderWipExplanation","resetAutosave","handleSubmit","wipRegex","gfmAutoComplete","GfmAutoComplete","dataSources","setup","usersSelect","zenMode","ZenMode","titleField","descriptionField","initAutosave","initWip","$issuableDueDate","calendar","Pikaday","theme","format","dateString","parsePikadayDate","date","pikadayToString","onSelect","dateText","setDate","$targetBranchSelect","initTargetBranchDropdown","autosave","pathname","$wipExplanation","$noWipExplanation","workInProgress","removeWip","addWip","issuable_form_objectSpread","ajax","dataType","quietMillis","ShortcutsNavigation","findAndFollowLink","enabledHelp","Shortcuts","ProjectSelectComboButton","projectSelectInput","newItemBtn","resourceType","resourceLabel","formattedText","deriveTextVariants","initLocalStorage","siblings","openDropdown","getProjectFromLocalStorage","selectProject","localStorageKey","localStorageItemType","setBtnTextFromLocalStorage","selectedProjectData","projectMeta","setNewItemBtnAttributes","setProjectInLocalStorage","cachedProjectData","project","defaultTextPrefix","presetTextSuffix","projectString","projectSelect","simpleFilter","includeGroups","allProjects","orderBy","withIssuesEnabled","withMergeRequestsEnabled","withShared","includeProjectsInSubgroups","allowClear","finalCallback","projectsCallback","projects","groupsCallback","groups","groupProjects","with_issues_enabled","with_merge_requests_enabled","with_shared","include_subgroups","order_by","membership","web_url","name_with_namespace","Project","$cloneOptions","$projectCloneField","$cloneBtnLabel","mobileCloneField","selectedCloneOption","cloneType","activeText","$label","toggleClass","clipboardText","initRefSwitcher","cookieKey","projectSelectDropdown","changeProject","refListItem","refLink","href","filterByText","inputFieldName","li","cloneNode","textContent","$visit","shouldVisit","action","divider","visitUrl","serialize","_diff__WEBPACK_IMPORTED_MODULE_1__","_behaviors_shortcuts_shortcuts_navigation__WEBPACK_IMPORTED_MODULE_2__","_gl_form__WEBPACK_IMPORTED_MODULE_3__","_issuable_form__WEBPACK_IMPORTED_MODULE_4__","_labels_select__WEBPACK_IMPORTED_MODULE_5__","_milestone_select__WEBPACK_IMPORTED_MODULE_6__","_templates_issuable_template_selectors__WEBPACK_IMPORTED_MODULE_7__","GLForm","_projects_gke_cluster_dropdowns__WEBPACK_IMPORTED_MODULE_0__","_persistent_user_callout__WEBPACK_IMPORTED_MODULE_1__","_project__WEBPACK_IMPORTED_MODULE_2__","_behaviors_shortcuts_shortcuts_navigation__WEBPACK_IMPORTED_MODULE_3__","body","callout","PersistentUserCallout","initGkeDropdowns","columns","issuesCount","selectedIssues","showAddIssuesModal","activeTab","selectedList","searchTerm","loading","loadingNewPage","filterLoading","perPage","getSelectedIssues","issueObj","removeSelectedIssue","addSelectedIssue","selectedCount","issueUpdate","selectedIssueIndex","forcePurge","fIssue","filteredIssue","dropzoneInput","handlePaste","pasteText","addFileToForm","updateAttachingMessage","isImage","getFilename","uploadFile","$attachButton","$attachingFileMessage","$retryLink","$uploadProgress","$uploadingErrorContainer","$uploadingErrorMessage","$uploadingProgressContainer","uploadsPath","uploads_path","maxFileSize","max_file_size","formTextarea","$mdArea","setupMarkdownPreview","$formDropzone","append","dropzone","dictDefaultMessage","clickable","paramName","maxFilesize","uploadMultiple","headers","csrf","previewContainer","processing","alert","dragover","dragleave","drop","success","response","processingFileCount","getQueuedFiles","getUploadingFiles","shouldPad","markdown","error","errorMessage","xhr","responseText","isString","totaluploadprogress","totalUploadProgress","files","sending","removedfile","queuecomplete","child","Dropzone","forElement","removeAllFiles","dropzoneInstance","failedFiles","failedFile","status","ERROR","accepted","addFile","pasteEvent","originalEvent","clipboardData","items","filename","getAsFile","textarea","caretStart","selectionStart","caretEnd","selectionEnd","textEnd","beforeSelection","substring","afterSelection","setSelectionRange","scrollHeight","getData","closeSpinner","formData","FormData","post","md","$child","insertToTextArea","messageContainer","attachingMessage","filesCount","click","autoDiscover","enableGFM","GFMConfig","destroy","setupForm","clearEventListeners","autoComplete","isNewForm","disableButtonIfEmptyField","autosize","addEventListeners","addMarkdownListeners","isAutosizeable","setupAutosize","setHeightData","destroyAutosize","outerHeight","removeMarkdownListeners","_lib_utils_axios_utils__WEBPACK_IMPORTED_MODULE_2__","_flash__WEBPACK_IMPORTED_MODULE_3__","prefixId","getElement","$labelDropdown","onFormSubmit","getFormDataAsObject","reload","onFormSubmitFailure","Flash","has","getLabelsFromSelection","labelsData","labelId","getUnmarkedIndeterminedLabels","result","labelsToKeep","state_event","assignee_ids","issuable_ids","subscription_event","add_label_ids","remove_label_ids","$labelSelect","getOriginalMarkedIds","labelIds","intersection","_this3","_this4","uniqueIds","issuableLabels","difference","selector","scopeEl","active_backdrop","active_textarea","enter","exit","keyCode","backdrop","scrollTo","$dropzone","zen_area","root","factory","moment","Error","code","module","exports","hasMoment","hasEventListeners","sto","addEvent","capture","attachEvent","removeEvent","removeEventListener","detachEvent","cn","isArray","isDate","isNaN","getTime","isWeekend","day","getDay","getDaysInMonth","year","month","isLeapYear","setToStartOfDay","setHours","compareDates","extend","from","overwrite","hasProp","nodeName","Date","fireEvent","eventName","ev","createEventObject","adjustCalendar","ceil","abs","floor","defaults","bound","reposition","defaultDate","setDefaultDate","firstDay","formatStrict","minDate","maxDate","yearRange","showWeekNumber","pickWholeWeek","minYear","maxYear","minMonth","maxMonth","startRange","endRange","isRTL","yearSuffix","showMonthAfterYear","showDaysInNextAndPreviousMonths","enableSelectionDaysInNextAndPreviousMonths","numberOfMonths","mainCalendar","blurFieldOnSelect","i18n","previousMonth","nextMonth","months","weekdays","weekdaysShort","events","onOpen","onClose","onDraw","renderDayName","opts","abbr","renderDay","arr","ariaSelected","isEmpty","isDisabled","isToday","hasEvent","isInRange","isStartRange","isEndRange","days","isRowSelected","reverse","renderTitle","c","refYear","randId","j","monthHtml","yearHtml","_o","isMinYear","isMaxYear","next","config","_onMouseDown","_v","srcElement","prevMonth","getAttribute","blur","_c","returnValue","_onChange","gotoMonth","gotoYear","_onKeyChange","isVisible","adjustDate","_onInputChange","firedBy","isValid","toDate","_onInputFocus","_onInputClick","_onInputBlur","pEl","activeElement","_b","_onClick","onchange","insertBefore","nextSibling","defDate","gotoDate","disableWeekends","disableDayFn","nom","setMinDate","setMaxDate","fallback","getFullYear","_d","toDateString","getMoment","setMoment","preventOnSelect","isMoment","getDate","draw","newCalendar","calendars","firstVisibleDate","lastVisibleDate","visibleDate","setMonth","getMonth","adjustCalendars","sign","newDay","valueOf","gotoToday","setStartRange","setEndRange","force","_y","_m","random","substr","render","adjustPosition","viewportWidth","viewportHeight","scrollTop","clientRect","offsetWidth","offsetHeight","innerWidth","documentElement","clientWidth","innerHeight","clientHeight","pageYOffset","getBoundingClientRect","pageXOffset","offsetLeft","offsetTop","now","row","yearOfPreviousMonth","yearOfNextMonth","daysInPreviousMonth","cells","onejan","isWeekSelected","dayNumber","monthNumber","yearNumber","dayConfig","renderHead","renderTable","str","v","removeChild"],"mappings":"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","file":"pages.projects.merge_requests.edit.6a12a056.chunk.js","sourcesContent":["/* eslint-disable func-names, one-var, no-var, prefer-rest-params, vars-on-top, prefer-arrow-callback, consistent-return, object-shorthand, no-shadow, no-unused-vars, no-else-return, no-self-compare, prefer-template, no-unused-expressions, yoda, prefer-spread, camelcase, no-param-reassign */\n/* global Issuable */\n/* global emitSidebarEvent */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport axios from './lib/utils/axios_utils';\nimport { __ } from './locale';\nimport ModalStore from './boards/stores/modal_store';\n\n// TODO: remove eventHub hack after code splitting refactor\nwindow.emitSidebarEvent = window.emitSidebarEvent || $.noop;\n\nfunction UsersSelect(currentUser, els, options = {}) {\n  var $els;\n  this.users = this.users.bind(this);\n  this.user = this.user.bind(this);\n  this.usersPath = '/autocomplete/users.json';\n  this.userPath = '/autocomplete/users/:id.json';\n  if (currentUser != null) {\n    if (typeof currentUser === 'object') {\n      this.currentUser = currentUser;\n    } else {\n      this.currentUser = JSON.parse(currentUser);\n    }\n  }\n\n  const { handleClick } = options;\n\n  $els = $(els);\n\n  if (!els) {\n    $els = $('.js-user-search');\n  }\n\n  $els.each(\n    (function(_this) {\n      return function(i, dropdown) {\n        var options = {};\n        var $block,\n          $collapsedSidebar,\n          $dropdown,\n          $loading,\n          $selectbox,\n          $value,\n          abilityName,\n          assignTo,\n          assigneeTemplate,\n          collapsedAssigneeTemplate,\n          defaultLabel,\n          defaultNullUser,\n          firstUser,\n          issueURL,\n          selectedId,\n          selectedIdDefault,\n          showAnyUser,\n          showNullUser,\n          showMenuAbove;\n        $dropdown = $(dropdown);\n        options.projectId = $dropdown.data('projectId');\n        options.groupId = $dropdown.data('groupId');\n        options.showCurrentUser = $dropdown.data('currentUser');\n        options.todoFilter = $dropdown.data('todoFilter');\n        options.todoStateFilter = $dropdown.data('todoStateFilter');\n        showNullUser = $dropdown.data('nullUser');\n        defaultNullUser = $dropdown.data('nullUserDefault');\n        showMenuAbove = $dropdown.data('showMenuAbove');\n        showAnyUser = $dropdown.data('anyUser');\n        firstUser = $dropdown.data('firstUser');\n        options.authorId = $dropdown.data('authorId');\n        defaultLabel = $dropdown.data('defaultLabel');\n        issueURL = $dropdown.data('issueUpdate');\n        $selectbox = $dropdown.closest('.selectbox');\n        $block = $selectbox.closest('.block');\n        abilityName = $dropdown.data('abilityName');\n        $value = $block.find('.value');\n        $collapsedSidebar = $block.find('.sidebar-collapsed-user');\n        $loading = $block.find('.block-loading').fadeOut();\n        selectedIdDefault = defaultNullUser && showNullUser ? 0 : null;\n        selectedId = $dropdown.data('selected');\n\n        if (selectedId === undefined) {\n          selectedId = selectedIdDefault;\n        }\n\n        const assignYourself = function() {\n          const unassignedSelected = $dropdown\n            .closest('.selectbox')\n            .find(`input[name='${$dropdown.data('fieldName')}'][value=0]`);\n\n          if (unassignedSelected) {\n            unassignedSelected.remove();\n          }\n\n          // Save current selected user to the DOM\n          const input = document.createElement('input');\n          input.type = 'hidden';\n          input.name = $dropdown.data('fieldName');\n\n          const currentUserInfo = $dropdown.data('currentUserInfo');\n\n          if (currentUserInfo) {\n            input.value = currentUserInfo.id;\n            input.dataset.meta = _.escape(currentUserInfo.name);\n          } else if (_this.currentUser) {\n            input.value = _this.currentUser.id;\n          }\n\n          if ($selectbox) {\n            $dropdown.parent().before(input);\n          } else {\n            $dropdown.after(input);\n          }\n        };\n\n        if ($block[0]) {\n          $block[0].addEventListener('assignYourself', assignYourself);\n        }\n\n        const getSelectedUserInputs = function() {\n          return $selectbox.find(`input[name=\"${$dropdown.data('fieldName')}\"]`);\n        };\n\n        const getSelected = function() {\n          return getSelectedUserInputs()\n            .map((index, input) => parseInt(input.value, 10))\n            .get();\n        };\n\n        const checkMaxSelect = function() {\n          const maxSelect = $dropdown.data('maxSelect');\n          if (maxSelect) {\n            const selected = getSelected();\n\n            if (selected.length > maxSelect) {\n              const firstSelectedId = selected[0];\n              const firstSelected = $dropdown\n                .closest('.selectbox')\n                .find(`input[name='${$dropdown.data('fieldName')}'][value=${firstSelectedId}]`);\n\n              firstSelected.remove();\n              emitSidebarEvent('sidebar.removeAssignee', {\n                id: firstSelectedId,\n              });\n            }\n          }\n        };\n\n        const getMultiSelectDropdownTitle = function(selectedUser, isSelected) {\n          const selectedUsers = getSelected().filter(u => u !== 0);\n\n          const firstUser = getSelectedUserInputs()\n            .map((index, input) => ({\n              name: input.dataset.meta,\n              value: parseInt(input.value, 10),\n            }))\n            .filter(u => u.id !== 0)\n            .get(0);\n\n          if (selectedUsers.length === 0) {\n            return 'Unassigned';\n          } else if (selectedUsers.length === 1) {\n            return firstUser.name;\n          } else if (isSelected) {\n            const otherSelected = selectedUsers.filter(s => s !== selectedUser.id);\n            return `${selectedUser.name} + ${otherSelected.length} more`;\n          } else {\n            return `${firstUser.name} + ${selectedUsers.length - 1} more`;\n          }\n        };\n\n        $('.assign-to-me-link').on('click', e => {\n          e.preventDefault();\n          $(e.currentTarget).hide();\n\n          if ($dropdown.data('multiSelect')) {\n            assignYourself();\n            checkMaxSelect();\n\n            const currentUserInfo = $dropdown.data('currentUserInfo');\n            $dropdown\n              .find('.dropdown-toggle-text')\n              .text(getMultiSelectDropdownTitle(currentUserInfo))\n              .removeClass('is-default');\n          } else {\n            const $input = $(`input[name=\"${$dropdown.data('fieldName')}\"]`);\n            $input.val(gon.current_user_id);\n            selectedId = $input.val();\n            $dropdown\n              .find('.dropdown-toggle-text')\n              .text(gon.current_user_fullname)\n              .removeClass('is-default');\n          }\n        });\n\n        $block.on('click', '.js-assign-yourself', e => {\n          e.preventDefault();\n          return assignTo(_this.currentUser.id);\n        });\n\n        assignTo = function(selected) {\n          var data;\n          data = {};\n          data[abilityName] = {};\n          data[abilityName].assignee_id = selected != null ? selected : null;\n          $loading.removeClass('hidden').fadeIn();\n          $dropdown.trigger('loading.gl.dropdown');\n\n          return axios.put(issueURL, data).then(({ data }) => {\n            var user, tooltipTitle;\n            $dropdown.trigger('loaded.gl.dropdown');\n            $loading.fadeOut();\n            if (data.assignee) {\n              user = {\n                name: data.assignee.name,\n                username: data.assignee.username,\n                avatar: data.assignee.avatar_url,\n              };\n              tooltipTitle = _.escape(user.name);\n            } else {\n              user = {\n                name: 'Unassigned',\n                username: '',\n                avatar: '',\n              };\n              tooltipTitle = __('Assignee');\n            }\n            $value.html(assigneeTemplate(user));\n            $collapsedSidebar.attr('title', tooltipTitle).tooltip('_fixTitle');\n            return $collapsedSidebar.html(collapsedAssigneeTemplate(user));\n          });\n        };\n        collapsedAssigneeTemplate = _.template(\n          '<% if( avatar ) { %> <a class=\"author-link\" href=\"/<%- username %>\"> <img width=\"24\" class=\"avatar avatar-inline s24\" alt=\"\" src=\"<%- avatar %>\"> </a> <% } else { %> <i class=\"fa fa-user\"></i> <% } %>',\n        );\n        assigneeTemplate = _.template(\n          '<% if (username) { %> <a class=\"author-link bold\" href=\"/<%- username %>\"> <% if( avatar ) { %> <img width=\"32\" class=\"avatar avatar-inline s32\" alt=\"\" src=\"<%- avatar %>\"> <% } %> <span class=\"author\"><%- name %></span> <span class=\"username\"> @<%- username %> </span> </a> <% } else { %> <span class=\"no-value assign-yourself\"> No assignee - <a href=\"#\" class=\"js-assign-yourself\"> assign yourself </a> </span> <% } %>',\n        );\n        return $dropdown.glDropdown({\n          showMenuAbove: showMenuAbove,\n          data: function(term, callback) {\n            return _this.users(\n              term,\n              options,\n              function(users) {\n                // GitLabDropdownFilter returns this.instance\n                // GitLabDropdownRemote returns this.options.instance\n                const glDropdown = this.instance || this.options.instance;\n                glDropdown.options.processData(term, users, callback);\n              }.bind(this),\n            );\n          },\n          processData: function(term, data, callback) {\n            let users = data;\n\n            // Only show assigned user list when there is no search term\n            if ($dropdown.hasClass('js-multiselect') && term.length === 0) {\n              const selectedInputs = getSelectedUserInputs();\n\n              // Potential duplicate entries when dealing with issue board\n              // because issue board is also managed by vue\n              const selectedUsers = _.uniq(selectedInputs, false, a => a.value)\n                .filter(input => {\n                  const userId = parseInt(input.value, 10);\n                  const inUsersArray = users.find(u => u.id === userId);\n\n                  return !inUsersArray && userId !== 0;\n                })\n                .map(input => {\n                  const userId = parseInt(input.value, 10);\n                  const { avatarUrl, avatar_url, name, username } = input.dataset;\n                  return {\n                    avatar_url: avatarUrl || avatar_url,\n                    id: userId,\n                    name,\n                    username,\n                  };\n                });\n\n              users = data.concat(selectedUsers);\n            }\n\n            let anyUser;\n            let index;\n            let len;\n            let name;\n            let obj;\n            let showDivider;\n            if (term.length === 0) {\n              showDivider = 0;\n              if (firstUser) {\n                // Move current user to the front of the list\n                for (index = 0, len = users.length; index < len; index += 1) {\n                  obj = users[index];\n                  if (obj.username === firstUser) {\n                    users.splice(index, 1);\n                    users.unshift(obj);\n                    break;\n                  }\n                }\n              }\n              if (showNullUser) {\n                showDivider += 1;\n                users.unshift({\n                  beforeDivider: true,\n                  name: 'Unassigned',\n                  id: 0,\n                });\n              }\n              if (showAnyUser) {\n                showDivider += 1;\n                name = showAnyUser;\n                if (name === true) {\n                  name = 'Any User';\n                }\n                anyUser = {\n                  beforeDivider: true,\n                  name: name,\n                  id: null,\n                };\n                users.unshift(anyUser);\n              }\n\n              if (showDivider) {\n                users.splice(showDivider, 0, 'divider');\n              }\n\n              if ($dropdown.hasClass('js-multiselect')) {\n                const selected = getSelected().filter(i => i !== 0);\n\n                if (selected.length > 0) {\n                  if ($dropdown.data('dropdownHeader')) {\n                    showDivider += 1;\n                    users.splice(showDivider, 0, {\n                      header: $dropdown.data('dropdownHeader'),\n                    });\n                  }\n\n                  const selectedUsers = users\n                    .filter(u => selected.indexOf(u.id) !== -1)\n                    .sort((a, b) => a.name > b.name);\n\n                  users = users.filter(u => selected.indexOf(u.id) === -1);\n\n                  selectedUsers.forEach(selectedUser => {\n                    showDivider += 1;\n                    users.splice(showDivider, 0, selectedUser);\n                  });\n\n                  users.splice(showDivider + 1, 0, 'divider');\n                }\n              }\n            }\n\n            callback(users);\n            if (showMenuAbove) {\n              $dropdown.data('glDropdown').positionMenuAbove();\n            }\n          },\n          filterable: true,\n          filterRemote: true,\n          search: {\n            fields: ['name', 'username'],\n          },\n          selectable: true,\n          fieldName: $dropdown.data('fieldName'),\n          toggleLabel: function(selected, el, glDropdown) {\n            const inputValue = glDropdown.filterInput.val();\n\n            if (this.multiSelect && inputValue === '') {\n              // Remove non-users from the fullData array\n              const users = glDropdown.filteredFullData();\n              const callback = glDropdown.parseData.bind(glDropdown);\n\n              // Update the data model\n              this.processData(inputValue, users, callback);\n            }\n\n            if (this.multiSelect) {\n              return getMultiSelectDropdownTitle(selected, $(el).hasClass('is-active'));\n            }\n\n            if (selected && 'id' in selected && $(el).hasClass('is-active')) {\n              $dropdown.find('.dropdown-toggle-text').removeClass('is-default');\n              if (selected.text) {\n                return selected.text;\n              } else {\n                return selected.name;\n              }\n            } else {\n              $dropdown.find('.dropdown-toggle-text').addClass('is-default');\n              return defaultLabel;\n            }\n          },\n          defaultLabel: defaultLabel,\n          hidden: function(e) {\n            if ($dropdown.hasClass('js-multiselect')) {\n              emitSidebarEvent('sidebar.saveAssignees');\n            }\n\n            if (!$dropdown.data('alwaysShowSelectbox')) {\n              $selectbox.hide();\n\n              // Recalculate where .value is because vue might have changed it\n              $block = $selectbox.closest('.block');\n              $value = $block.find('.value');\n              // display:block overrides the hide-collapse rule\n              $value.css('display', '');\n            }\n          },\n          multiSelect: $dropdown.hasClass('js-multiselect'),\n          inputMeta: $dropdown.data('inputMeta'),\n          clicked: function(options) {\n            const { $el, e, isMarking } = options;\n            const user = options.selectedObj;\n\n            if ($dropdown.hasClass('js-multiselect')) {\n              const isActive = $el.hasClass('is-active');\n              const previouslySelected = $dropdown\n                .closest('.selectbox')\n                .find(\"input[name='\" + $dropdown.data('fieldName') + \"'][value!=0]\");\n\n              // Enables support for limiting the number of users selected\n              // Automatically removes the first on the list if more users are selected\n              checkMaxSelect();\n\n              if (user.beforeDivider && user.name.toLowerCase() === 'unassigned') {\n                // Unassigned selected\n                previouslySelected.each((index, element) => {\n                  const id = parseInt(element.value, 10);\n                  element.remove();\n                });\n                emitSidebarEvent('sidebar.removeAllAssignees');\n              } else if (isActive) {\n                // user selected\n                emitSidebarEvent('sidebar.addAssignee', user);\n\n                // Remove unassigned selection (if it was previously selected)\n                const unassignedSelected = $dropdown\n                  .closest('.selectbox')\n                  .find(\"input[name='\" + $dropdown.data('fieldName') + \"'][value=0]\");\n\n                if (unassignedSelected) {\n                  unassignedSelected.remove();\n                }\n              } else {\n                if (previouslySelected.length === 0) {\n                  // Select unassigned because there is no more selected users\n                  this.addInput($dropdown.data('fieldName'), 0, {});\n                }\n\n                // User unselected\n                emitSidebarEvent('sidebar.removeAssignee', user);\n              }\n\n              if (getSelected().find(u => u === gon.current_user_id)) {\n                $('.assign-to-me-link').hide();\n              } else {\n                $('.assign-to-me-link').show();\n              }\n            }\n\n            var isIssueIndex, isMRIndex, page, selected;\n            page = $('body').attr('data-page');\n            isIssueIndex = page === 'projects:issues:index';\n            isMRIndex = page === page && page === 'projects:merge_requests:index';\n            if (\n              $dropdown.hasClass('js-filter-bulk-update') ||\n              $dropdown.hasClass('js-issuable-form-dropdown')\n            ) {\n              e.preventDefault();\n\n              const isSelecting = user.id !== selectedId;\n              selectedId = isSelecting ? user.id : selectedIdDefault;\n\n              if (selectedId === gon.current_user_id) {\n                $('.assign-to-me-link').hide();\n              } else {\n                $('.assign-to-me-link').show();\n              }\n              return;\n            }\n            if ($el.closest('.add-issues-modal').length) {\n              ModalStore.store.filter[$dropdown.data('fieldName')] = user.id;\n            } else if (handleClick) {\n              e.preventDefault();\n              handleClick(user, isMarking);\n            } else if ($dropdown.hasClass('js-filter-submit') && (isIssueIndex || isMRIndex)) {\n              return Issuable.filterResults($dropdown.closest('form'));\n            } else if ($dropdown.hasClass('js-filter-submit')) {\n              return $dropdown.closest('form').submit();\n            } else if (!$dropdown.hasClass('js-multiselect')) {\n              selected = $dropdown\n                .closest('.selectbox')\n                .find(\"input[name='\" + $dropdown.data('fieldName') + \"']\")\n                .val();\n              return assignTo(selected);\n            }\n\n            // Automatically close dropdown after assignee is selected\n            // since CE has no multiple assignees\n            // EE does not have a max-select\n            if (\n              $dropdown.data('maxSelect') &&\n              getSelected().length === $dropdown.data('maxSelect')\n            ) {\n              // Close the dropdown\n              $dropdown.dropdown('toggle');\n            }\n          },\n          id: function(user) {\n            return user.id;\n          },\n          opened: function(e) {\n            const $el = $(e.currentTarget);\n            const selected = getSelected();\n            if ($dropdown.hasClass('js-issue-board-sidebar') && selected.length === 0) {\n              this.addInput($dropdown.data('fieldName'), 0, {});\n            }\n            $el.find('.is-active').removeClass('is-active');\n\n            function highlightSelected(id) {\n              $el.find(`li[data-user-id=\"${id}\"] .dropdown-menu-user-link`).addClass('is-active');\n            }\n\n            if (selected.length > 0) {\n              getSelected().forEach(selectedId => highlightSelected(selectedId));\n            } else if ($dropdown.hasClass('js-issue-board-sidebar')) {\n              highlightSelected(0);\n            } else {\n              highlightSelected(selectedId);\n            }\n          },\n          updateLabel: $dropdown.data('dropdownTitle'),\n          renderRow: function(user) {\n            var avatar, img, listClosingTags, listWithName, listWithUserName, username;\n            username = user.username ? '@' + user.username : '';\n            avatar = user.avatar_url ? user.avatar_url : gon.default_avatar_url;\n\n            let selected = false;\n\n            if (this.multiSelect) {\n              selected = getSelected().find(u => user.id === u);\n\n              const { fieldName } = this;\n              const field = $dropdown\n                .closest('.selectbox')\n                .find(\"input[name='\" + fieldName + \"'][value='\" + user.id + \"']\");\n\n              if (field.length) {\n                selected = true;\n              }\n            } else {\n              selected = user.id === selectedId;\n            }\n\n            img = '';\n            if (user.beforeDivider != null) {\n              `<li><a href='#' class='${selected === true ? 'is-active' : ''}'>${_.escape(\n                user.name,\n              )}</a></li>`;\n            } else {\n              img = \"<img src='\" + avatar + \"' class='avatar avatar-inline' width='32' />\";\n            }\n\n            return `\n            <li data-user-id=${user.id}>\n              <a href='#' class='dropdown-menu-user-link ${selected === true ? 'is-active' : ''}'>\n                ${img}\n                <strong class='dropdown-menu-user-full-name'>\n                  ${_.escape(user.name)}\n                </strong>\n                ${username ? `<span class='dropdown-menu-user-username'>${username}</span>` : ''}\n              </a>\n            </li>\n          `;\n          },\n        });\n      };\n    })(this),\n  );\n  $('.ajax-users-select').each(\n    (function(_this) {\n      return function(i, select) {\n        var firstUser, showAnyUser, showEmailUser, showNullUser;\n        var options = {};\n        options.skipLdap = $(select).hasClass('skip_ldap');\n        options.projectId = $(select).data('projectId');\n        options.groupId = $(select).data('groupId');\n        options.showCurrentUser = $(select).data('currentUser');\n        options.authorId = $(select).data('authorId');\n        options.skipUsers = $(select).data('skipUsers');\n        showNullUser = $(select).data('nullUser');\n        showAnyUser = $(select).data('anyUser');\n        showEmailUser = $(select).data('emailUser');\n        firstUser = $(select).data('firstUser');\n        return $(select).select2({\n          placeholder: 'Search for a user',\n          multiple: $(select).hasClass('multiselect'),\n          minimumInputLength: 0,\n          query: function(query) {\n            return _this.users(query.term, options, function(users) {\n              var anyUser, data, emailUser, index, len, name, nullUser, obj, ref;\n              data = {\n                results: users,\n              };\n              if (query.term.length === 0) {\n                if (firstUser) {\n                  // Move current user to the front of the list\n                  ref = data.results;\n\n                  for (index = 0, len = ref.length; index < len; index += 1) {\n                    obj = ref[index];\n                    if (obj.username === firstUser) {\n                      data.results.splice(index, 1);\n                      data.results.unshift(obj);\n                      break;\n                    }\n                  }\n                }\n                if (showNullUser) {\n                  nullUser = {\n                    name: 'Unassigned',\n                    id: 0,\n                  };\n                  data.results.unshift(nullUser);\n                }\n                if (showAnyUser) {\n                  name = showAnyUser;\n                  if (name === true) {\n                    name = 'Any User';\n                  }\n                  anyUser = {\n                    name: name,\n                    id: null,\n                  };\n                  data.results.unshift(anyUser);\n                }\n              }\n              if (showEmailUser && data.results.length === 0 && query.term.match(/^[^@]+@[^@]+$/)) {\n                var trimmed = query.term.trim();\n                emailUser = {\n                  name: 'Invite \"' + trimmed + '\" by email',\n                  username: trimmed,\n                  id: trimmed,\n                  invite: true,\n                };\n                data.results.unshift(emailUser);\n              }\n              return query.callback(data);\n            });\n          },\n          initSelection: function() {\n            var args;\n            args = 1 <= arguments.length ? [].slice.call(arguments, 0) : [];\n            return _this.initSelection.apply(_this, args);\n          },\n          formatResult: function() {\n            var args;\n            args = 1 <= arguments.length ? [].slice.call(arguments, 0) : [];\n            return _this.formatResult.apply(_this, args);\n          },\n          formatSelection: function() {\n            var args;\n            args = 1 <= arguments.length ? [].slice.call(arguments, 0) : [];\n            return _this.formatSelection.apply(_this, args);\n          },\n          dropdownCssClass: 'ajax-users-dropdown',\n          // we do not want to escape markup since we are displaying html in results\n          escapeMarkup: function(m) {\n            return m;\n          },\n        });\n      };\n    })(this),\n  );\n}\n\nUsersSelect.prototype.initSelection = function(element, callback) {\n  var id, nullUser;\n  id = $(element).val();\n  if (id === '0') {\n    nullUser = {\n      name: 'Unassigned',\n    };\n    return callback(nullUser);\n  } else if (id !== '') {\n    return this.user(id, callback);\n  }\n};\n\nUsersSelect.prototype.formatResult = function(user) {\n  var avatar;\n  if (user.avatar_url) {\n    avatar = user.avatar_url;\n  } else {\n    avatar = gon.default_avatar_url;\n  }\n  return `\n    <div class='user-result'>\n      <div class='user-image'>\n        <img class='avatar avatar-inline s32' src='${avatar}'>\n      </div>\n      <div class='user-info'>\n        <div class='user-name dropdown-menu-user-full-name'>\n          ${_.escape(user.name)}\n        </div>\n        <div class='user-username dropdown-menu-user-username text-secondary'>\n          ${!user.invite ? '@' + _.escape(user.username) : ''}\n        </div>\n      </div>\n    </div>\n  `;\n};\n\nUsersSelect.prototype.formatSelection = function(user) {\n  return _.escape(user.name);\n};\n\nUsersSelect.prototype.user = function(user_id, callback) {\n  if (!/^\\d+$/.test(user_id)) {\n    return false;\n  }\n\n  var url;\n  url = this.buildUrl(this.userPath);\n  url = url.replace(':id', user_id);\n  return axios.get(url).then(({ data }) => {\n    callback(data);\n  });\n};\n\n// Return users list. Filtered by query\n// Only active users retrieved\nUsersSelect.prototype.users = function(query, options, callback) {\n  const url = this.buildUrl(this.usersPath);\n  const params = {\n    search: query,\n    active: true,\n    project_id: options.projectId || null,\n    group_id: options.groupId || null,\n    skip_ldap: options.skipLdap || null,\n    todo_filter: options.todoFilter || null,\n    todo_state_filter: options.todoStateFilter || null,\n    current_user: options.showCurrentUser || null,\n    author_id: options.authorId || null,\n    skip_users: options.skipUsers || null,\n  };\n  return axios.get(url, { params }).then(({ data }) => {\n    callback(data);\n  });\n};\n\nUsersSelect.prototype.buildUrl = function(url) {\n  if (gon.relative_url_root != null) {\n    url = gon.relative_url_root.replace(/\\/$/, '') + url;\n  }\n  return url;\n};\n\nexport default UsersSelect;\n","/* eslint-disable no-param-reassign, prefer-template, no-void, consistent-return */\n\nimport AccessorUtilities from './lib/utils/accessor';\n\nexport default class Autosave {\n  constructor(field, key) {\n    this.field = field;\n\n    this.isLocalStorageAvailable = AccessorUtilities.isLocalStorageAccessSafe();\n    if (key.join != null) {\n      key = key.join('/');\n    }\n    this.key = 'autosave/' + key;\n    this.field.data('autosave', this);\n    this.restore();\n    this.field.on('input', () => this.save());\n  }\n\n  restore() {\n    if (!this.isLocalStorageAvailable) return;\n    if (!this.field.length) return;\n\n    const text = window.localStorage.getItem(this.key);\n\n    if ((text != null ? text.length : void 0) > 0) {\n      this.field.val(text);\n    }\n\n    this.field.trigger('input');\n    // v-model does not update with jQuery trigger\n    // https://github.com/vuejs/vue/issues/2804#issuecomment-216968137\n    const event = new Event('change', { bubbles: true, cancelable: false });\n    const field = this.field.get(0);\n    if (field) {\n      field.dispatchEvent(event);\n    }\n  }\n\n  save() {\n    if (!this.field.length) return;\n\n    const text = this.field.val();\n\n    if (this.isLocalStorageAvailable && (text != null ? text.length : void 0) > 0) {\n      return window.localStorage.setItem(this.key, text);\n    }\n\n    return this.reset();\n  }\n\n  reset() {\n    if (!this.isLocalStorageAvailable) return;\n\n    return window.localStorage.removeItem(this.key);\n  }\n\n  dispose() {\n    this.field.off('input');\n  }\n}\n","/**\n * adds a pause and unpause method to Mousetrap\n * this allows you to enable or disable keyboard shortcuts\n * without having to reset Mousetrap and rebind everything\n */\n/* global Mousetrap:true */\nMousetrap = (function(Mousetrap) {\n    var self = Mousetrap,\n        _originalStopCallback = self.stopCallback,\n        enabled = true;\n\n    self.stopCallback = function(e, element, combo) {\n        if (!enabled) {\n            return true;\n        }\n\n        return _originalStopCallback(e, element, combo);\n    };\n\n    self.pause = function() {\n        enabled = false;\n    };\n\n    self.unpause = function() {\n        enabled = true;\n    };\n\n    return self;\n}) (Mousetrap);\n","/* eslint-disable func-names, prefer-arrow-callback */\n\nimport $ from 'jquery';\nimport Api from './api';\nimport { humanize } from './lib/utils/text_utility';\n\nexport default class CreateLabelDropdown {\n  constructor($el, namespacePath, projectPath) {\n    this.$el = $el;\n    this.namespacePath = namespacePath;\n    this.projectPath = projectPath;\n    this.$dropdownBack = $('.dropdown-menu-back', this.$el.closest('.dropdown'));\n    this.$cancelButton = $('.js-cancel-label-btn', this.$el);\n    this.$newLabelField = $('#new_label_name', this.$el);\n    this.$newColorField = $('#new_label_color', this.$el);\n    this.$colorPreview = $('.js-dropdown-label-color-preview', this.$el);\n    this.$newLabelError = $('.js-label-error', this.$el);\n    this.$newLabelCreateButton = $('.js-new-label-btn', this.$el);\n    this.$colorSuggestions = $('.suggest-colors-dropdown a', this.$el);\n\n    this.$newLabelError.hide();\n    this.$newLabelCreateButton.disable();\n\n    this.cleanBinding();\n    this.addBinding();\n  }\n\n  cleanBinding() {\n    this.$colorSuggestions.off('click');\n    this.$newLabelField.off('keyup change');\n    this.$newColorField.off('keyup change');\n    this.$dropdownBack.off('click');\n    this.$cancelButton.off('click');\n    this.$newLabelCreateButton.off('click');\n  }\n\n  addBinding() {\n    const self = this;\n\n    this.$colorSuggestions.on('click', function(e) {\n      const $this = $(this);\n      self.addColorValue(e, $this);\n    });\n\n    this.$newLabelField.on('keyup change', this.enableLabelCreateButton.bind(this));\n    this.$newColorField.on('keyup change', this.enableLabelCreateButton.bind(this));\n\n    this.$dropdownBack.on('click', this.resetForm.bind(this));\n\n    this.$cancelButton.on('click', function(e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      self.resetForm();\n      self.$dropdownBack.trigger('click');\n    });\n\n    this.$newLabelCreateButton.on('click', this.saveLabel.bind(this));\n  }\n\n  addColorValue(e, $this) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.$newColorField.val($this.data('color')).trigger('change');\n    this.$colorPreview\n      .css('background-color', $this.data('color'))\n      .parent()\n      .addClass('is-active');\n  }\n\n  enableLabelCreateButton() {\n    if (this.$newLabelField.val() !== '' && this.$newColorField.val() !== '') {\n      this.$newLabelError.hide();\n      this.$newLabelCreateButton.enable();\n    } else {\n      this.$newLabelCreateButton.disable();\n    }\n  }\n\n  resetForm() {\n    this.$newLabelField.val('').trigger('change');\n\n    this.$newColorField.val('').trigger('change');\n\n    this.$colorPreview\n      .css('background-color', '')\n      .parent()\n      .removeClass('is-active');\n  }\n\n  saveLabel(e) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    Api.newLabel(\n      this.namespacePath,\n      this.projectPath,\n      {\n        title: this.$newLabelField.val(),\n        color: this.$newColorField.val(),\n      },\n      label => {\n        this.$newLabelCreateButton.enable();\n\n        if (label.message) {\n          let errors;\n\n          if (typeof label.message === 'string') {\n            errors = label.message;\n          } else {\n            errors = Object.keys(label.message)\n              .map(key => `${humanize(key)} ${label.message[key].join(', ')}`)\n              .join('<br/>');\n          }\n\n          this.$newLabelError.html(errors).show();\n        } else {\n          this.$dropdownBack.trigger('click');\n\n          $(document).trigger('created.label', label);\n        }\n      },\n    );\n  }\n}\n","/* eslint-disable no-useless-return, func-names, no-var, no-underscore-dangle, prefer-arrow-callback, one-var, no-unused-vars, prefer-template, no-new, consistent-return, object-shorthand, no-shadow, no-param-reassign, vars-on-top, no-lonely-if, no-else-return, dot-notation, no-empty */\n/* global Issuable */\n/* global ListLabel */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport { sprintf, __ } from './locale';\nimport axios from './lib/utils/axios_utils';\nimport IssuableBulkUpdateActions from './issuable_bulk_update_actions';\nimport CreateLabelDropdown from './create_label';\nimport flash from './flash';\nimport ModalStore from './boards/stores/modal_store';\nimport boardsStore from './boards/stores/boards_store';\n\nexport default class LabelsSelect {\n  constructor(els, options = {}) {\n    var _this, $els;\n    _this = this;\n\n    $els = $(els);\n\n    if (!els) {\n      $els = $('.js-label-select');\n    }\n\n    $els.each(function(i, dropdown) {\n      var $block,\n        $colorPreview,\n        $dropdown,\n        $form,\n        $loading,\n        $selectbox,\n        $sidebarCollapsedValue,\n        $value,\n        abilityName,\n        defaultLabel,\n        enableLabelCreateButton,\n        issueURLSplit,\n        issueUpdateURL,\n        labelUrl,\n        namespacePath,\n        projectPath,\n        saveLabelData,\n        selectedLabel,\n        showAny,\n        showNo,\n        $sidebarLabelTooltip,\n        initialSelected,\n        $toggleText,\n        fieldName,\n        useId,\n        propertyName,\n        showMenuAbove,\n        $container,\n        $dropdownContainer;\n      $dropdown = $(dropdown);\n      $dropdownContainer = $dropdown.closest('.labels-filter');\n      $toggleText = $dropdown.find('.dropdown-toggle-text');\n      namespacePath = $dropdown.data('namespacePath');\n      projectPath = $dropdown.data('projectPath');\n      issueUpdateURL = $dropdown.data('issueUpdate');\n      selectedLabel = $dropdown.data('selected');\n      if (selectedLabel != null && !$dropdown.hasClass('js-multiselect')) {\n        selectedLabel = selectedLabel.split(',');\n      }\n      showNo = $dropdown.data('showNo');\n      showAny = $dropdown.data('showAny');\n      showMenuAbove = $dropdown.data('showMenuAbove');\n      defaultLabel = $dropdown.data('defaultLabel') || __('Label');\n      abilityName = $dropdown.data('abilityName');\n      $selectbox = $dropdown.closest('.selectbox');\n      $block = $selectbox.closest('.block');\n      $form = $dropdown.closest('form, .js-issuable-update');\n      $sidebarCollapsedValue = $block.find('.sidebar-collapsed-icon span');\n      $sidebarLabelTooltip = $block.find('.js-sidebar-labels-tooltip');\n      $value = $block.find('.value');\n      $loading = $block.find('.block-loading').fadeOut();\n      fieldName = $dropdown.data('fieldName');\n      useId = $dropdown.is(\n        '.js-issuable-form-dropdown, .js-filter-bulk-update, .js-label-sidebar-dropdown',\n      );\n      propertyName = useId ? 'id' : 'title';\n      initialSelected = $selectbox\n        .find('input[name=\"' + $dropdown.data('fieldName') + '\"]')\n        .map(function() {\n          return this.value;\n        })\n        .get();\n      const { handleClick } = options;\n\n      $sidebarLabelTooltip.tooltip();\n\n      if ($dropdown.closest('.dropdown').find('.dropdown-new-label').length) {\n        new CreateLabelDropdown(\n          $dropdown.closest('.dropdown').find('.dropdown-new-label'),\n          namespacePath,\n          projectPath,\n        );\n      }\n\n      saveLabelData = function() {\n        var data, selected;\n        selected = $dropdown\n          .closest('.selectbox')\n          .find(\"input[name='\" + fieldName + \"']\")\n          .map(function() {\n            return this.value;\n          })\n          .get();\n\n        if (_.isEqual(initialSelected, selected)) return;\n        initialSelected = selected;\n\n        data = {};\n        data[abilityName] = {};\n        data[abilityName].label_ids = selected;\n        if (!selected.length) {\n          data[abilityName].label_ids = [''];\n        }\n        $loading.removeClass('hidden').fadeIn();\n        $dropdown.trigger('loading.gl.dropdown');\n        axios\n          .put(issueUpdateURL, data)\n          .then(({ data }) => {\n            var labelCount, template, labelTooltipTitle, labelTitles, formattedLabels;\n            $loading.fadeOut();\n            $dropdown.trigger('loaded.gl.dropdown');\n            $selectbox.hide();\n            data.issueUpdateURL = issueUpdateURL;\n            labelCount = 0;\n            if (data.labels.length && issueUpdateURL) {\n              template = LabelsSelect.getLabelTemplate({\n                labels: data.labels,\n                issueUpdateURL,\n              });\n              labelCount = data.labels.length;\n            } else {\n              template = '<span class=\"no-value\">None</span>';\n            }\n            $value.removeAttr('style').html(template);\n            $sidebarCollapsedValue.text(labelCount);\n\n            if (data.labels.length) {\n              labelTitles = data.labels.map(function(label) {\n                return label.title;\n              });\n\n              if (labelTitles.length > 5) {\n                labelTitles = labelTitles.slice(0, 5);\n                labelTitles.push('and ' + (data.labels.length - 5) + ' more');\n              }\n\n              labelTooltipTitle = labelTitles.join(', ');\n            } else {\n              labelTooltipTitle = __('Labels');\n            }\n\n            $sidebarLabelTooltip.attr('title', labelTooltipTitle).tooltip('_fixTitle');\n\n            $('.has-tooltip', $value).tooltip({\n              container: 'body',\n            });\n          })\n          .catch(() => flash(__('Error saving label update.')));\n      };\n      $dropdown.glDropdown({\n        showMenuAbove: showMenuAbove,\n        data: function(term, callback) {\n          labelUrl = $dropdown.attr('data-labels');\n          axios\n            .get(labelUrl)\n            .then(res => {\n              let { data } = res;\n              if ($dropdown.hasClass('js-extra-options')) {\n                var extraData = [];\n                if (showNo) {\n                  extraData.unshift({\n                    id: 0,\n                    title: 'No Label',\n                  });\n                }\n                if (showAny) {\n                  extraData.unshift({\n                    isAny: true,\n                    title: 'Any Label',\n                  });\n                }\n                if (extraData.length) {\n                  extraData.push('divider');\n                  data = extraData.concat(data);\n                }\n              }\n\n              callback(data);\n              if (showMenuAbove) {\n                $dropdown.data('glDropdown').positionMenuAbove();\n              }\n            })\n            .catch(() => flash(__('Error fetching labels.')));\n        },\n        renderRow: function(label, instance) {\n          var $a,\n            $li,\n            color,\n            colorEl,\n            indeterminate,\n            removesAll,\n            selectedClass,\n            spacing,\n            i,\n            marked,\n            dropdownName,\n            dropdownValue;\n          $li = $('<li>');\n          $a = $('<a href=\"#\">');\n          selectedClass = [];\n          removesAll = label.id <= 0 || label.id == null;\n          if ($dropdown.hasClass('js-filter-bulk-update')) {\n            indeterminate = $dropdown.data('indeterminate') || [];\n            marked = $dropdown.data('marked') || [];\n\n            if (indeterminate.indexOf(label.id) !== -1) {\n              selectedClass.push('is-indeterminate');\n            }\n\n            if (marked.indexOf(label.id) !== -1) {\n              // Remove is-indeterminate class if the item will be marked as active\n              i = selectedClass.indexOf('is-indeterminate');\n              if (i !== -1) {\n                selectedClass.splice(i, 1);\n              }\n              selectedClass.push('is-active');\n            }\n          } else {\n            if (this.id(label)) {\n              dropdownName = $dropdown.data('fieldName');\n              dropdownValue = this.id(label)\n                .toString()\n                .replace(/'/g, \"\\\\'\");\n\n              if (\n                $form.find(\n                  \"input[type='hidden'][name='\" +\n                    dropdownName +\n                    \"'][value='\" +\n                    dropdownValue +\n                    \"']\",\n                ).length\n              ) {\n                selectedClass.push('is-active');\n              }\n            }\n\n            if ($dropdown.hasClass('js-multiselect') && removesAll) {\n              selectedClass.push('dropdown-clear-active');\n            }\n          }\n          if (label.color) {\n            colorEl =\n              \"<span class='dropdown-label-box' style='background: \" + label.color + \"'></span>\";\n          } else {\n            colorEl = '';\n          }\n          // We need to identify which items are actually labels\n          if (label.id) {\n            selectedClass.push('label-item');\n            $a.attr('data-label-id', label.id);\n          }\n          $a.addClass(selectedClass.join(' ')).html(`${colorEl} ${_.escape(label.title)}`);\n          // Return generated html\n          return $li.html($a).prop('outerHTML');\n        },\n        search: {\n          fields: ['title'],\n        },\n        selectable: true,\n        filterable: true,\n        selected: $dropdown.data('selected') || [],\n        toggleLabel: function(selected, el) {\n          var $dropdownParent = $dropdown.parent();\n          var $dropdownInputField = $dropdownParent.find('.dropdown-input-field');\n          var isSelected = el !== null ? el.hasClass('is-active') : false;\n\n          var title = selected ? selected.title : null;\n          var selectedLabels = this.selected;\n\n          if ($dropdownInputField.length && $dropdownInputField.val().length) {\n            $dropdownParent.find('.dropdown-input-clear').trigger('click');\n          }\n\n          if (selected && selected.id === 0) {\n            this.selected = [];\n            return 'No Label';\n          } else if (isSelected) {\n            this.selected.push(title);\n          } else if (!isSelected && title) {\n            var index = this.selected.indexOf(title);\n            this.selected.splice(index, 1);\n          }\n\n          if (selectedLabels.length === 1) {\n            return selectedLabels;\n          } else if (selectedLabels.length) {\n            return sprintf(__('%{firstLabel} +%{labelCount} more'), {\n              firstLabel: selectedLabels[0],\n              labelCount: selectedLabels.length - 1,\n            });\n          } else {\n            return defaultLabel;\n          }\n        },\n        fieldName: $dropdown.data('fieldName'),\n        id: function(label) {\n          if (label.id <= 0) return label.title;\n\n          if ($dropdown.hasClass('js-issuable-form-dropdown')) {\n            return label.id;\n          }\n\n          if ($dropdown.hasClass('js-filter-submit') && label.isAny == null) {\n            return label.title;\n          } else {\n            return label.id;\n          }\n        },\n        hidden: function() {\n          var isIssueIndex, isMRIndex, page, selectedLabels;\n          page = $('body').attr('data-page');\n          isIssueIndex = page === 'projects:issues:index';\n          isMRIndex = page === 'projects:merge_requests:index';\n          $selectbox.hide();\n          // display:block overrides the hide-collapse rule\n          $value.removeAttr('style');\n\n          if ($dropdown.hasClass('js-issuable-form-dropdown')) {\n            return;\n          }\n\n          if ($('html').hasClass('issue-boards-page')) {\n            return;\n          }\n          if ($dropdown.hasClass('js-multiselect')) {\n            if ($dropdown.hasClass('js-filter-submit') && (isIssueIndex || isMRIndex)) {\n              selectedLabels = $dropdown\n                .closest('form')\n                .find(\"input:hidden[name='\" + $dropdown.data('fieldName') + \"']\");\n              Issuable.filterResults($dropdown.closest('form'));\n            } else if ($dropdown.hasClass('js-filter-submit')) {\n              $dropdown.closest('form').submit();\n            } else {\n              if (!$dropdown.hasClass('js-filter-bulk-update')) {\n                saveLabelData();\n              }\n            }\n          }\n        },\n        multiSelect: $dropdown.hasClass('js-multiselect'),\n        vue: $dropdown.hasClass('js-issue-board-sidebar'),\n        clicked: function(clickEvent) {\n          const { $el, e, isMarking } = clickEvent;\n          const label = clickEvent.selectedObj;\n\n          var isIssueIndex, isMRIndex, page, boardsModel;\n          var fadeOutLoader = () => {\n            $loading.fadeOut();\n          };\n\n          page = $('body').attr('data-page');\n          isIssueIndex = page === 'projects:issues:index';\n          isMRIndex = page === 'projects:merge_requests:index';\n\n          if ($dropdown.parent().find('.is-active:not(.dropdown-clear-active)').length) {\n            $dropdown\n              .parent()\n              .find('.dropdown-clear-active')\n              .removeClass('is-active');\n          }\n\n          if ($dropdown.hasClass('js-issuable-form-dropdown')) {\n            return;\n          }\n\n          if ($dropdown.hasClass('js-filter-bulk-update')) {\n            _this.enableBulkLabelDropdown();\n            _this.setDropdownData($dropdown, isMarking, label.id);\n            return;\n          }\n\n          if ($dropdown.closest('.add-issues-modal').length) {\n            boardsModel = ModalStore.store.filter;\n          }\n\n          if (boardsModel) {\n            if (label.isAny) {\n              boardsModel['label_name'] = [];\n            } else if ($el.hasClass('is-active')) {\n              boardsModel['label_name'].push(label.title);\n            }\n\n            e.preventDefault();\n            return;\n          } else if ($dropdown.hasClass('js-filter-submit') && (isIssueIndex || isMRIndex)) {\n            if (!$dropdown.hasClass('js-multiselect')) {\n              selectedLabel = label.title;\n              return Issuable.filterResults($dropdown.closest('form'));\n            }\n          } else if ($dropdown.hasClass('js-filter-submit')) {\n            return $dropdown.closest('form').submit();\n          } else if ($dropdown.hasClass('js-issue-board-sidebar')) {\n            if ($el.hasClass('is-active')) {\n              boardsStore.detail.issue.labels.push(\n                new ListLabel({\n                  id: label.id,\n                  title: label.title,\n                  color: label.color,\n                  textColor: '#fff',\n                }),\n              );\n            } else {\n              var { labels } = boardsStore.detail.issue;\n              labels = labels.filter(function(selectedLabel) {\n                return selectedLabel.id !== label.id;\n              });\n              boardsStore.detail.issue.labels = labels;\n            }\n\n            $loading.fadeIn();\n\n            boardsStore.detail.issue\n              .update($dropdown.attr('data-issue-update'))\n              .then(fadeOutLoader)\n              .catch(fadeOutLoader);\n          } else if (handleClick) {\n            e.preventDefault();\n            handleClick(label);\n          } else {\n            if ($dropdown.hasClass('js-multiselect')) {\n            } else {\n              return saveLabelData();\n            }\n          }\n        },\n        opened: function(e) {\n          if ($dropdown.hasClass('js-issue-board-sidebar')) {\n            const previousSelection = $dropdown.attr('data-selected');\n            this.selected = previousSelection ? previousSelection.split(',') : [];\n            $dropdown.data('glDropdown').updateLabel();\n          }\n        },\n        preserveContext: true,\n      });\n\n      // Set dropdown data\n      _this.setOriginalDropdownData($dropdownContainer, $dropdown);\n    });\n    this.bindEvents();\n  }\n\n  static getLabelTemplate(tplData) {\n    // We could use ES6 template string here\n    // and properly indent markup for readability\n    // but that also introduces unintended white-space\n    // so best approach is to use traditional way of\n    // concatenation\n    // see: http://2ality.com/2016/05/template-literal-whitespace.html#joining-arrays\n    const tpl = _.template(\n      [\n        '<% _.each(labels, function(label){ %>',\n        '<a href=\"<%- issueUpdateURL.slice(0, issueUpdateURL.lastIndexOf(\"/\")) %>?label_name[]=<%- encodeURIComponent(label.title) %>\">',\n        '<span class=\"badge label has-tooltip color-label\" title=\"<%- label.description %>\" style=\"background-color: <%- label.color %>; color: <%- label.text_color %>;\">',\n        '<%- label.title %>',\n        '</span>',\n        '</a>',\n        '<% }); %>',\n      ].join(''),\n    );\n\n    return tpl(tplData);\n  }\n\n  bindEvents() {\n    return $('body').on('change', '.selected-issuable', this.onSelectCheckboxIssue);\n  }\n  // eslint-disable-next-line class-methods-use-this\n  onSelectCheckboxIssue() {\n    if ($('.selected-issuable:checked').length) {\n      return;\n    }\n    return $('.issues-bulk-update .labels-filter .dropdown-toggle-text').text('Label');\n  }\n  // eslint-disable-next-line class-methods-use-this\n  enableBulkLabelDropdown() {\n    IssuableBulkUpdateActions.willUpdateLabels = true;\n  }\n  // eslint-disable-next-line class-methods-use-this\n  setDropdownData($dropdown, isMarking, value) {\n    var i, markedIds, unmarkedIds, indeterminateIds;\n\n    markedIds = $dropdown.data('marked') || [];\n    unmarkedIds = $dropdown.data('unmarked') || [];\n    indeterminateIds = $dropdown.data('indeterminate') || [];\n\n    if (isMarking) {\n      markedIds.push(value);\n\n      i = indeterminateIds.indexOf(value);\n      if (i > -1) {\n        indeterminateIds.splice(i, 1);\n      }\n\n      i = unmarkedIds.indexOf(value);\n      if (i > -1) {\n        unmarkedIds.splice(i, 1);\n      }\n    } else {\n      // If marked item (not common) is unmarked\n      i = markedIds.indexOf(value);\n      if (i > -1) {\n        markedIds.splice(i, 1);\n      }\n\n      // If an indeterminate item is being unmarked\n      if (IssuableBulkUpdateActions.getOriginalIndeterminateIds().indexOf(value) > -1) {\n        unmarkedIds.push(value);\n      }\n\n      // If a marked item is being unmarked\n      // (a marked item could also be a label that is present in all selection)\n      if (IssuableBulkUpdateActions.getOriginalCommonIds().indexOf(value) > -1) {\n        unmarkedIds.push(value);\n      }\n    }\n\n    $dropdown.data('marked', markedIds);\n    $dropdown.data('unmarked', unmarkedIds);\n    $dropdown.data('indeterminate', indeterminateIds);\n  }\n  // eslint-disable-next-line class-methods-use-this\n  setOriginalDropdownData($container, $dropdown) {\n    const labels = [];\n    $container.find('[name=\"label_name[]\"]').map(function() {\n      return labels.push(this.value);\n    });\n    $dropdown.data('marked', labels);\n  }\n}\n","/* eslint-disable one-var, no-unused-vars, object-shorthand, no-else-return, no-self-compare, consistent-return, no-param-reassign, no-shadow */\n/* global Issuable */\n/* global ListMilestone */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport { __ } from '~/locale';\nimport '~/gl_dropdown';\nimport axios from './lib/utils/axios_utils';\nimport { timeFor } from './lib/utils/datetime_utility';\nimport ModalStore from './boards/stores/modal_store';\nimport boardsStore, {\n  boardStoreIssueSet,\n  boardStoreIssueDelete,\n} from './boards/stores/boards_store';\n\nexport default class MilestoneSelect {\n  constructor(currentProject, els, options = {}) {\n    if (currentProject !== null) {\n      this.currentProject =\n        typeof currentProject === 'string' ? JSON.parse(currentProject) : currentProject;\n    }\n\n    MilestoneSelect.init(els, options);\n  }\n\n  static init(els, options) {\n    let $els = $(els);\n\n    if (!els) {\n      $els = $('.js-milestone-select');\n    }\n\n    $els.each((i, dropdown) => {\n      let milestoneLinkNoneTemplate,\n        milestoneLinkTemplate,\n        selectedMilestone,\n        selectedMilestoneDefault;\n      const $dropdown = $(dropdown);\n      const projectId = $dropdown.data('projectId');\n      const milestonesUrl = $dropdown.data('milestones');\n      const issueUpdateURL = $dropdown.data('issueUpdate');\n      const showNo = $dropdown.data('showNo');\n      const showAny = $dropdown.data('showAny');\n      const showMenuAbove = $dropdown.data('showMenuAbove');\n      const showUpcoming = $dropdown.data('showUpcoming');\n      const showStarted = $dropdown.data('showStarted');\n      const useId = $dropdown.data('useId');\n      const defaultLabel = $dropdown.data('defaultLabel');\n      const defaultNo = $dropdown.data('defaultNo');\n      const issuableId = $dropdown.data('issuableId');\n      const abilityName = $dropdown.data('abilityName');\n      const $selectBox = $dropdown.closest('.selectbox');\n      const $block = $selectBox.closest('.block');\n      const $sidebarCollapsedValue = $block.find('.sidebar-collapsed-icon');\n      const $value = $block.find('.value');\n      const $loading = $block.find('.block-loading').fadeOut();\n      selectedMilestoneDefault = showAny ? '' : null;\n      selectedMilestoneDefault = showNo && defaultNo ? 'No Milestone' : selectedMilestoneDefault;\n      selectedMilestone = $dropdown.data('selected') || selectedMilestoneDefault;\n\n      if (issueUpdateURL) {\n        milestoneLinkTemplate = _.template(\n          '<a href=\"<%- web_url %>\" class=\"bold has-tooltip\" data-container=\"body\" title=\"<%- remaining %>\"><%- title %></a>',\n        );\n        milestoneLinkNoneTemplate = '<span class=\"no-value\">None</span>';\n      }\n      return $dropdown.glDropdown({\n        showMenuAbove: showMenuAbove,\n        data: (term, callback) =>\n          axios.get(milestonesUrl).then(({ data }) => {\n            const extraOptions = [];\n            if (showAny) {\n              extraOptions.push({\n                id: null,\n                name: null,\n                title: 'Any Milestone',\n              });\n            }\n            if (showNo) {\n              extraOptions.push({\n                id: -1,\n                name: 'No Milestone',\n                title: 'No Milestone',\n              });\n            }\n            if (showUpcoming) {\n              extraOptions.push({\n                id: -2,\n                name: '#upcoming',\n                title: 'Upcoming',\n              });\n            }\n            if (showStarted) {\n              extraOptions.push({\n                id: -3,\n                name: '#started',\n                title: 'Started',\n              });\n            }\n            if (extraOptions.length) {\n              extraOptions.push('divider');\n            }\n\n            callback(extraOptions.concat(data));\n            if (showMenuAbove) {\n              $dropdown.data('glDropdown').positionMenuAbove();\n            }\n            $(`[data-milestone-id=\"${_.escape(selectedMilestone)}\"] > a`).addClass('is-active');\n          }),\n        renderRow: milestone => `\n          <li data-milestone-id=\"${_.escape(milestone.name)}\">\n            <a href='#' class='dropdown-menu-milestone-link'>\n              ${_.escape(milestone.title)}\n            </a>\n          </li>\n        `,\n        filterable: true,\n        search: {\n          fields: ['title'],\n        },\n        selectable: true,\n        toggleLabel: (selected, el, e) => {\n          if (selected && 'id' in selected && $(el).hasClass('is-active')) {\n            return selected.title;\n          } else {\n            return defaultLabel;\n          }\n        },\n        defaultLabel: defaultLabel,\n        fieldName: $dropdown.data('fieldName'),\n        text: milestone => _.escape(milestone.title),\n        id: milestone => {\n          if (!useId && !$dropdown.is('.js-issuable-form-dropdown')) {\n            return milestone.name;\n          } else {\n            return milestone.id;\n          }\n        },\n        hidden: () => {\n          $selectBox.hide();\n          // display:block overrides the hide-collapse rule\n          return $value.css('display', '');\n        },\n        opened: e => {\n          const $el = $(e.currentTarget);\n          if ($dropdown.hasClass('js-issue-board-sidebar') || options.handleClick) {\n            selectedMilestone = $dropdown[0].dataset.selected || selectedMilestoneDefault;\n          }\n          $('a.is-active', $el).removeClass('is-active');\n          $(`[data-milestone-id=\"${_.escape(selectedMilestone)}\"] > a`, $el).addClass('is-active');\n        },\n        vue: $dropdown.hasClass('js-issue-board-sidebar'),\n        clicked: clickEvent => {\n          const { $el, e } = clickEvent;\n          let selected = clickEvent.selectedObj;\n\n          let data, modalStoreFilter;\n          if (!selected) return;\n\n          if (options.handleClick) {\n            e.preventDefault();\n            options.handleClick(selected);\n            return;\n          }\n\n          const page = $('body').attr('data-page');\n          const isIssueIndex = page === 'projects:issues:index';\n          const isMRIndex = page === page && page === 'projects:merge_requests:index';\n          const isSelecting = selected.name !== selectedMilestone;\n          selectedMilestone = isSelecting ? selected.name : selectedMilestoneDefault;\n\n          if (\n            $dropdown.hasClass('js-filter-bulk-update') ||\n            $dropdown.hasClass('js-issuable-form-dropdown')\n          ) {\n            e.preventDefault();\n            return;\n          }\n\n          if ($dropdown.closest('.add-issues-modal').length) {\n            modalStoreFilter = ModalStore.store.filter;\n          }\n\n          if (modalStoreFilter) {\n            modalStoreFilter[$dropdown.data('fieldName')] = selected.name;\n            e.preventDefault();\n          } else if ($dropdown.hasClass('js-filter-submit') && (isIssueIndex || isMRIndex)) {\n            return Issuable.filterResults($dropdown.closest('form'));\n          } else if ($dropdown.hasClass('js-filter-submit')) {\n            return $dropdown.closest('form').submit();\n          } else if ($dropdown.hasClass('js-issue-board-sidebar')) {\n            if (selected.id !== -1 && isSelecting) {\n              boardStoreIssueSet(\n                'milestone',\n                new ListMilestone({\n                  id: selected.id,\n                  title: selected.name,\n                }),\n              );\n            } else {\n              boardStoreIssueDelete('milestone');\n            }\n\n            $dropdown.trigger('loading.gl.dropdown');\n            $loading.removeClass('hidden').fadeIn();\n\n            boardsStore.detail.issue\n              .update($dropdown.attr('data-issue-update'))\n              .then(() => {\n                $dropdown.trigger('loaded.gl.dropdown');\n                $loading.fadeOut();\n              })\n              .catch(() => {\n                $loading.fadeOut();\n              });\n          } else {\n            selected = $selectBox.find('input[type=\"hidden\"]').val();\n            data = {};\n            data[abilityName] = {};\n            data[abilityName].milestone_id = selected != null ? selected : null;\n            $loading.removeClass('hidden').fadeIn();\n            $dropdown.trigger('loading.gl.dropdown');\n            return axios\n              .put(issueUpdateURL, data)\n              .then(({ data }) => {\n                $dropdown.trigger('loaded.gl.dropdown');\n                $loading.fadeOut();\n                $selectBox.hide();\n                $value.css('display', '');\n                if (data.milestone != null) {\n                  data.milestone.remaining = timeFor(data.milestone.due_date);\n                  data.milestone.name = data.milestone.title;\n                  $value.html(milestoneLinkTemplate(data.milestone));\n                  return $sidebarCollapsedValue\n                    .attr(\n                      'data-original-title',\n                      `${data.milestone.name}<br />${data.milestone.remaining}`,\n                    )\n                    .find('span')\n                    .text(data.milestone.title);\n                } else {\n                  $value.html(milestoneLinkNoneTemplate);\n                  return $sidebarCollapsedValue\n                    .attr('data-original-title', __('Milestone'))\n                    .find('span')\n                    .text(__('None'));\n                }\n              })\n              .catch(() => {\n                $loading.fadeOut();\n              });\n          }\n        },\n      });\n    });\n  }\n}\n\nwindow.MilestoneSelect = MilestoneSelect;\n","export function createImageBadge(noteId, { x, y }, classNames = []) {\n  const buttonEl = document.createElement('button');\n  const classList = classNames.concat(['js-image-badge']);\n  classList.forEach(className => buttonEl.classList.add(className));\n  buttonEl.setAttribute('type', 'button');\n  buttonEl.setAttribute('disabled', true);\n  buttonEl.dataset.noteId = noteId;\n  buttonEl.style.left = `${x}px`;\n  buttonEl.style.top = `${y}px`;\n\n  return buttonEl;\n}\n\nexport function addImageBadge(containerEl, { coordinate, badgeText, noteId }) {\n  const buttonEl = createImageBadge(noteId, coordinate, ['badge', 'badge-pill']);\n  buttonEl.innerText = badgeText;\n\n  containerEl.appendChild(buttonEl);\n}\n\nexport function addImageCommentBadge(containerEl, { coordinate, noteId }) {\n  const buttonEl = createImageBadge(noteId, coordinate, ['image-comment-badge']);\n  buttonEl.innerHTML = gl.utils.spriteIcon('image-comment-dark');\n\n  containerEl.appendChild(buttonEl);\n}\n\nexport function addAvatarBadge(el, event) {\n  const { noteId, badgeNumber } = event.detail;\n\n  // Add badge to new comment\n  const avatarBadgeEl = el.querySelector(`#${noteId} .badge`);\n  avatarBadgeEl.innerText = badgeNumber;\n  avatarBadgeEl.classList.remove('hidden');\n}\n","export function addCommentIndicator(containerEl, { x, y }) {\n  const buttonEl = document.createElement('button');\n  buttonEl.classList.add('btn-transparent');\n  buttonEl.classList.add('comment-indicator');\n  buttonEl.setAttribute('type', 'button');\n  buttonEl.style.left = `${x}px`;\n  buttonEl.style.top = `${y}px`;\n\n  buttonEl.innerHTML = gl.utils.spriteIcon('image-comment-dark');\n\n  containerEl.appendChild(buttonEl);\n}\n\nexport function removeCommentIndicator(imageFrameEl) {\n  const commentIndicatorEl = imageFrameEl.querySelector('.comment-indicator');\n  const imageEl = imageFrameEl.querySelector('img');\n  const willRemove = !!commentIndicatorEl;\n  let meta = {};\n\n  if (willRemove) {\n    meta = {\n      x: parseInt(commentIndicatorEl.style.left, 10),\n      y: parseInt(commentIndicatorEl.style.top, 10),\n      image: {\n        width: imageEl.width,\n        height: imageEl.height,\n      },\n    };\n\n    commentIndicatorEl.remove();\n  }\n\n  return Object.assign({}, meta, {\n    removed: willRemove,\n  });\n}\n\nexport function showCommentIndicator(imageFrameEl, coordinate) {\n  const { x, y } = coordinate;\n  const commentIndicatorEl = imageFrameEl.querySelector('.comment-indicator');\n\n  if (commentIndicatorEl) {\n    commentIndicatorEl.style.left = `${x}px`;\n    commentIndicatorEl.style.top = `${y}px`;\n  } else {\n    addCommentIndicator(imageFrameEl, coordinate);\n  }\n}\n\nexport function commentIndicatorOnClick(event) {\n  // Prevent from triggering onAddImageDiffNote in notes.js\n  event.stopPropagation();\n\n  const buttonEl = event.currentTarget;\n  const diffViewerEl = buttonEl.closest('.diff-viewer');\n  const textareaEl = diffViewerEl.querySelector('.note-container .note-textarea');\n  textareaEl.focus();\n}\n","import imageDiffHelper from './helpers/index';\n\nconst defaultMeta = {\n  x: 0,\n  y: 0,\n  width: 0,\n  height: 0,\n};\n\nexport default class ImageBadge {\n  constructor(options) {\n    const { noteId, discussionId } = options;\n\n    this.actual = options.actual || defaultMeta;\n    this.browser = options.browser || defaultMeta;\n    this.noteId = noteId;\n    this.discussionId = discussionId;\n\n    if (options.imageEl && !options.browser) {\n      this.browser = imageDiffHelper.resizeCoordinatesToImageElement(options.imageEl, this.actual);\n    }\n  }\n}\n","import $ from 'jquery';\nimport imageDiffHelper from './helpers/index';\nimport ImageBadge from './image_badge';\nimport { isImageLoaded } from '../lib/utils/image_utility';\n\nexport default class ImageDiff {\n  constructor(el, options) {\n    this.el = el;\n    this.canCreateNote = !!(options && options.canCreateNote);\n    this.renderCommentBadge = !!(options && options.renderCommentBadge);\n    this.$noteContainer = $('.note-container', this.el);\n    this.imageBadges = [];\n  }\n\n  init() {\n    this.imageFrameEl = this.el.querySelector('.diff-file .js-image-frame');\n    this.imageEl = this.imageFrameEl.querySelector('img');\n\n    this.bindEvents();\n  }\n\n  bindEvents() {\n    this.imageClickedWrapper = this.imageClicked.bind(this);\n    this.imageBlurredWrapper = imageDiffHelper.removeCommentIndicator.bind(null, this.imageFrameEl);\n    this.addBadgeWrapper = this.addBadge.bind(this);\n    this.removeBadgeWrapper = this.removeBadge.bind(this);\n    this.renderBadgesWrapper = this.renderBadges.bind(this);\n\n    // Render badges\n    if (isImageLoaded(this.imageEl)) {\n      this.renderBadges();\n    } else {\n      this.imageEl.addEventListener('load', this.renderBadgesWrapper);\n    }\n\n    // jquery makes the event delegation here much simpler\n    this.$noteContainer.on('click', '.js-diff-notes-toggle', imageDiffHelper.toggleCollapsed);\n    $(this.el).on('click', '.comment-indicator', imageDiffHelper.commentIndicatorOnClick);\n\n    if (this.canCreateNote) {\n      this.el.addEventListener('click.imageDiff', this.imageClickedWrapper);\n      this.el.addEventListener('blur.imageDiff', this.imageBlurredWrapper);\n      this.el.addEventListener('addBadge.imageDiff', this.addBadgeWrapper);\n      this.el.addEventListener('removeBadge.imageDiff', this.removeBadgeWrapper);\n    }\n  }\n\n  imageClicked(event) {\n    const customEvent = event.detail;\n    const selection = imageDiffHelper.getTargetSelection(customEvent);\n    const el = customEvent.currentTarget;\n\n    imageDiffHelper.setPositionDataAttribute(el, selection.actual);\n    imageDiffHelper.showCommentIndicator(this.imageFrameEl, selection.browser);\n  }\n\n  renderBadges() {\n    const discussionsEls = this.el.querySelectorAll('.note-container .discussion-notes .notes');\n    [...discussionsEls].forEach(this.renderBadge.bind(this));\n  }\n\n  renderBadge(discussionEl, index) {\n    const imageBadge = imageDiffHelper.generateBadgeFromDiscussionDOM(\n      this.imageFrameEl,\n      discussionEl,\n    );\n\n    this.imageBadges.push(imageBadge);\n\n    const options = {\n      coordinate: imageBadge.browser,\n      noteId: imageBadge.noteId,\n    };\n\n    if (this.renderCommentBadge) {\n      imageDiffHelper.addImageCommentBadge(this.imageFrameEl, options);\n    } else {\n      const numberBadgeOptions = Object.assign({}, options, {\n        badgeText: index + 1,\n      });\n\n      imageDiffHelper.addImageBadge(this.imageFrameEl, numberBadgeOptions);\n    }\n  }\n\n  addBadge(event) {\n    const { x, y, width, height, noteId, discussionId } = event.detail;\n    const badgeText = this.imageBadges.length + 1;\n    const imageBadge = new ImageBadge({\n      actual: {\n        x,\n        y,\n        width,\n        height,\n      },\n      imageEl: this.imageFrameEl.querySelector('img'),\n      noteId,\n      discussionId,\n    });\n\n    this.imageBadges.push(imageBadge);\n\n    imageDiffHelper.addImageBadge(this.imageFrameEl, {\n      coordinate: imageBadge.browser,\n      badgeText,\n      noteId,\n    });\n\n    imageDiffHelper.addAvatarBadge(this.el, {\n      detail: {\n        noteId,\n        badgeNumber: badgeText,\n      },\n    });\n\n    const discussionEl = this.el.querySelector(`#discussion_${discussionId}`);\n    imageDiffHelper.updateDiscussionBadgeNumber(discussionEl, badgeText);\n  }\n\n  removeBadge(event) {\n    const { badgeNumber } = event.detail;\n    const indexToRemove = badgeNumber - 1;\n    const imageBadgeEls = this.imageFrameEl.querySelectorAll('.badge');\n\n    if (this.imageBadges.length !== badgeNumber) {\n      // Cascade badges count numbers for (avatar badges + image badges)\n      this.imageBadges.forEach((badge, index) => {\n        if (index > indexToRemove) {\n          const { discussionId } = badge;\n          const updatedBadgeNumber = index;\n          const discussionEl = this.el.querySelector(`#discussion_${discussionId}`);\n\n          imageBadgeEls[index].innerText = updatedBadgeNumber;\n\n          imageDiffHelper.updateDiscussionBadgeNumber(discussionEl, updatedBadgeNumber);\n          imageDiffHelper.updateDiscussionAvatarBadgeNumber(discussionEl, updatedBadgeNumber);\n        }\n      });\n    }\n\n    this.imageBadges.splice(indexToRemove, 1);\n\n    const imageBadgeEl = imageBadgeEls[indexToRemove];\n    imageBadgeEl.remove();\n  }\n}\n","/* eslint-disable import/prefer-default-export */\n\nexport function isImageLoaded(element) {\n  return element.complete && element.naturalHeight !== 0;\n}\n","export const viewTypes = {\n  TWO_UP: 'TWO_UP',\n  SWIPE: 'SWIPE',\n  ONION_SKIN: 'ONION_SKIN',\n};\n\nexport function isValidViewType(validate) {\n  return !!Object.getOwnPropertyNames(viewTypes).find(viewType => viewType === validate);\n}\n","import imageDiffHelper from './helpers/index';\nimport { viewTypes, isValidViewType } from './view_types';\nimport ImageDiff from './image_diff';\n\nexport default class ReplacedImageDiff extends ImageDiff {\n  init(defaultViewType = viewTypes.TWO_UP) {\n    this.imageFrameEls = {\n      [viewTypes.TWO_UP]: this.el.querySelector('.two-up .js-image-frame'),\n      [viewTypes.SWIPE]: this.el.querySelector('.swipe .js-image-frame'),\n      [viewTypes.ONION_SKIN]: this.el.querySelector('.onion-skin .js-image-frame'),\n    };\n\n    const viewModesEl = this.el.querySelector('.view-modes-menu');\n    this.viewModesEls = {\n      [viewTypes.TWO_UP]: viewModesEl.querySelector('.two-up'),\n      [viewTypes.SWIPE]: viewModesEl.querySelector('.swipe'),\n      [viewTypes.ONION_SKIN]: viewModesEl.querySelector('.onion-skin'),\n    };\n\n    this.currentView = defaultViewType;\n    this.generateImageEls();\n    this.bindEvents();\n  }\n\n  generateImageEls() {\n    this.imageEls = {};\n\n    const viewTypeNames = Object.getOwnPropertyNames(viewTypes);\n    viewTypeNames.forEach(viewType => {\n      this.imageEls[viewType] = this.imageFrameEls[viewType].querySelector('img');\n    });\n  }\n\n  bindEvents() {\n    super.bindEvents();\n\n    this.changeToViewTwoUp = this.changeView.bind(this, viewTypes.TWO_UP);\n    this.changeToViewSwipe = this.changeView.bind(this, viewTypes.SWIPE);\n    this.changeToViewOnionSkin = this.changeView.bind(this, viewTypes.ONION_SKIN);\n\n    this.viewModesEls[viewTypes.TWO_UP].addEventListener('click', this.changeToViewTwoUp);\n    this.viewModesEls[viewTypes.SWIPE].addEventListener('click', this.changeToViewSwipe);\n    this.viewModesEls[viewTypes.ONION_SKIN].addEventListener('click', this.changeToViewOnionSkin);\n  }\n\n  get imageEl() {\n    return this.imageEls[this.currentView];\n  }\n\n  get imageFrameEl() {\n    return this.imageFrameEls[this.currentView];\n  }\n\n  changeView(newView) {\n    if (!isValidViewType(newView)) {\n      return;\n    }\n\n    const indicator = imageDiffHelper.removeCommentIndicator(this.imageFrameEl);\n\n    this.currentView = newView;\n\n    // Clear existing badges on new view\n    const existingBadges = this.imageFrameEl.querySelectorAll('.badge');\n    [...existingBadges].map(badge => badge.remove());\n\n    // Remove existing references to old view image badges\n    this.imageBadges = [];\n\n    // Image_file.js has a fade animation of 200ms for loading the view\n    // Need to wait an additional 250ms for the images to be displayed\n    // on window in order to re-normalize their dimensions\n    setTimeout(this.renderNewView.bind(this, indicator), 250);\n  }\n\n  renderNewView(indicator) {\n    // Generate badge coordinates on new view\n    this.renderBadges();\n\n    // Re-render indicator in new view\n    if (indicator.removed) {\n      const normalizedIndicator = imageDiffHelper.resizeCoordinatesToImageElement(this.imageEl, {\n        x: indicator.x,\n        y: indicator.y,\n        width: indicator.image.width,\n        height: indicator.image.height,\n      });\n      imageDiffHelper.showCommentIndicator(this.imageFrameEl, normalizedIndicator);\n    }\n  }\n}\n","/* eslint-disable func-names, no-var, prefer-arrow-callback, no-else-return, consistent-return, prefer-template, one-var, no-unused-vars, no-return-assign, no-unused-expressions, no-sequences */\n\nimport $ from 'jquery';\n\n// Width where images must fits in, for 2-up this gets divided by 2\nconst availWidth = 900;\nconst viewModes = ['two-up', 'swipe'];\n\nexport default class ImageFile {\n  constructor(file) {\n    this.file = file;\n    this.requestImageInfo(\n      $('.two-up.view .frame.deleted img', this.file),\n      (function(_this) {\n        return function(deletedWidth, deletedHeight) {\n          return _this.requestImageInfo($('.two-up.view .frame.added img', _this.file), function(\n            width,\n            height,\n          ) {\n            _this.initViewModes();\n\n            // Load two-up view after images are loaded\n            // so that we can display the correct width and height information\n            const $images = $('.two-up.view img', _this.file);\n\n            $images.waitForImages(function() {\n              _this.initView('two-up');\n            });\n          });\n        };\n      })(this),\n    );\n  }\n\n  initViewModes() {\n    const viewMode = viewModes[0];\n    $('.view-modes', this.file).removeClass('hide');\n    $('.view-modes-menu', this.file).on(\n      'click',\n      'li',\n      (function(_this) {\n        return function(event) {\n          if (!$(event.currentTarget).hasClass('active')) {\n            return _this.activateViewMode(event.currentTarget.className);\n          }\n        };\n      })(this),\n    );\n    return this.activateViewMode(viewMode);\n  }\n\n  activateViewMode(viewMode) {\n    $('.view-modes-menu li', this.file)\n      .removeClass('active')\n      .filter('.' + viewMode)\n      .addClass('active');\n    return $('.view:visible:not(.' + viewMode + ')', this.file).fadeOut(\n      200,\n      (function(_this) {\n        return function() {\n          $('.view.' + viewMode, _this.file).fadeIn(200);\n          return _this.initView(viewMode);\n        };\n      })(this),\n    );\n  }\n\n  initView(viewMode) {\n    return this.views[viewMode].call(this);\n  }\n  // eslint-disable-next-line class-methods-use-this\n  initDraggable($el, padding, callback) {\n    var dragging = false;\n    var $body = $('body');\n    var $offsetEl = $el.parent();\n\n    $el.off('mousedown').on('mousedown', function() {\n      dragging = true;\n      $body.css('user-select', 'none');\n    });\n\n    $body\n      .off('mouseup')\n      .off('mousemove')\n      .on('mouseup', function() {\n        dragging = false;\n        $body.css('user-select', '');\n      })\n      .on('mousemove', function(e) {\n        var left;\n        if (!dragging) return;\n\n        left = e.pageX - ($offsetEl.offset().left + padding);\n\n        callback(e, left);\n      });\n  }\n\n  prepareFrames(view) {\n    var maxHeight, maxWidth;\n    maxWidth = 0;\n    maxHeight = 0;\n    $('.frame', view)\n      .each(\n        (function(_this) {\n          return function(index, frame) {\n            var height, width;\n            width = $(frame).width();\n            height = $(frame).height();\n            maxWidth = width > maxWidth ? width : maxWidth;\n            return (maxHeight = height > maxHeight ? height : maxHeight);\n          };\n        })(this),\n      )\n      .css({\n        width: maxWidth,\n        height: maxHeight,\n      });\n    return [maxWidth, maxHeight];\n  }\n\n  views = {\n    'two-up': function() {\n      return $('.two-up.view .wrap', this.file).each(\n        (function(_this) {\n          return function(index, wrap) {\n            $('img', wrap).each(function() {\n              var currentWidth;\n              currentWidth = $(this).width();\n              if (currentWidth > availWidth / 2) {\n                return $(this).width(availWidth / 2);\n              }\n            });\n            return _this.requestImageInfo($('img', wrap), function(width, height) {\n              $('.image-info .meta-width', wrap).text(width + 'px');\n              $('.image-info .meta-height', wrap).text(height + 'px');\n              return $('.image-info', wrap).removeClass('hide');\n            });\n          };\n        })(this),\n      );\n    },\n    swipe() {\n      var maxHeight, maxWidth;\n      maxWidth = 0;\n      maxHeight = 0;\n      return $('.swipe.view', this.file).each(\n        (function(_this) {\n          return function(index, view) {\n            var $swipeWrap, $swipeBar, $swipeFrame, wrapPadding, ref;\n            (ref = _this.prepareFrames(view)), ([maxWidth, maxHeight] = ref);\n            $swipeFrame = $('.swipe-frame', view);\n            $swipeWrap = $('.swipe-wrap', view);\n            $swipeBar = $('.swipe-bar', view);\n\n            $swipeFrame.css({\n              width: maxWidth + 16,\n              height: maxHeight + 28,\n            });\n            $swipeWrap.css({\n              width: maxWidth + 1,\n              height: maxHeight + 2,\n            });\n            // Set swipeBar left position to match image frame\n            $swipeBar.css({\n              left: 1,\n            });\n\n            wrapPadding = parseInt($swipeWrap.css('right').replace('px', ''), 10);\n\n            _this.initDraggable($swipeBar, wrapPadding, function(e, left) {\n              if (left > 0 && left < $swipeFrame.width() - wrapPadding * 2) {\n                $swipeWrap.width(maxWidth + 1 - left);\n                $swipeBar.css('left', left);\n              }\n            });\n          };\n        })(this),\n      );\n    },\n    'onion-skin': function() {\n      var dragTrackWidth, maxHeight, maxWidth;\n      maxWidth = 0;\n      maxHeight = 0;\n      dragTrackWidth = $('.drag-track', this.file).width() - $('.dragger', this.file).width();\n      return $('.onion-skin.view', this.file).each(\n        (function(_this) {\n          return function(index, view) {\n            var $frame,\n              $track,\n              $dragger,\n              $frameAdded,\n              framePadding,\n              ref,\n              dragging = false;\n            (ref = _this.prepareFrames(view)), ([maxWidth, maxHeight] = ref);\n            $frame = $('.onion-skin-frame', view);\n            $frameAdded = $('.frame.added', view);\n            $track = $('.drag-track', view);\n            $dragger = $('.dragger', $track);\n\n            $frame.css({\n              width: maxWidth + 16,\n              height: maxHeight + 28,\n            });\n            $('.swipe-wrap', view).css({\n              width: maxWidth + 1,\n              height: maxHeight + 2,\n            });\n            $dragger.css({\n              left: dragTrackWidth,\n            });\n\n            $frameAdded.css('opacity', 1);\n            framePadding = parseInt($frameAdded.css('right').replace('px', ''), 10);\n\n            _this.initDraggable($dragger, framePadding, function(e, left) {\n              var opacity = left / dragTrackWidth;\n\n              if (opacity >= 0 && opacity <= 1) {\n                $dragger.css('left', left);\n                $frameAdded.css('opacity', opacity);\n              }\n            });\n          };\n        })(this),\n      );\n    },\n  };\n\n  requestImageInfo(img, callback) {\n    const domImg = img.get(0);\n    if (domImg) {\n      if (domImg.complete) {\n        return callback.call(this, domImg.naturalWidth, domImg.naturalHeight);\n      } else {\n        return img.on(\n          'load',\n          (function(_this) {\n            return function() {\n              return callback.call(_this, domImg.naturalWidth, domImg.naturalHeight);\n            };\n          })(this),\n        );\n      }\n    }\n  }\n}\n","import * as badgeHelper from './badge_helper';\nimport * as commentIndicatorHelper from './comment_indicator_helper';\nimport * as domHelper from './dom_helper';\nimport * as utilsHelper from './utils_helper';\n\nexport default {\n  addCommentIndicator: commentIndicatorHelper.addCommentIndicator,\n  removeCommentIndicator: commentIndicatorHelper.removeCommentIndicator,\n  showCommentIndicator: commentIndicatorHelper.showCommentIndicator,\n  commentIndicatorOnClick: commentIndicatorHelper.commentIndicatorOnClick,\n\n  addImageBadge: badgeHelper.addImageBadge,\n  addImageCommentBadge: badgeHelper.addImageCommentBadge,\n  addAvatarBadge: badgeHelper.addAvatarBadge,\n\n  setPositionDataAttribute: domHelper.setPositionDataAttribute,\n  updateDiscussionAvatarBadgeNumber: domHelper.updateDiscussionAvatarBadgeNumber,\n  updateDiscussionBadgeNumber: domHelper.updateDiscussionBadgeNumber,\n  toggleCollapsed: domHelper.toggleCollapsed,\n\n  resizeCoordinatesToImageElement: utilsHelper.resizeCoordinatesToImageElement,\n  generateBadgeFromDiscussionDOM: utilsHelper.generateBadgeFromDiscussionDOM,\n  getTargetSelection: utilsHelper.getTargetSelection,\n  initImageDiff: utilsHelper.initImageDiff,\n};\n","export function setPositionDataAttribute(el, options) {\n  // Update position data attribute so that the\n  // new comment form can use this data for ajax request\n  const { x, y, width, height } = options;\n  const { position } = el.dataset;\n\n  const positionObject = Object.assign({}, JSON.parse(position), {\n    x,\n    y,\n    width,\n    height,\n  });\n\n  el.setAttribute('data-position', JSON.stringify(positionObject));\n}\n\nexport function updateDiscussionAvatarBadgeNumber(discussionEl, newBadgeNumber) {\n  const avatarBadgeEl = discussionEl.querySelector('.image-diff-avatar-link .badge');\n  avatarBadgeEl.innerText = newBadgeNumber;\n}\n\nexport function updateDiscussionBadgeNumber(discussionEl, newBadgeNumber) {\n  const discussionBadgeEl = discussionEl.querySelector('.badge');\n  discussionBadgeEl.innerText = newBadgeNumber;\n}\n\nexport function toggleCollapsed(event) {\n  const toggleButtonEl = event.currentTarget;\n  const discussionNotesEl = toggleButtonEl.closest('.discussion-notes');\n  const formEl = discussionNotesEl.querySelector('.discussion-form');\n  const isCollapsed = discussionNotesEl.classList.contains('collapsed');\n\n  if (isCollapsed) {\n    discussionNotesEl.classList.remove('collapsed');\n  } else {\n    discussionNotesEl.classList.add('collapsed');\n  }\n\n  // Override the inline display style set in notes.js\n  if (formEl && !isCollapsed) {\n    formEl.style.display = 'none';\n  } else if (formEl && isCollapsed) {\n    formEl.style.display = 'block';\n  }\n}\n","import ImageBadge from '../image_badge';\nimport ImageDiff from '../image_diff';\nimport ReplacedImageDiff from '../replaced_image_diff';\nimport ImageFile from '../../commit/image_file';\n\nexport function resizeCoordinatesToImageElement(imageEl, meta) {\n  const { x, y, width, height } = meta;\n\n  const imageWidth = imageEl.width;\n  const imageHeight = imageEl.height;\n\n  const widthRatio = imageWidth / width;\n  const heightRatio = imageHeight / height;\n\n  return {\n    x: Math.round(x * widthRatio),\n    y: Math.round(y * heightRatio),\n    width: imageWidth,\n    height: imageHeight,\n  };\n}\n\nexport function generateBadgeFromDiscussionDOM(imageFrameEl, discussionEl) {\n  const position = JSON.parse(discussionEl.dataset.position);\n  const firstNoteEl = discussionEl.querySelector('.note');\n  const badge = new ImageBadge({\n    actual: position,\n    imageEl: imageFrameEl.querySelector('img'),\n    noteId: firstNoteEl.id,\n    discussionId: discussionEl.dataset.discussionId,\n  });\n\n  return badge;\n}\n\nexport function getTargetSelection(event) {\n  const containerEl = event.currentTarget;\n  const imageEl = containerEl.querySelector('img');\n\n  const x = event.offsetX;\n  const y = event.offsetY;\n\n  const { width, height } = imageEl;\n\n  const actualWidth = imageEl.naturalWidth;\n  const actualHeight = imageEl.naturalHeight;\n\n  const widthRatio = actualWidth / width;\n  const heightRatio = actualHeight / height;\n\n  // Browser will include the frame as a clickable target,\n  // which would result in potential 1px out of bounds value\n  // This bound the coordinates to inside the frame\n  const normalizedX = Math.max(0, x) && Math.min(x, width);\n  const normalizedY = Math.max(0, y) && Math.min(y, height);\n\n  return {\n    browser: {\n      x: normalizedX,\n      y: normalizedY,\n      width,\n      height,\n    },\n    actual: {\n      // Round x, y so that we don't need to deal with decimals\n      x: Math.round(normalizedX * widthRatio),\n      y: Math.round(normalizedY * heightRatio),\n      width: actualWidth,\n      height: actualHeight,\n    },\n  };\n}\n\nexport function initImageDiff(fileEl, canCreateNote, renderCommentBadge) {\n  const options = {\n    canCreateNote,\n    renderCommentBadge,\n  };\n  let diff;\n\n  // ImageFile needs to be invoked before initImageDiff so that badges\n  // can mount to the correct location\n  new ImageFile(fileEl); // eslint-disable-line no-new\n\n  if (fileEl.querySelector('.diff-file .js-single-image')) {\n    diff = new ImageDiff(fileEl, options);\n    diff.init();\n  } else if (fileEl.querySelector('.diff-file .js-replaced-image')) {\n    diff = new ReplacedImageDiff(fileEl, options);\n    diff.init();\n  }\n\n  return diff;\n}\n","import initMergeRequest from '~/pages/projects/merge_requests/init_merge_request';\n\ndocument.addEventListener('DOMContentLoaded', initMergeRequest);\n","/* Developer beware! Do not add logic to showButton or hideButton\n * that will force a reflow. Doing so will create a significant performance\n * bottleneck for pages with large diffs. For a comprehensive list of what\n * causes reflows, visit https://gist.github.com/paulirish/5d52fb081b3570c81e3a\n */\n\nimport Cookies from 'js-cookie';\n\nconst LINE_NUMBER_CLASS = 'diff-line-num';\nconst UNFOLDABLE_LINE_CLASS = 'js-unfold';\nconst NO_COMMENT_CLASS = 'no-comment-btn';\nconst EMPTY_CELL_CLASS = 'empty-cell';\nconst OLD_LINE_CLASS = 'old_line';\nconst LINE_COLUMN_CLASSES = `.${LINE_NUMBER_CLASS}, .line_content`;\nconst DIFF_CONTAINER_SELECTOR = '.files';\nconst DIFF_EXPANDED_CLASS = 'diff-expanded';\n\nexport default {\n  init($diffFile) {\n    /* Caching is used only when the following members are *true*.\n     * This is because there are likely to be\n     * differently configured versions of diffs in the same session.\n     * However if these values are true, they\n     * will be true in all cases */\n\n    if (!this.userCanCreateNote) {\n      // data-can-create-note is an empty string when true, otherwise undefined\n      this.userCanCreateNote =\n        $diffFile.closest(DIFF_CONTAINER_SELECTOR).data('canCreateNote') === '';\n    }\n\n    this.isParallelView = Cookies.get('diff_view') === 'parallel';\n\n    if (this.userCanCreateNote) {\n      $diffFile\n        .on('mouseover', LINE_COLUMN_CLASSES, e => this.showButton(this.isParallelView, e))\n        .on('mouseleave', LINE_COLUMN_CLASSES, e => this.hideButton(this.isParallelView, e));\n    }\n  },\n\n  showButton(isParallelView, e) {\n    const buttonParentElement = this.getButtonParent(e.currentTarget, isParallelView);\n\n    if (!this.validateButtonParent(buttonParentElement)) return;\n\n    buttonParentElement.classList.add('is-over');\n    buttonParentElement.nextElementSibling.classList.add('is-over');\n  },\n\n  hideButton(isParallelView, e) {\n    const buttonParentElement = this.getButtonParent(e.currentTarget, isParallelView);\n\n    buttonParentElement.classList.remove('is-over');\n    buttonParentElement.nextElementSibling.classList.remove('is-over');\n  },\n\n  getButtonParent(hoveredElement, isParallelView) {\n    if (isParallelView) {\n      if (!hoveredElement.classList.contains(LINE_NUMBER_CLASS)) {\n        return hoveredElement.previousElementSibling;\n      }\n    } else if (!hoveredElement.classList.contains(OLD_LINE_CLASS)) {\n      return hoveredElement.parentNode.querySelector(`.${OLD_LINE_CLASS}`);\n    }\n    return hoveredElement;\n  },\n\n  validateButtonParent(buttonParentElement) {\n    return (\n      !buttonParentElement.classList.contains(EMPTY_CELL_CLASS) &&\n      !buttonParentElement.classList.contains(UNFOLDABLE_LINE_CLASS) &&\n      !buttonParentElement.classList.contains(NO_COMMENT_CLASS) &&\n      !buttonParentElement.parentNode.classList.contains(DIFF_EXPANDED_CLASS)\n    );\n  },\n};\n","/* eslint-disable func-names, prefer-arrow-callback, consistent-return, */\n\nimport $ from 'jquery';\nimport { __ } from './locale';\nimport axios from './lib/utils/axios_utils';\nimport createFlash from './flash';\nimport FilesCommentButton from './files_comment_button';\nimport imageDiffHelper from './image_diff/helpers/index';\nimport syntaxHighlight from './syntax_highlight';\n\nconst WRAPPER = '<div class=\"diff-content\"></div>';\nconst LOADING_HTML = '<i class=\"fa fa-spinner fa-spin\"></i>';\nconst ERROR_HTML =\n  '<div class=\"nothing-here-block\"><i class=\"fa fa-warning\"></i> Could not load diff</div>';\nconst COLLAPSED_HTML =\n  '<div class=\"nothing-here-block diff-collapsed\">This diff is collapsed. <button class=\"click-to-expand btn btn-link\">Click to expand it.</button></div>';\n\nexport default class SingleFileDiff {\n  constructor(file) {\n    this.file = file;\n    this.toggleDiff = this.toggleDiff.bind(this);\n    this.content = $('.diff-content', this.file);\n    this.$toggleIcon = $('.diff-toggle-caret', this.file);\n    this.diffForPath = this.content.find('[data-diff-for-path]').data('diffForPath');\n    this.isOpen = !this.diffForPath;\n    if (this.diffForPath) {\n      this.collapsedContent = this.content;\n      this.loadingContent = $(WRAPPER)\n        .addClass('loading')\n        .html(LOADING_HTML)\n        .hide();\n      this.content = null;\n      this.collapsedContent.after(this.loadingContent);\n      this.$toggleIcon.addClass('fa-caret-right');\n    } else {\n      this.collapsedContent = $(WRAPPER)\n        .html(COLLAPSED_HTML)\n        .hide();\n      this.content.after(this.collapsedContent);\n      this.$toggleIcon.addClass('fa-caret-down');\n    }\n\n    $('.js-file-title, .click-to-expand', this.file).on(\n      'click',\n      function(e) {\n        this.toggleDiff($(e.target));\n      }.bind(this),\n    );\n  }\n\n  toggleDiff($target, cb) {\n    if (\n      !$target.hasClass('js-file-title') &&\n      !$target.hasClass('click-to-expand') &&\n      !$target.hasClass('diff-toggle-caret')\n    )\n      return;\n    this.isOpen = !this.isOpen;\n    if (!this.isOpen && !this.hasError) {\n      this.content.hide();\n      this.$toggleIcon.addClass('fa-caret-right').removeClass('fa-caret-down');\n      this.collapsedContent.show();\n      if (typeof gl.diffNotesCompileComponents !== 'undefined') {\n        gl.diffNotesCompileComponents();\n      }\n    } else if (this.content) {\n      this.collapsedContent.hide();\n      this.content.show();\n      this.$toggleIcon.addClass('fa-caret-down').removeClass('fa-caret-right');\n      if (typeof gl.diffNotesCompileComponents !== 'undefined') {\n        gl.diffNotesCompileComponents();\n      }\n    } else {\n      this.$toggleIcon.addClass('fa-caret-down').removeClass('fa-caret-right');\n      return this.getContentHTML(cb);\n    }\n  }\n\n  getContentHTML(cb) {\n    this.collapsedContent.hide();\n    this.loadingContent.show();\n\n    axios\n      .get(this.diffForPath)\n      .then(({ data }) => {\n        this.loadingContent.hide();\n        if (data.html) {\n          this.content = $(data.html);\n          syntaxHighlight(this.content);\n        } else {\n          this.hasError = true;\n          this.content = $(ERROR_HTML);\n        }\n        this.collapsedContent.after(this.content);\n\n        if (typeof gl.diffNotesCompileComponents !== 'undefined') {\n          gl.diffNotesCompileComponents();\n        }\n\n        const $file = $(this.file);\n        FilesCommentButton.init($file);\n\n        const canCreateNote = $file.closest('.files').is('[data-can-create-note]');\n        imageDiffHelper.initImageDiff($file[0], canCreateNote);\n\n        if (cb) cb();\n      })\n      .catch(() => {\n        createFlash(__('An error occurred while retrieving diff'));\n      });\n  }\n}\n","import $ from 'jquery';\nimport axios from '~/lib/utils/axios_utils';\nimport flash from '~/flash';\nimport { __ } from '~/locale';\nimport { getLocationHash } from './lib/utils/url_utility';\nimport FilesCommentButton from './files_comment_button';\nimport SingleFileDiff from './single_file_diff';\nimport imageDiffHelper from './image_diff/helpers/index';\n\nconst UNFOLD_COUNT = 20;\nlet isBound = false;\n\nexport default class Diff {\n  constructor() {\n    const $diffFile = $('.files .diff-file');\n\n    $diffFile.each((index, file) => {\n      if (!$.data(file, 'singleFileDiff')) {\n        $.data(file, 'singleFileDiff', new SingleFileDiff(file));\n      }\n    });\n\n    const tab = document.getElementById('diffs');\n    if (!tab || (tab && tab.dataset && tab.dataset.isLocked !== ''))\n      FilesCommentButton.init($diffFile);\n\n    const firstFile = $('.files')\n      .first()\n      .get(0);\n    const canCreateNote = firstFile && firstFile.hasAttribute('data-can-create-note');\n    $diffFile.each((index, file) => imageDiffHelper.initImageDiff(file, canCreateNote));\n\n    if (!isBound) {\n      $(document)\n        .on('click', '.js-unfold', this.handleClickUnfold.bind(this))\n        .on('click', '.diff-line-num a', this.handleClickLineNum.bind(this))\n        .on('mousedown', 'td.line_content.parallel', this.handleParallelLineDown.bind(this));\n      isBound = true;\n    }\n\n    if (getLocationHash()) {\n      this.highlightSelectedLine();\n    }\n\n    this.openAnchoredDiff();\n  }\n\n  handleClickUnfold(e) {\n    const $target = $(e.target);\n    const [oldLineNumber, newLineNumber] = this.lineNumbers($target.parent());\n    const offset = newLineNumber - oldLineNumber;\n    const bottom = $target.hasClass('js-unfold-bottom');\n    let since;\n    let to;\n    let unfold = true;\n\n    if (bottom) {\n      const lineNumber = newLineNumber + 1;\n      since = lineNumber;\n      to = lineNumber + UNFOLD_COUNT;\n    } else {\n      const lineNumber = newLineNumber - 1;\n      since = lineNumber - UNFOLD_COUNT;\n      to = lineNumber;\n\n      // make sure we aren't loading more than we need\n      const prevNewLine = this.lineNumbers($target.parent().prev())[1];\n      if (since <= prevNewLine + 1) {\n        since = prevNewLine + 1;\n        unfold = false;\n      }\n    }\n\n    const file = $target.parents('.diff-file');\n    const link = file.data('blobDiffPath');\n    const view = file.data('view');\n\n    const params = { since, to, bottom, offset, unfold, view };\n    axios\n      .get(link, { params })\n      .then(({ data }) => $target.parent().replaceWith(data))\n      .catch(() => flash(__('An error occurred while loading diff')));\n  }\n\n  openAnchoredDiff(cb) {\n    const locationHash = getLocationHash();\n    const anchoredDiff = locationHash && locationHash.split('_')[0];\n\n    if (!anchoredDiff) return;\n\n    const diffTitle = $(`#${anchoredDiff}`);\n    const diffFile = diffTitle.closest('.diff-file');\n    const nothingHereBlock = $('.nothing-here-block:visible', diffFile);\n    if (nothingHereBlock.length) {\n      const clickTarget = $('.js-file-title, .click-to-expand', diffFile);\n      diffFile.data('singleFileDiff').toggleDiff(clickTarget, () => {\n        this.highlightSelectedLine();\n        if (cb) cb();\n      });\n    } else if (cb) {\n      cb();\n    }\n  }\n\n  handleClickLineNum(e) {\n    const hash = $(e.currentTarget).attr('href');\n    e.preventDefault();\n    if (window.history.pushState) {\n      window.history.pushState(null, null, hash);\n    } else {\n      window.location.hash = hash;\n    }\n    this.highlightSelectedLine();\n  }\n  // eslint-disable-next-line class-methods-use-this\n  handleParallelLineDown(e) {\n    const line = $(e.currentTarget);\n    const table = line.closest('table');\n\n    table.removeClass('left-side-selected right-side-selected');\n\n    const lineClass = ['left-side', 'right-side'].filter(name => line.hasClass(name))[0];\n    if (lineClass) {\n      table.addClass(`${lineClass}-selected`);\n    }\n  }\n  // eslint-disable-next-line class-methods-use-this\n  diffViewType() {\n    return $('.inline-parallel-buttons a.active').data('viewType');\n  }\n  // eslint-disable-next-line class-methods-use-this\n  lineNumbers(line) {\n    const children = line.find('.diff-line-num').toArray();\n    if (children.length !== 2) {\n      return [0, 0];\n    }\n    return children.map(elm => parseInt($(elm).data('linenumber'), 10) || 0);\n  }\n  // eslint-disable-next-line class-methods-use-this\n  highlightSelectedLine() {\n    const hash = getLocationHash();\n    const $diffFiles = $('.diff-file');\n    $diffFiles.find('.hll').removeClass('hll');\n\n    if (hash) {\n      $diffFiles\n        .find(`tr#${hash}:not(.match) td, td#${hash}, td[data-line-code=\"${hash}\"]`)\n        .addClass('hll');\n    }\n  }\n}\n","/* eslint-disable no-shadow */\n/* global List */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport Vue from 'vue';\nimport Cookies from 'js-cookie';\nimport { getUrlParamsArray, parseBoolean } from '~/lib/utils/common_utils';\n\nconst boardsStore = {\n  disabled: false,\n  filter: {\n    path: '',\n  },\n  state: {},\n  detail: {\n    issue: {},\n  },\n  moving: {\n    issue: {},\n    list: {},\n  },\n  create() {\n    this.state.lists = [];\n    this.filter.path = getUrlParamsArray().join('&');\n    this.detail = {\n      issue: {},\n    };\n  },\n  addList(listObj, defaultAvatar) {\n    const list = new List(listObj, defaultAvatar);\n    this.state.lists.push(list);\n\n    return list;\n  },\n  new(listObj) {\n    const list = this.addList(listObj);\n    const backlogList = this.findList('type', 'backlog', 'backlog');\n\n    list\n      .save()\n      .then(() => {\n        // Remove any new issues from the backlog\n        // as they will be visible in the new list\n        list.issues.forEach(backlogList.removeIssue.bind(backlogList));\n        this.state.lists = _.sortBy(this.state.lists, 'position');\n      })\n      .catch(() => {\n        // https://gitlab.com/gitlab-org/gitlab-ce/issues/30821\n      });\n    this.removeBlankState();\n  },\n  updateNewListDropdown(listId) {\n    $(`.js-board-list-${listId}`).removeClass('is-active');\n  },\n  shouldAddBlankState() {\n    // Decide whether to add the blank state\n    return !this.state.lists.filter(list => list.type !== 'backlog' && list.type !== 'closed')[0];\n  },\n  addBlankState() {\n    if (!this.shouldAddBlankState() || this.welcomeIsHidden() || this.disabled) return;\n\n    this.addList({\n      id: 'blank',\n      list_type: 'blank',\n      title: 'Welcome to your Issue Board!',\n      position: 0,\n    });\n\n    this.state.lists = _.sortBy(this.state.lists, 'position');\n  },\n  removeBlankState() {\n    this.removeList('blank');\n\n    Cookies.set('issue_board_welcome_hidden', 'true', {\n      expires: 365 * 10,\n      path: '',\n    });\n  },\n  welcomeIsHidden() {\n    return parseBoolean(Cookies.get('issue_board_welcome_hidden'));\n  },\n  removeList(id, type = 'blank') {\n    const list = this.findList('id', id, type);\n\n    if (!list) return;\n\n    this.state.lists = this.state.lists.filter(list => list.id !== id);\n  },\n  moveList(listFrom, orderLists) {\n    orderLists.forEach((id, i) => {\n      const list = this.findList('id', parseInt(id, 10));\n\n      list.position = i;\n    });\n    listFrom.update();\n  },\n  moveIssueToList(listFrom, listTo, issue, newIndex) {\n    const issueTo = listTo.findIssue(issue.id);\n    const issueLists = issue.getLists();\n    const listLabels = issueLists.map(listIssue => listIssue.label);\n\n    if (!issueTo) {\n      // Check if target list assignee is already present in this issue\n      if (\n        listTo.type === 'assignee' &&\n        listFrom.type === 'assignee' &&\n        issue.findAssignee(listTo.assignee)\n      ) {\n        const targetIssue = listTo.findIssue(issue.id);\n        targetIssue.removeAssignee(listFrom.assignee);\n      } else if (listTo.type === 'milestone') {\n        const currentMilestone = issue.milestone;\n        const currentLists = this.state.lists\n          .filter(list => list.type === 'milestone' && list.id !== listTo.id)\n          .filter(list => list.issues.some(listIssue => issue.id === listIssue.id));\n\n        issue.removeMilestone(currentMilestone);\n        issue.addMilestone(listTo.milestone);\n        currentLists.forEach(currentList => currentList.removeIssue(issue));\n        listTo.addIssue(issue, listFrom, newIndex);\n      } else {\n        // Add to new lists issues if it doesn't already exist\n        listTo.addIssue(issue, listFrom, newIndex);\n      }\n    } else {\n      listTo.updateIssueLabel(issue, listFrom);\n      issueTo.removeLabel(listFrom.label);\n    }\n\n    if (listTo.type === 'closed' && listFrom.type !== 'backlog') {\n      issueLists.forEach(list => {\n        list.removeIssue(issue);\n      });\n      issue.removeLabels(listLabels);\n    } else if (listTo.type === 'backlog' && listFrom.type === 'assignee') {\n      issue.removeAssignee(listFrom.assignee);\n      listFrom.removeIssue(issue);\n    } else if (listTo.type === 'backlog' && listFrom.type === 'milestone') {\n      issue.removeMilestone(listFrom.milestone);\n      listFrom.removeIssue(issue);\n    } else if (this.shouldRemoveIssue(listFrom, listTo)) {\n      listFrom.removeIssue(issue);\n    }\n  },\n  shouldRemoveIssue(listFrom, listTo) {\n    return (\n      (listTo.type !== 'label' && listFrom.type === 'assignee') ||\n      (listTo.type !== 'assignee' && listFrom.type === 'label') ||\n      listFrom.type === 'backlog'\n    );\n  },\n  moveIssueInList(list, issue, oldIndex, newIndex, idArray) {\n    const beforeId = parseInt(idArray[newIndex - 1], 10) || null;\n    const afterId = parseInt(idArray[newIndex + 1], 10) || null;\n\n    list.moveIssue(issue, oldIndex, newIndex, beforeId, afterId);\n  },\n  findList(key, val, type = 'label') {\n    const filteredList = this.state.lists.filter(list => {\n      const byType = type\n        ? list.type === type || list.type === 'assignee' || list.type === 'milestone'\n        : true;\n\n      return list[key] === val && byType;\n    });\n    return filteredList[0];\n  },\n  findListByLabelId(id) {\n    return this.state.lists.find(list => list.type === 'label' && list.label.id === id);\n  },\n  updateFiltersUrl() {\n    window.history.pushState(null, null, `?${this.filter.path}`);\n  },\n};\n\n// hacks added in order to allow milestone_select to function properly\n// TODO: remove these\n\nexport function boardStoreIssueSet(...args) {\n  Vue.set(boardsStore.detail.issue, ...args);\n}\n\nexport function boardStoreIssueDelete(...args) {\n  Vue.delete(boardsStore.detail.issue, ...args);\n}\n\nexport default boardsStore;\n","/* eslint-disable class-methods-use-this, no-unused-vars */\n\nimport $ from 'jquery';\n\nexport default class TemplateSelector {\n  constructor({ dropdown, data, pattern, wrapper, editor, $input } = {}) {\n    this.pattern = pattern;\n    this.editor = editor;\n    this.dropdown = dropdown;\n    this.$dropdownContainer = wrapper;\n    this.$filenameInput = $input || $('#file_name');\n    this.$dropdownIcon = $('.fa-chevron-down', dropdown);\n\n    this.initDropdown(dropdown, data);\n    this.listenForFilenameInput();\n    this.renderMatchedDropdown();\n    this.initAutosizeUpdateEvent();\n  }\n\n  initDropdown(dropdown, data) {\n    return $(dropdown).glDropdown({\n      data,\n      filterable: true,\n      selectable: true,\n      toggleLabel: item => item.name,\n      search: {\n        fields: ['name'],\n      },\n      clicked: options => this.fetchFileTemplate(options),\n      text: item => item.name,\n    });\n  }\n\n  initAutosizeUpdateEvent() {\n    this.autosizeUpdateEvent = document.createEvent('Event');\n    this.autosizeUpdateEvent.initEvent('autosize:update', true, false);\n  }\n\n  listenForFilenameInput() {\n    return this.$filenameInput.on('keyup blur', e => this.renderMatchedDropdown(e));\n  }\n\n  renderMatchedDropdown() {\n    if (!this.$filenameInput.length) {\n      return null;\n    }\n\n    const filenameMatches = this.pattern.test(this.$filenameInput.val().trim());\n\n    if (!filenameMatches) {\n      return this.$dropdownContainer.addClass('hidden');\n    }\n    return this.$dropdownContainer.removeClass('hidden');\n  }\n\n  fetchFileTemplate(options) {\n    const { e } = options;\n    const item = options.selectedObj;\n\n    e.preventDefault();\n    return this.requestFile(item);\n  }\n\n  requestFile(item) {\n    // This `requestFile` method is an abstract method that should\n    // be added by all subclasses.\n  }\n\n  setEditorContent(file, { skipFocus } = {}) {\n    if (!file) return;\n\n    const newValue = file.content;\n\n    this.editor.setValue(newValue, 1);\n\n    if (!skipFocus) this.editor.focus();\n\n    if (this.editor instanceof $) {\n      this.editor.get(0).dispatchEvent(this.autosizeUpdateEvent);\n    }\n  }\n\n  startLoadingSpinner() {\n    this.$dropdownIcon.addClass('fa-spinner fa-spin').removeClass('fa-chevron-down');\n  }\n\n  stopLoadingSpinner() {\n    this.$dropdownIcon.addClass('fa-chevron-down').removeClass('fa-spinner fa-spin');\n  }\n}\n","/* eslint-disable no-useless-return */\n\nimport $ from 'jquery';\nimport Api from '../api';\nimport TemplateSelector from '../blob/template_selector';\n\nexport default class IssuableTemplateSelector extends TemplateSelector {\n  constructor(...args) {\n    super(...args);\n    this.projectPath = this.dropdown.data('projectPath');\n    this.namespacePath = this.dropdown.data('namespacePath');\n    this.issuableType = this.$dropdownContainer.data('issuableType');\n    this.titleInput = $(`#${this.issuableType}_title`);\n\n    const initialQuery = {\n      name: this.dropdown.data('selected'),\n    };\n\n    if (initialQuery.name) this.requestFile(initialQuery);\n\n    $('.reset-template', this.dropdown.parent()).on('click', () => {\n      this.setInputValueToTemplateContent();\n    });\n\n    $('.no-template', this.dropdown.parent()).on('click', () => {\n      this.currentTemplate.content = '';\n      this.setInputValueToTemplateContent();\n      $('.dropdown-toggle-text', this.dropdown).text('Choose a template');\n    });\n  }\n\n  requestFile(query) {\n    this.startLoadingSpinner();\n    Api.issueTemplate(\n      this.namespacePath,\n      this.projectPath,\n      query.name,\n      this.issuableType,\n      (err, currentTemplate) => {\n        this.currentTemplate = currentTemplate;\n        this.stopLoadingSpinner();\n        if (err) return; // Error handled by global AJAX error handler\n        this.setInputValueToTemplateContent();\n      },\n    );\n    return;\n  }\n\n  setInputValueToTemplateContent() {\n    // `this.setEditorContent` sets the value of the description input field\n    // to the content of the template selected.\n    if (this.titleInput.val() === '') {\n      // If the title has not yet been set, focus the title input and\n      // skip focusing the description input by setting `true` as the\n      // `skipFocus` option to `setEditorContent`.\n      this.setEditorContent(this.currentTemplate, { skipFocus: true });\n      this.titleInput.focus();\n    } else {\n      this.setEditorContent(this.currentTemplate, { skipFocus: false });\n    }\n    return;\n  }\n}\n","/* eslint-disable no-new, class-methods-use-this */\n\nimport $ from 'jquery';\nimport IssuableTemplateSelector from './issuable_template_selector';\n\nexport default class IssuableTemplateSelectors {\n  constructor({ $dropdowns, editor } = {}) {\n    this.$dropdowns = $dropdowns || $('.js-issuable-selector');\n    this.editor = editor || this.initEditor();\n\n    this.$dropdowns.each((i, dropdown) => {\n      const $dropdown = $(dropdown);\n      new IssuableTemplateSelector({\n        pattern: /(\\.md)/,\n        data: $dropdown.data('data'),\n        wrapper: $dropdown.closest('.js-issuable-selector-wrap'),\n        dropdown: $dropdown,\n        editor: this.editor,\n      });\n    });\n  }\n\n  initEditor() {\n    const editor = $('.markdown-area');\n    // Proxy ace-editor's .setValue to jQuery's .val\n    editor.setValue = editor.val;\n    editor.getValue = editor.val;\n    return editor;\n  }\n}\n","import $ from 'jquery';\n\nlet instanceCount = 0;\n\nclass AutoWidthDropdownSelect {\n  constructor(selectElement) {\n    this.$selectElement = $(selectElement);\n    this.dropdownClass = `js-auto-width-select-dropdown-${instanceCount}`;\n    instanceCount += 1;\n  }\n\n  init() {\n    const { dropdownClass } = this;\n    this.$selectElement.select2({\n      dropdownCssClass: dropdownClass,\n      ...AutoWidthDropdownSelect.selectOptions(this.dropdownClass),\n    });\n\n    return this;\n  }\n\n  static selectOptions(dropdownClass) {\n    return {\n      dropdownCss() {\n        let resultantWidth = 'auto';\n        const $dropdown = $(`.${dropdownClass}`);\n\n        // We have to look at the parent because\n        // `offsetParent` on a `display: none;` is `null`\n        const offsetParentWidth = $(this)\n          .parent()\n          .offsetParent()\n          .width();\n        // Reset any width to let it naturally flow\n        $dropdown.css('width', 'auto');\n        if ($dropdown.outerWidth(false) > offsetParentWidth) {\n          resultantWidth = offsetParentWidth;\n        }\n\n        return {\n          width: resultantWidth,\n          maxWidth: offsetParentWidth,\n        };\n      },\n    };\n  }\n}\n\nexport default AutoWidthDropdownSelect;\n","import $ from 'jquery';\nimport Pikaday from 'pikaday';\nimport Autosave from './autosave';\nimport UsersSelect from './users_select';\nimport GfmAutoComplete from './gfm_auto_complete';\nimport ZenMode from './zen_mode';\nimport AutoWidthDropdownSelect from './issuable/auto_width_dropdown_select';\nimport { parsePikadayDate, pikadayToString } from './lib/utils/datetime_utility';\n\nexport default class IssuableForm {\n  constructor(form) {\n    this.form = form;\n    this.toggleWip = this.toggleWip.bind(this);\n    this.renderWipExplanation = this.renderWipExplanation.bind(this);\n    this.resetAutosave = this.resetAutosave.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.wipRegex = /^\\s*(\\[WIP\\]\\s*|WIP:\\s*|WIP\\s+)+\\s*/i;\n\n    this.gfmAutoComplete = new GfmAutoComplete(\n      gl.GfmAutoComplete && gl.GfmAutoComplete.dataSources,\n    ).setup();\n    this.usersSelect = new UsersSelect();\n    this.zenMode = new ZenMode();\n\n    this.titleField = this.form.find('input[name*=\"[title]\"]');\n    this.descriptionField = this.form.find('textarea[name*=\"[description]\"]');\n    if (!(this.titleField.length && this.descriptionField.length)) {\n      return;\n    }\n\n    this.initAutosave();\n    this.form.on('submit', this.handleSubmit);\n    this.form.on('click', '.btn-cancel', this.resetAutosave);\n    this.initWip();\n\n    const $issuableDueDate = $('#issuable-due-date');\n\n    if ($issuableDueDate.length) {\n      const calendar = new Pikaday({\n        field: $issuableDueDate.get(0),\n        theme: 'gitlab-theme animate-picker',\n        format: 'yyyy-mm-dd',\n        container: $issuableDueDate.parent().get(0),\n        parse: dateString => parsePikadayDate(dateString),\n        toString: date => pikadayToString(date),\n        onSelect: dateText => $issuableDueDate.val(calendar.toString(dateText)),\n      });\n      calendar.setDate(parsePikadayDate($issuableDueDate.val()));\n    }\n\n    this.$targetBranchSelect = $('.js-target-branch-select', this.form);\n\n    if (this.$targetBranchSelect.length) {\n      this.initTargetBranchDropdown();\n    }\n  }\n\n  initAutosave() {\n    this.autosave = new Autosave(this.titleField, [\n      document.location.pathname,\n      document.location.search,\n      'title',\n    ]);\n    return new Autosave(this.descriptionField, [\n      document.location.pathname,\n      document.location.search,\n      'description',\n    ]);\n  }\n\n  handleSubmit() {\n    return this.resetAutosave();\n  }\n\n  resetAutosave() {\n    this.titleField.data('autosave').reset();\n    return this.descriptionField.data('autosave').reset();\n  }\n\n  initWip() {\n    this.$wipExplanation = this.form.find('.js-wip-explanation');\n    this.$noWipExplanation = this.form.find('.js-no-wip-explanation');\n    if (!(this.$wipExplanation.length && this.$noWipExplanation.length)) {\n      return undefined;\n    }\n    this.form.on('click', '.js-toggle-wip', this.toggleWip);\n    this.titleField.on('keyup blur', this.renderWipExplanation);\n    return this.renderWipExplanation();\n  }\n\n  workInProgress() {\n    return this.wipRegex.test(this.titleField.val());\n  }\n\n  renderWipExplanation() {\n    if (this.workInProgress()) {\n      this.$wipExplanation.show();\n      return this.$noWipExplanation.hide();\n    }\n    this.$wipExplanation.hide();\n    return this.$noWipExplanation.show();\n  }\n\n  toggleWip(event) {\n    event.preventDefault();\n    if (this.workInProgress()) {\n      this.removeWip();\n    } else {\n      this.addWip();\n    }\n    return this.renderWipExplanation();\n  }\n\n  removeWip() {\n    return this.titleField.val(this.titleField.val().replace(this.wipRegex, ''));\n  }\n\n  addWip() {\n    this.titleField.val(`WIP: ${this.titleField.val()}`);\n  }\n\n  initTargetBranchDropdown() {\n    this.$targetBranchSelect.select2({\n      ...AutoWidthDropdownSelect.selectOptions('js-target-branch-select'),\n      ajax: {\n        url: this.$targetBranchSelect.data('endpoint'),\n        dataType: 'JSON',\n        quietMillis: 250,\n        data(search) {\n          return {\n            search,\n          };\n        },\n        results(data) {\n          return {\n            // `data` keys are translated so we can't just access them with a string based key\n            results: data[Object.keys(data)[0]].map(name => ({\n              id: name,\n              text: name,\n            })),\n          };\n        },\n      },\n      initSelection(el, callback) {\n        const val = el.val();\n\n        callback({\n          id: val,\n          text: val,\n        });\n      },\n    });\n  }\n}\n","import Mousetrap from 'mousetrap';\nimport findAndFollowLink from '../../lib/utils/navigation_utility';\nimport Shortcuts from './shortcuts';\n\nexport default class ShortcutsNavigation extends Shortcuts {\n  constructor() {\n    super();\n\n    Mousetrap.bind('g p', () => findAndFollowLink('.shortcuts-project'));\n    Mousetrap.bind('g v', () => findAndFollowLink('.shortcuts-project-activity'));\n    Mousetrap.bind('g r', () => findAndFollowLink('.shortcuts-project-releases'));\n    Mousetrap.bind('g f', () => findAndFollowLink('.shortcuts-tree'));\n    Mousetrap.bind('g c', () => findAndFollowLink('.shortcuts-commits'));\n    Mousetrap.bind('g j', () => findAndFollowLink('.shortcuts-builds'));\n    Mousetrap.bind('g n', () => findAndFollowLink('.shortcuts-network'));\n    Mousetrap.bind('g d', () => findAndFollowLink('.shortcuts-repository-charts'));\n    Mousetrap.bind('g i', () => findAndFollowLink('.shortcuts-issues'));\n    Mousetrap.bind('g b', () => findAndFollowLink('.shortcuts-issue-boards'));\n    Mousetrap.bind('g m', () => findAndFollowLink('.shortcuts-merge_requests'));\n    Mousetrap.bind('g w', () => findAndFollowLink('.shortcuts-wiki'));\n    Mousetrap.bind('g s', () => findAndFollowLink('.shortcuts-snippets'));\n    Mousetrap.bind('g k', () => findAndFollowLink('.shortcuts-kubernetes'));\n    Mousetrap.bind('g e', () => findAndFollowLink('.shortcuts-environments'));\n    Mousetrap.bind('g l', () => findAndFollowLink('.shortcuts-metrics'));\n    Mousetrap.bind('i', () => findAndFollowLink('.shortcuts-new-issue'));\n\n    this.enabledHelp.push('.hidden-shortcut.project');\n  }\n}\n","import $ from 'jquery';\nimport AccessorUtilities from './lib/utils/accessor';\n\nexport default class ProjectSelectComboButton {\n  constructor(select) {\n    this.projectSelectInput = $(select);\n    this.newItemBtn = $('.new-project-item-link');\n    this.resourceType = this.newItemBtn.data('type');\n    this.resourceLabel = this.newItemBtn.data('label');\n    this.formattedText = this.deriveTextVariants();\n    this.groupId = this.projectSelectInput.data('groupId');\n    this.bindEvents();\n    this.initLocalStorage();\n  }\n\n  bindEvents() {\n    this.projectSelectInput\n      .siblings('.new-project-item-select-button')\n      .on('click', e => this.openDropdown(e));\n\n    this.newItemBtn.on('click', e => {\n      if (!this.getProjectFromLocalStorage()) {\n        e.preventDefault();\n        this.openDropdown(e);\n      }\n    });\n\n    this.projectSelectInput.on('change', () => this.selectProject());\n  }\n\n  initLocalStorage() {\n    const localStorageIsSafe = AccessorUtilities.isLocalStorageAccessSafe();\n\n    if (localStorageIsSafe) {\n      this.localStorageKey = [\n        'group',\n        this.groupId,\n        this.formattedText.localStorageItemType,\n        'recent-project',\n      ].join('-');\n      this.setBtnTextFromLocalStorage();\n    }\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  openDropdown(event) {\n    $(event.currentTarget)\n      .siblings('.project-item-select')\n      .select2('open');\n  }\n\n  selectProject() {\n    const selectedProjectData = JSON.parse(this.projectSelectInput.val());\n    const projectUrl = `${selectedProjectData.url}/${this.projectSelectInput.data('relativePath')}`;\n    const projectName = selectedProjectData.name;\n\n    const projectMeta = {\n      url: projectUrl,\n      name: projectName,\n    };\n\n    this.setNewItemBtnAttributes(projectMeta);\n    this.setProjectInLocalStorage(projectMeta);\n  }\n\n  setBtnTextFromLocalStorage() {\n    const cachedProjectData = this.getProjectFromLocalStorage();\n\n    this.setNewItemBtnAttributes(cachedProjectData);\n  }\n\n  setNewItemBtnAttributes(project) {\n    if (project) {\n      this.newItemBtn.attr('href', project.url);\n      this.newItemBtn.text(`${this.formattedText.defaultTextPrefix} in ${project.name}`);\n    } else {\n      this.newItemBtn.text(`Select project to create ${this.formattedText.presetTextSuffix}`);\n    }\n  }\n\n  getProjectFromLocalStorage() {\n    const projectString = localStorage.getItem(this.localStorageKey);\n\n    return JSON.parse(projectString);\n  }\n\n  setProjectInLocalStorage(projectMeta) {\n    const projectString = JSON.stringify(projectMeta);\n\n    localStorage.setItem(this.localStorageKey, projectString);\n  }\n\n  deriveTextVariants() {\n    const defaultTextPrefix = this.resourceLabel;\n\n    // the trailing slice call depluralizes each of these strings (e.g. new-issues -> new-issue)\n    const localStorageItemType = `new-${this.resourceType\n      .split('_')\n      .join('-')\n      .slice(0, -1)}`;\n    const presetTextSuffix = this.resourceType\n      .split('_')\n      .join(' ')\n      .slice(0, -1);\n\n    return {\n      localStorageItemType, // new-issue / new-merge-request\n      defaultTextPrefix, // New issue / New merge request\n      presetTextSuffix, // issue / merge request\n    };\n  }\n}\n","/* eslint-disable func-names, no-var, object-shorthand, one-var, no-else-return */\n\nimport $ from 'jquery';\nimport Api from './api';\nimport ProjectSelectComboButton from './project_select_combo_button';\n\nexport default function projectSelect() {\n  $('.ajax-project-select').each(function(i, select) {\n    var placeholder;\n    const simpleFilter = $(select).data('simpleFilter') || false;\n    this.groupId = $(select).data('groupId');\n    this.includeGroups = $(select).data('includeGroups');\n    this.allProjects = $(select).data('allProjects') || false;\n    this.orderBy = $(select).data('orderBy') || 'id';\n    this.withIssuesEnabled = $(select).data('withIssuesEnabled');\n    this.withMergeRequestsEnabled = $(select).data('withMergeRequestsEnabled');\n    this.withShared =\n      $(select).data('withShared') === undefined ? true : $(select).data('withShared');\n    this.includeProjectsInSubgroups = $(select).data('includeProjectsInSubgroups') || false;\n    this.allowClear = $(select).data('allowClear') || false;\n\n    placeholder = 'Search for project';\n    if (this.includeGroups) {\n      placeholder += ' or group';\n    }\n\n    $(select).select2({\n      placeholder: placeholder,\n      minimumInputLength: 0,\n      query: (function(_this) {\n        return function(query) {\n          var finalCallback, projectsCallback;\n          finalCallback = function(projects) {\n            var data;\n            data = {\n              results: projects,\n            };\n            return query.callback(data);\n          };\n          if (_this.includeGroups) {\n            projectsCallback = function(projects) {\n              var groupsCallback;\n              groupsCallback = function(groups) {\n                var data;\n                data = groups.concat(projects);\n                return finalCallback(data);\n              };\n              return Api.groups(query.term, {}, groupsCallback);\n            };\n          } else {\n            projectsCallback = finalCallback;\n          }\n          if (_this.groupId) {\n            return Api.groupProjects(\n              _this.groupId,\n              query.term,\n              {\n                with_issues_enabled: _this.withIssuesEnabled,\n                with_merge_requests_enabled: _this.withMergeRequestsEnabled,\n                with_shared: _this.withShared,\n                include_subgroups: _this.includeProjectsInSubgroups,\n              },\n              projectsCallback,\n            );\n          } else {\n            return Api.projects(\n              query.term,\n              {\n                order_by: _this.orderBy,\n                with_issues_enabled: _this.withIssuesEnabled,\n                with_merge_requests_enabled: _this.withMergeRequestsEnabled,\n                membership: !_this.allProjects,\n              },\n              projectsCallback,\n            );\n          }\n        };\n      })(this),\n      id: function(project) {\n        if (simpleFilter) return project.id;\n        return JSON.stringify({\n          name: project.name,\n          url: project.web_url,\n        });\n      },\n      text: function(project) {\n        return project.name_with_namespace || project.name;\n      },\n\n      initSelection: function(el, callback) {\n        return Api.project(el.val()).then(({ data }) => callback(data));\n      },\n\n      allowClear: this.allowClear,\n\n      dropdownCssClass: 'ajax-project-dropdown',\n    });\n    if (simpleFilter) return select;\n    return new ProjectSelectComboButton(select);\n  });\n}\n","/* eslint-disable func-names, no-var, no-return-assign, one-var, object-shorthand, vars-on-top */\n\nimport $ from 'jquery';\nimport Cookies from 'js-cookie';\nimport { __ } from '~/locale';\nimport { visitUrl } from '~/lib/utils/url_utility';\nimport axios from '~/lib/utils/axios_utils';\nimport flash from '~/flash';\nimport projectSelect from '../../project_select';\n\nexport default class Project {\n  constructor() {\n    const $cloneOptions = $('ul.clone-options-dropdown');\n    const $projectCloneField = $('#project_clone');\n    const $cloneBtnLabel = $('.js-git-clone-holder .js-clone-dropdown-label');\n    const mobileCloneField = document.querySelector(\n      '.js-mobile-git-clone .js-clone-dropdown-label',\n    );\n\n    const selectedCloneOption = $cloneBtnLabel.text().trim();\n    if (selectedCloneOption.length > 0) {\n      $(`a:contains('${selectedCloneOption}')`, $cloneOptions).addClass('is-active');\n    }\n\n    $('a', $cloneOptions).on('click', e => {\n      e.preventDefault();\n      const $this = $(e.currentTarget);\n      const url = $this.attr('href');\n      const cloneType = $this.data('cloneType');\n\n      $('.is-active', $cloneOptions).removeClass('is-active');\n      $(`a[data-clone-type=\"${cloneType}\"]`).each(function() {\n        const $el = $(this);\n        const activeText = $el.find('.dropdown-menu-inner-title').text();\n        const $container = $el.closest('.project-clone-holder');\n        const $label = $container.find('.js-clone-dropdown-label');\n\n        $el.toggleClass('is-active');\n        $label.text(activeText);\n      });\n\n      if (mobileCloneField) {\n        mobileCloneField.dataset.clipboardText = url;\n      } else {\n        $projectCloneField.val(url);\n      }\n      $('.js-git-empty .js-clone').text(url);\n    });\n    // Ref switcher\n    Project.initRefSwitcher();\n    $('.project-refs-select').on('change', function() {\n      return $(this)\n        .parents('form')\n        .submit();\n    });\n    $('.hide-no-ssh-message').on('click', function(e) {\n      Cookies.set('hide_no_ssh_message', 'false');\n      $(this)\n        .parents('.no-ssh-key-message')\n        .remove();\n      return e.preventDefault();\n    });\n    $('.hide-no-password-message').on('click', function(e) {\n      Cookies.set('hide_no_password_message', 'false');\n      $(this)\n        .parents('.no-password-message')\n        .remove();\n      return e.preventDefault();\n    });\n    $('.hide-auto-devops-implicitly-enabled-banner').on('click', function(e) {\n      const projectId = $(this).data('project-id');\n      const cookieKey = `hide_auto_devops_implicitly_enabled_banner_${projectId}`;\n      Cookies.set(cookieKey, 'false');\n      $(this)\n        .parents('.auto-devops-implicitly-enabled-banner')\n        .remove();\n      return e.preventDefault();\n    });\n    Project.projectSelectDropdown();\n  }\n\n  static projectSelectDropdown() {\n    projectSelect();\n    $('.project-item-select').on('click', e => Project.changeProject($(e.currentTarget).val()));\n  }\n\n  static changeProject(url) {\n    return (window.location = url);\n  }\n\n  static initRefSwitcher() {\n    var refListItem = document.createElement('li');\n    var refLink = document.createElement('a');\n\n    refLink.href = '#';\n\n    return $('.js-project-refs-dropdown').each(function() {\n      var $dropdown, selected;\n      $dropdown = $(this);\n      selected = $dropdown.data('selected');\n      return $dropdown.glDropdown({\n        data(term, callback) {\n          axios\n            .get($dropdown.data('refsUrl'), {\n              params: {\n                ref: $dropdown.data('ref'),\n                search: term,\n              },\n            })\n            .then(({ data }) => callback(data))\n            .catch(() => flash(__('An error occurred while getting projects')));\n        },\n        selectable: true,\n        filterable: true,\n        filterRemote: true,\n        filterByText: true,\n        inputFieldName: $dropdown.data('inputFieldName'),\n        fieldName: $dropdown.data('fieldName'),\n        renderRow: function(ref) {\n          var li = refListItem.cloneNode(false);\n\n          if (ref.header != null) {\n            li.className = 'dropdown-header';\n            li.textContent = ref.header;\n          } else {\n            var link = refLink.cloneNode(false);\n\n            if (ref === selected) {\n              link.className = 'is-active';\n            }\n\n            link.textContent = ref;\n            link.dataset.ref = ref;\n\n            li.appendChild(link);\n          }\n\n          return li;\n        },\n        id: function(obj, $el) {\n          return $el.attr('data-ref');\n        },\n        toggleLabel: function(obj, $el) {\n          return $el.text().trim();\n        },\n        clicked: function(options) {\n          const { e } = options;\n          e.preventDefault();\n          if ($('input[name=\"ref\"]').length) {\n            var $form = $dropdown.closest('form');\n\n            var $visit = $dropdown.data('visit');\n            var shouldVisit = $visit ? true : $visit;\n            var action = $form.attr('action');\n            var divider = action.indexOf('?') === -1 ? '?' : '&';\n            if (shouldVisit) {\n              visitUrl(`${action}${divider}${$form.serialize()}`);\n            }\n          }\n        },\n      });\n    });\n  }\n}\n","/* eslint-disable no-new */\n\nimport $ from 'jquery';\nimport Diff from '~/diff';\nimport ShortcutsNavigation from '~/behaviors/shortcuts/shortcuts_navigation';\nimport GLForm from '~/gl_form';\nimport IssuableForm from '~/issuable_form';\nimport LabelsSelect from '~/labels_select';\nimport MilestoneSelect from '~/milestone_select';\nimport IssuableTemplateSelectors from '~/templates/issuable_template_selectors';\n\nexport default () => {\n  new Diff();\n  new ShortcutsNavigation();\n  new GLForm($('.merge-request-form'));\n  new IssuableForm($('.merge-request-form'));\n  new LabelsSelect();\n  new MilestoneSelect();\n  new IssuableTemplateSelectors();\n};\n","import initGkeDropdowns from '~/projects/gke_cluster_dropdowns';\nimport PersistentUserCallout from '../../persistent_user_callout';\nimport Project from './project';\nimport ShortcutsNavigation from '../../behaviors/shortcuts/shortcuts_navigation';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const { page } = document.body.dataset;\n  const newClusterViews = [\n    'projects:clusters:new',\n    'projects:clusters:create_gcp',\n    'projects:clusters:create_user',\n  ];\n\n  if (newClusterViews.indexOf(page) > -1) {\n    const callout = document.querySelector('.gcp-signup-offer');\n    if (callout) new PersistentUserCallout(callout); // eslint-disable-line no-new\n\n    initGkeDropdowns();\n  }\n\n  new Project(); // eslint-disable-line no-new\n  new ShortcutsNavigation(); // eslint-disable-line no-new\n});\n","class ModalStore {\n  constructor() {\n    this.store = {\n      columns: 3,\n      issues: [],\n      issuesCount: false,\n      selectedIssues: [],\n      showAddIssuesModal: false,\n      activeTab: 'all',\n      selectedList: null,\n      searchTerm: '',\n      loading: false,\n      loadingNewPage: false,\n      filterLoading: false,\n      page: 1,\n      perPage: 50,\n      filter: {\n        path: '',\n      },\n    };\n  }\n\n  selectedCount() {\n    return this.getSelectedIssues().length;\n  }\n\n  toggleIssue(issueObj) {\n    const issue = issueObj;\n    const { selected } = issue;\n\n    issue.selected = !selected;\n\n    if (!selected) {\n      this.addSelectedIssue(issue);\n    } else {\n      this.removeSelectedIssue(issue);\n    }\n  }\n\n  toggleAll() {\n    const select = this.selectedCount() !== this.store.issues.length;\n\n    this.store.issues.forEach(issue => {\n      const issueUpdate = issue;\n\n      if (issueUpdate.selected !== select) {\n        issueUpdate.selected = select;\n\n        if (select) {\n          this.addSelectedIssue(issue);\n        } else {\n          this.removeSelectedIssue(issue);\n        }\n      }\n    });\n  }\n\n  getSelectedIssues() {\n    return this.store.selectedIssues.filter(issue => issue.selected);\n  }\n\n  addSelectedIssue(issue) {\n    const index = this.selectedIssueIndex(issue);\n\n    if (index === -1) {\n      this.store.selectedIssues.push(issue);\n    }\n  }\n\n  removeSelectedIssue(issue, forcePurge = false) {\n    if (this.store.activeTab === 'all' || forcePurge) {\n      this.store.selectedIssues = this.store.selectedIssues.filter(\n        fIssue => fIssue.id !== issue.id,\n      );\n    }\n  }\n\n  purgeUnselectedIssues() {\n    this.store.selectedIssues.forEach(issue => {\n      if (!issue.selected) {\n        this.removeSelectedIssue(issue, true);\n      }\n    });\n  }\n\n  selectedIssueIndex(issue) {\n    return this.store.selectedIssues.indexOf(issue);\n  }\n\n  findSelectedIssue(issue) {\n    return this.store.selectedIssues.filter(filteredIssue => filteredIssue.id === issue.id)[0];\n  }\n}\n\nexport default new ModalStore();\n","import $ from 'jquery';\nimport Dropzone from 'dropzone';\nimport _ from 'underscore';\nimport './behaviors/preview_markdown';\nimport csrf from './lib/utils/csrf';\nimport axios from './lib/utils/axios_utils';\n\nDropzone.autoDiscover = false;\n\n/**\n * Return the error message string from the given response.\n *\n * @param {String|Object} res\n */\nfunction getErrorMessage(res) {\n  if (!res || _.isString(res)) {\n    return res;\n  }\n\n  return res.message;\n}\n\nexport default function dropzoneInput(form) {\n  const divHover = '<div class=\"div-dropzone-hover\"></div>';\n  const iconPaperclip = '<i class=\"fa fa-paperclip div-dropzone-icon\"></i>';\n  const $attachButton = form.find('.button-attach-file');\n  const $attachingFileMessage = form.find('.attaching-file-message');\n  const $cancelButton = form.find('.button-cancel-uploading-files');\n  const $retryLink = form.find('.retry-uploading-link');\n  const $uploadProgress = form.find('.uploading-progress');\n  const $uploadingErrorContainer = form.find('.uploading-error-container');\n  const $uploadingErrorMessage = form.find('.uploading-error-message');\n  const $uploadingProgressContainer = form.find('.uploading-progress-container');\n  const uploadsPath = form.data('uploads-path') || window.uploads_path || null;\n  const maxFileSize = gon.max_file_size || 10;\n  const formTextarea = form.find('.js-gfm-input');\n  let handlePaste;\n  let pasteText;\n  let addFileToForm;\n  let updateAttachingMessage;\n  let isImage;\n  let getFilename;\n  let uploadFile;\n\n  formTextarea.wrap('<div class=\"div-dropzone\"></div>');\n  formTextarea.on('paste', event => handlePaste(event));\n\n  // Add dropzone area to the form.\n  const $mdArea = formTextarea.closest('.md-area');\n  form.setupMarkdownPreview();\n  const $formDropzone = form.find('.div-dropzone');\n  $formDropzone.parent().addClass('div-dropzone-wrapper');\n  $formDropzone.append(divHover);\n  $formDropzone.find('.div-dropzone-hover').append(iconPaperclip);\n\n  if (!uploadsPath) {\n    $formDropzone.addClass('js-invalid-dropzone');\n    return null;\n  }\n\n  const dropzone = $formDropzone.dropzone({\n    url: uploadsPath,\n    dictDefaultMessage: '',\n    clickable: true,\n    paramName: 'file',\n    maxFilesize: maxFileSize,\n    uploadMultiple: false,\n    headers: csrf.headers,\n    previewContainer: false,\n    processing: () => $('.div-dropzone-alert').alert('close'),\n    dragover: () => {\n      $mdArea.addClass('is-dropzone-hover');\n      form.find('.div-dropzone-hover').css('opacity', 0.7);\n    },\n    dragleave: () => {\n      $mdArea.removeClass('is-dropzone-hover');\n      form.find('.div-dropzone-hover').css('opacity', 0);\n    },\n    drop: () => {\n      $mdArea.removeClass('is-dropzone-hover');\n      form.find('.div-dropzone-hover').css('opacity', 0);\n      formTextarea.focus();\n    },\n    success(header, response) {\n      const processingFileCount = this.getQueuedFiles().length + this.getUploadingFiles().length;\n      const shouldPad = processingFileCount >= 1;\n\n      pasteText(response.link.markdown, shouldPad);\n      // Show 'Attach a file' link only when all files have been uploaded.\n      if (!processingFileCount) $attachButton.removeClass('hide');\n      addFileToForm(response.link.url);\n    },\n    error: (file, errorMessage = 'Attaching the file failed.', xhr) => {\n      // If 'error' event is fired by dropzone, the second parameter is error message.\n      // If the 'errorMessage' parameter is empty, the default error message is set.\n      // If the 'error' event is fired by backend (xhr) error response, the third parameter is\n      // xhr object (xhr.responseText is error message).\n      // On error we hide the 'Attach' and 'Cancel' buttons\n      // and show an error.\n      const message = getErrorMessage(errorMessage || xhr.responseText);\n\n      $uploadingErrorContainer.removeClass('hide');\n      $uploadingErrorMessage.html(message);\n      $attachButton.addClass('hide');\n      $cancelButton.addClass('hide');\n    },\n    totaluploadprogress(totalUploadProgress) {\n      updateAttachingMessage(this.files, $attachingFileMessage);\n      $uploadProgress.text(`${Math.round(totalUploadProgress)}%`);\n    },\n    sending: () => {\n      // DOM elements already exist.\n      // Instead of dynamically generating them,\n      // we just either hide or show them.\n      $attachButton.addClass('hide');\n      $uploadingErrorContainer.addClass('hide');\n      $uploadingProgressContainer.removeClass('hide');\n      $cancelButton.removeClass('hide');\n    },\n    removedfile: () => {\n      $attachButton.removeClass('hide');\n      $cancelButton.addClass('hide');\n      $uploadingProgressContainer.addClass('hide');\n      $uploadingErrorContainer.addClass('hide');\n    },\n    queuecomplete: () => {\n      $('.dz-preview').remove();\n      $('.markdown-area').trigger('input');\n\n      $uploadingProgressContainer.addClass('hide');\n      $cancelButton.addClass('hide');\n    },\n  });\n\n  const child = $(dropzone[0]).children('textarea');\n\n  // removeAllFiles(true) stops uploading files (if any)\n  // and remove them from dropzone files queue.\n  $cancelButton.on('click', e => {\n    e.preventDefault();\n    e.stopPropagation();\n    Dropzone.forElement($formDropzone.get(0)).removeAllFiles(true);\n  });\n\n  // If 'error' event is fired, we store a failed files,\n  // clear dropzone files queue, change status of failed files to undefined,\n  // and add that files to the dropzone files queue again.\n  // addFile() adds file to dropzone files queue and upload it.\n  $retryLink.on('click', e => {\n    const dropzoneInstance = Dropzone.forElement(\n      e.target.closest('.js-main-target-form').querySelector('.div-dropzone'),\n    );\n    const failedFiles = dropzoneInstance.files;\n\n    e.preventDefault();\n\n    // 'true' parameter of removeAllFiles() cancels\n    // uploading of files that are being uploaded at the moment.\n    dropzoneInstance.removeAllFiles(true);\n\n    failedFiles.map(failedFile => {\n      const file = failedFile;\n\n      if (file.status === Dropzone.ERROR) {\n        file.status = undefined;\n        file.accepted = undefined;\n      }\n\n      return dropzoneInstance.addFile(file);\n    });\n  });\n  // eslint-disable-next-line consistent-return\n  handlePaste = event => {\n    const pasteEvent = event.originalEvent;\n    if (pasteEvent.clipboardData && pasteEvent.clipboardData.items) {\n      const image = isImage(pasteEvent);\n      if (image) {\n        event.preventDefault();\n        const filename = getFilename(pasteEvent) || 'image.png';\n        const text = `{{${filename}}}`;\n        pasteText(text);\n        return uploadFile(image.getAsFile(), filename);\n      }\n    }\n  };\n\n  isImage = data => {\n    let i = 0;\n    while (i < data.clipboardData.items.length) {\n      const item = data.clipboardData.items[i];\n      if (item.type.indexOf('image') !== -1) {\n        return item;\n      }\n      i += 1;\n    }\n    return false;\n  };\n\n  pasteText = (text, shouldPad) => {\n    let formattedText = text;\n    if (shouldPad) {\n      formattedText += '\\n\\n';\n    }\n    const textarea = child.get(0);\n    const caretStart = textarea.selectionStart;\n    const caretEnd = textarea.selectionEnd;\n    const textEnd = $(child).val().length;\n    const beforeSelection = $(child)\n      .val()\n      .substring(0, caretStart);\n    const afterSelection = $(child)\n      .val()\n      .substring(caretEnd, textEnd);\n    $(child).val(beforeSelection + formattedText + afterSelection);\n    textarea.setSelectionRange(caretStart + formattedText.length, caretEnd + formattedText.length);\n    textarea.style.height = `${textarea.scrollHeight}px`;\n    formTextarea.get(0).dispatchEvent(new Event('input'));\n    return formTextarea.trigger('input');\n  };\n\n  addFileToForm = path => {\n    $(form).append(`<input type=\"hidden\" name=\"files[]\" value=\"${_.escape(path)}\">`);\n  };\n\n  getFilename = e => {\n    let value;\n    if (window.clipboardData && window.clipboardData.getData) {\n      value = window.clipboardData.getData('Text');\n    } else if (e.clipboardData && e.clipboardData.getData) {\n      value = e.clipboardData.getData('text/plain');\n    }\n    value = value.split('\\r');\n    return value[0];\n  };\n\n  const showSpinner = () => $uploadingProgressContainer.removeClass('hide');\n\n  const closeSpinner = () => $uploadingProgressContainer.addClass('hide');\n\n  const showError = message => {\n    $uploadingErrorContainer.removeClass('hide');\n    $uploadingErrorMessage.html(message);\n  };\n\n  const closeAlertMessage = () => form.find('.div-dropzone-alert').alert('close');\n\n  const insertToTextArea = (filename, url) => {\n    const $child = $(child);\n    $child.val((index, val) => val.replace(`{{${filename}}}`, url));\n\n    $child.trigger('change');\n  };\n\n  uploadFile = (item, filename) => {\n    const formData = new FormData();\n    formData.append('file', item, filename);\n\n    showSpinner();\n    closeAlertMessage();\n\n    axios\n      .post(uploadsPath, formData)\n      .then(({ data }) => {\n        const md = data.link.markdown;\n\n        insertToTextArea(filename, md);\n        closeSpinner();\n      })\n      .catch(e => {\n        showError(e.response.data.message);\n        closeSpinner();\n      });\n  };\n\n  updateAttachingMessage = (files, messageContainer) => {\n    let attachingMessage;\n    const filesCount = files.filter(file => file.status === 'uploading' || file.status === 'queued')\n      .length;\n\n    // Dinamycally change uploading files text depending on files number in\n    // dropzone files queue.\n    if (filesCount > 1) {\n      attachingMessage = `Attaching ${filesCount} files -`;\n    } else {\n      attachingMessage = 'Attaching a file -';\n    }\n\n    messageContainer.text(attachingMessage);\n  };\n\n  form.find('.markdown-selector').click(function onMarkdownClick(e) {\n    e.preventDefault();\n    $(this)\n      .closest('.gfm-form')\n      .find('.div-dropzone')\n      .click();\n    formTextarea.focus();\n  });\n\n  return Dropzone.forElement($formDropzone.get(0));\n}\n","import $ from 'jquery';\nimport autosize from 'autosize';\nimport GfmAutoComplete, * as GFMConfig from './gfm_auto_complete';\nimport dropzoneInput from './dropzone_input';\nimport { addMarkdownListeners, removeMarkdownListeners } from './lib/utils/text_markdown';\n\nexport default class GLForm {\n  constructor(form, enableGFM = {}) {\n    this.form = form;\n    this.textarea = this.form.find('textarea.js-gfm-input');\n    this.enableGFM = Object.assign({}, GFMConfig.defaultAutocompleteConfig, enableGFM);\n    // Disable autocomplete for keywords which do not have dataSources available\n    const dataSources = (gl.GfmAutoComplete && gl.GfmAutoComplete.dataSources) || {};\n    Object.keys(this.enableGFM).forEach(item => {\n      if (item !== 'emojis') {\n        this.enableGFM[item] = !!dataSources[item];\n      }\n    });\n    // Before we start, we should clean up any previous data for this form\n    this.destroy();\n    // Set up the form\n    this.setupForm();\n    this.form.data('glForm', this);\n  }\n\n  destroy() {\n    // Clean form listeners\n    this.clearEventListeners();\n    if (this.autoComplete) {\n      this.autoComplete.destroy();\n    }\n    this.form.data('glForm', null);\n  }\n\n  setupForm() {\n    const isNewForm = this.form.is(':not(.gfm-form)');\n    this.form.removeClass('js-new-note-form');\n    if (isNewForm) {\n      this.form.find('.div-dropzone').remove();\n      this.form.addClass('gfm-form');\n      // remove notify commit author checkbox for non-commit notes\n      gl.utils.disableButtonIfEmptyField(\n        this.form.find('.js-note-text'),\n        this.form.find('.js-comment-button, .js-note-new-discussion'),\n      );\n      this.autoComplete = new GfmAutoComplete(gl.GfmAutoComplete && gl.GfmAutoComplete.dataSources);\n      this.autoComplete.setup(this.form.find('.js-gfm-input'), this.enableGFM);\n      dropzoneInput(this.form);\n      autosize(this.textarea);\n    }\n    // form and textarea event listeners\n    this.addEventListeners();\n    addMarkdownListeners(this.form);\n    this.form.show();\n    if (this.isAutosizeable) this.setupAutosize();\n  }\n\n  setupAutosize() {\n    this.textarea.off('autosize:resized').on('autosize:resized', this.setHeightData.bind(this));\n\n    this.textarea.off('mouseup.autosize').on('mouseup.autosize', this.destroyAutosize.bind(this));\n\n    setTimeout(() => {\n      autosize(this.textarea);\n      this.textarea.css('resize', 'vertical');\n    }, 0);\n  }\n\n  setHeightData() {\n    this.textarea.data('height', this.textarea.outerHeight());\n  }\n\n  destroyAutosize() {\n    const outerHeight = this.textarea.outerHeight();\n\n    if (this.textarea.data('height') === outerHeight) return;\n\n    autosize.destroy(this.textarea);\n\n    this.textarea.data('height', outerHeight);\n    this.textarea.outerHeight(outerHeight);\n    this.textarea.css('max-height', window.outerHeight);\n  }\n\n  clearEventListeners() {\n    this.textarea.off('focus');\n    this.textarea.off('blur');\n    removeMarkdownListeners(this.form);\n  }\n\n  addEventListeners() {\n    this.textarea.on('focus', function focusTextArea() {\n      $(this)\n        .closest('.md-area')\n        .addClass('is-focused');\n    });\n    this.textarea.on('blur', function blurTextArea() {\n      $(this)\n        .closest('.md-area')\n        .removeClass('is-focused');\n    });\n  }\n}\n","/* eslint-disable consistent-return, func-names, array-callback-return, prefer-arrow-callback, no-unused-vars */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport axios from './lib/utils/axios_utils';\nimport Flash from './flash';\n\nexport default {\n  init({ container, form, issues, prefixId } = {}) {\n    this.prefixId = prefixId || 'issue_';\n    this.form = form || this.getElement('.bulk-update');\n    this.$labelDropdown = this.form.find('.js-label-select');\n    this.issues = issues || this.getElement('.issues-list .issue');\n    this.willUpdateLabels = false;\n    this.bindEvents();\n  },\n\n  bindEvents() {\n    return this.form.off('submit').on('submit', this.onFormSubmit.bind(this));\n  },\n\n  onFormSubmit(e) {\n    e.preventDefault();\n    return this.submit();\n  },\n\n  submit() {\n    axios[this.form.attr('method')](this.form.attr('action'), this.getFormDataAsObject())\n      .then(() => window.location.reload())\n      .catch(() => this.onFormSubmitFailure());\n  },\n\n  onFormSubmitFailure() {\n    this.form.find('[type=\"submit\"]').enable();\n    return new Flash('Issue update failed');\n  },\n\n  getSelectedIssues() {\n    return this.issues.has('.selected-issuable:checked');\n  },\n\n  getLabelsFromSelection() {\n    const labels = [];\n    this.getSelectedIssues().map(function() {\n      const labelsData = $(this).data('labels');\n      if (labelsData) {\n        return labelsData.map(function(labelId) {\n          if (labels.indexOf(labelId) === -1) {\n            return labels.push(labelId);\n          }\n        });\n      }\n    });\n    return labels;\n  },\n\n  /**\n   * Will return only labels that were marked previously and the user has unmarked\n   * @return {Array} Label IDs\n   */\n\n  getUnmarkedIndeterminedLabels() {\n    const result = [];\n    const labelsToKeep = this.$labelDropdown.data('indeterminate');\n\n    this.getLabelsFromSelection().forEach(id => {\n      if (labelsToKeep.indexOf(id) === -1) {\n        result.push(id);\n      }\n    });\n\n    return result;\n  },\n\n  /**\n   * Simple form serialization, it will return just what we need\n   * Returns key/value pairs from form data\n   */\n\n  getFormDataAsObject() {\n    const formData = {\n      update: {\n        state_event: this.form.find('input[name=\"update[state_event]\"]').val(),\n        // For Merge Requests\n        assignee_id: this.form.find('input[name=\"update[assignee_id]\"]').val(),\n        // For Issues\n        assignee_ids: [this.form.find('input[name=\"update[assignee_ids][]\"]').val()],\n        milestone_id: this.form.find('input[name=\"update[milestone_id]\"]').val(),\n        issuable_ids: this.form.find('input[name=\"update[issuable_ids]\"]').val(),\n        subscription_event: this.form.find('input[name=\"update[subscription_event]\"]').val(),\n        add_label_ids: [],\n        remove_label_ids: [],\n      },\n    };\n    if (this.willUpdateLabels) {\n      formData.update.add_label_ids = this.$labelDropdown.data('marked');\n      formData.update.remove_label_ids = this.$labelDropdown.data('unmarked');\n    }\n    return formData;\n  },\n\n  setOriginalDropdownData() {\n    const $labelSelect = $('.bulk-update .js-label-select');\n    $labelSelect.data('common', this.getOriginalCommonIds());\n    $labelSelect.data('marked', this.getOriginalMarkedIds());\n    $labelSelect.data('indeterminate', this.getOriginalIndeterminateIds());\n  },\n\n  // From issuable's initial bulk selection\n  getOriginalCommonIds() {\n    const labelIds = [];\n\n    this.getElement('.selected-issuable:checked').each((i, el) => {\n      labelIds.push(this.getElement(`#${this.prefixId}${el.dataset.id}`).data('labels'));\n    });\n    return _.intersection.apply(this, labelIds);\n  },\n\n  // From issuable's initial bulk selection\n  getOriginalMarkedIds() {\n    const labelIds = [];\n    this.getElement('.selected-issuable:checked').each((i, el) => {\n      labelIds.push(this.getElement(`#${this.prefixId}${el.dataset.id}`).data('labels'));\n    });\n    return _.intersection.apply(this, labelIds);\n  },\n\n  // From issuable's initial bulk selection\n  getOriginalIndeterminateIds() {\n    const uniqueIds = [];\n    const labelIds = [];\n    let issuableLabels = [];\n\n    // Collect unique label IDs for all checked issues\n    this.getElement('.selected-issuable:checked').each((i, el) => {\n      issuableLabels = this.getElement(`#${this.prefixId}${el.dataset.id}`).data('labels');\n      issuableLabels.forEach(labelId => {\n        // Store unique IDs\n        if (uniqueIds.indexOf(labelId) === -1) {\n          uniqueIds.push(labelId);\n        }\n      });\n      // Store array of IDs per issuable\n      labelIds.push(issuableLabels);\n    });\n    // Add uniqueIds to add it as argument for _.intersection\n    labelIds.unshift(uniqueIds);\n    // Return IDs that are present but not in all selected issueables\n    return _.difference(uniqueIds, _.intersection.apply(this, labelIds));\n  },\n\n  getElement(selector) {\n    this.scopeEl = this.scopeEl || $('.content');\n    return this.scopeEl.find(selector);\n  },\n};\n","/* eslint-disable func-names, prefer-arrow-callback, no-unused-vars, consistent-return, camelcase, class-methods-use-this */\n\n// Zen Mode (full screen) textarea\n//\n/*= provides zen_mode:enter */\n/*= provides zen_mode:leave */\n\nimport $ from 'jquery';\nimport 'vendor/jquery.scrollTo';\nimport Dropzone from 'dropzone';\nimport Mousetrap from 'mousetrap';\nimport 'mousetrap/plugins/pause/mousetrap-pause';\n\nDropzone.autoDiscover = false;\n\n//\n// ### Events\n//\n// `zen_mode:enter`\n//\n// Fired when the \"Edit in fullscreen\" link is clicked.\n//\n// **Synchronicity** Sync\n// **Bubbles** Yes\n// **Cancelable** No\n// **Target** a.js-zen-enter\n//\n// `zen_mode:leave`\n//\n// Fired when the \"Leave Fullscreen\" link is clicked.\n//\n// **Synchronicity** Sync\n// **Bubbles** Yes\n// **Cancelable** No\n// **Target** a.js-zen-leave\n//\n\nexport default class ZenMode {\n  constructor() {\n    this.active_backdrop = null;\n    this.active_textarea = null;\n    $(document).on('click', '.js-zen-enter', function(e) {\n      e.preventDefault();\n      return $(e.currentTarget).trigger('zen_mode:enter');\n    });\n    $(document).on('click', '.js-zen-leave', function(e) {\n      e.preventDefault();\n      return $(e.currentTarget).trigger('zen_mode:leave');\n    });\n    $(document).on(\n      'zen_mode:enter',\n      (function(_this) {\n        return function(e) {\n          return _this.enter(\n            $(e.target)\n              .closest('.md-area')\n              .find('.zen-backdrop'),\n          );\n        };\n      })(this),\n    );\n    $(document).on(\n      'zen_mode:leave',\n      (function(_this) {\n        return function(e) {\n          return _this.exit();\n        };\n      })(this),\n    );\n    $(document).on('keydown', function(e) {\n      // Esc\n      if (e.keyCode === 27) {\n        e.preventDefault();\n        return $(document).trigger('zen_mode:leave');\n      }\n    });\n  }\n\n  enter(backdrop) {\n    Mousetrap.pause();\n    this.active_backdrop = $(backdrop);\n    this.active_backdrop.addClass('fullscreen');\n    this.active_textarea = this.active_backdrop.find('textarea');\n    // Prevent a user-resized textarea from persisting to fullscreen\n    this.active_textarea.removeAttr('style');\n    this.active_textarea.focus();\n  }\n\n  exit() {\n    if (this.active_textarea) {\n      Mousetrap.unpause();\n      this.active_textarea.closest('.zen-backdrop').removeClass('fullscreen');\n      this.scrollTo(this.active_textarea);\n      this.active_textarea = null;\n      this.active_backdrop = null;\n\n      const $dropzone = $('.div-dropzone');\n      if ($dropzone && !$dropzone.hasClass('js-invalid-dropzone')) {\n        Dropzone.forElement('.div-dropzone').enable();\n      }\n    }\n  }\n\n  scrollTo(zen_area) {\n    return $.scrollTo(zen_area, 0, {\n      offset: -150,\n    });\n  }\n}\n","/*!\n * Pikaday\n *\n * Copyright  2014 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday\n */\n\n(function (root, factory)\n{\n    'use strict';\n\n    var moment;\n    if (typeof exports === 'object') {\n        // CommonJS module\n        // Load moment.js as an optional dependency\n        try { moment = require('moment'); } catch (e) {}\n        module.exports = factory(moment);\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(function (req)\n        {\n            // Load moment.js as an optional dependency\n            var id = 'moment';\n            try { moment = req(id); } catch (e) {}\n            return factory(moment);\n        });\n    } else {\n        root.Pikaday = factory(root.moment);\n    }\n}(this, function (moment)\n{\n    'use strict';\n\n    /**\n     * feature detection and helper functions\n     */\n    var hasMoment = typeof moment === 'function',\n\n    hasEventListeners = !!window.addEventListener,\n\n    document = window.document,\n\n    sto = window.setTimeout,\n\n    addEvent = function(el, e, callback, capture)\n    {\n        if (hasEventListeners) {\n            el.addEventListener(e, callback, !!capture);\n        } else {\n            el.attachEvent('on' + e, callback);\n        }\n    },\n\n    removeEvent = function(el, e, callback, capture)\n    {\n        if (hasEventListeners) {\n            el.removeEventListener(e, callback, !!capture);\n        } else {\n            el.detachEvent('on' + e, callback);\n        }\n    },\n\n    trim = function(str)\n    {\n        return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g,'');\n    },\n\n    hasClass = function(el, cn)\n    {\n        return (' ' + el.className + ' ').indexOf(' ' + cn + ' ') !== -1;\n    },\n\n    addClass = function(el, cn)\n    {\n        if (!hasClass(el, cn)) {\n            el.className = (el.className === '') ? cn : el.className + ' ' + cn;\n        }\n    },\n\n    removeClass = function(el, cn)\n    {\n        el.className = trim((' ' + el.className + ' ').replace(' ' + cn + ' ', ' '));\n    },\n\n    isArray = function(obj)\n    {\n        return (/Array/).test(Object.prototype.toString.call(obj));\n    },\n\n    isDate = function(obj)\n    {\n        return (/Date/).test(Object.prototype.toString.call(obj)) && !isNaN(obj.getTime());\n    },\n\n    isWeekend = function(date)\n    {\n        var day = date.getDay();\n        return day === 0 || day === 6;\n    },\n\n    isLeapYear = function(year)\n    {\n        // solution by Matti Virkkunen: http://stackoverflow.com/a/4881951\n        return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;\n    },\n\n    getDaysInMonth = function(year, month)\n    {\n        return [31, isLeapYear(year) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];\n    },\n\n    setToStartOfDay = function(date)\n    {\n        if (isDate(date)) date.setHours(0,0,0,0);\n    },\n\n    compareDates = function(a,b)\n    {\n        // weak date comparison (use setToStartOfDay(date) to ensure correct result)\n        return a.getTime() === b.getTime();\n    },\n\n    extend = function(to, from, overwrite)\n    {\n        var prop, hasProp;\n        for (prop in from) {\n            hasProp = to[prop] !== undefined;\n            if (hasProp && typeof from[prop] === 'object' && from[prop] !== null && from[prop].nodeName === undefined) {\n                if (isDate(from[prop])) {\n                    if (overwrite) {\n                        to[prop] = new Date(from[prop].getTime());\n                    }\n                }\n                else if (isArray(from[prop])) {\n                    if (overwrite) {\n                        to[prop] = from[prop].slice(0);\n                    }\n                } else {\n                    to[prop] = extend({}, from[prop], overwrite);\n                }\n            } else if (overwrite || !hasProp) {\n                to[prop] = from[prop];\n            }\n        }\n        return to;\n    },\n\n    fireEvent = function(el, eventName, data)\n    {\n        var ev;\n\n        if (document.createEvent) {\n            ev = document.createEvent('HTMLEvents');\n            ev.initEvent(eventName, true, false);\n            ev = extend(ev, data);\n            el.dispatchEvent(ev);\n        } else if (document.createEventObject) {\n            ev = document.createEventObject();\n            ev = extend(ev, data);\n            el.fireEvent('on' + eventName, ev);\n        }\n    },\n\n    adjustCalendar = function(calendar) {\n        if (calendar.month < 0) {\n            calendar.year -= Math.ceil(Math.abs(calendar.month)/12);\n            calendar.month += 12;\n        }\n        if (calendar.month > 11) {\n            calendar.year += Math.floor(Math.abs(calendar.month)/12);\n            calendar.month -= 12;\n        }\n        return calendar;\n    },\n\n    /**\n     * defaults and localisation\n     */\n    defaults = {\n\n        // bind the picker to a form field\n        field: null,\n\n        // automatically show/hide the picker on `field` focus (default `true` if `field` is set)\n        bound: undefined,\n\n        // position of the datepicker, relative to the field (default to bottom & left)\n        // ('bottom' & 'left' keywords are not used, 'top' & 'right' are modifier on the bottom/left position)\n        position: 'bottom left',\n\n        // automatically fit in the viewport even if it means repositioning from the position option\n        reposition: true,\n\n        // the default output format for `.toString()` and `field` value\n        format: 'YYYY-MM-DD',\n\n        // the toString function which gets passed a current date object and format\n        // and returns a string\n        toString: null,\n\n        // used to create date object from current input string\n        parse: null,\n\n        // the initial date to view when first opened\n        defaultDate: null,\n\n        // make the `defaultDate` the initial selected value\n        setDefaultDate: false,\n\n        // first day of week (0: Sunday, 1: Monday etc)\n        firstDay: 0,\n\n        // the default flag for moment's strict date parsing\n        formatStrict: false,\n\n        // the minimum/earliest date that can be selected\n        minDate: null,\n        // the maximum/latest date that can be selected\n        maxDate: null,\n\n        // number of years either side, or array of upper/lower range\n        yearRange: 10,\n\n        // show week numbers at head of row\n        showWeekNumber: false,\n\n        // Week picker mode\n        pickWholeWeek: false,\n\n        // used internally (don't config outside)\n        minYear: 0,\n        maxYear: 9999,\n        minMonth: undefined,\n        maxMonth: undefined,\n\n        startRange: null,\n        endRange: null,\n\n        isRTL: false,\n\n        // Additional text to append to the year in the calendar title\n        yearSuffix: '',\n\n        // Render the month after year in the calendar title\n        showMonthAfterYear: false,\n\n        // Render days of the calendar grid that fall in the next or previous month\n        showDaysInNextAndPreviousMonths: false,\n\n        // Allows user to select days that fall in the next or previous month\n        enableSelectionDaysInNextAndPreviousMonths: false,\n\n        // how many months are visible\n        numberOfMonths: 1,\n\n        // when numberOfMonths is used, this will help you to choose where the main calendar will be (default `left`, can be set to `right`)\n        // only used for the first display or when a selected date is not visible\n        mainCalendar: 'left',\n\n        // Specify a DOM element to render the calendar in\n        container: undefined,\n\n        // Blur field when date is selected\n        blurFieldOnSelect : true,\n\n        // internationalization\n        i18n: {\n            previousMonth : 'Previous Month',\n            nextMonth     : 'Next Month',\n            months        : ['January','February','March','April','May','June','July','August','September','October','November','December'],\n            weekdays      : ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],\n            weekdaysShort : ['Sun','Mon','Tue','Wed','Thu','Fri','Sat']\n        },\n\n        // Theme Classname\n        theme: null,\n\n        // events array\n        events: [],\n\n        // callback function\n        onSelect: null,\n        onOpen: null,\n        onClose: null,\n        onDraw: null\n    },\n\n\n    /**\n     * templating functions to abstract HTML rendering\n     */\n    renderDayName = function(opts, day, abbr)\n    {\n        day += opts.firstDay;\n        while (day >= 7) {\n            day -= 7;\n        }\n        return abbr ? opts.i18n.weekdaysShort[day] : opts.i18n.weekdays[day];\n    },\n\n    renderDay = function(opts)\n    {\n        var arr = [];\n        var ariaSelected = 'false';\n        if (opts.isEmpty) {\n            if (opts.showDaysInNextAndPreviousMonths) {\n                arr.push('is-outside-current-month');\n\n                if(!opts.enableSelectionDaysInNextAndPreviousMonths) {\n                    arr.push('is-selection-disabled');\n                }\n\n            } else {\n                return '<td class=\"is-empty\"></td>';\n            }\n        }\n        if (opts.isDisabled) {\n            arr.push('is-disabled');\n        }\n        if (opts.isToday) {\n            arr.push('is-today');\n        }\n        if (opts.isSelected) {\n            arr.push('is-selected');\n            ariaSelected = 'true';\n        }\n        if (opts.hasEvent) {\n            arr.push('has-event');\n        }\n        if (opts.isInRange) {\n            arr.push('is-inrange');\n        }\n        if (opts.isStartRange) {\n            arr.push('is-startrange');\n        }\n        if (opts.isEndRange) {\n            arr.push('is-endrange');\n        }\n        return '<td data-day=\"' + opts.day + '\" class=\"' + arr.join(' ') + '\" aria-selected=\"' + ariaSelected + '\">' +\n                 '<button class=\"pika-button pika-day\" type=\"button\" ' +\n                    'data-pika-year=\"' + opts.year + '\" data-pika-month=\"' + opts.month + '\" data-pika-day=\"' + opts.day + '\">' +\n                        opts.day +\n                 '</button>' +\n               '</td>';\n    },\n\n    renderWeek = function (d, m, y) {\n        // Lifted from http://javascript.about.com/library/blweekyear.htm, lightly modified.\n        var onejan = new Date(y, 0, 1),\n            weekNum = Math.ceil((((new Date(y, m, d) - onejan) / 86400000) + onejan.getDay()+1)/7);\n        return '<td class=\"pika-week\">' + weekNum + '</td>';\n    },\n\n    renderRow = function(days, isRTL, pickWholeWeek, isRowSelected)\n    {\n        return '<tr class=\"pika-row' + (pickWholeWeek ? ' pick-whole-week' : '') + (isRowSelected ? ' is-selected' : '') + '\">' + (isRTL ? days.reverse() : days).join('') + '</tr>';\n    },\n\n    renderBody = function(rows)\n    {\n        return '<tbody>' + rows.join('') + '</tbody>';\n    },\n\n    renderHead = function(opts)\n    {\n        var i, arr = [];\n        if (opts.showWeekNumber) {\n            arr.push('<th></th>');\n        }\n        for (i = 0; i < 7; i++) {\n            arr.push('<th scope=\"col\"><abbr title=\"' + renderDayName(opts, i) + '\">' + renderDayName(opts, i, true) + '</abbr></th>');\n        }\n        return '<thead><tr>' + (opts.isRTL ? arr.reverse() : arr).join('') + '</tr></thead>';\n    },\n\n    renderTitle = function(instance, c, year, month, refYear, randId)\n    {\n        var i, j, arr,\n            opts = instance._o,\n            isMinYear = year === opts.minYear,\n            isMaxYear = year === opts.maxYear,\n            html = '<div id=\"' + randId + '\" class=\"pika-title\" role=\"heading\" aria-live=\"assertive\">',\n            monthHtml,\n            yearHtml,\n            prev = true,\n            next = true;\n\n        for (arr = [], i = 0; i < 12; i++) {\n            arr.push('<option value=\"' + (year === refYear ? i - c : 12 + i - c) + '\"' +\n                (i === month ? ' selected=\"selected\"': '') +\n                ((isMinYear && i < opts.minMonth) || (isMaxYear && i > opts.maxMonth) ? 'disabled=\"disabled\"' : '') + '>' +\n                opts.i18n.months[i] + '</option>');\n        }\n\n        monthHtml = '<div class=\"pika-label\">' + opts.i18n.months[month] + '<select class=\"pika-select pika-select-month\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\n\n        if (isArray(opts.yearRange)) {\n            i = opts.yearRange[0];\n            j = opts.yearRange[1] + 1;\n        } else {\n            i = year - opts.yearRange;\n            j = 1 + year + opts.yearRange;\n        }\n\n        for (arr = []; i < j && i <= opts.maxYear; i++) {\n            if (i >= opts.minYear) {\n                arr.push('<option value=\"' + i + '\"' + (i === year ? ' selected=\"selected\"': '') + '>' + (i) + '</option>');\n            }\n        }\n        yearHtml = '<div class=\"pika-label\">' + year + opts.yearSuffix + '<select class=\"pika-select pika-select-year\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\n\n        if (opts.showMonthAfterYear) {\n            html += yearHtml + monthHtml;\n        } else {\n            html += monthHtml + yearHtml;\n        }\n\n        if (isMinYear && (month === 0 || opts.minMonth >= month)) {\n            prev = false;\n        }\n\n        if (isMaxYear && (month === 11 || opts.maxMonth <= month)) {\n            next = false;\n        }\n\n        if (c === 0) {\n            html += '<button class=\"pika-prev' + (prev ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.previousMonth + '</button>';\n        }\n        if (c === (instance._o.numberOfMonths - 1) ) {\n            html += '<button class=\"pika-next' + (next ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.nextMonth + '</button>';\n        }\n\n        return html += '</div>';\n    },\n\n    renderTable = function(opts, data, randId)\n    {\n        return '<table cellpadding=\"0\" cellspacing=\"0\" class=\"pika-table\" role=\"grid\" aria-labelledby=\"' + randId + '\">' + renderHead(opts) + renderBody(data) + '</table>';\n    },\n\n\n    /**\n     * Pikaday constructor\n     */\n    Pikaday = function(options)\n    {\n        var self = this,\n            opts = self.config(options);\n\n        self._onMouseDown = function(e)\n        {\n            if (!self._v) {\n                return;\n            }\n            e = e || window.event;\n            var target = e.target || e.srcElement;\n            if (!target) {\n                return;\n            }\n\n            if (!hasClass(target, 'is-disabled')) {\n                if (hasClass(target, 'pika-button') && !hasClass(target, 'is-empty') && !hasClass(target.parentNode, 'is-disabled')) {\n                    self.setDate(new Date(target.getAttribute('data-pika-year'), target.getAttribute('data-pika-month'), target.getAttribute('data-pika-day')));\n                    if (opts.bound) {\n                        sto(function() {\n                            self.hide();\n                            if (opts.blurFieldOnSelect && opts.field) {\n                                opts.field.blur();\n                            }\n                        }, 100);\n                    }\n                }\n                else if (hasClass(target, 'pika-prev')) {\n                    self.prevMonth();\n                }\n                else if (hasClass(target, 'pika-next')) {\n                    self.nextMonth();\n                }\n            }\n            if (!hasClass(target, 'pika-select')) {\n                // if this is touch event prevent mouse events emulation\n                if (e.preventDefault) {\n                    e.preventDefault();\n                } else {\n                    e.returnValue = false;\n                    return false;\n                }\n            } else {\n                self._c = true;\n            }\n        };\n\n        self._onChange = function(e)\n        {\n            e = e || window.event;\n            var target = e.target || e.srcElement;\n            if (!target) {\n                return;\n            }\n            if (hasClass(target, 'pika-select-month')) {\n                self.gotoMonth(target.value);\n            }\n            else if (hasClass(target, 'pika-select-year')) {\n                self.gotoYear(target.value);\n            }\n        };\n\n        self._onKeyChange = function(e)\n        {\n            e = e || window.event;\n\n            if (self.isVisible()) {\n\n                switch(e.keyCode){\n                    case 13:\n                    case 27:\n                        if (opts.field) {\n                            opts.field.blur();\n                        }\n                        break;\n                    case 37:\n                        e.preventDefault();\n                        self.adjustDate('subtract', 1);\n                        break;\n                    case 38:\n                        self.adjustDate('subtract', 7);\n                        break;\n                    case 39:\n                        self.adjustDate('add', 1);\n                        break;\n                    case 40:\n                        self.adjustDate('add', 7);\n                        break;\n                }\n            }\n        };\n\n        self._onInputChange = function(e)\n        {\n            var date;\n\n            if (e.firedBy === self) {\n                return;\n            }\n            if (opts.parse) {\n                date = opts.parse(opts.field.value, opts.format);\n            } else if (hasMoment) {\n                date = moment(opts.field.value, opts.format, opts.formatStrict);\n                date = (date && date.isValid()) ? date.toDate() : null;\n            }\n            else {\n                date = new Date(Date.parse(opts.field.value));\n            }\n            if (isDate(date)) {\n              self.setDate(date);\n            }\n            if (!self._v) {\n                self.show();\n            }\n        };\n\n        self._onInputFocus = function()\n        {\n            self.show();\n        };\n\n        self._onInputClick = function()\n        {\n            self.show();\n        };\n\n        self._onInputBlur = function()\n        {\n            // IE allows pika div to gain focus; catch blur the input field\n            var pEl = document.activeElement;\n            do {\n                if (hasClass(pEl, 'pika-single')) {\n                    return;\n                }\n            }\n            while ((pEl = pEl.parentNode));\n\n            if (!self._c) {\n                self._b = sto(function() {\n                    self.hide();\n                }, 50);\n            }\n            self._c = false;\n        };\n\n        self._onClick = function(e)\n        {\n            e = e || window.event;\n            var target = e.target || e.srcElement,\n                pEl = target;\n            if (!target) {\n                return;\n            }\n            if (!hasEventListeners && hasClass(target, 'pika-select')) {\n                if (!target.onchange) {\n                    target.setAttribute('onchange', 'return;');\n                    addEvent(target, 'change', self._onChange);\n                }\n            }\n            do {\n                if (hasClass(pEl, 'pika-single') || pEl === opts.trigger) {\n                    return;\n                }\n            }\n            while ((pEl = pEl.parentNode));\n            if (self._v && target !== opts.trigger && pEl !== opts.trigger) {\n                self.hide();\n            }\n        };\n\n        self.el = document.createElement('div');\n        self.el.className = 'pika-single' + (opts.isRTL ? ' is-rtl' : '') + (opts.theme ? ' ' + opts.theme : '');\n\n        addEvent(self.el, 'mousedown', self._onMouseDown, true);\n        addEvent(self.el, 'touchend', self._onMouseDown, true);\n        addEvent(self.el, 'change', self._onChange);\n        addEvent(document, 'keydown', self._onKeyChange);\n\n        if (opts.field) {\n            if (opts.container) {\n                opts.container.appendChild(self.el);\n            } else if (opts.bound) {\n                document.body.appendChild(self.el);\n            } else {\n                opts.field.parentNode.insertBefore(self.el, opts.field.nextSibling);\n            }\n            addEvent(opts.field, 'change', self._onInputChange);\n\n            if (!opts.defaultDate) {\n                if (hasMoment && opts.field.value) {\n                    opts.defaultDate = moment(opts.field.value, opts.format).toDate();\n                } else {\n                    opts.defaultDate = new Date(Date.parse(opts.field.value));\n                }\n                opts.setDefaultDate = true;\n            }\n        }\n\n        var defDate = opts.defaultDate;\n\n        if (isDate(defDate)) {\n            if (opts.setDefaultDate) {\n                self.setDate(defDate, true);\n            } else {\n                self.gotoDate(defDate);\n            }\n        } else {\n            self.gotoDate(new Date());\n        }\n\n        if (opts.bound) {\n            this.hide();\n            self.el.className += ' is-bound';\n            addEvent(opts.trigger, 'click', self._onInputClick);\n            addEvent(opts.trigger, 'focus', self._onInputFocus);\n            addEvent(opts.trigger, 'blur', self._onInputBlur);\n        } else {\n            this.show();\n        }\n    };\n\n\n    /**\n     * public Pikaday API\n     */\n    Pikaday.prototype = {\n\n\n        /**\n         * configure functionality\n         */\n        config: function(options)\n        {\n            if (!this._o) {\n                this._o = extend({}, defaults, true);\n            }\n\n            var opts = extend(this._o, options, true);\n\n            opts.isRTL = !!opts.isRTL;\n\n            opts.field = (opts.field && opts.field.nodeName) ? opts.field : null;\n\n            opts.theme = (typeof opts.theme) === 'string' && opts.theme ? opts.theme : null;\n\n            opts.bound = !!(opts.bound !== undefined ? opts.field && opts.bound : opts.field);\n\n            opts.trigger = (opts.trigger && opts.trigger.nodeName) ? opts.trigger : opts.field;\n\n            opts.disableWeekends = !!opts.disableWeekends;\n\n            opts.disableDayFn = (typeof opts.disableDayFn) === 'function' ? opts.disableDayFn : null;\n\n            var nom = parseInt(opts.numberOfMonths, 10) || 1;\n            opts.numberOfMonths = nom > 4 ? 4 : nom;\n\n            if (!isDate(opts.minDate)) {\n                opts.minDate = false;\n            }\n            if (!isDate(opts.maxDate)) {\n                opts.maxDate = false;\n            }\n            if ((opts.minDate && opts.maxDate) && opts.maxDate < opts.minDate) {\n                opts.maxDate = opts.minDate = false;\n            }\n            if (opts.minDate) {\n                this.setMinDate(opts.minDate);\n            }\n            if (opts.maxDate) {\n                this.setMaxDate(opts.maxDate);\n            }\n\n            if (isArray(opts.yearRange)) {\n                var fallback = new Date().getFullYear() - 10;\n                opts.yearRange[0] = parseInt(opts.yearRange[0], 10) || fallback;\n                opts.yearRange[1] = parseInt(opts.yearRange[1], 10) || fallback;\n            } else {\n                opts.yearRange = Math.abs(parseInt(opts.yearRange, 10)) || defaults.yearRange;\n                if (opts.yearRange > 100) {\n                    opts.yearRange = 100;\n                }\n            }\n\n            return opts;\n        },\n\n        /**\n         * return a formatted string of the current selection (using Moment.js if available)\n         */\n        toString: function(format)\n        {\n            format = format || this._o.format;\n            if (!isDate(this._d)) {\n                return '';\n            }\n            if (this._o.toString) {\n              return this._o.toString(this._d, format);\n            }\n            if (hasMoment) {\n              return moment(this._d).format(format);\n            }\n            return this._d.toDateString();\n        },\n\n        /**\n         * return a Moment.js object of the current selection (if available)\n         */\n        getMoment: function()\n        {\n            return hasMoment ? moment(this._d) : null;\n        },\n\n        /**\n         * set the current selection from a Moment.js object (if available)\n         */\n        setMoment: function(date, preventOnSelect)\n        {\n            if (hasMoment && moment.isMoment(date)) {\n                this.setDate(date.toDate(), preventOnSelect);\n            }\n        },\n\n        /**\n         * return a Date object of the current selection\n         */\n        getDate: function()\n        {\n            return isDate(this._d) ? new Date(this._d.getTime()) : null;\n        },\n\n        /**\n         * set the current selection\n         */\n        setDate: function(date, preventOnSelect)\n        {\n            if (!date) {\n                this._d = null;\n\n                if (this._o.field) {\n                    this._o.field.value = '';\n                    fireEvent(this._o.field, 'change', { firedBy: this });\n                }\n\n                return this.draw();\n            }\n            if (typeof date === 'string') {\n                date = new Date(Date.parse(date));\n            }\n            if (!isDate(date)) {\n                return;\n            }\n\n            var min = this._o.minDate,\n                max = this._o.maxDate;\n\n            if (isDate(min) && date < min) {\n                date = min;\n            } else if (isDate(max) && date > max) {\n                date = max;\n            }\n\n            this._d = new Date(date.getTime());\n            setToStartOfDay(this._d);\n            this.gotoDate(this._d);\n\n            if (this._o.field) {\n                this._o.field.value = this.toString();\n                fireEvent(this._o.field, 'change', { firedBy: this });\n            }\n            if (!preventOnSelect && typeof this._o.onSelect === 'function') {\n                this._o.onSelect.call(this, this.getDate());\n            }\n        },\n\n        /**\n         * change view to a specific date\n         */\n        gotoDate: function(date)\n        {\n            var newCalendar = true;\n\n            if (!isDate(date)) {\n                return;\n            }\n\n            if (this.calendars) {\n                var firstVisibleDate = new Date(this.calendars[0].year, this.calendars[0].month, 1),\n                    lastVisibleDate = new Date(this.calendars[this.calendars.length-1].year, this.calendars[this.calendars.length-1].month, 1),\n                    visibleDate = date.getTime();\n                // get the end of the month\n                lastVisibleDate.setMonth(lastVisibleDate.getMonth()+1);\n                lastVisibleDate.setDate(lastVisibleDate.getDate()-1);\n                newCalendar = (visibleDate < firstVisibleDate.getTime() || lastVisibleDate.getTime() < visibleDate);\n            }\n\n            if (newCalendar) {\n                this.calendars = [{\n                    month: date.getMonth(),\n                    year: date.getFullYear()\n                }];\n                if (this._o.mainCalendar === 'right') {\n                    this.calendars[0].month += 1 - this._o.numberOfMonths;\n                }\n            }\n\n            this.adjustCalendars();\n        },\n\n        adjustDate: function(sign, days) {\n\n            var day = this.getDate() || new Date();\n            var difference = parseInt(days)*24*60*60*1000;\n\n            var newDay;\n\n            if (sign === 'add') {\n                newDay = new Date(day.valueOf() + difference);\n            } else if (sign === 'subtract') {\n                newDay = new Date(day.valueOf() - difference);\n            }\n\n            this.setDate(newDay);\n        },\n\n        adjustCalendars: function() {\n            this.calendars[0] = adjustCalendar(this.calendars[0]);\n            for (var c = 1; c < this._o.numberOfMonths; c++) {\n                this.calendars[c] = adjustCalendar({\n                    month: this.calendars[0].month + c,\n                    year: this.calendars[0].year\n                });\n            }\n            this.draw();\n        },\n\n        gotoToday: function()\n        {\n            this.gotoDate(new Date());\n        },\n\n        /**\n         * change view to a specific month (zero-index, e.g. 0: January)\n         */\n        gotoMonth: function(month)\n        {\n            if (!isNaN(month)) {\n                this.calendars[0].month = parseInt(month, 10);\n                this.adjustCalendars();\n            }\n        },\n\n        nextMonth: function()\n        {\n            this.calendars[0].month++;\n            this.adjustCalendars();\n        },\n\n        prevMonth: function()\n        {\n            this.calendars[0].month--;\n            this.adjustCalendars();\n        },\n\n        /**\n         * change view to a specific full year (e.g. \"2012\")\n         */\n        gotoYear: function(year)\n        {\n            if (!isNaN(year)) {\n                this.calendars[0].year = parseInt(year, 10);\n                this.adjustCalendars();\n            }\n        },\n\n        /**\n         * change the minDate\n         */\n        setMinDate: function(value)\n        {\n            if(value instanceof Date) {\n                setToStartOfDay(value);\n                this._o.minDate = value;\n                this._o.minYear  = value.getFullYear();\n                this._o.minMonth = value.getMonth();\n            } else {\n                this._o.minDate = defaults.minDate;\n                this._o.minYear  = defaults.minYear;\n                this._o.minMonth = defaults.minMonth;\n                this._o.startRange = defaults.startRange;\n            }\n\n            this.draw();\n        },\n\n        /**\n         * change the maxDate\n         */\n        setMaxDate: function(value)\n        {\n            if(value instanceof Date) {\n                setToStartOfDay(value);\n                this._o.maxDate = value;\n                this._o.maxYear = value.getFullYear();\n                this._o.maxMonth = value.getMonth();\n            } else {\n                this._o.maxDate = defaults.maxDate;\n                this._o.maxYear = defaults.maxYear;\n                this._o.maxMonth = defaults.maxMonth;\n                this._o.endRange = defaults.endRange;\n            }\n\n            this.draw();\n        },\n\n        setStartRange: function(value)\n        {\n            this._o.startRange = value;\n        },\n\n        setEndRange: function(value)\n        {\n            this._o.endRange = value;\n        },\n\n        /**\n         * refresh the HTML\n         */\n        draw: function(force)\n        {\n            if (!this._v && !force) {\n                return;\n            }\n            var opts = this._o,\n                minYear = opts.minYear,\n                maxYear = opts.maxYear,\n                minMonth = opts.minMonth,\n                maxMonth = opts.maxMonth,\n                html = '',\n                randId;\n\n            if (this._y <= minYear) {\n                this._y = minYear;\n                if (!isNaN(minMonth) && this._m < minMonth) {\n                    this._m = minMonth;\n                }\n            }\n            if (this._y >= maxYear) {\n                this._y = maxYear;\n                if (!isNaN(maxMonth) && this._m > maxMonth) {\n                    this._m = maxMonth;\n                }\n            }\n\n            randId = 'pika-title-' + Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 2);\n\n            for (var c = 0; c < opts.numberOfMonths; c++) {\n                html += '<div class=\"pika-lendar\">' + renderTitle(this, c, this.calendars[c].year, this.calendars[c].month, this.calendars[0].year, randId) + this.render(this.calendars[c].year, this.calendars[c].month, randId) + '</div>';\n            }\n\n            this.el.innerHTML = html;\n\n            if (opts.bound) {\n                if(opts.field.type !== 'hidden') {\n                    sto(function() {\n                        opts.trigger.focus();\n                    }, 1);\n                }\n            }\n\n            if (typeof this._o.onDraw === 'function') {\n                this._o.onDraw(this);\n            }\n\n            if (opts.bound) {\n                // let the screen reader user know to use arrow keys\n                opts.field.setAttribute('aria-label', 'Use the arrow keys to pick a date');\n            }\n        },\n\n        adjustPosition: function()\n        {\n            var field, pEl, width, height, viewportWidth, viewportHeight, scrollTop, left, top, clientRect;\n\n            if (this._o.container) return;\n\n            this.el.style.position = 'absolute';\n\n            field = this._o.trigger;\n            pEl = field;\n            width = this.el.offsetWidth;\n            height = this.el.offsetHeight;\n            viewportWidth = window.innerWidth || document.documentElement.clientWidth;\n            viewportHeight = window.innerHeight || document.documentElement.clientHeight;\n            scrollTop = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\n\n            if (typeof field.getBoundingClientRect === 'function') {\n                clientRect = field.getBoundingClientRect();\n                left = clientRect.left + window.pageXOffset;\n                top = clientRect.bottom + window.pageYOffset;\n            } else {\n                left = pEl.offsetLeft;\n                top  = pEl.offsetTop + pEl.offsetHeight;\n                while((pEl = pEl.offsetParent)) {\n                    left += pEl.offsetLeft;\n                    top  += pEl.offsetTop;\n                }\n            }\n\n            // default position is bottom & left\n            if ((this._o.reposition && left + width > viewportWidth) ||\n                (\n                    this._o.position.indexOf('right') > -1 &&\n                    left - width + field.offsetWidth > 0\n                )\n            ) {\n                left = left - width + field.offsetWidth;\n            }\n            if ((this._o.reposition && top + height > viewportHeight + scrollTop) ||\n                (\n                    this._o.position.indexOf('top') > -1 &&\n                    top - height - field.offsetHeight > 0\n                )\n            ) {\n                top = top - height - field.offsetHeight;\n            }\n\n            this.el.style.left = left + 'px';\n            this.el.style.top = top + 'px';\n        },\n\n        /**\n         * render HTML for a particular month\n         */\n        render: function(year, month, randId)\n        {\n            var opts   = this._o,\n                now    = new Date(),\n                days   = getDaysInMonth(year, month),\n                before = new Date(year, month, 1).getDay(),\n                data   = [],\n                row    = [];\n            setToStartOfDay(now);\n            if (opts.firstDay > 0) {\n                before -= opts.firstDay;\n                if (before < 0) {\n                    before += 7;\n                }\n            }\n            var previousMonth = month === 0 ? 11 : month - 1,\n                nextMonth = month === 11 ? 0 : month + 1,\n                yearOfPreviousMonth = month === 0 ? year - 1 : year,\n                yearOfNextMonth = month === 11 ? year + 1 : year,\n                daysInPreviousMonth = getDaysInMonth(yearOfPreviousMonth, previousMonth);\n            var cells = days + before,\n                after = cells;\n            while(after > 7) {\n                after -= 7;\n            }\n            cells += 7 - after;\n            var isWeekSelected = false;\n            for (var i = 0, r = 0; i < cells; i++)\n            {\n                var day = new Date(year, month, 1 + (i - before)),\n                    isSelected = isDate(this._d) ? compareDates(day, this._d) : false,\n                    isToday = compareDates(day, now),\n                    hasEvent = opts.events.indexOf(day.toDateString()) !== -1 ? true : false,\n                    isEmpty = i < before || i >= (days + before),\n                    dayNumber = 1 + (i - before),\n                    monthNumber = month,\n                    yearNumber = year,\n                    isStartRange = opts.startRange && compareDates(opts.startRange, day),\n                    isEndRange = opts.endRange && compareDates(opts.endRange, day),\n                    isInRange = opts.startRange && opts.endRange && opts.startRange < day && day < opts.endRange,\n                    isDisabled = (opts.minDate && day < opts.minDate) ||\n                                 (opts.maxDate && day > opts.maxDate) ||\n                                 (opts.disableWeekends && isWeekend(day)) ||\n                                 (opts.disableDayFn && opts.disableDayFn(day));\n\n                if (isEmpty) {\n                    if (i < before) {\n                        dayNumber = daysInPreviousMonth + dayNumber;\n                        monthNumber = previousMonth;\n                        yearNumber = yearOfPreviousMonth;\n                    } else {\n                        dayNumber = dayNumber - days;\n                        monthNumber = nextMonth;\n                        yearNumber = yearOfNextMonth;\n                    }\n                }\n\n                var dayConfig = {\n                        day: dayNumber,\n                        month: monthNumber,\n                        year: yearNumber,\n                        hasEvent: hasEvent,\n                        isSelected: isSelected,\n                        isToday: isToday,\n                        isDisabled: isDisabled,\n                        isEmpty: isEmpty,\n                        isStartRange: isStartRange,\n                        isEndRange: isEndRange,\n                        isInRange: isInRange,\n                        showDaysInNextAndPreviousMonths: opts.showDaysInNextAndPreviousMonths,\n                        enableSelectionDaysInNextAndPreviousMonths: opts.enableSelectionDaysInNextAndPreviousMonths\n                    };\n\n                if (opts.pickWholeWeek && isSelected) {\n                    isWeekSelected = true;\n                }\n\n                row.push(renderDay(dayConfig));\n\n                if (++r === 7) {\n                    if (opts.showWeekNumber) {\n                        row.unshift(renderWeek(i - before, month, year));\n                    }\n                    data.push(renderRow(row, opts.isRTL, opts.pickWholeWeek, isWeekSelected));\n                    row = [];\n                    r = 0;\n                    isWeekSelected = false;\n                }\n            }\n            return renderTable(opts, data, randId);\n        },\n\n        isVisible: function()\n        {\n            return this._v;\n        },\n\n        show: function()\n        {\n            if (!this.isVisible()) {\n                this._v = true;\n                this.draw();\n                removeClass(this.el, 'is-hidden');\n                if (this._o.bound) {\n                    addEvent(document, 'click', this._onClick);\n                    this.adjustPosition();\n                }\n                if (typeof this._o.onOpen === 'function') {\n                    this._o.onOpen.call(this);\n                }\n            }\n        },\n\n        hide: function()\n        {\n            var v = this._v;\n            if (v !== false) {\n                if (this._o.bound) {\n                    removeEvent(document, 'click', this._onClick);\n                }\n                this.el.style.position = 'static'; // reset\n                this.el.style.left = 'auto';\n                this.el.style.top = 'auto';\n                addClass(this.el, 'is-hidden');\n                this._v = false;\n                if (v !== undefined && typeof this._o.onClose === 'function') {\n                    this._o.onClose.call(this);\n                }\n            }\n        },\n\n        /**\n         * GAME OVER\n         */\n        destroy: function()\n        {\n            this.hide();\n            removeEvent(this.el, 'mousedown', this._onMouseDown, true);\n            removeEvent(this.el, 'touchend', this._onMouseDown, true);\n            removeEvent(this.el, 'change', this._onChange);\n            removeEvent(document, 'keydown', this._onKeyChange);\n            if (this._o.field) {\n                removeEvent(this._o.field, 'change', this._onInputChange);\n                if (this._o.bound) {\n                    removeEvent(this._o.trigger, 'click', this._onInputClick);\n                    removeEvent(this._o.trigger, 'focus', this._onInputFocus);\n                    removeEvent(this._o.trigger, 'blur', this._onInputBlur);\n                }\n            }\n            if (this.el.parentNode) {\n                this.el.parentNode.removeChild(this.el);\n            }\n        }\n\n    };\n\n    return Pikaday;\n\n}));\n"],"sourceRoot":""}