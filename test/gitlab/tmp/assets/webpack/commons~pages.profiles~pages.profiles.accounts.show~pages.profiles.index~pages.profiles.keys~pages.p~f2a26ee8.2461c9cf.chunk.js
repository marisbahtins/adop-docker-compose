(this.webpackJsonp=this.webpackJsonp||[]).push([[5],{1193:function(t,i,e){var o,a,s;
/*!
 * Cropper v2.3.0
 * https://github.com/fengyuanchen/cropper
 *
 * Copyright (c) 2014-2016 Fengyuan Chen and contributors
 * Released under the MIT license
 *
 * Date: 2016-02-22T02:13:13.332Z
 */a=[e(0)],void 0===(s="function"==typeof(o=function(t){"use strict";var i=t(window),e=t(document),o=window.location,a=window.navigator,s=window.ArrayBuffer,n=window.Uint8Array,r=window.DataView,h=window.btoa,p="cropper-hidden",l="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",c=/e|w|s|n|se|sw|ne|nw|all|crop|move|zoom/,d=/^data\:/,u=/^data\:([^\;]+)\;base64,/,g=/^data\:image\/jpeg.*;base64,/,m=t.isFunction(t("<canvas>")[0].getContext),f=a&&/safari/i.test(a.userAgent)&&/apple computer/i.test(a.vendor),v=Number,w=Math.min,b=Math.max,x=Math.abs,C=Math.sin,B=Math.cos,y=Math.sqrt,k=Math.round,D=Math.floor,$=String.fromCharCode;function I(t){return"number"==typeof t&&!isNaN(t)}function M(t){return void 0===t}function L(t,i){var e=[];return I(i)&&e.push(i),e.slice.apply(t,e)}function R(t,i){var e=L(arguments,2);return function(){return t.apply(i,e.concat(L(arguments)))}}function T(t){return t?' crossOrigin="'+t+'"':""}function W(t){var i=[],e=t.rotate,o=t.scaleX,a=t.scaleY;return I(e)&&i.push("rotate("+e+"deg)"),I(o)&&I(a)&&i.push("scale("+o+","+a+")"),i.length?i.join(" "):"none"}function X(t,i){var e,o,a=x(t.degree)%180,s=(a>90?180-a:a)*Math.PI/180,n=C(s),r=B(s),h=t.width,p=t.height,l=t.aspectRatio;return i?o=(e=h/(r+n/l))/l:(e=h*r+p*n,o=h*n+p*r),{width:e,height:o}}function Y(t){var i,e,o,a,s,n,h,p,l,c=new r(t),d=c.byteLength;if(255===c.getUint8(0)&&216===c.getUint8(1))for(p=2;p<d;){if(255===c.getUint8(p)&&225===c.getUint8(p+1)){n=p;break}p++}if(n&&(e=n+10,"Exif"===function(t,i,e){var o,a="";for(o=i,e+=i;o<e;o++)a+=$(t.getUint8(o));return a}(c,n+4,4)&&(s=c.getUint16(e),((a=18761===s)||19789===s)&&42===c.getUint16(e+2,a)&&(o=c.getUint32(e+4,a))>=8&&(h=e+o))),h)for(d=c.getUint16(h,a),l=0;l<d;l++)if(p=h+12*l+2,274===c.getUint16(p,a)){p+=8,i=c.getUint16(p,a),f&&c.setUint16(p,1,a);break}return i}function H(i,e){this.$element=t(i),this.options=t.extend({},H.DEFAULTS,t.isPlainObject(e)&&e),this.isLoaded=!1,this.isBuilt=!1,this.isCompleted=!1,this.isRotated=!1,this.isCropped=!1,this.isDisabled=!1,this.isReplaced=!1,this.isLimited=!1,this.wheeling=!1,this.isImg=!1,this.originalUrl="",this.canvas=null,this.cropBox=null,this.init()}H.prototype={constructor:H,init:function(){var t,i=this.$element;if(i.is("img")){if(this.isImg=!0,this.originalUrl=t=i.attr("src"),!t)return;t=i.prop("src")}else i.is("canvas")&&m&&(t=i[0].toDataURL());this.load(t)},trigger:function(i,e){var o=t.Event(i,e);return this.$element.trigger(o),o},load:function(i){var e,o,a=this.options,r=this.$element;if(i&&(r.one("build.cropper",a.build),!this.trigger("build.cropper").isDefaultPrevented())){if(this.url=i,this.image={},!a.checkOrientation||!s)return this.clone();if(e=t.proxy(this.read,this),d.test(i))return g.test(i)?e(function(t){var i,e=t.replace(u,""),o=atob(e),a=o.length,r=new s(a),h=new n(r);for(i=0;i<a;i++)h[i]=o.charCodeAt(i);return r}(i)):this.clone();(o=new XMLHttpRequest).onerror=o.onabort=t.proxy(function(){this.clone()},this),o.onload=function(){e(this.response)},o.open("get",i),o.responseType="arraybuffer",o.send()}},read:function(t){var i,e,o,a=this.options,s=Y(t),r=this.image;if(s>1)switch(this.url=function(t){var i,e=new n(t),o=e.length,a="";for(i=0;i<o;i++)a+=$(e[i]);return"data:image/jpeg;base64,"+h(a)}(t),s){case 2:e=-1;break;case 3:i=-180;break;case 4:o=-1;break;case 5:i=90,o=-1;break;case 6:i=90;break;case 7:i=90,e=-1;break;case 8:i=-90}a.rotatable&&(r.rotate=i),a.scalable&&(r.scaleX=e,r.scaleY=o),this.clone()},clone:function(){var i,e,a=this.options,s=this.$element,n=this.url,r="";a.checkCrossOrigin&&function(t){var i=t.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);return i&&(i[1]!==o.protocol||i[2]!==o.hostname||i[3]!==o.port)}(n)&&((r=s.prop("crossOrigin"))?i=n:(r="anonymous",i=function(t){var i="timestamp="+(new Date).getTime();return t+(-1===t.indexOf("?")?"?":"&")+i}(n))),this.crossOrigin=r,this.crossOriginUrl=i,this.$clone=e=t("<img"+T(r)+' src="'+(i||n)+'">'),this.isImg?s[0].complete?this.start():s.one("load.cropper",t.proxy(this.start,this)):e.one("load.cropper",t.proxy(this.start,this)).one("error.cropper",t.proxy(this.stop,this)).addClass("cropper-hide").insertAfter(s)},start:function(){var i=this.$element,e=this.$clone;this.isImg||(e.off("error.cropper",this.stop),i=e),function(t,i){var e;if(t.naturalWidth&&!f)return i(t.naturalWidth,t.naturalHeight);(e=document.createElement("img")).onload=function(){i(this.width,this.height)},e.src=t.src}(i[0],t.proxy(function(i,e){t.extend(this.image,{naturalWidth:i,naturalHeight:e,aspectRatio:i/e}),this.isLoaded=!0,this.build()},this))},stop:function(){this.$clone.remove(),this.$clone=null},build:function(){var i,e,o,a=this.options,s=this.$element,n=this.$clone;this.isLoaded&&(this.isBuilt&&this.unbuild(),this.$container=s.parent(),this.$cropper=i=t(H.TEMPLATE),this.$canvas=i.find(".cropper-canvas").append(n),this.$dragBox=i.find(".cropper-drag-box"),this.$cropBox=e=i.find(".cropper-crop-box"),this.$viewBox=i.find(".cropper-view-box"),this.$face=o=e.find(".cropper-face"),s.addClass(p).after(i),this.isImg||n.removeClass("cropper-hide"),this.initPreview(),this.bind(),a.aspectRatio=b(0,a.aspectRatio)||NaN,a.viewMode=b(0,w(3,k(a.viewMode)))||0,a.autoCrop?(this.isCropped=!0,a.modal&&this.$dragBox.addClass("cropper-modal")):e.addClass(p),a.guides||e.find(".cropper-dashed").addClass(p),a.center||e.find(".cropper-center").addClass(p),a.cropBoxMovable&&o.addClass("cropper-move").data("action","all"),a.highlight||o.addClass("cropper-invisible"),a.background&&i.addClass("cropper-bg"),a.cropBoxResizable||e.find(".cropper-line, .cropper-point").addClass(p),this.setDragMode(a.dragMode),this.render(),this.isBuilt=!0,this.setData(a.data),s.one("built.cropper",a.built),setTimeout(t.proxy(function(){this.trigger("built.cropper"),this.isCompleted=!0},this),0))},unbuild:function(){this.isBuilt&&(this.isBuilt=!1,this.isCompleted=!1,this.initialImage=null,this.initialCanvas=null,this.initialCropBox=null,this.container=null,this.canvas=null,this.cropBox=null,this.unbind(),this.resetPreview(),this.$preview=null,this.$viewBox=null,this.$cropBox=null,this.$dragBox=null,this.$canvas=null,this.$container=null,this.$cropper.remove(),this.$cropper=null)},render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.isCropped&&this.renderCropBox()},initContainer:function(){var t=this.options,i=this.$element,e=this.$container,o=this.$cropper;o.addClass(p),i.removeClass(p),o.css(this.container={width:b(e.width(),v(t.minContainerWidth)||200),height:b(e.height(),v(t.minContainerHeight)||100)}),i.addClass(p),o.removeClass(p)},initCanvas:function(){var i,e=this.options.viewMode,o=this.container,a=o.width,s=o.height,n=this.image,r=n.naturalWidth,h=n.naturalHeight,p=90===x(n.rotate),l=p?h:r,c=p?r:h,d=l/c,u=a,g=s;s*d>a?3===e?u=s*d:g=a/d:3===e?g=a/d:u=s*d,(i={naturalWidth:l,naturalHeight:c,aspectRatio:d,width:u,height:g}).oldLeft=i.left=(a-u)/2,i.oldTop=i.top=(s-g)/2,this.canvas=i,this.isLimited=1===e||2===e,this.limitCanvas(!0,!0),this.initialImage=t.extend({},n),this.initialCanvas=t.extend({},i)},limitCanvas:function(t,i){var e,o,a,s,n=this.options,r=n.viewMode,h=this.container,p=h.width,l=h.height,c=this.canvas,d=c.aspectRatio,u=this.cropBox,g=this.isCropped&&u;t&&(e=v(n.minCanvasWidth)||0,o=v(n.minCanvasHeight)||0,r&&(r>1?(e=b(e,p),o=b(o,l),3===r&&(o*d>e?e=o*d:o=e/d)):e?e=b(e,g?u.width:0):o?o=b(o,g?u.height:0):g&&(e=u.width,(o=u.height)*d>e?e=o*d:o=e/d)),e&&o?o*d>e?o=e/d:e=o*d:e?o=e/d:o&&(e=o*d),c.minWidth=e,c.minHeight=o,c.maxWidth=1/0,c.maxHeight=1/0),i&&(r?(a=p-c.width,s=l-c.height,c.minLeft=w(0,a),c.minTop=w(0,s),c.maxLeft=b(0,a),c.maxTop=b(0,s),g&&this.isLimited&&(c.minLeft=w(u.left,u.left+u.width-c.width),c.minTop=w(u.top,u.top+u.height-c.height),c.maxLeft=u.left,c.maxTop=u.top,2===r&&(c.width>=p&&(c.minLeft=w(0,a),c.maxLeft=b(0,a)),c.height>=l&&(c.minTop=w(0,s),c.maxTop=b(0,s))))):(c.minLeft=-c.width,c.minTop=-c.height,c.maxLeft=p,c.maxTop=l))},renderCanvas:function(t){var i,e,o=this.canvas,a=this.image,s=a.rotate,n=a.naturalWidth,r=a.naturalHeight;this.isRotated&&(this.isRotated=!1,e=X({width:a.width,height:a.height,degree:s}),(i=e.width/e.height)!==o.aspectRatio&&(o.left-=(e.width-o.width)/2,o.top-=(e.height-o.height)/2,o.width=e.width,o.height=e.height,o.aspectRatio=i,o.naturalWidth=n,o.naturalHeight=r,s%180&&(e=X({width:n,height:r,degree:s}),o.naturalWidth=e.width,o.naturalHeight=e.height),this.limitCanvas(!0,!1))),(o.width>o.maxWidth||o.width<o.minWidth)&&(o.left=o.oldLeft),(o.height>o.maxHeight||o.height<o.minHeight)&&(o.top=o.oldTop),o.width=w(b(o.width,o.minWidth),o.maxWidth),o.height=w(b(o.height,o.minHeight),o.maxHeight),this.limitCanvas(!1,!0),o.oldLeft=o.left=w(b(o.left,o.minLeft),o.maxLeft),o.oldTop=o.top=w(b(o.top,o.minTop),o.maxTop),this.$canvas.css({width:o.width,height:o.height,left:o.left,top:o.top}),this.renderImage(),this.isCropped&&this.isLimited&&this.limitCropBox(!0,!0),t&&this.output()},renderImage:function(i){var e,o=this.canvas,a=this.image;a.rotate&&(e=X({width:o.width,height:o.height,degree:a.rotate,aspectRatio:a.aspectRatio},!0)),t.extend(a,e?{width:e.width,height:e.height,left:(o.width-e.width)/2,top:(o.height-e.height)/2}:{width:o.width,height:o.height,left:0,top:0}),this.$clone.css({width:a.width,height:a.height,marginLeft:a.left,marginTop:a.top,transform:W(a)}),i&&this.output()},initCropBox:function(){var i=this.options,e=this.canvas,o=i.aspectRatio,a=v(i.autoCropArea)||.8,s={width:e.width,height:e.height};o&&(e.height*o>e.width?s.height=s.width/o:s.width=s.height*o),this.cropBox=s,this.limitCropBox(!0,!0),s.width=w(b(s.width,s.minWidth),s.maxWidth),s.height=w(b(s.height,s.minHeight),s.maxHeight),s.width=b(s.minWidth,s.width*a),s.height=b(s.minHeight,s.height*a),s.oldLeft=s.left=e.left+(e.width-s.width)/2,s.oldTop=s.top=e.top+(e.height-s.height)/2,this.initialCropBox=t.extend({},s)},limitCropBox:function(t,i){var e,o,a,s,n=this.options,r=n.aspectRatio,h=this.container,p=h.width,l=h.height,c=this.canvas,d=this.cropBox,u=this.isLimited;t&&(e=v(n.minCropBoxWidth)||0,o=v(n.minCropBoxHeight)||0,e=w(e,p),o=w(o,l),a=w(p,u?c.width:p),s=w(l,u?c.height:l),r&&(e&&o?o*r>e?o=e/r:e=o*r:e?o=e/r:o&&(e=o*r),s*r>a?s=a/r:a=s*r),d.minWidth=w(e,a),d.minHeight=w(o,s),d.maxWidth=a,d.maxHeight=s),i&&(u?(d.minLeft=b(0,c.left),d.minTop=b(0,c.top),d.maxLeft=w(p,c.left+c.width)-d.width,d.maxTop=w(l,c.top+c.height)-d.height):(d.minLeft=0,d.minTop=0,d.maxLeft=p-d.width,d.maxTop=l-d.height))},renderCropBox:function(){var t=this.options,i=this.container,e=i.width,o=i.height,a=this.cropBox;(a.width>a.maxWidth||a.width<a.minWidth)&&(a.left=a.oldLeft),(a.height>a.maxHeight||a.height<a.minHeight)&&(a.top=a.oldTop),a.width=w(b(a.width,a.minWidth),a.maxWidth),a.height=w(b(a.height,a.minHeight),a.maxHeight),this.limitCropBox(!1,!0),a.oldLeft=a.left=w(b(a.left,a.minLeft),a.maxLeft),a.oldTop=a.top=w(b(a.top,a.minTop),a.maxTop),t.movable&&t.cropBoxMovable&&this.$face.data("action",a.width===e&&a.height===o?"move":"all"),this.$cropBox.css({width:a.width,height:a.height,left:a.left,top:a.top}),this.isCropped&&this.isLimited&&this.limitCanvas(!0,!0),this.isDisabled||this.output()},output:function(){this.preview(),this.isCompleted?this.trigger("crop.cropper",this.getData()):this.isBuilt||this.$element.one("built.cropper",t.proxy(function(){this.trigger("crop.cropper",this.getData())},this))},initPreview:function(){var i,e=T(this.crossOrigin),o=e?this.crossOriginUrl:this.url;this.$preview=t(this.options.preview),this.$clone2=i=t("<img"+e+' src="'+o+'">'),this.$viewBox.html(i),this.$preview.each(function(){var i=t(this);i.data("preview",{width:i.width(),height:i.height(),html:i.html()}),i.html("<img"+e+' src="'+o+'" style="display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;">')})},resetPreview:function(){this.$preview.each(function(){var i=t(this),e=i.data("preview");i.css({width:e.width,height:e.height}).html(e.html).removeData("preview")})},preview:function(){var i=this.image,e=this.canvas,o=this.cropBox,a=o.width,s=o.height,n=i.width,r=i.height,h=o.left-e.left-i.left,p=o.top-e.top-i.top;this.isCropped&&!this.isDisabled&&(this.$clone2.css({width:n,height:r,marginLeft:-h,marginTop:-p,transform:W(i)}),this.$preview.each(function(){var e=t(this),o=e.data("preview"),l=o.width,c=o.height,d=l,u=c,g=1;a&&(u=s*(g=l/a)),s&&u>c&&(d=a*(g=c/s),u=c),e.css({width:d,height:u}).find("img").css({width:n*g,height:r*g,marginLeft:-h*g,marginTop:-p*g,transform:W(i)})}))},bind:function(){var o=this.options,a=this.$element,s=this.$cropper;t.isFunction(o.cropstart)&&a.on("cropstart.cropper",o.cropstart),t.isFunction(o.cropmove)&&a.on("cropmove.cropper",o.cropmove),t.isFunction(o.cropend)&&a.on("cropend.cropper",o.cropend),t.isFunction(o.crop)&&a.on("crop.cropper",o.crop),t.isFunction(o.zoom)&&a.on("zoom.cropper",o.zoom),s.on("mousedown touchstart pointerdown MSPointerDown",t.proxy(this.cropStart,this)),o.zoomable&&o.zoomOnWheel&&s.on("wheel mousewheel DOMMouseScroll",t.proxy(this.wheel,this)),o.toggleDragModeOnDblclick&&s.on("dblclick",t.proxy(this.dblclick,this)),e.on("mousemove touchmove pointermove MSPointerMove",this._cropMove=R(this.cropMove,this)).on(l,this._cropEnd=R(this.cropEnd,this)),o.responsive&&i.on("resize.cropper",this._resize=R(this.resize,this))},unbind:function(){var o=this.options,a=this.$element,s=this.$cropper;t.isFunction(o.cropstart)&&a.off("cropstart.cropper",o.cropstart),t.isFunction(o.cropmove)&&a.off("cropmove.cropper",o.cropmove),t.isFunction(o.cropend)&&a.off("cropend.cropper",o.cropend),t.isFunction(o.crop)&&a.off("crop.cropper",o.crop),t.isFunction(o.zoom)&&a.off("zoom.cropper",o.zoom),s.off("mousedown touchstart pointerdown MSPointerDown",this.cropStart),o.zoomable&&o.zoomOnWheel&&s.off("wheel mousewheel DOMMouseScroll",this.wheel),o.toggleDragModeOnDblclick&&s.off("dblclick",this.dblclick),e.off("mousemove touchmove pointermove MSPointerMove",this._cropMove).off(l,this._cropEnd),o.responsive&&i.off("resize.cropper",this._resize)},resize:function(){var i,e,o,a=this.options.restore,s=this.$container,n=this.container;!this.isDisabled&&n&&(1==(o=s.width()/n.width)&&s.height()===n.height||(a&&(i=this.getCanvasData(),e=this.getCropBoxData()),this.render(),a&&(this.setCanvasData(t.each(i,function(t,e){i[t]=e*o})),this.setCropBoxData(t.each(e,function(t,i){e[t]=i*o})))))},dblclick:function(){this.isDisabled||(this.$dragBox.hasClass("cropper-crop")?this.setDragMode("move"):this.setDragMode("crop"))},wheel:function(i){var e=i.originalEvent||i,o=v(this.options.wheelZoomRatio)||.1,a=1;this.isDisabled||(i.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(t.proxy(function(){this.wheeling=!1},this),50),e.deltaY?a=e.deltaY>0?1:-1:e.wheelDelta?a=-e.wheelDelta/120:e.detail&&(a=e.detail>0?1:-1),this.zoom(-a*o,i)))},cropStart:function(i){var e,o,a=this.options,s=i.originalEvent,n=s&&s.touches,r=i;if(!this.isDisabled){if(n){if((e=n.length)>1){if(!a.zoomable||!a.zoomOnTouch||2!==e)return;r=n[1],this.startX2=r.pageX,this.startY2=r.pageY,o="zoom"}r=n[0]}if(o=o||t(r.target).data("action"),c.test(o)){if(this.trigger("cropstart.cropper",{originalEvent:s,action:o}).isDefaultPrevented())return;i.preventDefault(),this.action=o,this.cropping=!1,this.startX=r.pageX||s&&s.pageX,this.startY=r.pageY||s&&s.pageY,"crop"===o&&(this.cropping=!0,this.$dragBox.addClass("cropper-modal"))}}},cropMove:function(t){var i,e=this.options,o=t.originalEvent,a=o&&o.touches,s=t,n=this.action;if(!this.isDisabled){if(a){if((i=a.length)>1){if(!e.zoomable||!e.zoomOnTouch||2!==i)return;s=a[1],this.endX2=s.pageX,this.endY2=s.pageY}s=a[0]}if(n){if(this.trigger("cropmove.cropper",{originalEvent:o,action:n}).isDefaultPrevented())return;t.preventDefault(),this.endX=s.pageX||o&&o.pageX,this.endY=s.pageY||o&&o.pageY,this.change(s.shiftKey,"zoom"===n?t:null)}}},cropEnd:function(t){var i=t.originalEvent,e=this.action;this.isDisabled||e&&(t.preventDefault(),this.cropping&&(this.cropping=!1,this.$dragBox.toggleClass("cropper-modal",this.isCropped&&this.options.modal)),this.action="",this.trigger("cropend.cropper",{originalEvent:i,action:e}))},change:function(t,i){var e,o,a,s,n,r,h,l=this.options,c=l.aspectRatio,d=this.action,u=this.container,g=this.canvas,m=this.cropBox,f=m.width,v=m.height,b=m.left,C=m.top,B=b+f,k=C+v,D=0,$=0,I=u.width,M=u.height,L=!0;switch(!c&&t&&(c=f&&v?f/v:1),this.limited&&(D=m.minLeft,$=m.minTop,I=D+w(u.width,g.left+g.width),M=$+w(u.height,g.top+g.height)),o={x:this.endX-this.startX,y:this.endY-this.startY},c&&(o.X=o.y*c,o.Y=o.x/c),d){case"all":b+=o.x,C+=o.y;break;case"e":if(o.x>=0&&(B>=I||c&&(C<=$||k>=M))){L=!1;break}f+=o.x,c&&(v=f/c,C-=o.Y/2),f<0&&(d="w",f=0);break;case"n":if(o.y<=0&&(C<=$||c&&(b<=D||B>=I))){L=!1;break}v-=o.y,C+=o.y,c&&(f=v*c,b+=o.X/2),v<0&&(d="s",v=0);break;case"w":if(o.x<=0&&(b<=D||c&&(C<=$||k>=M))){L=!1;break}f-=o.x,b+=o.x,c&&(v=f/c,C+=o.Y/2),f<0&&(d="e",f=0);break;case"s":if(o.y>=0&&(k>=M||c&&(b<=D||B>=I))){L=!1;break}v+=o.y,c&&(f=v*c,b-=o.X/2),v<0&&(d="n",v=0);break;case"ne":if(c){if(o.y<=0&&(C<=$||B>=I)){L=!1;break}v-=o.y,C+=o.y,f=v*c}else o.x>=0?B<I?f+=o.x:o.y<=0&&C<=$&&(L=!1):f+=o.x,o.y<=0?C>$&&(v-=o.y,C+=o.y):(v-=o.y,C+=o.y);f<0&&v<0?(d="sw",v=0,f=0):f<0?(d="nw",f=0):v<0&&(d="se",v=0);break;case"nw":if(c){if(o.y<=0&&(C<=$||b<=D)){L=!1;break}v-=o.y,C+=o.y,f=v*c,b+=o.X}else o.x<=0?b>D?(f-=o.x,b+=o.x):o.y<=0&&C<=$&&(L=!1):(f-=o.x,b+=o.x),o.y<=0?C>$&&(v-=o.y,C+=o.y):(v-=o.y,C+=o.y);f<0&&v<0?(d="se",v=0,f=0):f<0?(d="ne",f=0):v<0&&(d="sw",v=0);break;case"sw":if(c){if(o.x<=0&&(b<=D||k>=M)){L=!1;break}f-=o.x,b+=o.x,v=f/c}else o.x<=0?b>D?(f-=o.x,b+=o.x):o.y>=0&&k>=M&&(L=!1):(f-=o.x,b+=o.x),o.y>=0?k<M&&(v+=o.y):v+=o.y;f<0&&v<0?(d="ne",v=0,f=0):f<0?(d="se",f=0):v<0&&(d="nw",v=0);break;case"se":if(c){if(o.x>=0&&(B>=I||k>=M)){L=!1;break}f+=o.x,v=f/c}else o.x>=0?B<I?f+=o.x:o.y>=0&&k>=M&&(L=!1):f+=o.x,o.y>=0?k<M&&(v+=o.y):v+=o.y;f<0&&v<0?(d="nw",v=0,f=0):f<0?(d="sw",f=0):v<0&&(d="ne",v=0);break;case"move":this.move(o.x,o.y),L=!1;break;case"zoom":this.zoom((a=x(this.startX-this.startX2),s=x(this.startY-this.startY2),n=x(this.endX-this.endX2),r=x(this.endY-this.endY2),h=y(a*a+s*s),(y(n*n+r*r)-h)/h),i),this.startX2=this.endX2,this.startY2=this.endY2,L=!1;break;case"crop":if(!o.x||!o.y){L=!1;break}e=this.$cropper.offset(),b=this.startX-e.left,C=this.startY-e.top,f=m.minWidth,v=m.minHeight,o.x>0?d=o.y>0?"se":"ne":o.x<0&&(b-=f,d=o.y>0?"sw":"nw"),o.y<0&&(C-=v),this.isCropped||(this.$cropBox.removeClass(p),this.isCropped=!0,this.limited&&this.limitCropBox(!0,!0))}L&&(m.width=f,m.height=v,m.left=b,m.top=C,this.action=d,this.renderCropBox()),this.startX=this.endX,this.startY=this.endY},crop:function(){this.isBuilt&&!this.isDisabled&&(this.isCropped||(this.isCropped=!0,this.limitCropBox(!0,!0),this.options.modal&&this.$dragBox.addClass("cropper-modal"),this.$cropBox.removeClass(p)),this.setCropBoxData(this.initialCropBox))},reset:function(){this.isBuilt&&!this.isDisabled&&(this.image=t.extend({},this.initialImage),this.canvas=t.extend({},this.initialCanvas),this.cropBox=t.extend({},this.initialCropBox),this.renderCanvas(),this.isCropped&&this.renderCropBox())},clear:function(){this.isCropped&&!this.isDisabled&&(t.extend(this.cropBox,{left:0,top:0,width:0,height:0}),this.isCropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),this.$dragBox.removeClass("cropper-modal"),this.$cropBox.addClass(p))},replace:function(t,i){!this.isDisabled&&t&&(this.isImg&&this.$element.attr("src",t),i?(this.url=t,this.$clone.attr("src",t),this.isBuilt&&this.$preview.find("img").add(this.$clone2).attr("src",t)):(this.isImg&&(this.isReplaced=!0),this.options.data=null,this.load(t)))},enable:function(){this.isBuilt&&(this.isDisabled=!1,this.$cropper.removeClass("cropper-disabled"))},disable:function(){this.isBuilt&&(this.isDisabled=!0,this.$cropper.addClass("cropper-disabled"))},destroy:function(){var t=this.$element;this.isLoaded?(this.isImg&&this.isReplaced&&t.attr("src",this.originalUrl),this.unbuild(),t.removeClass(p)):this.isImg?t.off("load.cropper",this.start):this.$clone&&this.$clone.remove(),t.removeData("cropper")},move:function(t,i){var e=this.canvas;this.moveTo(M(t)?t:e.left+v(t),M(i)?i:e.top+v(i))},moveTo:function(t,i){var e=this.canvas,o=!1;M(i)&&(i=t),t=v(t),i=v(i),this.isBuilt&&!this.isDisabled&&this.options.movable&&(I(t)&&(e.left=t,o=!0),I(i)&&(e.top=i,o=!0),o&&this.renderCanvas(!0))},zoom:function(t,i){var e=this.canvas;t=(t=v(t))<0?1/(1-t):1+t,this.zoomTo(e.width*t/e.naturalWidth,i)},zoomTo:function(i,e){var o,a,s,n,r,h,p,l,c,d=this.options,u=this.canvas,g=u.width,m=u.height,f=u.naturalWidth,w=u.naturalHeight;if((i=v(i))>=0&&this.isBuilt&&!this.isDisabled&&d.zoomable){if(a=f*i,s=w*i,e&&(o=e.originalEvent),this.trigger("zoom.cropper",{originalEvent:o,oldRatio:g/f,ratio:a/f}).isDefaultPrevented())return;o?(n=this.$cropper.offset(),r=o.touches?(h=o.touches,p=h.length,l=0,c=0,p&&(t.each(h,function(t,i){l+=i.pageX,c+=i.pageY}),l/=p,c/=p),{pageX:l,pageY:c}):{pageX:e.pageX||o.pageX||0,pageY:e.pageY||o.pageY||0},u.left-=(a-g)*((r.pageX-n.left-u.left)/g),u.top-=(s-m)*((r.pageY-n.top-u.top)/m)):(u.left-=(a-g)/2,u.top-=(s-m)/2),u.width=a,u.height=s,this.renderCanvas(!0)}},rotate:function(t){this.rotateTo((this.image.rotate||0)+v(t))},rotateTo:function(t){I(t=v(t))&&this.isBuilt&&!this.isDisabled&&this.options.rotatable&&(this.image.rotate=t%360,this.isRotated=!0,this.renderCanvas(!0))},scale:function(t,i){var e=this.image,o=!1;M(i)&&(i=t),t=v(t),i=v(i),this.isBuilt&&!this.isDisabled&&this.options.scalable&&(I(t)&&(e.scaleX=t,o=!0),I(i)&&(e.scaleY=i,o=!0),o&&this.renderImage(!0))},scaleX:function(t){var i=this.image.scaleY;this.scale(t,I(i)?i:1)},scaleY:function(t){var i=this.image.scaleX;this.scale(I(i)?i:1,t)},getData:function(i){var e,o,a=this.options,s=this.image,n=this.canvas,r=this.cropBox;return this.isBuilt&&this.isCropped?(o={x:r.left-n.left,y:r.top-n.top,width:r.width,height:r.height},e=s.width/s.naturalWidth,t.each(o,function(t,a){a/=e,o[t]=i?k(a):a})):o={x:0,y:0,width:0,height:0},a.rotatable&&(o.rotate=s.rotate||0),a.scalable&&(o.scaleX=s.scaleX||1,o.scaleY=s.scaleY||1),o},setData:function(i){var e,o,a,s=this.options,n=this.image,r=this.canvas,h={};t.isFunction(i)&&(i=i.call(this.element)),this.isBuilt&&!this.isDisabled&&t.isPlainObject(i)&&(s.rotatable&&I(i.rotate)&&i.rotate!==n.rotate&&(n.rotate=i.rotate,this.isRotated=e=!0),s.scalable&&(I(i.scaleX)&&i.scaleX!==n.scaleX&&(n.scaleX=i.scaleX,o=!0),I(i.scaleY)&&i.scaleY!==n.scaleY&&(n.scaleY=i.scaleY,o=!0)),e?this.renderCanvas():o&&this.renderImage(),a=n.width/n.naturalWidth,I(i.x)&&(h.left=i.x*a+r.left),I(i.y)&&(h.top=i.y*a+r.top),I(i.width)&&(h.width=i.width*a),I(i.height)&&(h.height=i.height*a),this.setCropBoxData(h))},getContainerData:function(){return this.isBuilt?this.container:{}},getImageData:function(){return this.isLoaded?this.image:{}},getCanvasData:function(){var i=this.canvas,e={};return this.isBuilt&&t.each(["left","top","width","height","naturalWidth","naturalHeight"],function(t,o){e[o]=i[o]}),e},setCanvasData:function(i){var e=this.canvas,o=e.aspectRatio;t.isFunction(i)&&(i=i.call(this.$element)),this.isBuilt&&!this.isDisabled&&t.isPlainObject(i)&&(I(i.left)&&(e.left=i.left),I(i.top)&&(e.top=i.top),I(i.width)?(e.width=i.width,e.height=i.width/o):I(i.height)&&(e.height=i.height,e.width=i.height*o),this.renderCanvas(!0))},getCropBoxData:function(){var t,i=this.cropBox;return this.isBuilt&&this.isCropped&&(t={left:i.left,top:i.top,width:i.width,height:i.height}),t||{}},setCropBoxData:function(i){var e,o,a=this.cropBox,s=this.options.aspectRatio;t.isFunction(i)&&(i=i.call(this.$element)),this.isBuilt&&this.isCropped&&!this.isDisabled&&t.isPlainObject(i)&&(I(i.left)&&(a.left=i.left),I(i.top)&&(a.top=i.top),I(i.width)&&(e=!0,a.width=i.width),I(i.height)&&(o=!0,a.height=i.height),s&&(e?a.height=a.width/s:o&&(a.width=a.height*s)),this.renderCropBox())},getCroppedCanvas:function(i){var e,o,a,s,n,r,h,p,l,c,d;if(this.isBuilt&&this.isCropped&&m)return t.isPlainObject(i)||(i={}),d=this.getData(),e=d.width,o=d.height,p=e/o,t.isPlainObject(i)&&(n=i.width,r=i.height,n?(r=n/p,h=n/e):r&&(n=r*p,h=r/o)),a=D(n||e),s=D(r||o),(l=t("<canvas>")[0]).width=a,l.height=s,c=l.getContext("2d"),i.fillColor&&(c.fillStyle=i.fillColor,c.fillRect(0,0,a,s)),c.drawImage.apply(c,function(){var i,a,s,n,r,p,l=function(i,e){var o,a,s,n=t("<canvas>")[0],r=n.getContext("2d"),h=0,p=0,l=e.naturalWidth,c=e.naturalHeight,d=e.rotate,u=e.scaleX,g=e.scaleY,m=I(u)&&I(g)&&(1!==u||1!==g),f=I(d)&&0!==d,v=f||m,w=l*x(u||1),b=c*x(g||1);return m&&(o=w/2,a=b/2),f&&(s=X({width:w,height:b,degree:d}),w=s.width,b=s.height,o=w/2,a=b/2),n.width=w,n.height=b,v&&(h=-l/2,p=-c/2,r.save(),r.translate(o,a)),f&&r.rotate(d*Math.PI/180),m&&r.scale(u,g),r.drawImage(i,D(h),D(p),D(l),D(c)),v&&r.restore(),n}(this.$clone[0],this.image),c=l.width,u=l.height,g=this.canvas,m=[l],f=d.x+g.naturalWidth*(x(d.scaleX||1)-1)/2,v=d.y+g.naturalHeight*(x(d.scaleY||1)-1)/2;return f<=-e||f>c?f=i=s=r=0:f<=0?(s=-f,i=r=w(c,e+(f=0))):f<=c&&(s=0,i=r=w(e,c-f)),i<=0||v<=-o||v>u?v=a=n=p=0:v<=0?(n=-v,a=p=w(u,o+(v=0))):v<=u&&(n=0,a=p=w(o,u-v)),m.push(D(f),D(v),D(i),D(a)),h&&(s*=h,n*=h,r*=h,p*=h),r>0&&p>0&&m.push(D(s),D(n),D(r),D(p)),m}.call(this)),l},setAspectRatio:function(t){var i=this.options;this.isDisabled||M(t)||(i.aspectRatio=b(0,t)||NaN,this.isBuilt&&(this.initCropBox(),this.isCropped&&this.renderCropBox()))},setDragMode:function(t){var i,e,o=this.options;this.isLoaded&&!this.isDisabled&&(i="crop"===t,e=o.movable&&"move"===t,t=i||e?t:"none",this.$dragBox.data("action",t).toggleClass("cropper-crop",i).toggleClass("cropper-move",e),o.cropBoxMovable||this.$face.data("action",t).toggleClass("cropper-crop",i).toggleClass("cropper-move",e))}},H.DEFAULTS={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},H.setDefaults=function(i){t.extend(H.DEFAULTS,i)},H.TEMPLATE='<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>',H.other=t.fn.cropper,t.fn.cropper=function(i){var e,o=L(arguments,1);return this.each(function(){var a,s,n=t(this),r=n.data("cropper");if(!r){if(/destroy/.test(i))return;a=t.extend({},n.data(),t.isPlainObject(i)&&i),n.data("cropper",r=new H(this,a))}"string"==typeof i&&t.isFunction(s=r[i])&&(e=s.apply(r,o))}),M(e)?this:e},t.fn.cropper.Constructor=H,t.fn.cropper.setDefaults=H.setDefaults,t.fn.cropper.noConflict=function(){return t.fn.cropper=H.other,this}})?o.apply(i,a):o)||(t.exports=s)},354:function(t,i,e){"use strict";e.r(i);var o,a,s=e(0),n=e.n(s),r=(e(1193),e(5)),h=e.n(r);function p(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}window.gl||(window.gl={}),o=/^.*[\\\/]/,a=function(){function t(i){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.filename,a=e.previewImage,s=e.modalCrop,r=e.pickImageEl,p=e.uploadImageBtn,l=e.modalCropImg,c=e.exportWidth,d=void 0===c?200:c,u=e.exportHeight,g=void 0===u?200:u,m=e.cropBoxWidth,f=void 0===m?200:m,v=e.cropBoxHeight,w=void 0===v?200:v;!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.onUploadImageBtnClick=this.onUploadImageBtnClick.bind(this),this.onModalHide=this.onModalHide.bind(this),this.onModalShow=this.onModalShow.bind(this),this.onPickImageClick=this.onPickImageClick.bind(this),this.fileInput=n()(i),this.modalCropImg=h.a.isString(this.modalCropImg)?n()(this.modalCropImg):this.modalCropImg,this.fileInput.attr("name","".concat(this.fileInput.attr("name"),"-trigger")).attr("id","".concat(this.fileInput.attr("id"),"-trigger")),this.exportWidth=d,this.exportHeight=g,this.cropBoxWidth=f,this.cropBoxHeight=w,this.form=this.fileInput.parents("form"),this.filename=o,this.previewImage=a,this.modalCrop=s,this.pickImageEl=r,this.uploadImageBtn=p,this.modalCropImg=l,this.filename=this.getElement(o),this.previewImage=this.getElement(a),this.pickImageEl=this.getElement(r),this.modalCrop=h.a.isString(s)?n()(s):s,this.uploadImageBtn=h.a.isString(p)?n()(p):p,this.modalCropImg=h.a.isString(l)?n()(l):l,this.cropActionsBtn=this.modalCrop.find("[data-method]"),this.bindEvents()}var i,e,a;return i=t,(e=[{key:"getElement",value:function(t){return n()(t,this.form)}},{key:"bindEvents",value:function(){var t;return t=this,this.fileInput.on("change",function(i){t.onFileInputChange(i,this),this.value=null}),this.pickImageEl.on("click",this.onPickImageClick),this.modalCrop.on("shown.bs.modal",this.onModalShow),this.modalCrop.on("hidden.bs.modal",this.onModalHide),this.uploadImageBtn.on("click",this.onUploadImageBtnClick),this.cropActionsBtn.on("click",function(i){return this,t.onActionBtnClick(this)}),this.croppedImageBlob=null}},{key:"onPickImageClick",value:function(){return this.fileInput.trigger("click")}},{key:"onModalShow",value:function(){var t;return t=this,this.modalCropImg.cropper({viewMode:1,center:!1,aspectRatio:1,modal:!0,scalable:!1,rotatable:!0,checkOrientation:!0,zoomable:!0,dragMode:"move",guides:!1,zoomOnTouch:!1,zoomOnWheel:!1,cropBoxMovable:!1,cropBoxResizable:!1,toggleDragModeOnDblclick:!1,built:function(){var i=n()(this),e=i.cropper("getContainerData"),o=t,a=o.cropBoxWidth,s=o.cropBoxHeight;return i.cropper("setCropBoxData",{width:a,height:s,left:(e.width-a)/2,top:(e.height-s)/2})}})}},{key:"onModalHide",value:function(){return this.modalCropImg.attr("src","").cropper("destroy")}},{key:"onUploadImageBtnClick",value:function(t){return t.preventDefault(),this.setBlob(),this.setPreview(),this.modalCrop.modal("hide"),this.fileInput.val("")}},{key:"onActionBtnClick",value:function(t){var i;if(i=n()(t).data(),this.modalCropImg.data("cropper")&&i.method)return this.modalCropImg.cropper(i.method,i.option)}},{key:"onFileInputChange",value:function(t,i){return this.readFile(i)}},{key:"readFile",value:function(t){var i,e;return i=this,(e=new FileReader).onload=function(){return i.modalCropImg.attr("src",e.result),i.modalCrop.modal("show")},e.readAsDataURL(t.files[0])}},{key:"dataURLtoBlob",value:function(t){var i,e,o,a;for(i=[],o=0,a=(e=atob(t.split(",")[1])).length;o<a;o+=1)e[o],i.push(e.charCodeAt(o));return new Blob([new Uint8Array(i)],{type:"image/png"})}},{key:"setPreview",value:function(){var t;return this.previewImage.attr("src",this.dataURL),t=this.fileInput.val().replace(o,""),this.filename.text(t)}},{key:"setBlob",value:function(){return this.dataURL=this.modalCropImg.cropper("getCroppedCanvas",{width:200,height:200}).toDataURL("image/png"),this.croppedImageBlob=this.dataURLtoBlob(this.dataURL)}},{key:"getBlob",value:function(){return this.croppedImageBlob}}])&&p(i.prototype,e),a&&p(i,a),t}(),n.a.fn.glCrop=function(t){return this.each(function(){return n()(this).data("glcrop",new a(this,t))})};var l=e(6),c=e(7),d=e(13);function u(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var g=function(){function t(){var i=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).form;!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.onSubmitForm=this.onSubmitForm.bind(this),this.form=i||n()(".edit-user"),this.setRepoRadio(),this.bindEvents(),this.initAvatarGlCrop()}var i,e,o;return i=t,(e=[{key:"initAvatarGlCrop",value:function(){this.avatarGlCrop=n()(".js-user-avatar-input").glCrop({filename:".js-avatar-filename",previewImage:".avatar-image .avatar",modalCrop:".modal-profile-crop",pickImageEl:".js-choose-user-avatar-button",uploadImageBtn:".js-upload-user-avatar",modalCropImg:".modal-profile-crop-image"}).data("glcrop")}},{key:"bindEvents",value:function(){n()(".js-preferences-form").on("change.preference","input[type=radio]",this.submitForm),n()("#user_notification_email").on("change",this.submitForm),n()("#user_notified_of_own_activity").on("change",this.submitForm),this.form.on("submit",this.onSubmitForm)}},{key:"submitForm",value:function(){return n()(this).parents("form").submit()}},{key:"onSubmitForm",value:function(t){return t.preventDefault(),this.saveForm()}},{key:"saveForm",value:function(){var t=this,i=this,e=new FormData(this.form.get(0)),o=this.avatarGlCrop.getBlob();null!=o&&e.append("user[avatar]",o,"avatar.png"),e.delete("user[avatar]-trigger"),Object(l.a)({method:this.form.attr("method"),url:this.form.attr("action"),data:e}).then(function(i){var e=i.data;null!=o&&t.updateHeaderAvatar(),Object(c.a)(e.message,"notice")}).then(function(){window.scrollTo(0,0),i.form.find(":input[disabled]").enable()}).catch(function(t){return Object(c.a)(t.message)})}},{key:"updateHeaderAvatar",value:function(){n()(".header-user-avatar").attr("src",this.avatarGlCrop.dataURL)}},{key:"setRepoRadio",value:function(){var t=n()('input[name="user[multi_file]"]');Object(d.A)(this.newRepoActivated)?t.filter("[value=on]").prop("checked",!0):t.filter("[value=off]").prop("checked",!0)}}])&&u(i.prototype,e),o&&u(i,o),t}();document.addEventListener("DOMContentLoaded",function(){n()(document).on("input.ssh_key","#key_key",function(){var t=n()("#key_title"),i=n()(this).val().match(/^\S+ \S+ (.+)\n?$/);i&&i.length>1&&t.val(i[1]).change()}),new g})}}]);
//# sourceMappingURL=commons~pages.profiles~pages.profiles.accounts.show~pages.profiles.index~pages.profiles.keys~pages.p~f2a26ee8.2461c9cf.chunk.js.map