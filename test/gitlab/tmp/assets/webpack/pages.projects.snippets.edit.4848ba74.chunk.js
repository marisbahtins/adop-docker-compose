(this.webpackJsonp=this.webpackJsonp||[]).push([[169],{111:function(e,t){Mousetrap=function(e){var t=e,n=t.stopCallback,r=!0;return t.stopCallback=function(e,t,a){return!r||n(e,t,a)},t.pause=function(){r=!1},t.unpause=function(){r=!0},t}(Mousetrap)},1370:function(e,t,n){n(42),n(44),e.exports=n(1371)},1371:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(297),i=n(365);document.addEventListener("DOMContentLoaded",function(){Object(o.a)(),Object(i.a)(a()(".snippet-form"))})},27:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(2),a=n.n(r),o=n(4),i=n(43);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=c(this,u(t).call(this)),a.a.bind("g p",function(){return Object(o.a)(".shortcuts-project")}),a.a.bind("g v",function(){return Object(o.a)(".shortcuts-project-activity")}),a.a.bind("g r",function(){return Object(o.a)(".shortcuts-project-releases")}),a.a.bind("g f",function(){return Object(o.a)(".shortcuts-tree")}),a.a.bind("g c",function(){return Object(o.a)(".shortcuts-commits")}),a.a.bind("g j",function(){return Object(o.a)(".shortcuts-builds")}),a.a.bind("g n",function(){return Object(o.a)(".shortcuts-network")}),a.a.bind("g d",function(){return Object(o.a)(".shortcuts-repository-charts")}),a.a.bind("g i",function(){return Object(o.a)(".shortcuts-issues")}),a.a.bind("g b",function(){return Object(o.a)(".shortcuts-issue-boards")}),a.a.bind("g m",function(){return Object(o.a)(".shortcuts-merge_requests")}),a.a.bind("g w",function(){return Object(o.a)(".shortcuts-wiki")}),a.a.bind("g s",function(){return Object(o.a)(".shortcuts-snippets")}),a.a.bind("g k",function(){return Object(o.a)(".shortcuts-kubernetes")}),a.a.bind("g e",function(){return Object(o.a)(".shortcuts-environments")}),a.a.bind("g l",function(){return Object(o.a)(".shortcuts-metrics")}),a.a.bind("i",function(){return Object(o.a)(".shortcuts-new-issue")}),e.enabledHelp.push(".hidden-shortcut.project"),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,i["a"]),t}()},28:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(12),i=n(31);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.projectSelectInput=a()(t),this.newItemBtn=a()(".new-project-item-link"),this.resourceType=this.newItemBtn.data("type"),this.resourceLabel=this.newItemBtn.data("label"),this.formattedText=this.deriveTextVariants(),this.groupId=this.projectSelectInput.data("groupId"),this.bindEvents(),this.initLocalStorage()}var t,n,r;return t=e,(n=[{key:"bindEvents",value:function(){var e=this;this.projectSelectInput.siblings(".new-project-item-select-button").on("click",function(t){return e.openDropdown(t)}),this.newItemBtn.on("click",function(t){e.getProjectFromLocalStorage()||(t.preventDefault(),e.openDropdown(t))}),this.projectSelectInput.on("change",function(){return e.selectProject()})}},{key:"initLocalStorage",value:function(){i.a.isLocalStorageAccessSafe()&&(this.localStorageKey=["group",this.groupId,this.formattedText.localStorageItemType,"recent-project"].join("-"),this.setBtnTextFromLocalStorage())}},{key:"openDropdown",value:function(e){a()(e.currentTarget).siblings(".project-item-select").select2("open")}},{key:"selectProject",value:function(){var e=JSON.parse(this.projectSelectInput.val()),t={url:"".concat(e.url,"/").concat(this.projectSelectInput.data("relativePath")),name:e.name};this.setNewItemBtnAttributes(t),this.setProjectInLocalStorage(t)}},{key:"setBtnTextFromLocalStorage",value:function(){var e=this.getProjectFromLocalStorage();this.setNewItemBtnAttributes(e)}},{key:"setNewItemBtnAttributes",value:function(e){e?(this.newItemBtn.attr("href",e.url),this.newItemBtn.text("".concat(this.formattedText.defaultTextPrefix," in ").concat(e.name))):this.newItemBtn.text("Select project to create ".concat(this.formattedText.presetTextSuffix))}},{key:"getProjectFromLocalStorage",value:function(){var e=localStorage.getItem(this.localStorageKey);return JSON.parse(e)}},{key:"setProjectInLocalStorage",value:function(e){var t=JSON.stringify(e);localStorage.setItem(this.localStorageKey,t)}},{key:"deriveTextVariants",value:function(){var e=this.resourceLabel;return{localStorageItemType:"new-".concat(this.resourceType.split("_").join("-").slice(0,-1)),defaultTextPrefix:e,presetTextSuffix:this.resourceType.split("_").join(" ").slice(0,-1)}}}])&&s(t.prototype,n),r&&s(t,r),e}();function u(){a()(".ajax-project-select").each(function(e,t){var n,r,i=a()(t).data("simpleFilter")||!1;return this.groupId=a()(t).data("groupId"),this.includeGroups=a()(t).data("includeGroups"),this.allProjects=a()(t).data("allProjects")||!1,this.orderBy=a()(t).data("orderBy")||"id",this.withIssuesEnabled=a()(t).data("withIssuesEnabled"),this.withMergeRequestsEnabled=a()(t).data("withMergeRequestsEnabled"),this.withShared=void 0===a()(t).data("withShared")||a()(t).data("withShared"),this.includeProjectsInSubgroups=a()(t).data("includeProjectsInSubgroups")||!1,this.allowClear=a()(t).data("allowClear")||!1,n="Search for project",this.includeGroups&&(n+=" or group"),a()(t).select2({placeholder:n,minimumInputLength:0,query:(r=this,function(e){var t,n;return t=function(t){var n;return n={results:t},e.callback(n)},n=r.includeGroups?function(n){var r;return r=function(e){var r;return r=e.concat(n),t(r)},o.a.groups(e.term,{},r)}:t,r.groupId?o.a.groupProjects(r.groupId,e.term,{with_issues_enabled:r.withIssuesEnabled,with_merge_requests_enabled:r.withMergeRequestsEnabled,with_shared:r.withShared,include_subgroups:r.includeProjectsInSubgroups},n):o.a.projects(e.term,{order_by:r.orderBy,with_issues_enabled:r.withIssuesEnabled,with_merge_requests_enabled:r.withMergeRequestsEnabled,membership:!r.allProjects},n)}),id:function(e){return i?e.id:JSON.stringify({name:e.name,url:e.web_url})},text:function(e){return e.name_with_namespace||e.name},initSelection:function(e,t){return o.a.project(e.val()).then(function(e){var n=e.data;return t(n)})},allowClear:this.allowClear,dropdownCssClass:"ajax-project-dropdown"}),i?t:new c(t)})}n.d(t,"a",function(){return u})},29:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(0),a=n.n(r),o=n(14),i=n.n(o),s=n(1),c=n(19),u=n(6),l=n(7),d=n(28);function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=a()("ul.clone-options-dropdown"),n=a()("#project_clone"),r=a()(".js-git-clone-holder .js-clone-dropdown-label"),o=document.querySelector(".js-mobile-git-clone .js-clone-dropdown-label"),s=r.text().trim();s.length>0&&a()("a:contains('".concat(s,"')"),t).addClass("is-active"),a()("a",t).on("click",function(e){e.preventDefault();var r=a()(e.currentTarget),i=r.attr("href"),s=r.data("cloneType");a()(".is-active",t).removeClass("is-active"),a()('a[data-clone-type="'.concat(s,'"]')).each(function(){var e=a()(this),t=e.find(".dropdown-menu-inner-title").text(),n=e.closest(".project-clone-holder").find(".js-clone-dropdown-label");e.toggleClass("is-active"),n.text(t)}),o?o.dataset.clipboardText=i:n.val(i),a()(".js-git-empty .js-clone").text(i)}),e.initRefSwitcher(),a()(".project-refs-select").on("change",function(){return a()(this).parents("form").submit()}),a()(".hide-no-ssh-message").on("click",function(e){return i.a.set("hide_no_ssh_message","false"),a()(this).parents(".no-ssh-key-message").remove(),e.preventDefault()}),a()(".hide-no-password-message").on("click",function(e){return i.a.set("hide_no_password_message","false"),a()(this).parents(".no-password-message").remove(),e.preventDefault()}),a()(".hide-auto-devops-implicitly-enabled-banner").on("click",function(e){var t=a()(this).data("project-id"),n="hide_auto_devops_implicitly_enabled_banner_".concat(t);return i.a.set(n,"false"),a()(this).parents(".auto-devops-implicitly-enabled-banner").remove(),e.preventDefault()}),e.projectSelectDropdown()}var t,n,r;return t=e,r=[{key:"projectSelectDropdown",value:function(){Object(d.a)(),a()(".project-item-select").on("click",function(t){return e.changeProject(a()(t.currentTarget).val())})}},{key:"changeProject",value:function(e){return window.location=e}},{key:"initRefSwitcher",value:function(){var e=document.createElement("li"),t=document.createElement("a");return t.href="#",a()(".js-project-refs-dropdown").each(function(){var n,r;return n=a()(this),r=n.data("selected"),n.glDropdown({data:function(e,t){u.a.get(n.data("refsUrl"),{params:{ref:n.data("ref"),search:e}}).then(function(e){var n=e.data;return t(n)}).catch(function(){return Object(l.a)(Object(s.a)("An error occurred while getting projects"))})},selectable:!0,filterable:!0,filterRemote:!0,filterByText:!0,inputFieldName:n.data("inputFieldName"),fieldName:n.data("fieldName"),renderRow:function(n){var a=e.cloneNode(!1);if(null!=n.header)a.className="dropdown-header",a.textContent=n.header;else{var o=t.cloneNode(!1);n===r&&(o.className="is-active"),o.textContent=n,o.dataset.ref=n,a.appendChild(o)}return a},id:function(e,t){return t.attr("data-ref")},toggleLabel:function(e,t){return t.text().trim()},clicked:function(e){if(e.e.preventDefault(),a()('input[name="ref"]').length){var t=n.closest("form"),r=n.data("visit"),o=!!r||r,i=t.attr("action"),s=-1===i.indexOf("?")?"?":"&";o&&Object(c.g)("".concat(i).concat(s).concat(t.serialize()))}}})})}}],(n=null)&&f(t.prototype,n),r&&f(t,r),e}()},297:function(e,t,n){"use strict";var r=n(0),a=n.n(r);t.a=function(){var e=ace.edit("editor");a()(".snippet-form-holder form").on("submit",function(){a()(".snippet-file-content").val(e.getValue())})}},365:function(e,t,n){"use strict";var r=n(85),a=n(79);t.a=function(e){new r.a,new a.a(e)}},44:function(e,t,n){"use strict";n.r(t);var r=n(38),a=n(36),o=n(29),i=n(27);document.addEventListener("DOMContentLoaded",function(){var e=document.body.dataset.page;if(["projects:clusters:new","projects:clusters:create_gcp","projects:clusters:create_user"].indexOf(e)>-1){var t=document.querySelector(".gcp-signup-offer");t&&new a.a(t),Object(r.a)()}new o.a,new i.a})},79:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(62),i=n.n(o),s=n(66),c=n(32),u=n.n(c),l=n(5),d=n.n(l),f=(n(173),n(75)),p=n(6);function h(e){var t,n,r,o,i,s,c,l=e.find(".button-attach-file"),h=e.find(".attaching-file-message"),v=e.find(".button-cancel-uploading-files"),m=e.find(".retry-uploading-link"),g=e.find(".uploading-progress"),b=e.find(".uploading-error-container"),w=e.find(".uploading-error-message"),j=e.find(".uploading-progress-container"),y=e.data("uploads-path")||window.uploads_path||null,x=gon.max_file_size||10,k=e.find(".js-gfm-input");k.wrap('<div class="div-dropzone"></div>'),k.on("paste",function(e){return t(e)});var _=k.closest(".md-area");e.setupMarkdownPreview();var C=e.find(".div-dropzone");if(C.parent().addClass("div-dropzone-wrapper"),C.append('<div class="div-dropzone-hover"></div>'),C.find(".div-dropzone-hover").append('<i class="fa fa-paperclip div-dropzone-icon"></i>'),!y)return C.addClass("js-invalid-dropzone"),null;var S=C.dropzone({url:y,dictDefaultMessage:"",clickable:!0,paramName:"file",maxFilesize:x,uploadMultiple:!1,headers:f.a.headers,previewContainer:!1,processing:function(){return a()(".div-dropzone-alert").alert("close")},dragover:function(){_.addClass("is-dropzone-hover"),e.find(".div-dropzone-hover").css("opacity",.7)},dragleave:function(){_.removeClass("is-dropzone-hover"),e.find(".div-dropzone-hover").css("opacity",0)},drop:function(){_.removeClass("is-dropzone-hover"),e.find(".div-dropzone-hover").css("opacity",0),k.focus()},success:function(e,t){var a=this.getQueuedFiles().length+this.getUploadingFiles().length,o=a>=1;n(t.link.markdown,o),a||l.removeClass("hide"),r(t.link.url)},error:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Attaching the file failed.",r=arguments.length>2?arguments[2]:void 0,a=!(t=n||r.responseText)||d.a.isString(t)?t:t.message;b.removeClass("hide"),w.html(a),l.addClass("hide"),v.addClass("hide")},totaluploadprogress:function(e){o(this.files,h),g.text("".concat(Math.round(e),"%"))},sending:function(){l.addClass("hide"),b.addClass("hide"),j.removeClass("hide"),v.removeClass("hide")},removedfile:function(){l.removeClass("hide"),v.addClass("hide"),j.addClass("hide"),b.addClass("hide")},queuecomplete:function(){a()(".dz-preview").remove(),a()(".markdown-area").trigger("input"),j.addClass("hide"),v.addClass("hide")}}),O=a()(S[0]).children("textarea");v.on("click",function(e){e.preventDefault(),e.stopPropagation(),u.a.forElement(C.get(0)).removeAllFiles(!0)}),m.on("click",function(e){var t=u.a.forElement(e.target.closest(".js-main-target-form").querySelector(".div-dropzone")),n=t.files;e.preventDefault(),t.removeAllFiles(!0),n.map(function(e){var n=e;return n.status===u.a.ERROR&&(n.status=void 0,n.accepted=void 0),t.addFile(n)})}),t=function(e){var t=e.originalEvent;if(t.clipboardData&&t.clipboardData.items){var r=i(t);if(r){e.preventDefault();var a=s(t)||"image.png",o="{{".concat(a,"}}");return n(o),c(r.getAsFile(),a)}}},i=function(e){for(var t=0;t<e.clipboardData.items.length;){var n=e.clipboardData.items[t];if(-1!==n.type.indexOf("image"))return n;t+=1}return!1},n=function(e,t){var n=e;t&&(n+="\n\n");var r=O.get(0),o=r.selectionStart,i=r.selectionEnd,s=a()(O).val().length,c=a()(O).val().substring(0,o),u=a()(O).val().substring(i,s);return a()(O).val(c+n+u),r.setSelectionRange(o+n.length,i+n.length),r.style.height="".concat(r.scrollHeight,"px"),k.get(0).dispatchEvent(new Event("input")),k.trigger("input")},r=function(t){a()(e).append('<input type="hidden" name="files[]" value="'.concat(d.a.escape(t),'">'))},s=function(e){var t;return window.clipboardData&&window.clipboardData.getData?t=window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData&&(t=e.clipboardData.getData("text/plain")),(t=t.split("\r"))[0]};var z=function(){return j.addClass("hide")};return c=function(t,n){var r=new FormData;r.append("file",t,n),j.removeClass("hide"),e.find(".div-dropzone-alert").alert("close"),p.a.post(y,r).then(function(e){var t=e.data.link.markdown;!function(e,t){var n=a()(O);n.val(function(n,r){return r.replace("{{".concat(e,"}}"),t)}),n.trigger("change")}(n,t),z()}).catch(function(e){var t;t=e.response.data.message,b.removeClass("hide"),w.html(t),z()})},o=function(e,t){var n,r=e.filter(function(e){return"uploading"===e.status||"queued"===e.status}).length;n=r>1?"Attaching ".concat(r," files -"):"Attaching a file -",t.text(n)},e.find(".markdown-selector").click(function(e){e.preventDefault(),a()(this).closest(".gfm-form").find(".div-dropzone").click(),k.focus()}),u.a.forElement(C.get(0))}u.a.autoDiscover=!1;var v=n(76);function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",function(){return g});var g=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.form=t,this.textarea=this.form.find("textarea.js-gfm-input"),this.enableGFM=Object.assign({},s.b,r);var a=gl.GfmAutoComplete&&gl.GfmAutoComplete.dataSources||{};Object.keys(this.enableGFM).forEach(function(e){"emojis"!==e&&(n.enableGFM[e]=!!a[e])}),this.destroy(),this.setupForm(),this.form.data("glForm",this)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.clearEventListeners(),this.autoComplete&&this.autoComplete.destroy(),this.form.data("glForm",null)}},{key:"setupForm",value:function(){var e=this.form.is(":not(.gfm-form)");this.form.removeClass("js-new-note-form"),e&&(this.form.find(".div-dropzone").remove(),this.form.addClass("gfm-form"),gl.utils.disableButtonIfEmptyField(this.form.find(".js-note-text"),this.form.find(".js-comment-button, .js-note-new-discussion")),this.autoComplete=new s.a(gl.GfmAutoComplete&&gl.GfmAutoComplete.dataSources),this.autoComplete.setup(this.form.find(".js-gfm-input"),this.enableGFM),h(this.form),i()(this.textarea)),this.addEventListeners(),Object(v.b)(this.form),this.form.show(),this.isAutosizeable&&this.setupAutosize()}},{key:"setupAutosize",value:function(){var e=this;this.textarea.off("autosize:resized").on("autosize:resized",this.setHeightData.bind(this)),this.textarea.off("mouseup.autosize").on("mouseup.autosize",this.destroyAutosize.bind(this)),setTimeout(function(){i()(e.textarea),e.textarea.css("resize","vertical")},0)}},{key:"setHeightData",value:function(){this.textarea.data("height",this.textarea.outerHeight())}},{key:"destroyAutosize",value:function(){var e=this.textarea.outerHeight();this.textarea.data("height")!==e&&(i.a.destroy(this.textarea),this.textarea.data("height",e),this.textarea.outerHeight(e),this.textarea.css("max-height",window.outerHeight))}},{key:"clearEventListeners",value:function(){this.textarea.off("focus"),this.textarea.off("blur"),Object(v.c)(this.form)}},{key:"addEventListeners",value:function(){this.textarea.on("focus",function(){a()(this).closest(".md-area").addClass("is-focused")}),this.textarea.on("blur",function(){a()(this).closest(".md-area").removeClass("is-focused")})}}])&&m(t.prototype,n),r&&m(t,r),e}()},85:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(0),a=n.n(r),o=(n(172),n(32)),i=n.n(o),s=n(2),c=n.n(s);n(111);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}i.a.autoDiscover=!1;var l=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.active_backdrop=null,this.active_textarea=null,a()(document).on("click",".js-zen-enter",function(e){return e.preventDefault(),a()(e.currentTarget).trigger("zen_mode:enter")}),a()(document).on("click",".js-zen-leave",function(e){return e.preventDefault(),a()(e.currentTarget).trigger("zen_mode:leave")}),a()(document).on("zen_mode:enter",(t=this,function(e){return t.enter(a()(e.target).closest(".md-area").find(".zen-backdrop"))})),a()(document).on("zen_mode:leave",function(e){return function(t){return e.exit()}}(this)),a()(document).on("keydown",function(e){if(27===e.keyCode)return e.preventDefault(),a()(document).trigger("zen_mode:leave")})}var t,n,r;return t=e,(n=[{key:"enter",value:function(e){c.a.pause(),this.active_backdrop=a()(e),this.active_backdrop.addClass("fullscreen"),this.active_textarea=this.active_backdrop.find("textarea"),this.active_textarea.removeAttr("style"),this.active_textarea.focus()}},{key:"exit",value:function(){if(this.active_textarea){c.a.unpause(),this.active_textarea.closest(".zen-backdrop").removeClass("fullscreen"),this.scrollTo(this.active_textarea),this.active_textarea=null,this.active_backdrop=null;var e=a()(".div-dropzone");e&&!e.hasClass("js-invalid-dropzone")&&i.a.forElement(".div-dropzone").enable()}}},{key:"scrollTo",value:function(e){return a.a.scrollTo(e,0,{offset:-150})}}])&&u(t.prototype,n),r&&u(t,r),e}()}},[[1370,1,0,2,3]]]);
//# sourceMappingURL=pages.projects.snippets.edit.4848ba74.chunk.js.map