(this.webpackJsonp=this.webpackJsonp||[]).push([[147],{1332:function(e,t,n){n(42),n(44),e.exports=n(1333)},1333:function(e,t,n){"use strict";n.r(t);var r=n(300);document.addEventListener("DOMContentLoaded",r.a)},300:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(11),i=n(78),l=n(326),s=n(5),c=n.n(s),u={props:{initialCronInterval:{type:String,required:!1,default:""}},data:function(){return{inputNameAttribute:"schedule[cron]",cronInterval:this.initialCronInterval,cronIntervalPresets:{everyDay:"0 4 * * *",everyWeek:"0 4 * * 0",everyMonth:"0 4 1 * *"},cronSyntaxUrl:"https://en.wikipedia.org/wiki/Cron",customInputEnabled:!1}},computed:{intervalIsPreset:function(){return c.a.contains(this.cronIntervalPresets,this.cronInterval)},isEditable:function(){return!(!this.customInputEnabled&&this.intervalIsPreset)}},watch:{cronInterval:function(){this.$nextTick(function(){gl.pipelineScheduleFieldErrors.updateFormValidityState()})}},created:function(){this.intervalIsPreset&&(this.enableCustomInput=!1)},methods:{toggleCustomInput:function(e){this.customInputEnabled=e,e&&(this.cronInterval="".concat(this.cronInterval," "))}}},d=n(3),v=Object(d.a)(u,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"interval-pattern-form-group"},[n("div",{staticClass:"cron-preset-radio-input"},[n("input",{staticClass:"label-bold",attrs:{id:"custom",name:e.inputNameAttribute,type:"radio"},domProps:{value:e.cronInterval,checked:e.isEditable},on:{click:function(t){e.toggleCustomInput(!0)}}}),e._v(" "),n("label",{attrs:{for:"custom"}},[e._v(" "+e._s(e.s__("PipelineSheduleIntervalPattern|Custom"))+" ")]),e._v(" "),n("span",{staticClass:"cron-syntax-link-wrap"},[e._v("\n      ("),n("a",{attrs:{href:e.cronSyntaxUrl,target:"_blank"}},[e._v(" "+e._s(e.__("Cron syntax"))+" ")]),e._v(")\n    ")])]),e._v(" "),n("div",{staticClass:"cron-preset-radio-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.cronInterval,expression:"cronInterval"}],staticClass:"label-bold",attrs:{id:"every-day",name:e.inputNameAttribute,type:"radio"},domProps:{value:e.cronIntervalPresets.everyDay,checked:e._q(e.cronInterval,e.cronIntervalPresets.everyDay)},on:{click:function(t){e.toggleCustomInput(!1)},change:function(t){e.cronInterval=e.cronIntervalPresets.everyDay}}}),e._v(" "),n("label",{staticClass:"label-bold",attrs:{for:"every-day"}},[e._v(" "+e._s(e.__("Every day (at 4:00am)"))+" ")])]),e._v(" "),n("div",{staticClass:"cron-preset-radio-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.cronInterval,expression:"cronInterval"}],staticClass:"label-bold",attrs:{id:"every-week",name:e.inputNameAttribute,type:"radio"},domProps:{value:e.cronIntervalPresets.everyWeek,checked:e._q(e.cronInterval,e.cronIntervalPresets.everyWeek)},on:{click:function(t){e.toggleCustomInput(!1)},change:function(t){e.cronInterval=e.cronIntervalPresets.everyWeek}}}),e._v(" "),n("label",{staticClass:"label-bold",attrs:{for:"every-week"}},[e._v("\n      "+e._s(e.__("Every week (Sundays at 4:00am)"))+"\n    ")])]),e._v(" "),n("div",{staticClass:"cron-preset-radio-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.cronInterval,expression:"cronInterval"}],staticClass:"label-bold",attrs:{id:"every-month",name:e.inputNameAttribute,type:"radio"},domProps:{value:e.cronIntervalPresets.everyMonth,checked:e._q(e.cronInterval,e.cronIntervalPresets.everyMonth)},on:{click:function(t){e.toggleCustomInput(!1)},change:function(t){e.cronInterval=e.cronIntervalPresets.everyMonth}}}),e._v(" "),n("label",{staticClass:"label-bold",attrs:{for:"every-month"}},[e._v("\n      "+e._s(e.__("Every month (on the 1st at 4:00am)"))+"\n    ")])]),e._v(" "),n("div",{staticClass:"cron-interval-input-wrapper"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.cronInterval,expression:"cronInterval"}],staticClass:"form-control inline cron-interval-input",attrs:{id:"schedule_cron",placeholder:e.__("Define a custom pattern with cron syntax"),name:e.inputNameAttribute,disabled:!e.isEditable,type:"text",required:"true"},domProps:{value:e.cronInterval},on:{input:function(t){t.target.composing||(e.cronInterval=t.target.value)}}})])])},[],!1,null,null,null);v.options.__file="interval_pattern_input.vue";var p=v.exports;function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$dropdown=a()(".js-timezone-dropdown"),this.$dropdownToggle=this.$dropdown.find(".dropdown-toggle-text"),this.$input=a()("#schedule_cron_timezone"),this.timezoneData=this.$dropdown.data("data"),this.initDefaultTimezone(),this.initDropdown()}var t,n,r;return t=e,(n=[{key:"initDropdown",value:function(){var e=this;this.$dropdown.glDropdown({data:this.timezoneData,filterable:!0,selectable:!0,toggleLabel:function(e){return e.name},search:{fields:["name"]},clicked:function(t){return e.updateInputValue(t)},text:function(t){return e.formatTimezone(t)}}),this.setDropdownToggle()}},{key:"formatUtcOffset",value:function(e){var t="";return e>0?t="+":e<0&&(t="-"),"".concat(t," ").concat(Math.abs(e/3600))}},{key:"formatTimezone",value:function(e){return"[UTC ".concat(this.formatUtcOffset(e.offset),"] ").concat(e.name)}},{key:"initDefaultTimezone",value:function(){this.$input.val()||this.$input.val("UTC")}},{key:"setDropdownToggle",value:function(){var e=this.$input.val();this.$dropdownToggle.text(e)}},{key:"updateInputValue",value:function(e){var t=e.selectedObj;e.e.preventDefault(),this.$input.val(t.identifier),gl.pipelineScheduleFieldErrors.updateFormValidityState()}}])&&f(t.prototype,n),r&&f(t,r),e}();function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$dropdown=a()(".js-target-branch-dropdown"),this.$dropdownToggle=this.$dropdown.find(".dropdown-toggle-text"),this.$input=a()("#schedule_ref"),this.initDefaultBranch(),this.initDropdown()}var t,n,r;return t=e,(n=[{key:"initDropdown",value:function(){var e=this;this.$dropdown.glDropdown({data:this.formatBranchesList(),filterable:!0,selectable:!0,toggleLabel:function(e){return e.name},search:{fields:["name"]},clicked:function(t){return e.updateInputValue(t)},text:function(e){return e.name}}),this.setDropdownToggle()}},{key:"formatBranchesList",value:function(){return this.$dropdown.data("data").map(function(e){return{name:e}})}},{key:"setDropdownToggle",value:function(){var e=this.$input.val();this.$dropdownToggle.text(e)}},{key:"initDefaultBranch",value:function(){var e=this.$input.val(),t=this.$dropdown.data("defaultBranch");e||this.$input.val(t)}},{key:"updateInputValue",value:function(e){var t=e.selectedObj;e.e.preventDefault(),this.$input.val(t.name),gl.pipelineScheduleFieldErrors.updateFormValidityState()}}])&&m(t.prototype,n),r&&m(t,r),e}(),g=n(324);o.default.use(i.a);t.a=function(){var e,t;e=document.getElementById("interval-pattern-input"),t=e?e.dataset.initialInterval:"",new o.default({el:e,components:{intervalPatternInput:p},render:function(e){return e("interval-pattern-input",{props:{initialCronInterval:t}})}});var n=document.getElementById("new-pipeline-schedule-form");gl.timezoneDropdown=new h,gl.targetBranchDropdown=new y,gl.pipelineScheduleFieldErrors=new l.a(n),Object(g.a)({container:a()(".js-ci-variable-list-section"),formField:"schedule"})}}},[[1332,1,0,2,9]]]);
//# sourceMappingURL=pages.projects.pipeline_schedules.create.3247f402.chunk.js.map