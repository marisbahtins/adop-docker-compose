{"version":3,"sources":["webpack:///./pages/projects/branches/new/index.js","webpack:///./behaviors/shortcuts/shortcuts_navigation.js","webpack:///./project_select_combo_button.js","webpack:///./project_select.js","webpack:///./pages/projects/project.js","webpack:///./ref_select_dropdown.js","webpack:///./pages/projects/index.js","webpack:///./new_branch_form.js"],"names":["__webpack_require__","r","__webpack_exports__","jquery__WEBPACK_IMPORTED_MODULE_0__","jquery__WEBPACK_IMPORTED_MODULE_0___default","n","_new_branch_form__WEBPACK_IMPORTED_MODULE_1__","document","addEventListener","NewBranchForm","$","JSON","parse","getElementById","innerHTML","ShortcutsNavigation","_this","_classCallCheck","this","_possibleConstructorReturn","_getPrototypeOf","call","Mousetrap","bind","findAndFollowLink","enabledHelp","push","Shortcuts","ProjectSelectComboButton","select","projectSelectInput","newItemBtn","resourceType","data","resourceLabel","formattedText","deriveTextVariants","groupId","bindEvents","initLocalStorage","siblings","on","e","openDropdown","getProjectFromLocalStorage","preventDefault","selectProject","AccessorUtilities","isLocalStorageAccessSafe","localStorageKey","localStorageItemType","join","setBtnTextFromLocalStorage","event","currentTarget","select2","selectedProjectData","val","projectMeta","url","concat","name","setNewItemBtnAttributes","setProjectInLocalStorage","cachedProjectData","project","attr","text","defaultTextPrefix","presetTextSuffix","projectString","localStorage","getItem","stringify","setItem","split","slice","projectSelect","each","i","placeholder","simpleFilter","includeGroups","allProjects","orderBy","withIssuesEnabled","withMergeRequestsEnabled","withShared","undefined","includeProjectsInSubgroups","allowClear","minimumInputLength","query","finalCallback","projectsCallback","projects","results","callback","groupsCallback","groups","Api","term","groupProjects","with_issues_enabled","with_merge_requests_enabled","with_shared","include_subgroups","order_by","membership","id","web_url","name_with_namespace","initSelection","el","then","_ref","dropdownCssClass","d","Project","$cloneOptions","$projectCloneField","$cloneBtnLabel","mobileCloneField","querySelector","selectedCloneOption","trim","length","addClass","$this","cloneType","removeClass","$el","activeText","find","$label","closest","toggleClass","dataset","clipboardText","initRefSwitcher","parents","submit","Cookies","set","remove","projectId","cookieKey","projectSelectDropdown","changeProject","window","location","refListItem","createElement","refLink","href","$dropdown","selected","glDropdown","axios","get","params","ref","search","catch","flash","__","selectable","filterable","filterRemote","filterByText","inputFieldName","fieldName","renderRow","li","cloneNode","header","className","textContent","link","appendChild","obj","toggleLabel","clicked","options","$form","$visit","shouldVisit","action","divider","indexOf","visitUrl","serialize","RefSelectDropdown","$dropdownButton","availableRefs","availableRefsValue","remote","filterInput","isSelectable","branch","hasClass","$dropdownContainer","$fieldInput","$filterInput","keyCode","which","_projects_gke_cluster_dropdowns__WEBPACK_IMPORTED_MODULE_0__","_persistent_user_callout__WEBPACK_IMPORTED_MODULE_1__","_project__WEBPACK_IMPORTED_MODULE_2__","_behaviors_shortcuts_shortcuts_navigation__WEBPACK_IMPORTED_MODULE_3__","page","body","callout","PersistentUserCallout","initGkeDropdowns","form","validate","branchNameError","setupRestrictions","addBinding","init","trigger","endsWith","invalid","single","startsWith","pattern","prefix","conjunction","restrictions","errorMessage","errors","formatter","unique","validator","empty","values","value","restriction","formatted","map","test","matched","match","reduce","append"],"mappings":"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","file":"pages.projects.branches.new.3eda87cb.chunk.js","sourcesContent":["import $ from 'jquery';\nimport NewBranchForm from '~/new_branch_form';\n\ndocument.addEventListener(\n  'DOMContentLoaded',\n  () =>\n    new NewBranchForm(\n      $('.js-create-branch-form'),\n      JSON.parse(document.getElementById('availableRefs').innerHTML),\n    ),\n);\n","import Mousetrap from 'mousetrap';\nimport findAndFollowLink from '../../lib/utils/navigation_utility';\nimport Shortcuts from './shortcuts';\n\nexport default class ShortcutsNavigation extends Shortcuts {\n  constructor() {\n    super();\n\n    Mousetrap.bind('g p', () => findAndFollowLink('.shortcuts-project'));\n    Mousetrap.bind('g v', () => findAndFollowLink('.shortcuts-project-activity'));\n    Mousetrap.bind('g r', () => findAndFollowLink('.shortcuts-project-releases'));\n    Mousetrap.bind('g f', () => findAndFollowLink('.shortcuts-tree'));\n    Mousetrap.bind('g c', () => findAndFollowLink('.shortcuts-commits'));\n    Mousetrap.bind('g j', () => findAndFollowLink('.shortcuts-builds'));\n    Mousetrap.bind('g n', () => findAndFollowLink('.shortcuts-network'));\n    Mousetrap.bind('g d', () => findAndFollowLink('.shortcuts-repository-charts'));\n    Mousetrap.bind('g i', () => findAndFollowLink('.shortcuts-issues'));\n    Mousetrap.bind('g b', () => findAndFollowLink('.shortcuts-issue-boards'));\n    Mousetrap.bind('g m', () => findAndFollowLink('.shortcuts-merge_requests'));\n    Mousetrap.bind('g w', () => findAndFollowLink('.shortcuts-wiki'));\n    Mousetrap.bind('g s', () => findAndFollowLink('.shortcuts-snippets'));\n    Mousetrap.bind('g k', () => findAndFollowLink('.shortcuts-kubernetes'));\n    Mousetrap.bind('g e', () => findAndFollowLink('.shortcuts-environments'));\n    Mousetrap.bind('g l', () => findAndFollowLink('.shortcuts-metrics'));\n    Mousetrap.bind('i', () => findAndFollowLink('.shortcuts-new-issue'));\n\n    this.enabledHelp.push('.hidden-shortcut.project');\n  }\n}\n","import $ from 'jquery';\nimport AccessorUtilities from './lib/utils/accessor';\n\nexport default class ProjectSelectComboButton {\n  constructor(select) {\n    this.projectSelectInput = $(select);\n    this.newItemBtn = $('.new-project-item-link');\n    this.resourceType = this.newItemBtn.data('type');\n    this.resourceLabel = this.newItemBtn.data('label');\n    this.formattedText = this.deriveTextVariants();\n    this.groupId = this.projectSelectInput.data('groupId');\n    this.bindEvents();\n    this.initLocalStorage();\n  }\n\n  bindEvents() {\n    this.projectSelectInput\n      .siblings('.new-project-item-select-button')\n      .on('click', e => this.openDropdown(e));\n\n    this.newItemBtn.on('click', e => {\n      if (!this.getProjectFromLocalStorage()) {\n        e.preventDefault();\n        this.openDropdown(e);\n      }\n    });\n\n    this.projectSelectInput.on('change', () => this.selectProject());\n  }\n\n  initLocalStorage() {\n    const localStorageIsSafe = AccessorUtilities.isLocalStorageAccessSafe();\n\n    if (localStorageIsSafe) {\n      this.localStorageKey = [\n        'group',\n        this.groupId,\n        this.formattedText.localStorageItemType,\n        'recent-project',\n      ].join('-');\n      this.setBtnTextFromLocalStorage();\n    }\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  openDropdown(event) {\n    $(event.currentTarget)\n      .siblings('.project-item-select')\n      .select2('open');\n  }\n\n  selectProject() {\n    const selectedProjectData = JSON.parse(this.projectSelectInput.val());\n    const projectUrl = `${selectedProjectData.url}/${this.projectSelectInput.data('relativePath')}`;\n    const projectName = selectedProjectData.name;\n\n    const projectMeta = {\n      url: projectUrl,\n      name: projectName,\n    };\n\n    this.setNewItemBtnAttributes(projectMeta);\n    this.setProjectInLocalStorage(projectMeta);\n  }\n\n  setBtnTextFromLocalStorage() {\n    const cachedProjectData = this.getProjectFromLocalStorage();\n\n    this.setNewItemBtnAttributes(cachedProjectData);\n  }\n\n  setNewItemBtnAttributes(project) {\n    if (project) {\n      this.newItemBtn.attr('href', project.url);\n      this.newItemBtn.text(`${this.formattedText.defaultTextPrefix} in ${project.name}`);\n    } else {\n      this.newItemBtn.text(`Select project to create ${this.formattedText.presetTextSuffix}`);\n    }\n  }\n\n  getProjectFromLocalStorage() {\n    const projectString = localStorage.getItem(this.localStorageKey);\n\n    return JSON.parse(projectString);\n  }\n\n  setProjectInLocalStorage(projectMeta) {\n    const projectString = JSON.stringify(projectMeta);\n\n    localStorage.setItem(this.localStorageKey, projectString);\n  }\n\n  deriveTextVariants() {\n    const defaultTextPrefix = this.resourceLabel;\n\n    // the trailing slice call depluralizes each of these strings (e.g. new-issues -> new-issue)\n    const localStorageItemType = `new-${this.resourceType\n      .split('_')\n      .join('-')\n      .slice(0, -1)}`;\n    const presetTextSuffix = this.resourceType\n      .split('_')\n      .join(' ')\n      .slice(0, -1);\n\n    return {\n      localStorageItemType, // new-issue / new-merge-request\n      defaultTextPrefix, // New issue / New merge request\n      presetTextSuffix, // issue / merge request\n    };\n  }\n}\n","/* eslint-disable func-names, no-var, object-shorthand, one-var, no-else-return */\n\nimport $ from 'jquery';\nimport Api from './api';\nimport ProjectSelectComboButton from './project_select_combo_button';\n\nexport default function projectSelect() {\n  $('.ajax-project-select').each(function(i, select) {\n    var placeholder;\n    const simpleFilter = $(select).data('simpleFilter') || false;\n    this.groupId = $(select).data('groupId');\n    this.includeGroups = $(select).data('includeGroups');\n    this.allProjects = $(select).data('allProjects') || false;\n    this.orderBy = $(select).data('orderBy') || 'id';\n    this.withIssuesEnabled = $(select).data('withIssuesEnabled');\n    this.withMergeRequestsEnabled = $(select).data('withMergeRequestsEnabled');\n    this.withShared =\n      $(select).data('withShared') === undefined ? true : $(select).data('withShared');\n    this.includeProjectsInSubgroups = $(select).data('includeProjectsInSubgroups') || false;\n    this.allowClear = $(select).data('allowClear') || false;\n\n    placeholder = 'Search for project';\n    if (this.includeGroups) {\n      placeholder += ' or group';\n    }\n\n    $(select).select2({\n      placeholder: placeholder,\n      minimumInputLength: 0,\n      query: (function(_this) {\n        return function(query) {\n          var finalCallback, projectsCallback;\n          finalCallback = function(projects) {\n            var data;\n            data = {\n              results: projects,\n            };\n            return query.callback(data);\n          };\n          if (_this.includeGroups) {\n            projectsCallback = function(projects) {\n              var groupsCallback;\n              groupsCallback = function(groups) {\n                var data;\n                data = groups.concat(projects);\n                return finalCallback(data);\n              };\n              return Api.groups(query.term, {}, groupsCallback);\n            };\n          } else {\n            projectsCallback = finalCallback;\n          }\n          if (_this.groupId) {\n            return Api.groupProjects(\n              _this.groupId,\n              query.term,\n              {\n                with_issues_enabled: _this.withIssuesEnabled,\n                with_merge_requests_enabled: _this.withMergeRequestsEnabled,\n                with_shared: _this.withShared,\n                include_subgroups: _this.includeProjectsInSubgroups,\n              },\n              projectsCallback,\n            );\n          } else {\n            return Api.projects(\n              query.term,\n              {\n                order_by: _this.orderBy,\n                with_issues_enabled: _this.withIssuesEnabled,\n                with_merge_requests_enabled: _this.withMergeRequestsEnabled,\n                membership: !_this.allProjects,\n              },\n              projectsCallback,\n            );\n          }\n        };\n      })(this),\n      id: function(project) {\n        if (simpleFilter) return project.id;\n        return JSON.stringify({\n          name: project.name,\n          url: project.web_url,\n        });\n      },\n      text: function(project) {\n        return project.name_with_namespace || project.name;\n      },\n\n      initSelection: function(el, callback) {\n        return Api.project(el.val()).then(({ data }) => callback(data));\n      },\n\n      allowClear: this.allowClear,\n\n      dropdownCssClass: 'ajax-project-dropdown',\n    });\n    if (simpleFilter) return select;\n    return new ProjectSelectComboButton(select);\n  });\n}\n","/* eslint-disable func-names, no-var, no-return-assign, one-var, object-shorthand, vars-on-top */\n\nimport $ from 'jquery';\nimport Cookies from 'js-cookie';\nimport { __ } from '~/locale';\nimport { visitUrl } from '~/lib/utils/url_utility';\nimport axios from '~/lib/utils/axios_utils';\nimport flash from '~/flash';\nimport projectSelect from '../../project_select';\n\nexport default class Project {\n  constructor() {\n    const $cloneOptions = $('ul.clone-options-dropdown');\n    const $projectCloneField = $('#project_clone');\n    const $cloneBtnLabel = $('.js-git-clone-holder .js-clone-dropdown-label');\n    const mobileCloneField = document.querySelector(\n      '.js-mobile-git-clone .js-clone-dropdown-label',\n    );\n\n    const selectedCloneOption = $cloneBtnLabel.text().trim();\n    if (selectedCloneOption.length > 0) {\n      $(`a:contains('${selectedCloneOption}')`, $cloneOptions).addClass('is-active');\n    }\n\n    $('a', $cloneOptions).on('click', e => {\n      e.preventDefault();\n      const $this = $(e.currentTarget);\n      const url = $this.attr('href');\n      const cloneType = $this.data('cloneType');\n\n      $('.is-active', $cloneOptions).removeClass('is-active');\n      $(`a[data-clone-type=\"${cloneType}\"]`).each(function() {\n        const $el = $(this);\n        const activeText = $el.find('.dropdown-menu-inner-title').text();\n        const $container = $el.closest('.project-clone-holder');\n        const $label = $container.find('.js-clone-dropdown-label');\n\n        $el.toggleClass('is-active');\n        $label.text(activeText);\n      });\n\n      if (mobileCloneField) {\n        mobileCloneField.dataset.clipboardText = url;\n      } else {\n        $projectCloneField.val(url);\n      }\n      $('.js-git-empty .js-clone').text(url);\n    });\n    // Ref switcher\n    Project.initRefSwitcher();\n    $('.project-refs-select').on('change', function() {\n      return $(this)\n        .parents('form')\n        .submit();\n    });\n    $('.hide-no-ssh-message').on('click', function(e) {\n      Cookies.set('hide_no_ssh_message', 'false');\n      $(this)\n        .parents('.no-ssh-key-message')\n        .remove();\n      return e.preventDefault();\n    });\n    $('.hide-no-password-message').on('click', function(e) {\n      Cookies.set('hide_no_password_message', 'false');\n      $(this)\n        .parents('.no-password-message')\n        .remove();\n      return e.preventDefault();\n    });\n    $('.hide-auto-devops-implicitly-enabled-banner').on('click', function(e) {\n      const projectId = $(this).data('project-id');\n      const cookieKey = `hide_auto_devops_implicitly_enabled_banner_${projectId}`;\n      Cookies.set(cookieKey, 'false');\n      $(this)\n        .parents('.auto-devops-implicitly-enabled-banner')\n        .remove();\n      return e.preventDefault();\n    });\n    Project.projectSelectDropdown();\n  }\n\n  static projectSelectDropdown() {\n    projectSelect();\n    $('.project-item-select').on('click', e => Project.changeProject($(e.currentTarget).val()));\n  }\n\n  static changeProject(url) {\n    return (window.location = url);\n  }\n\n  static initRefSwitcher() {\n    var refListItem = document.createElement('li');\n    var refLink = document.createElement('a');\n\n    refLink.href = '#';\n\n    return $('.js-project-refs-dropdown').each(function() {\n      var $dropdown, selected;\n      $dropdown = $(this);\n      selected = $dropdown.data('selected');\n      return $dropdown.glDropdown({\n        data(term, callback) {\n          axios\n            .get($dropdown.data('refsUrl'), {\n              params: {\n                ref: $dropdown.data('ref'),\n                search: term,\n              },\n            })\n            .then(({ data }) => callback(data))\n            .catch(() => flash(__('An error occurred while getting projects')));\n        },\n        selectable: true,\n        filterable: true,\n        filterRemote: true,\n        filterByText: true,\n        inputFieldName: $dropdown.data('inputFieldName'),\n        fieldName: $dropdown.data('fieldName'),\n        renderRow: function(ref) {\n          var li = refListItem.cloneNode(false);\n\n          if (ref.header != null) {\n            li.className = 'dropdown-header';\n            li.textContent = ref.header;\n          } else {\n            var link = refLink.cloneNode(false);\n\n            if (ref === selected) {\n              link.className = 'is-active';\n            }\n\n            link.textContent = ref;\n            link.dataset.ref = ref;\n\n            li.appendChild(link);\n          }\n\n          return li;\n        },\n        id: function(obj, $el) {\n          return $el.attr('data-ref');\n        },\n        toggleLabel: function(obj, $el) {\n          return $el.text().trim();\n        },\n        clicked: function(options) {\n          const { e } = options;\n          e.preventDefault();\n          if ($('input[name=\"ref\"]').length) {\n            var $form = $dropdown.closest('form');\n\n            var $visit = $dropdown.data('visit');\n            var shouldVisit = $visit ? true : $visit;\n            var action = $form.attr('action');\n            var divider = action.indexOf('?') === -1 ? '?' : '&';\n            if (shouldVisit) {\n              visitUrl(`${action}${divider}${$form.serialize()}`);\n            }\n          }\n        },\n      });\n    });\n  }\n}\n","import $ from 'jquery';\n\nclass RefSelectDropdown {\n  constructor($dropdownButton, availableRefs) {\n    const availableRefsValue =\n      availableRefs || JSON.parse(document.getElementById('availableRefs').innerHTML);\n    $dropdownButton.glDropdown({\n      data: availableRefsValue,\n      filterable: true,\n      filterByText: true,\n      remote: false,\n      fieldName: $dropdownButton.data('fieldName'),\n      filterInput: 'input[type=\"search\"]',\n      selectable: true,\n      isSelectable(branch, $el) {\n        return !$el.hasClass('is-active');\n      },\n      text(branch) {\n        return branch;\n      },\n      id(branch) {\n        return branch;\n      },\n      toggleLabel(branch) {\n        return branch;\n      },\n    });\n\n    const $dropdownContainer = $dropdownButton.closest('.dropdown');\n    const $fieldInput = $(`input[name=\"${$dropdownButton.data('fieldName')}\"]`, $dropdownContainer);\n    const $filterInput = $('input[type=\"search\"]', $dropdownContainer);\n\n    $filterInput.on('keyup', e => {\n      const keyCode = e.keyCode || e.which;\n      if (keyCode !== 13) return;\n\n      const ref = $filterInput.val().trim();\n      if (ref === '') {\n        return;\n      }\n\n      $fieldInput.val(ref);\n      $('.dropdown-toggle-text', $dropdownButton).text(ref);\n\n      $dropdownContainer.removeClass('open');\n    });\n  }\n}\n\nexport default RefSelectDropdown;\n","import initGkeDropdowns from '~/projects/gke_cluster_dropdowns';\nimport PersistentUserCallout from '../../persistent_user_callout';\nimport Project from './project';\nimport ShortcutsNavigation from '../../behaviors/shortcuts/shortcuts_navigation';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const { page } = document.body.dataset;\n  const newClusterViews = [\n    'projects:clusters:new',\n    'projects:clusters:create_gcp',\n    'projects:clusters:create_user',\n  ];\n\n  if (newClusterViews.indexOf(page) > -1) {\n    const callout = document.querySelector('.gcp-signup-offer');\n    if (callout) new PersistentUserCallout(callout); // eslint-disable-line no-new\n\n    initGkeDropdowns();\n  }\n\n  new Project(); // eslint-disable-line no-new\n  new ShortcutsNavigation(); // eslint-disable-line no-new\n});\n","/* eslint-disable func-names, no-var, one-var, consistent-return, no-return-assign, prefer-arrow-callback, prefer-template, no-shadow, no-else-return */\n\nimport $ from 'jquery';\nimport RefSelectDropdown from './ref_select_dropdown';\n\nexport default class NewBranchForm {\n  constructor(form, availableRefs) {\n    this.validate = this.validate.bind(this);\n    this.branchNameError = form.find('.js-branch-name-error');\n    this.name = form.find('.js-branch-name');\n    this.ref = form.find('#ref');\n    new RefSelectDropdown($('.js-branch-select'), availableRefs); // eslint-disable-line no-new\n    this.setupRestrictions();\n    this.addBinding();\n    this.init();\n  }\n\n  addBinding() {\n    return this.name.on('blur', this.validate);\n  }\n\n  init() {\n    if (this.name.length && this.name.val().length > 0) {\n      return this.name.trigger('blur');\n    }\n  }\n\n  setupRestrictions() {\n    var endsWith, invalid, single, startsWith;\n    startsWith = {\n      pattern: /^(\\/|\\.)/g,\n      prefix: \"can't start with\",\n      conjunction: 'or',\n    };\n    endsWith = {\n      pattern: /(\\/|\\.|\\.lock)$/g,\n      prefix: \"can't end in\",\n      conjunction: 'or',\n    };\n    invalid = {\n      pattern: /(\\s|~|\\^|:|\\?|\\*|\\[|\\\\|\\.\\.|@\\{|\\/{2,}){1}/g,\n      prefix: \"can't contain\",\n      conjunction: ', ',\n    };\n    single = {\n      pattern: /^@+$/g,\n      prefix: \"can't be\",\n      conjunction: 'or',\n    };\n    return (this.restrictions = [startsWith, invalid, endsWith, single]);\n  }\n\n  validate() {\n    var errorMessage, errors, formatter, unique, validator;\n    const { indexOf } = [];\n\n    this.branchNameError.empty();\n    unique = function(values, value) {\n      if (indexOf.call(values, value) === -1) {\n        values.push(value);\n      }\n      return values;\n    };\n    formatter = function(values, restriction) {\n      var formatted;\n      formatted = values.map(function(value) {\n        switch (false) {\n          case !/\\s/.test(value):\n            return 'spaces';\n          case !/\\/{2,}/g.test(value):\n            return 'consecutive slashes';\n          default:\n            return \"'\" + value + \"'\";\n        }\n      });\n      return restriction.prefix + ' ' + formatted.join(restriction.conjunction);\n    };\n    validator = (function(_this) {\n      return function(errors, restriction) {\n        var matched;\n        matched = _this.name.val().match(restriction.pattern);\n        if (matched) {\n          return errors.concat(formatter(matched.reduce(unique, []), restriction));\n        } else {\n          return errors;\n        }\n      };\n    })(this);\n    errors = this.restrictions.reduce(validator, []);\n    if (errors.length > 0) {\n      errorMessage = $('<span/>').text(errors.join(', '));\n      return this.branchNameError.append(errorMessage);\n    }\n  }\n}\n"],"sourceRoot":""}