(this.webpackJsonp=this.webpackJsonp||[]).push([[41],{128:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a={name:"DeprecatedModal",props:{id:{type:String,required:!1},title:{type:String,required:!1},text:{type:String,required:!1},hideFooter:{type:Boolean,required:!1,default:!1},kind:{type:String,required:!1,default:"primary"},modalDialogClass:{type:String,required:!1,default:""},closeKind:{type:String,required:!1,default:"default"},closeButtonLabel:{type:String,required:!1,default:"Cancel"},primaryButtonLabel:{type:String,required:!1,default:""},secondaryButtonLabel:{type:String,required:!1,default:""},submitDisabled:{type:Boolean,required:!1,default:!1}},computed:{btnKindClass:function(){return r({},"btn-".concat(this.kind),!0)},btnCancelKindClass:function(){return r({},"btn-".concat(this.closeKind),!0)}},methods:{emitCancel:function(e){this.$emit("cancel",e)},emitSubmit:function(e){this.$emit("submit",e)}}},s=n(3),o=Object(s.a)(a,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal-open"},[n("div",{staticClass:"modal",class:e.id?"":"d-block",attrs:{id:e.id,role:"dialog",tabindex:"-1"}},[n("div",{staticClass:"modal-dialog",class:e.modalDialogClass,attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[e._t("header",[n("h4",{staticClass:"modal-title float-left"},[e._v(e._s(e.title))]),e._v(" "),n("button",{staticClass:"close float-right",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:function(t){e.emitCancel(t)}}},[n("span",{attrs:{"aria-hidden":"true"}},[e._v("Ã—")])])])],2),e._v(" "),n("div",{staticClass:"modal-body"},[e._t("body",[n("p",[e._v(e._s(e.text))])],{text:e.text})],2),e._v(" "),e.hideFooter?e._e():n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn",class:e.btnCancelKindClass,attrs:{type:"button","data-dismiss":"modal"},on:{click:function(t){e.emitCancel(t)}}},[e._v("\n            "+e._s(e.closeButtonLabel)+"\n          ")]),e._v(" "),e.secondaryButtonLabel?e._t("secondary-button",[e.secondaryButtonLabel?n("button",{staticClass:"btn",attrs:{type:"button","data-dismiss":"modal"}},[e._v("\n              "+e._s(e.secondaryButtonLabel)+"\n            ")]):e._e()]):e._e(),e._v(" "),e.primaryButtonLabel?n("button",{staticClass:"btn js-primary-button",class:e.btnKindClass,attrs:{disabled:e.submitDisabled,type:"button","data-dismiss":"modal"},on:{click:function(t){e.emitSubmit(t)}}},[e._v("\n            "+e._s(e.primaryButtonLabel)+"\n          ")]):e._e()],2)])])]),e._v(" "),e.id?e._e():n("div",{staticClass:"modal-backdrop fade show"})])},[],!1,null,null,null);o.options.__file="deprecated_modal.vue";t.a=o.exports},129:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(19);function o(){"file"===a()('input[name="blacklist_type"]:checked').val()?(a()(".blacklist-file").show(),a()(".blacklist-raw").hide()):(a()(".blacklist-file").hide(),a()(".blacklist-raw").show())}var i=n(1),l=Object(i.a)("Regex pattern"),d=Object(i.a)("To define internal users, first enable new users set to external");function u(e){var t=document.getElementById("application_setting_user_default_internal_regex");e&&t&&(e.checked?(t.readOnly=!1,t.placeholder=l):(t.readOnly=!0,t.placeholder=d))}document.addEventListener("DOMContentLoaded",function(){var e,t;e=a()(".change-owner-holder"),a()("input#user_force_random_password").on("change",function(){var e=a()("#user_password, #user_password_confirmation");a()(this).attr("checked")?e.val("").prop("disabled",!0):e.prop("disabled",!1)}),a()("body").on("click",".js-toggle-colors-link",function(e){e.preventDefault(),a()(".js-toggle-colors-container").toggleClass("hide")}),a()(".log-tabs a").on("click",function(e){e.preventDefault(),a()(this).tab("show")}),a()(".log-bottom").on("click",function(e){e.preventDefault();var t=a()(".file-content:visible");t.animate({scrollTop:t.find("ol").height()},"fast")}),a()(".change-owner-link").on("click",function(t){t.preventDefault(),a()(this).hide(),e.show()}),a()(".change-owner-cancel-link").on("click",function(t){t.preventDefault(),e.hide(),a()(".change-owner-link").show()}),a()("li.project_member, li.group_member").on("ajax:success",s.e),a()("input[name='blacklist_type']").on("click",o),o(),u(t=document.getElementById("application_setting_user_default_external")),t.addEventListener("change",function(){u(t)})})},701:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(11),o=n(78),i=n(75),l=n(5),d=n.n(l),u=n(128),c=n(1),m={components:{DeprecatedModal:u.a},props:{deleteUserUrl:{type:String,required:!1,default:""},blockUserUrl:{type:String,required:!1,default:""},deleteContributions:{type:Boolean,required:!1,default:!1},username:{type:String,required:!1,default:""},csrfToken:{type:String,required:!1,default:""}},data:function(){return{enteredUsername:""}},computed:{title:function(){var e=Object(c.e)("AdminUsers|Delete User %{username}?"),t=Object(c.e)("AdminUsers|Delete User %{username} and contributions?");return Object(c.f)(this.deleteContributions?t:e,{username:"'".concat(d.a.escape(this.username),"'")},!1)},text:function(){var e=Object(c.e)('AdminArea|\n          You are about to permanently delete the user %{username}.\n          Issues, merge requests, and groups linked to them will be transferred to a system-wide "Ghost-user".\n          To avoid data loss, consider using the %{strong_start}block user%{strong_end} feature instead.\n          Once you %{strong_start}Delete user%{strong_end}, it cannot be undone or recovered.'),t=Object(c.e)("AdminArea|\n          You are about to permanently delete the user %{username}.\n          This will delete all of the issues, merge requests, and groups linked to them.\n          To avoid data loss, consider using the %{strong_start}block user%{strong_end} feature instead.\n          Once you %{strong_start}Delete user%{strong_end}, it cannot be undone or recovered.");return Object(c.f)(this.deleteContributions?t:e,{username:"<strong>".concat(d.a.escape(this.username),"</strong>"),strong_start:"<strong>",strong_end:"</strong>"},!1)},confirmationTextLabel:function(){return Object(c.f)(Object(c.e)("AdminUsers|To confirm, type %{username}"),{username:"<code>".concat(d.a.escape(this.username),"</code>")},!1)},primaryButtonLabel:function(){var e=Object(c.e)("AdminUsers|Delete user"),t=Object(c.e)("AdminUsers|Delete user and contributions");return this.deleteContributions?t:e},secondaryButtonLabel:function(){return Object(c.e)("AdminUsers|Block user")},canSubmit:function(){return this.enteredUsername===this.username}},methods:{onCancel:function(){this.enteredUsername=""},onSecondaryAction:function(){var e=this.$refs.form;e.action=this.blockUserUrl,this.$refs.method.value="put",e.submit()},onSubmit:function(){this.$refs.form.submit(),this.enteredUsername=""}}},b=n(3),p=Object(b.a)(m,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("deprecated-modal",{attrs:{id:"delete-user-modal",title:e.title,text:e.text,"primary-button-label":e.primaryButtonLabel,"secondary-button-label":e.secondaryButtonLabel,"submit-disabled":!e.canSubmit,kind:"danger"},on:{submit:e.onSubmit,cancel:e.onCancel},scopedSlots:e._u([{key:"body",fn:function(t){return[n("p",{domProps:{innerHTML:e._s(t.text)}}),e._v(" "),n("p",{domProps:{innerHTML:e._s(e.confirmationTextLabel)}}),e._v(" "),n("form",{ref:"form",attrs:{action:e.deleteUserUrl,method:"post"}},[n("input",{ref:"method",attrs:{type:"hidden",name:"_method",value:"delete"}}),e._v(" "),n("input",{attrs:{type:"hidden",name:"authenticity_token"},domProps:{value:e.csrfToken}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.enteredUsername,expression:"enteredUsername"}],staticClass:"form-control",attrs:{type:"text",name:"username","aria-labelledby":"input-label",autocomplete:"off"},domProps:{value:e.enteredUsername},on:{input:function(t){t.target.composing||(e.enteredUsername=t.target.value)}}})])]}}])},[n("template",{slot:"secondary-button"},[n("button",{staticClass:"btn js-secondary-button btn-warning",attrs:{disabled:!e.canSubmit,type:"button","data-dismiss":"modal"},on:{click:e.onSecondaryAction}},[e._v("\n      "+e._s(e.secondaryButtonLabel)+"\n    ")])])],2)},[],!1,null,null,null);p.options.__file="delete_user_modal.vue";var f=p.exports;document.addEventListener("DOMContentLoaded",function(){s.default.use(o.a);var e=document.getElementById("delete-user-modal"),t=new s.default({el:e,data:{deleteUserUrl:"",blockUserUrl:"",deleteContributions:"",username:""},render:function(e){return e(f,{props:{deleteUserUrl:this.deleteUserUrl,blockUserUrl:this.blockUserUrl,deleteContributions:this.deleteContributions,username:this.username,csrfToken:i.a.token}})}});a()(document).on("shown.bs.modal",function(e){if(e.relatedTarget.classList.contains("delete-user-button")){var n=e.relatedTarget.dataset;t.deleteUserUrl=n.deleteUserUrl,t.blockUserUrl=n.blockUserUrl,t.deleteContributions=e.relatedTarget.hasAttribute("data-delete-contributions"),t.username=n.username}})})},988:function(e,t,n){n(42),n(129),n(701),e.exports=n(989)},989:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return o});var r=n(0),a=n.n(r);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.regexPattern=a()("[data-user-internal-regex-pattern]").data("user-internal-regex-pattern"),this.regexPattern&&""!==this.regexPattern&&(this.regexOptions=a()("[data-user-internal-regex-options]").data("user-internal-regex-options"),this.external=a()("#user_external"),this.warningMessage=a()("#warning_external_automatically_set"),this.addListenerToEmailField(),this.addListenerToUserExternalCheckbox())}var t,n,r;return t=e,(n=[{key:"addListenerToEmailField",value:function(){var e=this;a()("#user_email").on("input",function(t){e.setExternalCheckbox(t.currentTarget.value)})}},{key:"addListenerToUserExternalCheckbox",value:function(){var e=this;this.external.on("click",function(){e.warningMessage.addClass("hidden")})}},{key:"isEmailInternal",value:function(e){return new RegExp(this.regexPattern,this.regexOptions).test(e)}},{key:"setExternalCheckbox",value:function(e){var t=this.external.prop("checked");this.isEmailInternal(e)?t&&(this.external.prop("checked",!1),this.warningMessage.removeClass("hidden")):t||(this.external.prop("checked",!0),this.warningMessage.addClass("hidden"))}}])&&s(t.prototype,n),r&&s(t,r),e}();document.addEventListener("DOMContentLoaded",function(){new o})}},[[988,1,0]]]);
//# sourceMappingURL=pages.admin.users.new.f73c8c02.chunk.js.map