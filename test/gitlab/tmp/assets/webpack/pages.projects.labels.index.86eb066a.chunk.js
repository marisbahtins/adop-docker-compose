(this.webpackJsonp=this.webpackJsonp||[]).push([[133],{106:function(t,e,n){"use strict";var o=n(0),r=n.n(o),a=["danger","primary","success","warning"],i=["sm","md","lg","xl"],s={name:"GlModal",props:{id:{type:String,required:!1,default:null},modalSize:{type:String,required:!1,default:"md",validator:function(t){return i.includes(t)}},headerTitleText:{type:String,required:!1,default:""},footerPrimaryButtonVariant:{type:String,required:!1,default:"primary",validator:function(t){return a.includes(t)}},footerPrimaryButtonText:{type:String,required:!1,default:""}},computed:{modalSizeClass:function(){return"md"===this.modalSize?"":"modal-".concat(this.modalSize)}},mounted:function(){r()(this.$el).on("shown.bs.modal",this.opened).on("hidden.bs.modal",this.closed)},beforeDestroy:function(){r()(this.$el).off("shown.bs.modal",this.opened).off("hidden.bs.modal",this.closed)},methods:{emitCancel:function(t){this.$emit("cancel",t)},emitSubmit:function(t){this.$emit("submit",t)},opened:function(){this.$emit("open")},closed:function(){this.$emit("closed")}}},l=n(3),c=Object(l.a)(s,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal fade",attrs:{id:t.id,tabindex:"-1",role:"dialog"}},[n("div",{staticClass:"modal-dialog",class:t.modalSizeClass,attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[t._t("header",[n("h4",{staticClass:"modal-title"},[t._t("title",[t._v(" "+t._s(t.headerTitleText)+" ")])],2),t._v(" "),n("button",{staticClass:"close js-modal-close-action",attrs:{"aria-label":t.s__("Modal|Close"),type:"button","data-dismiss":"modal"},on:{click:function(e){t.emitCancel(e)}}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("Ã—")])])])],2),t._v(" "),n("div",{staticClass:"modal-body"},[t._t("default")],2),t._v(" "),n("div",{staticClass:"modal-footer"},[t._t("footer",[n("button",{staticClass:"btn js-modal-cancel-action qa-modal-cancel-button",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){t.emitCancel(e)}}},[t._v("\n            "+t._s(t.s__("Modal|Cancel"))+"\n          ")]),t._v(" "),n("button",{staticClass:"btn js-modal-primary-action qa-modal-primary-button",class:"btn-"+t.footerPrimaryButtonVariant,attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){t.emitSubmit(e)}}},[t._v("\n            "+t._s(t.footerPrimaryButtonText)+"\n          ")])])],2)])])])},[],!1,null,null,null);c.options.__file="gl_modal.vue";e.a=c.exports},1305:function(t,e,n){n(42),n(44),t.exports=n(1413)},1413:function(t,e,n){"use strict";n.r(e);var o=n(11),r=n(78),a=n(563),i=new o.default,s=n(5),l=n.n(s),c=n(6),u=n(7),d=n(106),p=n(1),f=n(19),m={components:{GlModal:d.a},props:{url:{type:String,required:!0},labelTitle:{type:String,required:!0},labelColor:{type:String,required:!0},labelTextColor:{type:String,required:!0},groupName:{type:String,required:!0}},computed:{text:function(){return Object(p.f)(Object(p.e)("Labels|Promoting %{labelTitle} will make it available for all projects inside %{groupName}.\n        Existing project labels with the same title will be merged. This action cannot be reversed."),{labelTitle:this.labelTitle,groupName:this.groupName})},title:function(){var t='<span\n          class="label color-label"\n          style="background-color: '.concat(this.labelColor,"; color: ").concat(this.labelTextColor,';"\n        >').concat(l.a.escape(this.labelTitle),"</span>");return Object(p.f)(Object(p.e)("Labels|<span>Promote label</span> %{labelTitle} <span>to Group Label?</span>"),{labelTitle:t},!1)}},methods:{onSubmit:function(){var t=this;return i.$emit("promoteLabelModal.requestStarted",this.url),c.a.post(this.url,{params:{format:"json"}}).then(function(e){i.$emit("promoteLabelModal.requestFinished",{labelUrl:t.url,successful:!0}),Object(f.g)(e.data.url)}).catch(function(e){i.$emit("promoteLabelModal.requestFinished",{labelUrl:t.url,successful:!1}),Object(u.a)(e)})}}},b=n(3),h=Object(b.a)(m,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("gl-modal",{attrs:{id:"promote-label-modal","footer-primary-button-text":t.s__("Labels|Promote Label"),"footer-primary-button-variant":"warning"},on:{submit:t.onSubmit}},[n("div",{staticClass:"modal-title-with-label",attrs:{slot:"title"},domProps:{innerHTML:t._s(t.title)},slot:"title"},[t._v(t._s(t.title))]),t._v("\n\n  "+t._s(t.text)+"\n")])},[],!1,null,null,null);h.options.__file="promote_label_modal.vue";var g=h.exports;o.default.use(r.a);document.addEventListener("DOMContentLoaded",function(){Object(a.a)();var t=function(t){var e=t.labelUrl,n=t.successful,o=document.querySelector('.js-promote-project-label-button[data-url="'.concat(e,'"]'));n||o.removeAttribute("disabled")},e=function(e){document.querySelector('.js-promote-project-label-button[data-url="'.concat(e,'"]')).setAttribute("disabled",""),i.$once("promoteLabelModal.requestFinished",t)},n=function(t){var n=t.currentTarget,o={labelTitle:n.dataset.labelTitle,labelColor:n.dataset.labelColor,labelTextColor:n.dataset.labelTextColor,url:n.dataset.url,groupName:n.dataset.groupName};i.$once("promoteLabelModal.requestStarted",e),i.$emit("promoteLabelModal.props",o)},r=document.querySelectorAll(".js-promote-project-label-button");r.forEach(function(t){t.addEventListener("click",n)}),i.$once("promoteLabelModal.mounted",function(){r.forEach(function(t){t.removeAttribute("disabled")})});var s,l=document.getElementById("promote-label-modal");return l&&(s=new o.default({el:l,components:{PromoteLabelModal:g},data:function(){return{modalProps:{labelTitle:"",labelColor:"",labelTextColor:"",url:"",groupName:""}}},mounted:function(){i.$on("promoteLabelModal.props",this.setModalProps),i.$emit("promoteLabelModal.mounted")},beforeDestroy:function(){i.$off("promoteLabelModal.props",this.setModalProps)},methods:{setModalProps:function(t){this.modalProps=t}},render:function(t){return t("promote-label-modal",{props:this.modalProps})}})),s})},27:function(t,e,n){"use strict";n.d(e,"a",function(){return d});var o=n(2),r=n.n(o),a=n(4),i=n(43);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=l(this,c(e).call(this)),r.a.bind("g p",function(){return Object(a.a)(".shortcuts-project")}),r.a.bind("g v",function(){return Object(a.a)(".shortcuts-project-activity")}),r.a.bind("g r",function(){return Object(a.a)(".shortcuts-project-releases")}),r.a.bind("g f",function(){return Object(a.a)(".shortcuts-tree")}),r.a.bind("g c",function(){return Object(a.a)(".shortcuts-commits")}),r.a.bind("g j",function(){return Object(a.a)(".shortcuts-builds")}),r.a.bind("g n",function(){return Object(a.a)(".shortcuts-network")}),r.a.bind("g d",function(){return Object(a.a)(".shortcuts-repository-charts")}),r.a.bind("g i",function(){return Object(a.a)(".shortcuts-issues")}),r.a.bind("g b",function(){return Object(a.a)(".shortcuts-issue-boards")}),r.a.bind("g m",function(){return Object(a.a)(".shortcuts-merge_requests")}),r.a.bind("g w",function(){return Object(a.a)(".shortcuts-wiki")}),r.a.bind("g s",function(){return Object(a.a)(".shortcuts-snippets")}),r.a.bind("g k",function(){return Object(a.a)(".shortcuts-kubernetes")}),r.a.bind("g e",function(){return Object(a.a)(".shortcuts-environments")}),r.a.bind("g l",function(){return Object(a.a)(".shortcuts-metrics")}),r.a.bind("i",function(){return Object(a.a)(".shortcuts-new-issue")}),t.enabledHelp.push(".hidden-shortcut.project"),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,i["a"]),e}()},28:function(t,e,n){"use strict";var o=n(0),r=n.n(o),a=n(12),i=n(31);function s(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.projectSelectInput=r()(e),this.newItemBtn=r()(".new-project-item-link"),this.resourceType=this.newItemBtn.data("type"),this.resourceLabel=this.newItemBtn.data("label"),this.formattedText=this.deriveTextVariants(),this.groupId=this.projectSelectInput.data("groupId"),this.bindEvents(),this.initLocalStorage()}var e,n,o;return e=t,(n=[{key:"bindEvents",value:function(){var t=this;this.projectSelectInput.siblings(".new-project-item-select-button").on("click",function(e){return t.openDropdown(e)}),this.newItemBtn.on("click",function(e){t.getProjectFromLocalStorage()||(e.preventDefault(),t.openDropdown(e))}),this.projectSelectInput.on("change",function(){return t.selectProject()})}},{key:"initLocalStorage",value:function(){i.a.isLocalStorageAccessSafe()&&(this.localStorageKey=["group",this.groupId,this.formattedText.localStorageItemType,"recent-project"].join("-"),this.setBtnTextFromLocalStorage())}},{key:"openDropdown",value:function(t){r()(t.currentTarget).siblings(".project-item-select").select2("open")}},{key:"selectProject",value:function(){var t=JSON.parse(this.projectSelectInput.val()),e={url:"".concat(t.url,"/").concat(this.projectSelectInput.data("relativePath")),name:t.name};this.setNewItemBtnAttributes(e),this.setProjectInLocalStorage(e)}},{key:"setBtnTextFromLocalStorage",value:function(){var t=this.getProjectFromLocalStorage();this.setNewItemBtnAttributes(t)}},{key:"setNewItemBtnAttributes",value:function(t){t?(this.newItemBtn.attr("href",t.url),this.newItemBtn.text("".concat(this.formattedText.defaultTextPrefix," in ").concat(t.name))):this.newItemBtn.text("Select project to create ".concat(this.formattedText.presetTextSuffix))}},{key:"getProjectFromLocalStorage",value:function(){var t=localStorage.getItem(this.localStorageKey);return JSON.parse(t)}},{key:"setProjectInLocalStorage",value:function(t){var e=JSON.stringify(t);localStorage.setItem(this.localStorageKey,e)}},{key:"deriveTextVariants",value:function(){var t=this.resourceLabel;return{localStorageItemType:"new-".concat(this.resourceType.split("_").join("-").slice(0,-1)),defaultTextPrefix:t,presetTextSuffix:this.resourceType.split("_").join(" ").slice(0,-1)}}}])&&s(e.prototype,n),o&&s(e,o),t}();function c(){r()(".ajax-project-select").each(function(t,e){var n,o,i=r()(e).data("simpleFilter")||!1;return this.groupId=r()(e).data("groupId"),this.includeGroups=r()(e).data("includeGroups"),this.allProjects=r()(e).data("allProjects")||!1,this.orderBy=r()(e).data("orderBy")||"id",this.withIssuesEnabled=r()(e).data("withIssuesEnabled"),this.withMergeRequestsEnabled=r()(e).data("withMergeRequestsEnabled"),this.withShared=void 0===r()(e).data("withShared")||r()(e).data("withShared"),this.includeProjectsInSubgroups=r()(e).data("includeProjectsInSubgroups")||!1,this.allowClear=r()(e).data("allowClear")||!1,n="Search for project",this.includeGroups&&(n+=" or group"),r()(e).select2({placeholder:n,minimumInputLength:0,query:(o=this,function(t){var e,n;return e=function(e){var n;return n={results:e},t.callback(n)},n=o.includeGroups?function(n){var o;return o=function(t){var o;return o=t.concat(n),e(o)},a.a.groups(t.term,{},o)}:e,o.groupId?a.a.groupProjects(o.groupId,t.term,{with_issues_enabled:o.withIssuesEnabled,with_merge_requests_enabled:o.withMergeRequestsEnabled,with_shared:o.withShared,include_subgroups:o.includeProjectsInSubgroups},n):a.a.projects(t.term,{order_by:o.orderBy,with_issues_enabled:o.withIssuesEnabled,with_merge_requests_enabled:o.withMergeRequestsEnabled,membership:!o.allProjects},n)}),id:function(t){return i?t.id:JSON.stringify({name:t.name,url:t.web_url})},text:function(t){return t.name_with_namespace||t.name},initSelection:function(t,e){return a.a.project(t.val()).then(function(t){var n=t.data;return e(n)})},allowClear:this.allowClear,dropdownCssClass:"ajax-project-dropdown"}),i?e:new l(e)})}n.d(e,"a",function(){return c})},29:function(t,e,n){"use strict";n.d(e,"a",function(){return f});var o=n(0),r=n.n(o),a=n(14),i=n.n(a),s=n(1),l=n(19),c=n(6),u=n(7),d=n(28);function p(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=r()("ul.clone-options-dropdown"),n=r()("#project_clone"),o=r()(".js-git-clone-holder .js-clone-dropdown-label"),a=document.querySelector(".js-mobile-git-clone .js-clone-dropdown-label"),s=o.text().trim();s.length>0&&r()("a:contains('".concat(s,"')"),e).addClass("is-active"),r()("a",e).on("click",function(t){t.preventDefault();var o=r()(t.currentTarget),i=o.attr("href"),s=o.data("cloneType");r()(".is-active",e).removeClass("is-active"),r()('a[data-clone-type="'.concat(s,'"]')).each(function(){var t=r()(this),e=t.find(".dropdown-menu-inner-title").text(),n=t.closest(".project-clone-holder").find(".js-clone-dropdown-label");t.toggleClass("is-active"),n.text(e)}),a?a.dataset.clipboardText=i:n.val(i),r()(".js-git-empty .js-clone").text(i)}),t.initRefSwitcher(),r()(".project-refs-select").on("change",function(){return r()(this).parents("form").submit()}),r()(".hide-no-ssh-message").on("click",function(t){return i.a.set("hide_no_ssh_message","false"),r()(this).parents(".no-ssh-key-message").remove(),t.preventDefault()}),r()(".hide-no-password-message").on("click",function(t){return i.a.set("hide_no_password_message","false"),r()(this).parents(".no-password-message").remove(),t.preventDefault()}),r()(".hide-auto-devops-implicitly-enabled-banner").on("click",function(t){var e=r()(this).data("project-id"),n="hide_auto_devops_implicitly_enabled_banner_".concat(e);return i.a.set(n,"false"),r()(this).parents(".auto-devops-implicitly-enabled-banner").remove(),t.preventDefault()}),t.projectSelectDropdown()}var e,n,o;return e=t,o=[{key:"projectSelectDropdown",value:function(){Object(d.a)(),r()(".project-item-select").on("click",function(e){return t.changeProject(r()(e.currentTarget).val())})}},{key:"changeProject",value:function(t){return window.location=t}},{key:"initRefSwitcher",value:function(){var t=document.createElement("li"),e=document.createElement("a");return e.href="#",r()(".js-project-refs-dropdown").each(function(){var n,o;return n=r()(this),o=n.data("selected"),n.glDropdown({data:function(t,e){c.a.get(n.data("refsUrl"),{params:{ref:n.data("ref"),search:t}}).then(function(t){var n=t.data;return e(n)}).catch(function(){return Object(u.a)(Object(s.a)("An error occurred while getting projects"))})},selectable:!0,filterable:!0,filterRemote:!0,filterByText:!0,inputFieldName:n.data("inputFieldName"),fieldName:n.data("fieldName"),renderRow:function(n){var r=t.cloneNode(!1);if(null!=n.header)r.className="dropdown-header",r.textContent=n.header;else{var a=e.cloneNode(!1);n===o&&(a.className="is-active"),a.textContent=n,a.dataset.ref=n,r.appendChild(a)}return r},id:function(t,e){return e.attr("data-ref")},toggleLabel:function(t,e){return e.text().trim()},clicked:function(t){if(t.e.preventDefault(),r()('input[name="ref"]').length){var e=n.closest("form"),o=n.data("visit"),a=!!o||o,i=e.attr("action"),s=-1===i.indexOf("?")?"?":"&";a&&Object(l.g)("".concat(i).concat(s).concat(e.serialize()))}}})})}}],(n=null)&&p(e.prototype,n),o&&p(e,o),t}()},44:function(t,e,n){"use strict";n.r(e);var o=n(38),r=n(36),a=n(29),i=n(27);document.addEventListener("DOMContentLoaded",function(){var t=document.body.dataset.page;if(["projects:clusters:new","projects:clusters:create_gcp","projects:clusters:create_user"].indexOf(t)>-1){var e=document.querySelector(".gcp-signup-offer");e&&new r.a(e),Object(o.a)()}new a.a,new i.a})}},[[1305,1,0,2,21]]]);
//# sourceMappingURL=pages.projects.labels.index.86eb066a.chunk.js.map