{"version":3,"sources":["webpack:///./pages/admin/admin.js","webpack:///./pages/admin/application_settings/account_and_limits.js","webpack:///./pages/admin/index.js","webpack:///./pages/admin/application_settings/usage_ping_payload.js","webpack:///./pages/admin/application_settings/metrics_and_profiling/index.js","webpack:///./settings_panels.js","webpack:///./project_select_combo_button.js","webpack:///./project_select.js","webpack:///./pages/admin/application_settings/index.js"],"names":["showBlacklistType","$","val","show","hide","PLACEHOLDER_USER_EXTERNAL_DEFAULT_TRUE","__","PLACEHOLDER_USER_EXTERNAL_DEFAULT_FALSE","setUserInternalRegexPlaceholder","checkbox","userInternalRegex","document","getElementById","checked","readOnly","placeholder","addEventListener","modal","on","$elems","this","attr","prop","e","preventDefault","toggleClass","tab","$visibleLog","animate","scrollTop","find","height","refreshCurrentPage","UsagePingPayload","trigger","container","_classCallCheck","isVisible","isInserted","_this","spinner","querySelector","text","event","hidePayload","requestPayload","_this2","showPayload","classList","add","axios","get","dataset","endpoint","responseType","then","_ref","data","remove","insertPayload","catch","flash","textContent","innerHTML","init","__webpack_require__","d","__webpack_exports__","initSettingsPanels","jquery__WEBPACK_IMPORTED_MODULE_0__","jquery__WEBPACK_IMPORTED_MODULE_0___default","n","_locale__WEBPACK_IMPORTED_MODULE_1__","expandSection","$section","off","addClass","hasClass","one","removeClass","toggleSection","closeSection","each","i","elm","window","location","hash","$target","length","ProjectSelectComboButton","select","projectSelectInput","newItemBtn","resourceType","resourceLabel","formattedText","deriveTextVariants","groupId","bindEvents","initLocalStorage","siblings","openDropdown","getProjectFromLocalStorage","selectProject","AccessorUtilities","isLocalStorageAccessSafe","localStorageKey","localStorageItemType","join","setBtnTextFromLocalStorage","currentTarget","select2","selectedProjectData","JSON","parse","projectMeta","url","concat","name","setNewItemBtnAttributes","setProjectInLocalStorage","cachedProjectData","project","defaultTextPrefix","presetTextSuffix","projectString","localStorage","getItem","stringify","setItem","split","slice","projectSelect","simpleFilter","includeGroups","allProjects","orderBy","withIssuesEnabled","withMergeRequestsEnabled","withShared","undefined","includeProjectsInSubgroups","allowClear","minimumInputLength","query","finalCallback","projectsCallback","projects","results","callback","groupsCallback","groups","Api","term","groupProjects","with_issues_enabled","with_merge_requests_enabled","with_shared","include_subgroups","order_by","membership","id","web_url","name_with_namespace","initSelection","el","dropdownCssClass","r","_settings_panels__WEBPACK_IMPORTED_MODULE_0__","_project_select__WEBPACK_IMPORTED_MODULE_1__"],"mappings":"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","file":"pages.admin.application_settings.metrics_and_profiling.26e2d798.chunk.js","sourcesContent":["import $ from 'jquery';\nimport { refreshCurrentPage } from '../../lib/utils/url_utility';\n\nfunction showBlacklistType() {\n  if ($('input[name=\"blacklist_type\"]:checked').val() === 'file') {\n    $('.blacklist-file').show();\n    $('.blacklist-raw').hide();\n  } else {\n    $('.blacklist-file').hide();\n    $('.blacklist-raw').show();\n  }\n}\n\nexport default function adminInit() {\n  const modal = $('.change-owner-holder');\n\n  $('input#user_force_random_password').on('change', function randomPasswordClick() {\n    const $elems = $('#user_password, #user_password_confirmation');\n    if ($(this).attr('checked')) {\n      $elems.val('').prop('disabled', true);\n    } else {\n      $elems.prop('disabled', false);\n    }\n  });\n\n  $('body').on('click', '.js-toggle-colors-link', e => {\n    e.preventDefault();\n    $('.js-toggle-colors-container').toggleClass('hide');\n  });\n\n  $('.log-tabs a').on('click', function logTabsClick(e) {\n    e.preventDefault();\n    $(this).tab('show');\n  });\n\n  $('.log-bottom').on('click', e => {\n    e.preventDefault();\n    const $visibleLog = $('.file-content:visible');\n    $visibleLog.animate(\n      {\n        scrollTop: $visibleLog.find('ol').height(),\n      },\n      'fast',\n    );\n  });\n\n  $('.change-owner-link').on('click', function changeOwnerLinkClick(e) {\n    e.preventDefault();\n    $(this).hide();\n    modal.show();\n  });\n\n  $('.change-owner-cancel-link').on('click', e => {\n    e.preventDefault();\n    modal.hide();\n    $('.change-owner-link').show();\n  });\n\n  $('li.project_member, li.group_member').on('ajax:success', refreshCurrentPage);\n\n  $(\"input[name='blacklist_type']\").on('click', showBlacklistType);\n  showBlacklistType();\n}\n","import { __ } from '~/locale';\n\nexport const PLACEHOLDER_USER_EXTERNAL_DEFAULT_TRUE = __('Regex pattern');\nexport const PLACEHOLDER_USER_EXTERNAL_DEFAULT_FALSE = __(\n  'To define internal users, first enable new users set to external',\n);\n\nfunction setUserInternalRegexPlaceholder(checkbox) {\n  const userInternalRegex = document.getElementById(\n    'application_setting_user_default_internal_regex',\n  );\n  if (checkbox && userInternalRegex) {\n    if (checkbox.checked) {\n      userInternalRegex.readOnly = false;\n      userInternalRegex.placeholder = PLACEHOLDER_USER_EXTERNAL_DEFAULT_TRUE;\n    } else {\n      userInternalRegex.readOnly = true;\n      userInternalRegex.placeholder = PLACEHOLDER_USER_EXTERNAL_DEFAULT_FALSE;\n    }\n  }\n}\n\nexport default function initUserInternalRegexPlaceholder() {\n  const checkbox = document.getElementById('application_setting_user_default_external');\n  setUserInternalRegexPlaceholder(checkbox);\n  checkbox.addEventListener('change', () => {\n    setUserInternalRegexPlaceholder(checkbox);\n  });\n}\n","import initAdmin from './admin';\nimport initUserInternalRegexPlaceholder from './application_settings/account_and_limits';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  initAdmin();\n  initUserInternalRegexPlaceholder();\n});\n","import axios from '../../../lib/utils/axios_utils';\nimport { __ } from '../../../locale';\nimport flash from '../../../flash';\n\nexport default class UsagePingPayload {\n  constructor(trigger, container) {\n    this.trigger = trigger;\n    this.container = container;\n    this.isVisible = false;\n    this.isInserted = false;\n  }\n\n  init() {\n    this.spinner = this.trigger.querySelector('.js-spinner');\n    this.text = this.trigger.querySelector('.js-text');\n\n    this.trigger.addEventListener('click', event => {\n      event.preventDefault();\n\n      if (this.isVisible) return this.hidePayload();\n\n      return this.requestPayload();\n    });\n  }\n\n  requestPayload() {\n    if (this.isInserted) return this.showPayload();\n\n    this.spinner.classList.add('d-inline');\n\n    return axios\n      .get(this.container.dataset.endpoint, {\n        responseType: 'text',\n      })\n      .then(({ data }) => {\n        this.spinner.classList.remove('d-inline');\n        this.insertPayload(data);\n      })\n      .catch(() => {\n        this.spinner.classList.remove('d-inline');\n        flash(__('Error fetching usage ping data.'));\n      });\n  }\n\n  hidePayload() {\n    this.isVisible = false;\n    this.container.classList.add('d-none');\n    this.text.textContent = __('Preview payload');\n  }\n\n  showPayload() {\n    this.isVisible = true;\n    this.container.classList.remove('d-none');\n    this.text.textContent = __('Hide payload');\n  }\n\n  insertPayload(data) {\n    this.isInserted = true;\n    this.container.innerHTML = data;\n    this.showPayload();\n  }\n}\n","import UsagePingPayload from './../usage_ping_payload';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  new UsagePingPayload(\n    document.querySelector('.js-usage-ping-payload-trigger'),\n    document.querySelector('.js-usage-ping-payload'),\n  ).init();\n});\n","import $ from 'jquery';\nimport { __ } from './locale';\n\nfunction expandSection($section) {\n  $section.find('.js-settings-toggle:not(.js-settings-toggle-trigger-only)').text(__('Collapse'));\n  $section\n    .find('.settings-content')\n    .off('scroll.expandSection')\n    .scrollTop(0);\n  $section.addClass('expanded');\n  if (!$section.hasClass('no-animate')) {\n    $section\n      .addClass('animating')\n      .one('animationend.animateSection', () => $section.removeClass('animating'));\n  }\n}\n\nfunction closeSection($section) {\n  $section.find('.js-settings-toggle:not(.js-settings-toggle-trigger-only)').text(__('Expand'));\n  $section.find('.settings-content').on('scroll.expandSection', () => expandSection($section));\n  $section.removeClass('expanded');\n  if (!$section.hasClass('no-animate')) {\n    $section\n      .addClass('animating')\n      .one('animationend.animateSection', () => $section.removeClass('animating'));\n  }\n}\n\nfunction toggleSection($section) {\n  $section.removeClass('no-animate');\n  if ($section.hasClass('expanded')) {\n    closeSection($section);\n  } else {\n    expandSection($section);\n  }\n}\n\nexport default function initSettingsPanels() {\n  $('.settings').each((i, elm) => {\n    const $section = $(elm);\n    $section.on('click.toggleSection', '.js-settings-toggle', () => toggleSection($section));\n\n    if (!$section.hasClass('expanded')) {\n      $section.find('.settings-content').on('scroll.expandSection', () => {\n        $section.removeClass('no-animate');\n        expandSection($section);\n      });\n    }\n  });\n\n  if (window.location.hash) {\n    const $target = $(window.location.hash);\n    if ($target.length && $target.hasClass('settings')) {\n      expandSection($target);\n    }\n  }\n}\n","import $ from 'jquery';\nimport AccessorUtilities from './lib/utils/accessor';\n\nexport default class ProjectSelectComboButton {\n  constructor(select) {\n    this.projectSelectInput = $(select);\n    this.newItemBtn = $('.new-project-item-link');\n    this.resourceType = this.newItemBtn.data('type');\n    this.resourceLabel = this.newItemBtn.data('label');\n    this.formattedText = this.deriveTextVariants();\n    this.groupId = this.projectSelectInput.data('groupId');\n    this.bindEvents();\n    this.initLocalStorage();\n  }\n\n  bindEvents() {\n    this.projectSelectInput\n      .siblings('.new-project-item-select-button')\n      .on('click', e => this.openDropdown(e));\n\n    this.newItemBtn.on('click', e => {\n      if (!this.getProjectFromLocalStorage()) {\n        e.preventDefault();\n        this.openDropdown(e);\n      }\n    });\n\n    this.projectSelectInput.on('change', () => this.selectProject());\n  }\n\n  initLocalStorage() {\n    const localStorageIsSafe = AccessorUtilities.isLocalStorageAccessSafe();\n\n    if (localStorageIsSafe) {\n      this.localStorageKey = [\n        'group',\n        this.groupId,\n        this.formattedText.localStorageItemType,\n        'recent-project',\n      ].join('-');\n      this.setBtnTextFromLocalStorage();\n    }\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  openDropdown(event) {\n    $(event.currentTarget)\n      .siblings('.project-item-select')\n      .select2('open');\n  }\n\n  selectProject() {\n    const selectedProjectData = JSON.parse(this.projectSelectInput.val());\n    const projectUrl = `${selectedProjectData.url}/${this.projectSelectInput.data('relativePath')}`;\n    const projectName = selectedProjectData.name;\n\n    const projectMeta = {\n      url: projectUrl,\n      name: projectName,\n    };\n\n    this.setNewItemBtnAttributes(projectMeta);\n    this.setProjectInLocalStorage(projectMeta);\n  }\n\n  setBtnTextFromLocalStorage() {\n    const cachedProjectData = this.getProjectFromLocalStorage();\n\n    this.setNewItemBtnAttributes(cachedProjectData);\n  }\n\n  setNewItemBtnAttributes(project) {\n    if (project) {\n      this.newItemBtn.attr('href', project.url);\n      this.newItemBtn.text(`${this.formattedText.defaultTextPrefix} in ${project.name}`);\n    } else {\n      this.newItemBtn.text(`Select project to create ${this.formattedText.presetTextSuffix}`);\n    }\n  }\n\n  getProjectFromLocalStorage() {\n    const projectString = localStorage.getItem(this.localStorageKey);\n\n    return JSON.parse(projectString);\n  }\n\n  setProjectInLocalStorage(projectMeta) {\n    const projectString = JSON.stringify(projectMeta);\n\n    localStorage.setItem(this.localStorageKey, projectString);\n  }\n\n  deriveTextVariants() {\n    const defaultTextPrefix = this.resourceLabel;\n\n    // the trailing slice call depluralizes each of these strings (e.g. new-issues -> new-issue)\n    const localStorageItemType = `new-${this.resourceType\n      .split('_')\n      .join('-')\n      .slice(0, -1)}`;\n    const presetTextSuffix = this.resourceType\n      .split('_')\n      .join(' ')\n      .slice(0, -1);\n\n    return {\n      localStorageItemType, // new-issue / new-merge-request\n      defaultTextPrefix, // New issue / New merge request\n      presetTextSuffix, // issue / merge request\n    };\n  }\n}\n","/* eslint-disable func-names, no-var, object-shorthand, one-var, no-else-return */\n\nimport $ from 'jquery';\nimport Api from './api';\nimport ProjectSelectComboButton from './project_select_combo_button';\n\nexport default function projectSelect() {\n  $('.ajax-project-select').each(function(i, select) {\n    var placeholder;\n    const simpleFilter = $(select).data('simpleFilter') || false;\n    this.groupId = $(select).data('groupId');\n    this.includeGroups = $(select).data('includeGroups');\n    this.allProjects = $(select).data('allProjects') || false;\n    this.orderBy = $(select).data('orderBy') || 'id';\n    this.withIssuesEnabled = $(select).data('withIssuesEnabled');\n    this.withMergeRequestsEnabled = $(select).data('withMergeRequestsEnabled');\n    this.withShared =\n      $(select).data('withShared') === undefined ? true : $(select).data('withShared');\n    this.includeProjectsInSubgroups = $(select).data('includeProjectsInSubgroups') || false;\n    this.allowClear = $(select).data('allowClear') || false;\n\n    placeholder = 'Search for project';\n    if (this.includeGroups) {\n      placeholder += ' or group';\n    }\n\n    $(select).select2({\n      placeholder: placeholder,\n      minimumInputLength: 0,\n      query: (function(_this) {\n        return function(query) {\n          var finalCallback, projectsCallback;\n          finalCallback = function(projects) {\n            var data;\n            data = {\n              results: projects,\n            };\n            return query.callback(data);\n          };\n          if (_this.includeGroups) {\n            projectsCallback = function(projects) {\n              var groupsCallback;\n              groupsCallback = function(groups) {\n                var data;\n                data = groups.concat(projects);\n                return finalCallback(data);\n              };\n              return Api.groups(query.term, {}, groupsCallback);\n            };\n          } else {\n            projectsCallback = finalCallback;\n          }\n          if (_this.groupId) {\n            return Api.groupProjects(\n              _this.groupId,\n              query.term,\n              {\n                with_issues_enabled: _this.withIssuesEnabled,\n                with_merge_requests_enabled: _this.withMergeRequestsEnabled,\n                with_shared: _this.withShared,\n                include_subgroups: _this.includeProjectsInSubgroups,\n              },\n              projectsCallback,\n            );\n          } else {\n            return Api.projects(\n              query.term,\n              {\n                order_by: _this.orderBy,\n                with_issues_enabled: _this.withIssuesEnabled,\n                with_merge_requests_enabled: _this.withMergeRequestsEnabled,\n                membership: !_this.allProjects,\n              },\n              projectsCallback,\n            );\n          }\n        };\n      })(this),\n      id: function(project) {\n        if (simpleFilter) return project.id;\n        return JSON.stringify({\n          name: project.name,\n          url: project.web_url,\n        });\n      },\n      text: function(project) {\n        return project.name_with_namespace || project.name;\n      },\n\n      initSelection: function(el, callback) {\n        return Api.project(el.val()).then(({ data }) => callback(data));\n      },\n\n      allowClear: this.allowClear,\n\n      dropdownCssClass: 'ajax-project-dropdown',\n    });\n    if (simpleFilter) return select;\n    return new ProjectSelectComboButton(select);\n  });\n}\n","import initSettingsPanels from '~/settings_panels';\nimport projectSelect from '~/project_select';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  // Initialize expandable settings panels\n  initSettingsPanels();\n  projectSelect();\n});\n"],"sourceRoot":""}