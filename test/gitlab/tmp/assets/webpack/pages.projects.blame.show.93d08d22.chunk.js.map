{"version":3,"sources":["webpack:///./pages/projects/blame/show/index.js","webpack:///./new_commit_form.js","webpack:///./lib/utils/ace_utils.js","webpack:///./blob/file_template_selector.js","webpack:///./blob/template_selectors/type_selector.js","webpack:///./blob/template_selectors/ci_yaml_selector.js","webpack:///./blob/template_selectors/dockerfile_selector.js","webpack:///./blob/template_selectors/gitignore_selector.js","webpack:///./blob/template_selectors/license_selector.js","webpack:///./blob/file_template_mediator.js","webpack:///./blob_edit/edit_blob.js","webpack:///./blob/blob_file_dropzone.js","webpack:///./blob_edit/blob_bundle.js","webpack:///./behaviors/shortcuts/shortcuts_navigation.js","webpack:///./project_select_combo_button.js","webpack:///./project_select.js","webpack:///./pages/projects/project.js","webpack:///./line_highlighter.js","webpack:///./blob/blob_fork_suggestion.js","webpack:///./pages/projects/index.js","webpack:///./lib/utils/constants.js","webpack:///./blob/blob_line_permalink_updater.js","webpack:///./behaviors/shortcuts/shortcuts_blob.js","webpack:///./pages/projects/init_blob.js"],"names":["__webpack_require__","r","__webpack_exports__","_pages_projects_init_blob__WEBPACK_IMPORTED_MODULE_0__","document","addEventListener","initBlob","NewCommitForm","form","_classCallCheck","this","renderDestination","bind","branchName","find","originalBranch","createMergeRequest","createMergeRequestContainer","keyup","different","val","show","wasDifferent","prop","hide","getModeByFileExtension","path","ace","require","getModeForPath","mode","d","FileTemplateSelector","mediator","$dropdown","$wrapper","cfg","config","$","dropdown","wrapper","$loadingIcon","$dropdownToggleText","initDropdown","init","removeClass","addClass","hasClass","text","options","query","e","data","preventDefault","selectTemplateFile","opts","selectedObj","name","reportSelection","FileTemplateTypeSelector","_ref","_this","dropdownData","type_selector_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","call","_this2","glDropdown","filterable","selectable","toggleLabel","item","clicked","selectTemplateTypeOptions","BlobCiYamlSelector","ci_yaml_selector_classCallCheck","ci_yaml_selector_possibleConstructorReturn","ci_yaml_selector_getPrototypeOf","key","pattern","type","search","fields","reportSelectionName","DockerfileSelector","dockerfile_selector_classCallCheck","dockerfile_selector_possibleConstructorReturn","dockerfile_selector_getPrototypeOf","BlobGitignoreSelector","gitignore_selector_classCallCheck","gitignore_selector_possibleConstructorReturn","gitignore_selector_getPrototypeOf","BlobLicenseSelector","license_selector_classCallCheck","license_selector_possibleConstructorReturn","license_selector_getPrototypeOf","el","$el","project","fullname","id","FileTemplateMediator","editor","currentAction","projectId","file_template_mediator_classCallCheck","initTemplateSelectors","initTemplateTypeSelector","initDomElements","initDropdowns","initPageEvents","templateSelectors","GitignoreSelector","LicenseSelector","map","TemplateSelectorClass","typeSelector","templateSelector","$templatesMenu","$undoMenu","$fileEditor","$undoBtn","$templateSelectors","$filenameInput","$fileContent","$commitForm","$navLinks","hideTemplateSelectorMenu","displayMatchedTemplateSelector","listenForFilenameInput","prepFileContentForSubmit","listenForPreviewMode","on","_this3","submit","getValue","_this4","hash","target","href","split","isHidden","showTemplateSelectorMenu","forEach","selector","setToggleText","cacheToggleText","selectTemplateType","_this5","renderLoading","destroyUndoMenu","fetchFileTemplate","then","file","showUndoMenu","setEditorContent","setFilename","renderLoaded","catch","err","Flash","concat","_this6","currentInput","getFilename","test","_this7","arguments","length","undefined","Promise","resolve","Api","projectTemplate","newValue","content","setValue","focus","navigateFileStart","_this8","restoreFromCache","cacheFileContents","off","cachedToggleText","getTemplateSelectorToggleText","cachedContent","cachedFilename","setTemplateSelectorToggleText","getToggleText","trigger","selected","EditBlob","edit_blob_classCallCheck","configureAceEditor","initModePanesAndLinks","initSoftWrap","initFileSelectors","_this$options","filePath","assetsPath","isMarkdown","set","loadModule","edit","addEditorMarkdownListeners","$blockScrolling","Infinity","getSession","setMode","_this$options2","fileTemplateMediator","TemplateSelectorMediator","$editModePanes","$editModeLinks","editModeLinkClickHandler","currentLink","paneId","attr","currentPane","filter","parent","fadeIn","$toggleButton","axios","post","empty","append","renderGFM","createFlash","__","isSoftWrapped","toggleSoftWrap","toggleClass","setUseWrapMode","toggleLoading","$icon","loading","disable","HIDDEN_CLASS","enable","Dropzone","autoDiscover","BlobFileDropzone","method","blob_file_dropzone_classCallCheck","formDropzone","submitButton","submitButtonLoadingIcon","dropzoneMessage","dropzone","autoProcessQueue","url","clickable","uploadMultiple","paramName","maxFilesize","gon","max_file_size","parallelUploads","maxFiles","addRemoveLinks","previewsContainer","headers","csrf","html","header","response","modal","visitUrl","removeFile","xhr","formData","error","errorMessage","stripped","stopPropagation","getQueuedFiles","alert","processQueue","editBlobForm","uploadBlobForm","deleteBlobForm","urlRoot","commitButton","window","onbeforeunload","gl","utils","disableButtonIfEmptyField","ShortcutsNavigation","Mousetrap","findAndFollowLink","enabledHelp","push","Shortcuts","ProjectSelectComboButton","select","projectSelectInput","newItemBtn","resourceType","resourceLabel","formattedText","deriveTextVariants","groupId","bindEvents","initLocalStorage","siblings","openDropdown","getProjectFromLocalStorage","selectProject","AccessorUtilities","isLocalStorageAccessSafe","localStorageKey","localStorageItemType","join","setBtnTextFromLocalStorage","event","currentTarget","select2","selectedProjectData","JSON","parse","projectMeta","setNewItemBtnAttributes","setProjectInLocalStorage","cachedProjectData","defaultTextPrefix","presetTextSuffix","projectString","localStorage","getItem","stringify","setItem","slice","projectSelect","each","i","placeholder","simpleFilter","includeGroups","allProjects","orderBy","withIssuesEnabled","withMergeRequestsEnabled","withShared","includeProjectsInSubgroups","allowClear","minimumInputLength","finalCallback","projectsCallback","projects","results","callback","groupsCallback","groups","term","groupProjects","with_issues_enabled","with_merge_requests_enabled","with_shared","include_subgroups","order_by","membership","web_url","name_with_namespace","initSelection","dropdownCssClass","Project","$cloneOptions","$projectCloneField","$cloneBtnLabel","mobileCloneField","querySelector","selectedCloneOption","trim","$this","cloneType","activeText","$label","closest","dataset","clipboardText","initRefSwitcher","parents","Cookies","remove","cookieKey","projectSelectDropdown","changeProject","location","refListItem","createElement","refLink","get","params","ref","flash","filterRemote","filterByText","inputFieldName","fieldName","renderRow","li","cloneNode","className","textContent","link","appendChild","obj","$form","$visit","shouldVisit","action","divider","indexOf","serialize","jquery__WEBPACK_IMPORTED_MODULE_0__","jquery__WEBPACK_IMPORTED_MODULE_0___default","n","LineHighlighter","highlightLineClass","fileHolderSelector","scrollFileHolder","_hash","setHash","highlightLine","clickHandler","highlightHash","prototype","$fileHolder","newHash","range","clearHighlight","hashToRange","highlightRange","lineSelector","scrollOptions","offset","scrollTo","current","lineNumber","shiftKey","matches","match","parseInt","reverse","firstLineNumber","lastLineNumber","__setLocationHash__","value","history","pushState","title","defaults","openButtons","forkButtons","cancelButtons","suggestionSections","actionTextPieces","BlobForkSuggestion","elementMap","Object","assign","onOpenButtonClick","onCancelButtonClick","forkPath","showSuggestionSection","hideSuggestionSection","_projects_gke_cluster_dropdowns__WEBPACK_IMPORTED_MODULE_0__","_persistent_user_callout__WEBPACK_IMPORTED_MODULE_1__","_project__WEBPACK_IMPORTED_MODULE_2__","_behaviors_shortcuts_shortcuts_navigation__WEBPACK_IMPORTED_MODULE_3__","page","body","callout","PersistentUserCallout","initGkeDropdowns","BYTES_IN_KIB","lineNumberRe","updateLineNumbersOnBlobPermalinks","linksToUpdate","getLocationHash","hashUrlString","Array","permalinkButton","baseHref","getAttribute","setAttribute","BlobLinePermalinkUpdater","blobContentHolder","lineNumberSelector","elementsToUpdate","updateBlameAndBlobPermalinkCb","setTimeout","skipResetBindings","fileBlobPermalinkUrl","ShortcutsBlob","moveToFilePermalink","_assertThisInitialized","querySelectorAll","fileBlobPermalinkUrlElement","initBlobBundle"],"mappings":"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","file":"pages.projects.blame.show.93d08d22.chunk.js","sourcesContent":["import initBlob from '~/pages/projects/init_blob';\n\ndocument.addEventListener('DOMContentLoaded', initBlob);\n","/* eslint-disable no-var, no-return-assign */\nexport default class NewCommitForm {\n  constructor(form) {\n    this.form = form;\n    this.renderDestination = this.renderDestination.bind(this);\n    this.branchName = form.find('.js-branch-name');\n    this.originalBranch = form.find('.js-original-branch');\n    this.createMergeRequest = form.find('.js-create-merge-request');\n    this.createMergeRequestContainer = form.find('.js-create-merge-request-container');\n    this.branchName.keyup(this.renderDestination);\n    this.renderDestination();\n  }\n  renderDestination() {\n    var different;\n    different = this.branchName.val() !== this.originalBranch.val();\n    if (different) {\n      this.createMergeRequestContainer.show();\n      if (!this.wasDifferent) {\n        this.createMergeRequest.prop('checked', true);\n      }\n    } else {\n      this.createMergeRequestContainer.hide();\n      this.createMergeRequest.prop('checked', false);\n    }\n    return (this.wasDifferent = different);\n  }\n}\n","/* global ace */\n\nexport default function getModeByFileExtension(path) {\n  const modelist = ace.require('ace/ext/modelist');\n  return modelist.getModeForPath(path).mode;\n}\n","import $ from 'jquery';\n\nexport default class FileTemplateSelector {\n  constructor(mediator) {\n    this.mediator = mediator;\n    this.$dropdown = null;\n    this.$wrapper = null;\n  }\n\n  init() {\n    const cfg = this.config;\n\n    this.$dropdown = $(cfg.dropdown);\n    this.$wrapper = $(cfg.wrapper);\n    this.$loadingIcon = this.$wrapper.find('.fa-chevron-down');\n    this.$dropdownToggleText = this.$wrapper.find('.dropdown-toggle-text');\n\n    this.initDropdown();\n  }\n\n  show() {\n    if (this.$dropdown === null) {\n      this.init();\n    }\n\n    this.$wrapper.removeClass('hidden');\n  }\n\n  hide() {\n    if (this.$dropdown !== null) {\n      this.$wrapper.addClass('hidden');\n    }\n  }\n\n  isHidden() {\n    return this.$wrapper.hasClass('hidden');\n  }\n\n  getToggleText() {\n    return this.$dropdownToggleText.text();\n  }\n\n  setToggleText(text) {\n    this.$dropdownToggleText.text(text);\n  }\n\n  renderLoading() {\n    this.$loadingIcon.addClass('fa-spinner fa-spin').removeClass('fa-chevron-down');\n  }\n\n  renderLoaded() {\n    this.$loadingIcon.addClass('fa-chevron-down').removeClass('fa-spinner fa-spin');\n  }\n\n  reportSelection(options) {\n    const { query, e, data } = options;\n    e.preventDefault();\n    return this.mediator.selectTemplateFile(this, query, data);\n  }\n\n  reportSelectionName(options) {\n    const opts = options;\n    opts.query = options.selectedObj.name;\n\n    this.reportSelection(opts);\n  }\n}\n","import FileTemplateSelector from '../file_template_selector';\n\nexport default class FileTemplateTypeSelector extends FileTemplateSelector {\n  constructor({ mediator, dropdownData }) {\n    super(mediator);\n    this.mediator = mediator;\n    this.config = {\n      dropdown: '.js-template-type-selector',\n      wrapper: '.js-template-type-selector-wrap',\n      dropdownData,\n    };\n  }\n\n  initDropdown() {\n    this.$dropdown.glDropdown({\n      data: this.config.dropdownData,\n      filterable: false,\n      selectable: true,\n      toggleLabel: item => item.name,\n      clicked: options => this.mediator.selectTemplateTypeOptions(options),\n      text: item => item.name,\n    });\n  }\n}\n","import FileTemplateSelector from '../file_template_selector';\n\nexport default class BlobCiYamlSelector extends FileTemplateSelector {\n  constructor({ mediator }) {\n    super(mediator);\n    this.config = {\n      key: 'gitlab-ci-yaml',\n      name: '.gitlab-ci.yml',\n      pattern: /(.gitlab-ci.yml)/,\n      type: 'gitlab_ci_ymls',\n      dropdown: '.js-gitlab-ci-yml-selector',\n      wrapper: '.js-gitlab-ci-yml-selector-wrap',\n    };\n  }\n\n  initDropdown() {\n    // maybe move to super class as well\n    this.$dropdown.glDropdown({\n      data: this.$dropdown.data('data'),\n      filterable: true,\n      selectable: true,\n      toggleLabel: item => item.name,\n      search: {\n        fields: ['name'],\n      },\n      clicked: options => this.reportSelectionName(options),\n      text: item => item.name,\n    });\n  }\n}\n","import FileTemplateSelector from '../file_template_selector';\n\nexport default class DockerfileSelector extends FileTemplateSelector {\n  constructor({ mediator }) {\n    super(mediator);\n    this.config = {\n      key: 'dockerfile',\n      name: 'Dockerfile',\n      pattern: /(Dockerfile)/,\n      type: 'dockerfiles',\n      dropdown: '.js-dockerfile-selector',\n      wrapper: '.js-dockerfile-selector-wrap',\n    };\n  }\n\n  initDropdown() {\n    // maybe move to super class as well\n    this.$dropdown.glDropdown({\n      data: this.$dropdown.data('data'),\n      filterable: true,\n      selectable: true,\n      toggleLabel: item => item.name,\n      search: {\n        fields: ['name'],\n      },\n      clicked: options => this.reportSelectionName(options),\n      text: item => item.name,\n    });\n  }\n}\n","import FileTemplateSelector from '../file_template_selector';\n\nexport default class BlobGitignoreSelector extends FileTemplateSelector {\n  constructor({ mediator }) {\n    super(mediator);\n    this.config = {\n      key: 'gitignore',\n      name: '.gitignore',\n      pattern: /(.gitignore)/,\n      type: 'gitignores',\n      dropdown: '.js-gitignore-selector',\n      wrapper: '.js-gitignore-selector-wrap',\n    };\n  }\n\n  initDropdown() {\n    this.$dropdown.glDropdown({\n      data: this.$dropdown.data('data'),\n      filterable: true,\n      selectable: true,\n      toggleLabel: item => item.name,\n      search: {\n        fields: ['name'],\n      },\n      clicked: options => this.reportSelectionName(options),\n      text: item => item.name,\n    });\n  }\n}\n","import FileTemplateSelector from '../file_template_selector';\n\nexport default class BlobLicenseSelector extends FileTemplateSelector {\n  constructor({ mediator }) {\n    super(mediator);\n    this.config = {\n      key: 'license',\n      name: 'LICENSE',\n      pattern: /^(.+\\/)?(licen[sc]e|copying)($|\\.)/i,\n      type: 'licenses',\n      dropdown: '.js-license-selector',\n      wrapper: '.js-license-selector-wrap',\n    };\n  }\n\n  initDropdown() {\n    this.$dropdown.glDropdown({\n      data: this.$dropdown.data('data'),\n      filterable: true,\n      selectable: true,\n      toggleLabel: item => item.name,\n      search: {\n        fields: ['name'],\n      },\n      clicked: options => {\n        const { e } = options;\n        const el = options.$el;\n        const query = options.selectedObj;\n\n        const data = {\n          project: this.$dropdown.data('project'),\n          fullname: this.$dropdown.data('fullname'),\n        };\n\n        this.reportSelection({\n          query: query.id,\n          el,\n          e,\n          data,\n        });\n      },\n      text: item => item.name,\n    });\n  }\n}\n","import Api from '~/api';\n\nimport $ from 'jquery';\nimport Flash from '../flash';\nimport FileTemplateTypeSelector from './template_selectors/type_selector';\nimport BlobCiYamlSelector from './template_selectors/ci_yaml_selector';\nimport DockerfileSelector from './template_selectors/dockerfile_selector';\nimport GitignoreSelector from './template_selectors/gitignore_selector';\nimport LicenseSelector from './template_selectors/license_selector';\n\nexport default class FileTemplateMediator {\n  constructor({ editor, currentAction, projectId }) {\n    this.editor = editor;\n    this.currentAction = currentAction;\n    this.projectId = projectId;\n\n    this.initTemplateSelectors();\n    this.initTemplateTypeSelector();\n    this.initDomElements();\n    this.initDropdowns();\n    this.initPageEvents();\n  }\n\n  initTemplateSelectors() {\n    // Order dictates template type dropdown item order\n    this.templateSelectors = [\n      GitignoreSelector,\n      BlobCiYamlSelector,\n      DockerfileSelector,\n      LicenseSelector,\n    ].map(TemplateSelectorClass => new TemplateSelectorClass({ mediator: this }));\n  }\n\n  initTemplateTypeSelector() {\n    this.typeSelector = new FileTemplateTypeSelector({\n      mediator: this,\n      dropdownData: this.templateSelectors.map(templateSelector => {\n        const cfg = templateSelector.config;\n\n        return {\n          name: cfg.name,\n          key: cfg.key,\n        };\n      }),\n    });\n  }\n\n  initDomElements() {\n    const $templatesMenu = $('.template-selectors-menu');\n    const $undoMenu = $templatesMenu.find('.template-selectors-undo-menu');\n    const $fileEditor = $('.file-editor');\n\n    this.$templatesMenu = $templatesMenu;\n    this.$undoMenu = $undoMenu;\n    this.$undoBtn = $undoMenu.find('button');\n    this.$templateSelectors = $templatesMenu.find('.template-selector-dropdowns-wrap');\n    this.$filenameInput = $fileEditor.find('.js-file-path-name-input');\n    this.$fileContent = $fileEditor.find('#file-content');\n    this.$commitForm = $fileEditor.find('form');\n    this.$navLinks = $fileEditor.find('.nav-links');\n  }\n\n  initDropdowns() {\n    if (this.currentAction === 'create') {\n      this.typeSelector.show();\n    } else {\n      this.hideTemplateSelectorMenu();\n    }\n\n    this.displayMatchedTemplateSelector();\n  }\n\n  initPageEvents() {\n    this.listenForFilenameInput();\n    this.prepFileContentForSubmit();\n    this.listenForPreviewMode();\n  }\n\n  listenForFilenameInput() {\n    this.$filenameInput.on('keyup blur', () => {\n      this.displayMatchedTemplateSelector();\n    });\n  }\n\n  prepFileContentForSubmit() {\n    this.$commitForm.submit(() => {\n      this.$fileContent.val(this.editor.getValue());\n    });\n  }\n\n  listenForPreviewMode() {\n    this.$navLinks.on('click', 'a', e => {\n      const urlPieces = e.target.href.split('#');\n      const hash = urlPieces[1];\n      if (hash === 'preview') {\n        this.hideTemplateSelectorMenu();\n      } else if (hash === 'editor' && !this.typeSelector.isHidden()) {\n        this.showTemplateSelectorMenu();\n      }\n    });\n  }\n\n  selectTemplateType(item, e) {\n    if (e) {\n      e.preventDefault();\n    }\n\n    this.templateSelectors.forEach(selector => {\n      if (selector.config.key === item.key) {\n        selector.show();\n      } else {\n        selector.hide();\n      }\n    });\n\n    this.typeSelector.setToggleText(item.name);\n\n    this.cacheToggleText();\n  }\n\n  selectTemplateTypeOptions(options) {\n    this.selectTemplateType(options.selectedObj, options.e);\n  }\n\n  selectTemplateFile(selector, query, data) {\n    selector.renderLoading();\n    // in case undo menu is already there\n    this.destroyUndoMenu();\n    this.fetchFileTemplate(selector.config.type, query, data)\n      .then(file => {\n        this.showUndoMenu();\n        this.setEditorContent(file);\n        this.setFilename(selector.config.name);\n        selector.renderLoaded();\n      })\n      .catch(err => new Flash(`An error occurred while fetching the template: ${err}`));\n  }\n\n  displayMatchedTemplateSelector() {\n    const currentInput = this.getFilename();\n    this.templateSelectors.forEach(selector => {\n      const match = selector.config.pattern.test(currentInput);\n\n      if (match) {\n        this.typeSelector.show();\n        this.selectTemplateType(selector.config);\n        this.showTemplateSelectorMenu();\n      }\n    });\n  }\n\n  fetchFileTemplate(type, query, data = {}) {\n    return new Promise(resolve => {\n      const resolveFile = file => resolve(file);\n\n      Api.projectTemplate(this.projectId, type, query, data, resolveFile);\n    });\n  }\n\n  setEditorContent(file) {\n    if (!file && file !== '') return;\n\n    const newValue = file.content || file;\n\n    this.editor.setValue(newValue, 1);\n\n    this.editor.focus();\n\n    this.editor.navigateFileStart();\n  }\n\n  findTemplateSelectorByKey(key) {\n    return this.templateSelectors.find(selector => selector.config.key === key);\n  }\n\n  showUndoMenu() {\n    this.$undoMenu.removeClass('hidden');\n\n    this.$undoBtn.on('click', () => {\n      this.restoreFromCache();\n      this.destroyUndoMenu();\n    });\n  }\n\n  destroyUndoMenu() {\n    this.cacheFileContents();\n    this.cacheToggleText();\n    this.$undoMenu.addClass('hidden');\n    this.$undoBtn.off('click');\n  }\n\n  hideTemplateSelectorMenu() {\n    this.$templatesMenu.hide();\n  }\n\n  showTemplateSelectorMenu() {\n    this.$templatesMenu.show();\n  }\n\n  cacheToggleText() {\n    this.cachedToggleText = this.getTemplateSelectorToggleText();\n  }\n\n  cacheFileContents() {\n    this.cachedContent = this.editor.getValue();\n    this.cachedFilename = this.getFilename();\n  }\n\n  restoreFromCache() {\n    this.setEditorContent(this.cachedContent);\n    this.setFilename(this.cachedFilename);\n    this.setTemplateSelectorToggleText();\n  }\n\n  getTemplateSelectorToggleText() {\n    return this.$templateSelectors\n      .find('.js-template-selector-wrap:visible .dropdown-toggle-text')\n      .text();\n  }\n\n  setTemplateSelectorToggleText() {\n    return this.$templateSelectors\n      .find('.js-template-selector-wrap:visible .dropdown-toggle-text')\n      .text(this.cachedToggleText);\n  }\n\n  getTypeSelectorToggleText() {\n    return this.typeSelector.getToggleText();\n  }\n\n  getFilename() {\n    return this.$filenameInput.val();\n  }\n\n  setFilename(name) {\n    this.$filenameInput.val(name).trigger('change');\n  }\n\n  getSelected() {\n    return this.templateSelectors.find(selector => selector.selected);\n  }\n}\n","/* global ace */\n\nimport $ from 'jquery';\nimport axios from '~/lib/utils/axios_utils';\nimport createFlash from '~/flash';\nimport { __ } from '~/locale';\nimport TemplateSelectorMediator from '../blob/file_template_mediator';\nimport getModeByFileExtension from '~/lib/utils/ace_utils';\nimport { addEditorMarkdownListeners } from '~/lib/utils/text_markdown';\n\nexport default class EditBlob {\n  // The options object has:\n  // assetsPath, filePath, currentAction, projectId, isMarkdown\n  constructor(options) {\n    this.options = options;\n    this.configureAceEditor();\n    this.initModePanesAndLinks();\n    this.initSoftWrap();\n    this.initFileSelectors();\n  }\n\n  configureAceEditor() {\n    const { filePath, assetsPath, isMarkdown } = this.options;\n    ace.config.set('modePath', `${assetsPath}/ace`);\n    ace.config.loadModule('ace/ext/searchbox');\n    ace.config.loadModule('ace/ext/modelist');\n\n    this.editor = ace.edit('editor');\n\n    if (isMarkdown) {\n      addEditorMarkdownListeners(this.editor);\n    }\n\n    // This prevents warnings re: automatic scrolling being logged\n    this.editor.$blockScrolling = Infinity;\n\n    this.editor.focus();\n\n    if (filePath) {\n      this.editor.getSession().setMode(getModeByFileExtension(filePath));\n    }\n  }\n\n  initFileSelectors() {\n    const { currentAction, projectId } = this.options;\n    this.fileTemplateMediator = new TemplateSelectorMediator({\n      currentAction,\n      editor: this.editor,\n      projectId,\n    });\n  }\n\n  initModePanesAndLinks() {\n    this.$editModePanes = $('.js-edit-mode-pane');\n    this.$editModeLinks = $('.js-edit-mode a');\n    this.$editModeLinks.on('click', e => this.editModeLinkClickHandler(e));\n  }\n\n  editModeLinkClickHandler(e) {\n    e.preventDefault();\n\n    const currentLink = $(e.target);\n    const paneId = currentLink.attr('href');\n    const currentPane = this.$editModePanes.filter(paneId);\n\n    this.$editModeLinks.parent().removeClass('active hover');\n\n    currentLink.parent().addClass('active hover');\n\n    this.$editModePanes.hide();\n\n    currentPane.fadeIn(200);\n\n    if (paneId === '#preview') {\n      this.$toggleButton.hide();\n      axios\n        .post(currentLink.data('previewUrl'), {\n          content: this.editor.getValue(),\n        })\n        .then(({ data }) => {\n          currentPane.empty().append(data);\n          currentPane.renderGFM();\n        })\n        .catch(() => createFlash(__('An error occurred previewing the blob')));\n    }\n\n    this.$toggleButton.show();\n\n    return this.editor.focus();\n  }\n\n  initSoftWrap() {\n    this.isSoftWrapped = false;\n    this.$toggleButton = $('.soft-wrap-toggle');\n    this.$toggleButton.on('click', () => this.toggleSoftWrap());\n  }\n\n  toggleSoftWrap() {\n    this.isSoftWrapped = !this.isSoftWrapped;\n    this.$toggleButton.toggleClass('soft-wrap-active', this.isSoftWrapped);\n    this.editor.getSession().setUseWrapMode(this.isSoftWrapped);\n  }\n}\n","/* eslint-disable func-names, object-shorthand, prefer-arrow-callback */\n\nimport $ from 'jquery';\nimport Dropzone from 'dropzone';\nimport { visitUrl } from '../lib/utils/url_utility';\nimport { HIDDEN_CLASS } from '../lib/utils/constants';\nimport csrf from '../lib/utils/csrf';\n\nDropzone.autoDiscover = false;\n\nfunction toggleLoading($el, $icon, loading) {\n  if (loading) {\n    $el.disable();\n    $icon.removeClass(HIDDEN_CLASS);\n  } else {\n    $el.enable();\n    $icon.addClass(HIDDEN_CLASS);\n  }\n}\nexport default class BlobFileDropzone {\n  constructor(form, method) {\n    const formDropzone = form.find('.dropzone');\n    const submitButton = form.find('#submit-all');\n    const submitButtonLoadingIcon = submitButton.find('.js-loading-icon');\n    const dropzoneMessage = form.find('.dz-message');\n    Dropzone.autoDiscover = false;\n\n    const dropzone = formDropzone.dropzone({\n      autoDiscover: false,\n      autoProcessQueue: false,\n      url: form.attr('action'),\n      // Rails uses a hidden input field for PUT\n      // http://stackoverflow.com/questions/21056482/how-to-set-method-put-in-form-tag-in-rails\n      method: method,\n      clickable: true,\n      uploadMultiple: false,\n      paramName: 'file',\n      maxFilesize: gon.max_file_size || 10,\n      parallelUploads: 1,\n      maxFiles: 1,\n      addRemoveLinks: true,\n      previewsContainer: '.dropzone-previews',\n      headers: csrf.headers,\n      init: function() {\n        this.on('addedfile', function() {\n          toggleLoading(submitButton, submitButtonLoadingIcon, false);\n          dropzoneMessage.addClass(HIDDEN_CLASS);\n          $('.dropzone-alerts')\n            .html('')\n            .hide();\n        });\n        this.on('removedfile', function() {\n          toggleLoading(submitButton, submitButtonLoadingIcon, false);\n          dropzoneMessage.removeClass(HIDDEN_CLASS);\n        });\n        this.on('success', function(header, response) {\n          $('#modal-upload-blob').modal('hide');\n          visitUrl(response.filePath);\n        });\n        this.on('maxfilesexceeded', function(file) {\n          dropzoneMessage.addClass(HIDDEN_CLASS);\n          this.removeFile(file);\n        });\n        this.on('sending', function(file, xhr, formData) {\n          formData.append('branch_name', form.find('.js-branch-name').val());\n          formData.append('create_merge_request', form.find('.js-create-merge-request').val());\n          formData.append('commit_message', form.find('.js-commit-message').val());\n        });\n      },\n      // Override behavior of adding error underneath preview\n      error: function(file, errorMessage) {\n        const stripped = $('<div/>')\n          .html(errorMessage)\n          .text();\n        $('.dropzone-alerts')\n          .html(`Error uploading file: \"${stripped}\"`)\n          .show();\n        this.removeFile(file);\n      },\n    });\n\n    submitButton.on('click', e => {\n      e.preventDefault();\n      e.stopPropagation();\n      if (dropzone[0].dropzone.getQueuedFiles().length === 0) {\n        // eslint-disable-next-line no-alert\n        alert('Please select a file');\n        return false;\n      }\n      toggleLoading(submitButton, submitButtonLoadingIcon, true);\n      dropzone[0].dropzone.processQueue();\n      return false;\n    });\n  }\n}\n","/* eslint-disable no-new */\n\nimport $ from 'jquery';\nimport NewCommitForm from '../new_commit_form';\nimport EditBlob from './edit_blob';\nimport BlobFileDropzone from '../blob/blob_file_dropzone';\n\nexport default () => {\n  const editBlobForm = $('.js-edit-blob-form');\n  const uploadBlobForm = $('.js-upload-blob-form');\n  const deleteBlobForm = $('.js-delete-blob-form');\n\n  if (editBlobForm.length) {\n    const urlRoot = editBlobForm.data('relativeUrlRoot');\n    const assetsPath = editBlobForm.data('assetsPrefix');\n    const filePath = editBlobForm.data('blobFilename');\n    const currentAction = $('.js-file-title').data('currentAction');\n    const projectId = editBlobForm.data('project-id');\n    const isMarkdown = editBlobForm.data('is-markdown');\n    const commitButton = $('.js-commit-button');\n    const cancelLink = $('.btn.btn-cancel');\n\n    cancelLink.on('click', () => {\n      window.onbeforeunload = null;\n    });\n\n    commitButton.on('click', () => {\n      window.onbeforeunload = null;\n    });\n\n    new EditBlob({\n      assetsPath: `${urlRoot}${assetsPath}`,\n      filePath,\n      currentAction,\n      projectId,\n      isMarkdown,\n    });\n    new NewCommitForm(editBlobForm);\n\n    // returning here blocks page navigation\n    window.onbeforeunload = () => '';\n  }\n\n  if (uploadBlobForm.length) {\n    const method = uploadBlobForm.data('method');\n\n    new BlobFileDropzone(uploadBlobForm, method);\n    new NewCommitForm(uploadBlobForm);\n\n    window.gl.utils.disableButtonIfEmptyField(\n      uploadBlobForm.find('.js-commit-message'),\n      '.btn-upload-file',\n    );\n  }\n\n  if (deleteBlobForm.length) {\n    new NewCommitForm(deleteBlobForm);\n  }\n};\n","import Mousetrap from 'mousetrap';\nimport findAndFollowLink from '../../lib/utils/navigation_utility';\nimport Shortcuts from './shortcuts';\n\nexport default class ShortcutsNavigation extends Shortcuts {\n  constructor() {\n    super();\n\n    Mousetrap.bind('g p', () => findAndFollowLink('.shortcuts-project'));\n    Mousetrap.bind('g v', () => findAndFollowLink('.shortcuts-project-activity'));\n    Mousetrap.bind('g r', () => findAndFollowLink('.shortcuts-project-releases'));\n    Mousetrap.bind('g f', () => findAndFollowLink('.shortcuts-tree'));\n    Mousetrap.bind('g c', () => findAndFollowLink('.shortcuts-commits'));\n    Mousetrap.bind('g j', () => findAndFollowLink('.shortcuts-builds'));\n    Mousetrap.bind('g n', () => findAndFollowLink('.shortcuts-network'));\n    Mousetrap.bind('g d', () => findAndFollowLink('.shortcuts-repository-charts'));\n    Mousetrap.bind('g i', () => findAndFollowLink('.shortcuts-issues'));\n    Mousetrap.bind('g b', () => findAndFollowLink('.shortcuts-issue-boards'));\n    Mousetrap.bind('g m', () => findAndFollowLink('.shortcuts-merge_requests'));\n    Mousetrap.bind('g w', () => findAndFollowLink('.shortcuts-wiki'));\n    Mousetrap.bind('g s', () => findAndFollowLink('.shortcuts-snippets'));\n    Mousetrap.bind('g k', () => findAndFollowLink('.shortcuts-kubernetes'));\n    Mousetrap.bind('g e', () => findAndFollowLink('.shortcuts-environments'));\n    Mousetrap.bind('g l', () => findAndFollowLink('.shortcuts-metrics'));\n    Mousetrap.bind('i', () => findAndFollowLink('.shortcuts-new-issue'));\n\n    this.enabledHelp.push('.hidden-shortcut.project');\n  }\n}\n","import $ from 'jquery';\nimport AccessorUtilities from './lib/utils/accessor';\n\nexport default class ProjectSelectComboButton {\n  constructor(select) {\n    this.projectSelectInput = $(select);\n    this.newItemBtn = $('.new-project-item-link');\n    this.resourceType = this.newItemBtn.data('type');\n    this.resourceLabel = this.newItemBtn.data('label');\n    this.formattedText = this.deriveTextVariants();\n    this.groupId = this.projectSelectInput.data('groupId');\n    this.bindEvents();\n    this.initLocalStorage();\n  }\n\n  bindEvents() {\n    this.projectSelectInput\n      .siblings('.new-project-item-select-button')\n      .on('click', e => this.openDropdown(e));\n\n    this.newItemBtn.on('click', e => {\n      if (!this.getProjectFromLocalStorage()) {\n        e.preventDefault();\n        this.openDropdown(e);\n      }\n    });\n\n    this.projectSelectInput.on('change', () => this.selectProject());\n  }\n\n  initLocalStorage() {\n    const localStorageIsSafe = AccessorUtilities.isLocalStorageAccessSafe();\n\n    if (localStorageIsSafe) {\n      this.localStorageKey = [\n        'group',\n        this.groupId,\n        this.formattedText.localStorageItemType,\n        'recent-project',\n      ].join('-');\n      this.setBtnTextFromLocalStorage();\n    }\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  openDropdown(event) {\n    $(event.currentTarget)\n      .siblings('.project-item-select')\n      .select2('open');\n  }\n\n  selectProject() {\n    const selectedProjectData = JSON.parse(this.projectSelectInput.val());\n    const projectUrl = `${selectedProjectData.url}/${this.projectSelectInput.data('relativePath')}`;\n    const projectName = selectedProjectData.name;\n\n    const projectMeta = {\n      url: projectUrl,\n      name: projectName,\n    };\n\n    this.setNewItemBtnAttributes(projectMeta);\n    this.setProjectInLocalStorage(projectMeta);\n  }\n\n  setBtnTextFromLocalStorage() {\n    const cachedProjectData = this.getProjectFromLocalStorage();\n\n    this.setNewItemBtnAttributes(cachedProjectData);\n  }\n\n  setNewItemBtnAttributes(project) {\n    if (project) {\n      this.newItemBtn.attr('href', project.url);\n      this.newItemBtn.text(`${this.formattedText.defaultTextPrefix} in ${project.name}`);\n    } else {\n      this.newItemBtn.text(`Select project to create ${this.formattedText.presetTextSuffix}`);\n    }\n  }\n\n  getProjectFromLocalStorage() {\n    const projectString = localStorage.getItem(this.localStorageKey);\n\n    return JSON.parse(projectString);\n  }\n\n  setProjectInLocalStorage(projectMeta) {\n    const projectString = JSON.stringify(projectMeta);\n\n    localStorage.setItem(this.localStorageKey, projectString);\n  }\n\n  deriveTextVariants() {\n    const defaultTextPrefix = this.resourceLabel;\n\n    // the trailing slice call depluralizes each of these strings (e.g. new-issues -> new-issue)\n    const localStorageItemType = `new-${this.resourceType\n      .split('_')\n      .join('-')\n      .slice(0, -1)}`;\n    const presetTextSuffix = this.resourceType\n      .split('_')\n      .join(' ')\n      .slice(0, -1);\n\n    return {\n      localStorageItemType, // new-issue / new-merge-request\n      defaultTextPrefix, // New issue / New merge request\n      presetTextSuffix, // issue / merge request\n    };\n  }\n}\n","/* eslint-disable func-names, no-var, object-shorthand, one-var, no-else-return */\n\nimport $ from 'jquery';\nimport Api from './api';\nimport ProjectSelectComboButton from './project_select_combo_button';\n\nexport default function projectSelect() {\n  $('.ajax-project-select').each(function(i, select) {\n    var placeholder;\n    const simpleFilter = $(select).data('simpleFilter') || false;\n    this.groupId = $(select).data('groupId');\n    this.includeGroups = $(select).data('includeGroups');\n    this.allProjects = $(select).data('allProjects') || false;\n    this.orderBy = $(select).data('orderBy') || 'id';\n    this.withIssuesEnabled = $(select).data('withIssuesEnabled');\n    this.withMergeRequestsEnabled = $(select).data('withMergeRequestsEnabled');\n    this.withShared =\n      $(select).data('withShared') === undefined ? true : $(select).data('withShared');\n    this.includeProjectsInSubgroups = $(select).data('includeProjectsInSubgroups') || false;\n    this.allowClear = $(select).data('allowClear') || false;\n\n    placeholder = 'Search for project';\n    if (this.includeGroups) {\n      placeholder += ' or group';\n    }\n\n    $(select).select2({\n      placeholder: placeholder,\n      minimumInputLength: 0,\n      query: (function(_this) {\n        return function(query) {\n          var finalCallback, projectsCallback;\n          finalCallback = function(projects) {\n            var data;\n            data = {\n              results: projects,\n            };\n            return query.callback(data);\n          };\n          if (_this.includeGroups) {\n            projectsCallback = function(projects) {\n              var groupsCallback;\n              groupsCallback = function(groups) {\n                var data;\n                data = groups.concat(projects);\n                return finalCallback(data);\n              };\n              return Api.groups(query.term, {}, groupsCallback);\n            };\n          } else {\n            projectsCallback = finalCallback;\n          }\n          if (_this.groupId) {\n            return Api.groupProjects(\n              _this.groupId,\n              query.term,\n              {\n                with_issues_enabled: _this.withIssuesEnabled,\n                with_merge_requests_enabled: _this.withMergeRequestsEnabled,\n                with_shared: _this.withShared,\n                include_subgroups: _this.includeProjectsInSubgroups,\n              },\n              projectsCallback,\n            );\n          } else {\n            return Api.projects(\n              query.term,\n              {\n                order_by: _this.orderBy,\n                with_issues_enabled: _this.withIssuesEnabled,\n                with_merge_requests_enabled: _this.withMergeRequestsEnabled,\n                membership: !_this.allProjects,\n              },\n              projectsCallback,\n            );\n          }\n        };\n      })(this),\n      id: function(project) {\n        if (simpleFilter) return project.id;\n        return JSON.stringify({\n          name: project.name,\n          url: project.web_url,\n        });\n      },\n      text: function(project) {\n        return project.name_with_namespace || project.name;\n      },\n\n      initSelection: function(el, callback) {\n        return Api.project(el.val()).then(({ data }) => callback(data));\n      },\n\n      allowClear: this.allowClear,\n\n      dropdownCssClass: 'ajax-project-dropdown',\n    });\n    if (simpleFilter) return select;\n    return new ProjectSelectComboButton(select);\n  });\n}\n","/* eslint-disable func-names, no-var, no-return-assign, one-var, object-shorthand, vars-on-top */\n\nimport $ from 'jquery';\nimport Cookies from 'js-cookie';\nimport { __ } from '~/locale';\nimport { visitUrl } from '~/lib/utils/url_utility';\nimport axios from '~/lib/utils/axios_utils';\nimport flash from '~/flash';\nimport projectSelect from '../../project_select';\n\nexport default class Project {\n  constructor() {\n    const $cloneOptions = $('ul.clone-options-dropdown');\n    const $projectCloneField = $('#project_clone');\n    const $cloneBtnLabel = $('.js-git-clone-holder .js-clone-dropdown-label');\n    const mobileCloneField = document.querySelector(\n      '.js-mobile-git-clone .js-clone-dropdown-label',\n    );\n\n    const selectedCloneOption = $cloneBtnLabel.text().trim();\n    if (selectedCloneOption.length > 0) {\n      $(`a:contains('${selectedCloneOption}')`, $cloneOptions).addClass('is-active');\n    }\n\n    $('a', $cloneOptions).on('click', e => {\n      e.preventDefault();\n      const $this = $(e.currentTarget);\n      const url = $this.attr('href');\n      const cloneType = $this.data('cloneType');\n\n      $('.is-active', $cloneOptions).removeClass('is-active');\n      $(`a[data-clone-type=\"${cloneType}\"]`).each(function() {\n        const $el = $(this);\n        const activeText = $el.find('.dropdown-menu-inner-title').text();\n        const $container = $el.closest('.project-clone-holder');\n        const $label = $container.find('.js-clone-dropdown-label');\n\n        $el.toggleClass('is-active');\n        $label.text(activeText);\n      });\n\n      if (mobileCloneField) {\n        mobileCloneField.dataset.clipboardText = url;\n      } else {\n        $projectCloneField.val(url);\n      }\n      $('.js-git-empty .js-clone').text(url);\n    });\n    // Ref switcher\n    Project.initRefSwitcher();\n    $('.project-refs-select').on('change', function() {\n      return $(this)\n        .parents('form')\n        .submit();\n    });\n    $('.hide-no-ssh-message').on('click', function(e) {\n      Cookies.set('hide_no_ssh_message', 'false');\n      $(this)\n        .parents('.no-ssh-key-message')\n        .remove();\n      return e.preventDefault();\n    });\n    $('.hide-no-password-message').on('click', function(e) {\n      Cookies.set('hide_no_password_message', 'false');\n      $(this)\n        .parents('.no-password-message')\n        .remove();\n      return e.preventDefault();\n    });\n    $('.hide-auto-devops-implicitly-enabled-banner').on('click', function(e) {\n      const projectId = $(this).data('project-id');\n      const cookieKey = `hide_auto_devops_implicitly_enabled_banner_${projectId}`;\n      Cookies.set(cookieKey, 'false');\n      $(this)\n        .parents('.auto-devops-implicitly-enabled-banner')\n        .remove();\n      return e.preventDefault();\n    });\n    Project.projectSelectDropdown();\n  }\n\n  static projectSelectDropdown() {\n    projectSelect();\n    $('.project-item-select').on('click', e => Project.changeProject($(e.currentTarget).val()));\n  }\n\n  static changeProject(url) {\n    return (window.location = url);\n  }\n\n  static initRefSwitcher() {\n    var refListItem = document.createElement('li');\n    var refLink = document.createElement('a');\n\n    refLink.href = '#';\n\n    return $('.js-project-refs-dropdown').each(function() {\n      var $dropdown, selected;\n      $dropdown = $(this);\n      selected = $dropdown.data('selected');\n      return $dropdown.glDropdown({\n        data(term, callback) {\n          axios\n            .get($dropdown.data('refsUrl'), {\n              params: {\n                ref: $dropdown.data('ref'),\n                search: term,\n              },\n            })\n            .then(({ data }) => callback(data))\n            .catch(() => flash(__('An error occurred while getting projects')));\n        },\n        selectable: true,\n        filterable: true,\n        filterRemote: true,\n        filterByText: true,\n        inputFieldName: $dropdown.data('inputFieldName'),\n        fieldName: $dropdown.data('fieldName'),\n        renderRow: function(ref) {\n          var li = refListItem.cloneNode(false);\n\n          if (ref.header != null) {\n            li.className = 'dropdown-header';\n            li.textContent = ref.header;\n          } else {\n            var link = refLink.cloneNode(false);\n\n            if (ref === selected) {\n              link.className = 'is-active';\n            }\n\n            link.textContent = ref;\n            link.dataset.ref = ref;\n\n            li.appendChild(link);\n          }\n\n          return li;\n        },\n        id: function(obj, $el) {\n          return $el.attr('data-ref');\n        },\n        toggleLabel: function(obj, $el) {\n          return $el.text().trim();\n        },\n        clicked: function(options) {\n          const { e } = options;\n          e.preventDefault();\n          if ($('input[name=\"ref\"]').length) {\n            var $form = $dropdown.closest('form');\n\n            var $visit = $dropdown.data('visit');\n            var shouldVisit = $visit ? true : $visit;\n            var action = $form.attr('action');\n            var divider = action.indexOf('?') === -1 ? '?' : '&';\n            if (shouldVisit) {\n              visitUrl(`${action}${divider}${$form.serialize()}`);\n            }\n          }\n        },\n      });\n    });\n  }\n}\n","/* eslint-disable func-names, no-var, no-underscore-dangle, no-param-reassign, prefer-template, consistent-return, one-var, no-else-return */\n\nimport $ from 'jquery';\n\n// LineHighlighter\n//\n// Handles single- and multi-line selection and highlight for blob views.\n//\n//\n// ### Example Markup\n//\n//   <div id=\"blob-content-holder\">\n//     <div class=\"file-content\">\n//       <div class=\"line-numbers\">\n//         <a href=\"#L1\" id=\"L1\" data-line-number=\"1\">1</a>\n//         <a href=\"#L2\" id=\"L2\" data-line-number=\"2\">2</a>\n//         <a href=\"#L3\" id=\"L3\" data-line-number=\"3\">3</a>\n//         <a href=\"#L4\" id=\"L4\" data-line-number=\"4\">4</a>\n//         <a href=\"#L5\" id=\"L5\" data-line-number=\"5\">5</a>\n//       </div>\n//       <pre class=\"code highlight\">\n//         <code>\n//           <span id=\"LC1\" class=\"line\">...</span>\n//           <span id=\"LC2\" class=\"line\">...</span>\n//           <span id=\"LC3\" class=\"line\">...</span>\n//           <span id=\"LC4\" class=\"line\">...</span>\n//           <span id=\"LC5\" class=\"line\">...</span>\n//         </code>\n//       </pre>\n//     </div>\n//   </div>\n//\n\nconst LineHighlighter = function(options = {}) {\n  options.highlightLineClass = options.highlightLineClass || 'hll';\n  options.fileHolderSelector = options.fileHolderSelector || '.file-holder';\n  options.scrollFileHolder = options.scrollFileHolder || false;\n  options.hash = options.hash || window.location.hash;\n\n  this.options = options;\n  this._hash = options.hash;\n  this.highlightLineClass = options.highlightLineClass;\n  this.setHash = this.setHash.bind(this);\n  this.highlightLine = this.highlightLine.bind(this);\n  this.clickHandler = this.clickHandler.bind(this);\n  this.highlightHash = this.highlightHash.bind(this);\n\n  this.bindEvents();\n  this.highlightHash();\n};\n\nLineHighlighter.prototype.bindEvents = function() {\n  const $fileHolder = $(this.options.fileHolderSelector);\n\n  $fileHolder.on('click', 'a[data-line-number]', this.clickHandler);\n  $fileHolder.on('highlight:line', this.highlightHash);\n};\n\nLineHighlighter.prototype.highlightHash = function(newHash) {\n  let range;\n  if (newHash && typeof newHash === 'string') this._hash = newHash;\n\n  this.clearHighlight();\n\n  if (this._hash !== '') {\n    range = this.hashToRange(this._hash);\n    if (range[0]) {\n      this.highlightRange(range);\n      const lineSelector = `#L${range[0]}`;\n      const scrollOptions = {\n        // Scroll to the first highlighted line on initial load\n        // Offset -50 for the sticky top bar, and another -100 for some context\n        offset: -150,\n      };\n      if (this.options.scrollFileHolder) {\n        $(this.options.fileHolderSelector).scrollTo(lineSelector, scrollOptions);\n      } else {\n        $.scrollTo(lineSelector, scrollOptions);\n      }\n    }\n  }\n};\n\nLineHighlighter.prototype.clickHandler = function(event) {\n  var current, lineNumber, range;\n  event.preventDefault();\n  this.clearHighlight();\n  lineNumber = $(event.target)\n    .closest('a')\n    .data('lineNumber');\n  current = this.hashToRange(this._hash);\n  if (!(current[0] && event.shiftKey)) {\n    // If there's no current selection, or there is but Shift wasn't held,\n    // treat this like a single-line selection.\n    this.setHash(lineNumber);\n    return this.highlightLine(lineNumber);\n  } else if (event.shiftKey) {\n    if (lineNumber < current[0]) {\n      range = [lineNumber, current[0]];\n    } else {\n      range = [current[0], lineNumber];\n    }\n    this.setHash(range[0], range[1]);\n    return this.highlightRange(range);\n  }\n};\n\nLineHighlighter.prototype.clearHighlight = function() {\n  return $('.' + this.highlightLineClass).removeClass(this.highlightLineClass);\n};\n\n// Convert a URL hash String into line numbers\n//\n// hash - Hash String\n//\n// Examples:\n//\n//   hashToRange('#L5')    # => [5, null]\n//   hashToRange('#L5-15') # => [5, 15]\n//   hashToRange('#foo')   # => [null, null]\n//\n// Returns an Array\nLineHighlighter.prototype.hashToRange = function(hash) {\n  var first, last, matches;\n  // ?L(\\d+)(?:-(\\d+))?$/)\n  matches = hash.match(/^#?L(\\d+)(?:-(\\d+))?$/);\n  if (matches && matches.length) {\n    first = parseInt(matches[1], 10);\n    last = matches[2] ? parseInt(matches[2], 10) : null;\n    return [first, last];\n  } else {\n    return [null, null];\n  }\n};\n\n// Highlight a single line\n//\n// lineNumber - Line number to highlight\nLineHighlighter.prototype.highlightLine = function(lineNumber) {\n  return $('#LC' + lineNumber).addClass(this.highlightLineClass);\n};\n\n// Highlight all lines within a range\n//\n// range - Array containing the starting and ending line numbers\nLineHighlighter.prototype.highlightRange = function(range) {\n  if (range[1]) {\n    const results = [];\n    const ref = range[0] <= range[1] ? range : range.reverse();\n\n    for (let lineNumber = range[0]; lineNumber <= ref[1]; lineNumber += 1) {\n      results.push(this.highlightLine(lineNumber));\n    }\n\n    return results;\n  } else {\n    return this.highlightLine(range[0]);\n  }\n};\n\n// Set the URL hash string\nLineHighlighter.prototype.setHash = function(firstLineNumber, lastLineNumber) {\n  var hash;\n  if (lastLineNumber) {\n    hash = '#L' + firstLineNumber + '-' + lastLineNumber;\n  } else {\n    hash = '#L' + firstLineNumber;\n  }\n  this._hash = hash;\n  return this.__setLocationHash__(hash);\n};\n\n// Make the actual hash change in the browser\n//\n// This method is stubbed in tests.\nLineHighlighter.prototype.__setLocationHash__ = function(value) {\n  return window.history.pushState(\n    {\n      url: value,\n      // We're using pushState instead of assigning location.hash directly to\n      // prevent the page from scrolling on the hashchange event\n    },\n    document.title,\n    value,\n  );\n};\n\nexport default LineHighlighter;\n","import $ from 'jquery';\n\nconst defaults = {\n  // Buttons that will show the `suggestionSections`\n  // has `data-fork-path`, and `data-action`\n  openButtons: [],\n  // Update the href(from `openButton` -> `data-fork-path`)\n  // whenever a `openButton` is clicked\n  forkButtons: [],\n  // Buttons to hide the `suggestionSections`\n  cancelButtons: [],\n  // Section to show/hide\n  suggestionSections: [],\n  // Pieces of text that need updating depending on the action, `edit`, `replace`, `delete`\n  actionTextPieces: [],\n};\n\nclass BlobForkSuggestion {\n  constructor(options) {\n    this.elementMap = Object.assign({}, defaults, options);\n    this.onOpenButtonClick = this.onOpenButtonClick.bind(this);\n    this.onCancelButtonClick = this.onCancelButtonClick.bind(this);\n  }\n\n  init() {\n    this.bindEvents();\n\n    return this;\n  }\n\n  bindEvents() {\n    $(this.elementMap.openButtons).on('click', this.onOpenButtonClick);\n    $(this.elementMap.cancelButtons).on('click', this.onCancelButtonClick);\n  }\n\n  showSuggestionSection(forkPath, action = 'edit') {\n    $(this.elementMap.suggestionSections).removeClass('hidden');\n    $(this.elementMap.forkButtons).attr('href', forkPath);\n    $(this.elementMap.actionTextPieces).text(action);\n  }\n\n  hideSuggestionSection() {\n    $(this.elementMap.suggestionSections).addClass('hidden');\n  }\n\n  onOpenButtonClick(e) {\n    const forkPath = $(e.currentTarget).attr('data-fork-path');\n    const action = $(e.currentTarget).attr('data-action');\n    this.showSuggestionSection(forkPath, action);\n  }\n\n  onCancelButtonClick() {\n    this.hideSuggestionSection();\n  }\n\n  destroy() {\n    $(this.elementMap.openButtons).off('click', this.onOpenButtonClick);\n    $(this.elementMap.cancelButtons).off('click', this.onCancelButtonClick);\n  }\n}\n\nexport default BlobForkSuggestion;\n","import initGkeDropdowns from '~/projects/gke_cluster_dropdowns';\nimport PersistentUserCallout from '../../persistent_user_callout';\nimport Project from './project';\nimport ShortcutsNavigation from '../../behaviors/shortcuts/shortcuts_navigation';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const { page } = document.body.dataset;\n  const newClusterViews = [\n    'projects:clusters:new',\n    'projects:clusters:create_gcp',\n    'projects:clusters:create_user',\n  ];\n\n  if (newClusterViews.indexOf(page) > -1) {\n    const callout = document.querySelector('.gcp-signup-offer');\n    if (callout) new PersistentUserCallout(callout); // eslint-disable-line no-new\n\n    initGkeDropdowns();\n  }\n\n  new Project(); // eslint-disable-line no-new\n  new ShortcutsNavigation(); // eslint-disable-line no-new\n});\n","export const BYTES_IN_KIB = 1024;\nexport const HIDDEN_CLASS = 'hidden';\n","import { getLocationHash } from '../lib/utils/url_utility';\n\nconst lineNumberRe = /^L[0-9]+/;\n\nconst updateLineNumbersOnBlobPermalinks = linksToUpdate => {\n  const hash = getLocationHash();\n  if (hash && lineNumberRe.test(hash)) {\n    const hashUrlString = `#${hash}`;\n\n    [].concat(Array.prototype.slice.call(linksToUpdate)).forEach(permalinkButton => {\n      const baseHref =\n        permalinkButton.getAttribute('data-original-href') ||\n        (() => {\n          const href = permalinkButton.getAttribute('href');\n          permalinkButton.setAttribute('data-original-href', href);\n          return href;\n        })();\n      permalinkButton.setAttribute('href', `${baseHref}${hashUrlString}`);\n    });\n  }\n};\n\nfunction BlobLinePermalinkUpdater(blobContentHolder, lineNumberSelector, elementsToUpdate) {\n  const updateBlameAndBlobPermalinkCb = () => {\n    // Wait for the hash to update from the LineHighlighter callback\n    setTimeout(() => {\n      updateLineNumbersOnBlobPermalinks(elementsToUpdate);\n    }, 0);\n  };\n\n  blobContentHolder.addEventListener('click', e => {\n    if (e.target.matches(lineNumberSelector)) {\n      updateBlameAndBlobPermalinkCb();\n    }\n  });\n  updateBlameAndBlobPermalinkCb();\n}\n\nexport default BlobLinePermalinkUpdater;\n","import Mousetrap from 'mousetrap';\nimport { getLocationHash, visitUrl } from '../../lib/utils/url_utility';\nimport Shortcuts from './shortcuts';\n\nconst defaults = {\n  skipResetBindings: false,\n  fileBlobPermalinkUrl: null,\n};\n\nexport default class ShortcutsBlob extends Shortcuts {\n  constructor(opts) {\n    const options = Object.assign({}, defaults, opts);\n    super(options.skipResetBindings);\n    this.options = options;\n\n    Mousetrap.bind('y', this.moveToFilePermalink.bind(this));\n  }\n\n  moveToFilePermalink() {\n    if (this.options.fileBlobPermalinkUrl) {\n      const hash = getLocationHash();\n      const hashUrlString = hash ? `#${hash}` : '';\n      visitUrl(`${this.options.fileBlobPermalinkUrl}${hashUrlString}`);\n    }\n  }\n}\n","import LineHighlighter from '~/line_highlighter';\nimport BlobLinePermalinkUpdater from '~/blob/blob_line_permalink_updater';\nimport ShortcutsNavigation from '~/behaviors/shortcuts/shortcuts_navigation';\nimport ShortcutsBlob from '~/behaviors/shortcuts/shortcuts_blob';\nimport BlobForkSuggestion from '~/blob/blob_fork_suggestion';\nimport initBlobBundle from '~/blob_edit/blob_bundle';\n\nexport default () => {\n  new LineHighlighter(); // eslint-disable-line no-new\n\n  // eslint-disable-next-line no-new\n  new BlobLinePermalinkUpdater(\n    document.querySelector('#blob-content-holder'),\n    '.diff-line-num[data-line-number]',\n    document.querySelectorAll('.js-data-file-blob-permalink-url, .js-blob-blame-link'),\n  );\n\n  const fileBlobPermalinkUrlElement = document.querySelector('.js-data-file-blob-permalink-url');\n  const fileBlobPermalinkUrl =\n    fileBlobPermalinkUrlElement && fileBlobPermalinkUrlElement.getAttribute('href');\n\n  new ShortcutsNavigation(); // eslint-disable-line no-new\n\n  // eslint-disable-next-line no-new\n  new ShortcutsBlob({\n    skipResetBindings: true,\n    fileBlobPermalinkUrl,\n  });\n\n  new BlobForkSuggestion({\n    openButtons: document.querySelectorAll('.js-edit-blob-link-fork-toggler'),\n    forkButtons: document.querySelectorAll('.js-fork-suggestion-button'),\n    cancelButtons: document.querySelectorAll('.js-cancel-fork-suggestion-button'),\n    suggestionSections: document.querySelectorAll('.js-file-fork-suggestion-section'),\n    actionTextPieces: document.querySelectorAll('.js-file-fork-suggestion-section-action'),\n  }).init();\n\n  initBlobBundle();\n};\n"],"sourceRoot":""}