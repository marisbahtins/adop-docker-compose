{"version":3,"sources":["webpack:///./pages/groups/milestones/show/index.js","webpack:///./pages/groups/index.js","webpack:///vue_shared/components/deprecated_modal.vue","webpack:///./vue_shared/components/deprecated_modal.vue?95dd","webpack:///./vue_shared/components/deprecated_modal.vue","webpack:///./vue_shared/components/deprecated_modal.vue?74b0","webpack:///./pages/milestones/shared/components/delete_milestone_modal.vue?28a7","webpack:///pages/milestones/shared/components/delete_milestone_modal.vue","webpack:///./pages/milestones/shared/components/delete_milestone_modal.vue","webpack:///./pages/milestones/shared/components/delete_milestone_modal.vue?1c62","webpack:///./pages/milestones/shared/delete_milestone_modal_init.js","webpack:///./pages/milestones/shared/init_milestones_show.js","webpack:///./pages/milestones/shared/event_hub.js"],"names":["__webpack_require__","r","__webpack_exports__","_pages_milestones_shared_init_milestones_show__WEBPACK_IMPORTED_MODULE_0__","_pages_milestones_shared_delete_milestone_modal_init__WEBPACK_IMPORTED_MODULE_1__","_milestone__WEBPACK_IMPORTED_MODULE_2__","document","addEventListener","initMilestonesShow","initDeleteMilestoneModal","Milestone","initDeprecationMessage","_persistent_user_callout__WEBPACK_IMPORTED_MODULE_0__","_projects_gke_cluster_dropdowns__WEBPACK_IMPORTED_MODULE_1__","callout","page","body","dataset","indexOf","querySelector","PersistentUserCallout","initGkeDropdowns","components_deprecated_modalvue_type_script_lang_js_","name","props","id","type","String","required","title","text","hideFooter","Boolean","default","kind","modalDialogClass","closeKind","closeButtonLabel","primaryButtonLabel","secondaryButtonLabel","submitDisabled","computed","btnKindClass","_defineProperty","concat","this","btnCancelKindClass","methods","emitCancel","event","$emit","emitSubmit","component","Object","componentNormalizer","_vm","_h","$createElement","_c","_self","staticClass","class","attrs","role","tabindex","_t","_v","_s","data-dismiss","aria-label","on","click","$event","aria-hidden","_e","disabled","options","__file","components_delete_milestone_modalvue_type_script_lang_js_","components","DeprecatedModal","deprecated_modal","issueCount","Number","mergeRequestCount","milestoneId","milestoneTitle","milestoneUrl","locale","issuesWithCount","mergeRequestsWithCount","onSubmit","_this","event_hub","axios_utils","delete","then","response","successful","url_utility","request","responseURL","catch","error","status","flash","primary-button-label","s__","submit","scopedSlots","_u","key","fn","domProps","innerHTML","delete_milestone_modal","Vue","use","Translate","onRequestFinished","_ref","button","removeAttribute","classList","add","onRequestStarted","setAttribute","remove","eventHub","$once","onDeleteButtonClick","currentTarget","modalProps","parseInt","milestoneIssueCount","milestoneMergeRequestCount","deleteMilestoneButtons","querySelectorAll","forEach","el","deleteMilestoneModal","data","mounted","$on","setModalProps","beforeDestroy","$off","render","createElement","_milestone__WEBPACK_IMPORTED_MODULE_0__","_right_sidebar__WEBPACK_IMPORTED_MODULE_1__","_sidebar_mount_milestone_sidebar__WEBPACK_IMPORTED_MODULE_2__","Sidebar","MountMilestoneSidebar","vue__WEBPACK_IMPORTED_MODULE_0__"],"mappings":"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","file":"pages.groups.milestones.show.6dcbe2ef.chunk.js","sourcesContent":["import initMilestonesShow from '~/pages/milestones/shared/init_milestones_show';\nimport initDeleteMilestoneModal from '~/pages/milestones/shared/delete_milestone_modal_init';\n\nimport Milestone from '~/milestone';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  initMilestonesShow();\n  initDeleteMilestoneModal();\n  Milestone.initDeprecationMessage();\n});\n","import PersistentUserCallout from '~/persistent_user_callout';\nimport initGkeDropdowns from '~/projects/gke_cluster_dropdowns';\n\nfunction initGcpSignupCallout() {\n  const callout = document.querySelector('.gcp-signup-offer');\n\n  if (callout) new PersistentUserCallout(callout); // eslint-disable-line no-new\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const { page } = document.body.dataset;\n  const newClusterViews = [\n    'groups:clusters:new',\n    'groups:clusters:create_gcp',\n    'groups:clusters:create_user',\n  ];\n\n  if (newClusterViews.indexOf(page) > -1) {\n    initGcpSignupCallout();\n    initGkeDropdowns();\n  }\n});\n","<script>\n/* eslint-disable vue/require-default-prop */\nexport default {\n  name: 'DeprecatedModal', // use GlModal instead\n\n  props: {\n    id: {\n      type: String,\n      required: false,\n    },\n    title: {\n      type: String,\n      required: false,\n    },\n    text: {\n      type: String,\n      required: false,\n    },\n    hideFooter: {\n      type: Boolean,\n      required: false,\n      default: false,\n    },\n    kind: {\n      type: String,\n      required: false,\n      default: 'primary',\n    },\n    modalDialogClass: {\n      type: String,\n      required: false,\n      default: '',\n    },\n    closeKind: {\n      type: String,\n      required: false,\n      default: 'default',\n    },\n    closeButtonLabel: {\n      type: String,\n      required: false,\n      default: 'Cancel',\n    },\n    primaryButtonLabel: {\n      type: String,\n      required: false,\n      default: '',\n    },\n    secondaryButtonLabel: {\n      type: String,\n      required: false,\n      default: '',\n    },\n    submitDisabled: {\n      type: Boolean,\n      required: false,\n      default: false,\n    },\n  },\n\n  computed: {\n    btnKindClass() {\n      return {\n        [`btn-${this.kind}`]: true,\n      };\n    },\n    btnCancelKindClass() {\n      return {\n        [`btn-${this.closeKind}`]: true,\n      };\n    },\n  },\n\n  methods: {\n    emitCancel(event) {\n      this.$emit('cancel', event);\n    },\n    emitSubmit(event) {\n      this.$emit('submit', event);\n    },\n  },\n};\n</script>\n\n<template>\n  <div class=\"modal-open\">\n    <div :id=\"id\" :class=\"id ? '' : 'd-block'\" class=\"modal\" role=\"dialog\" tabindex=\"-1\">\n      <div :class=\"modalDialogClass\" class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <slot name=\"header\">\n              <h4 class=\"modal-title float-left\">{{ title }}</h4>\n              <button\n                type=\"button\"\n                class=\"close float-right\"\n                data-dismiss=\"modal\"\n                aria-label=\"Close\"\n                @click=\"emitCancel($event);\"\n              >\n                <span aria-hidden=\"true\">&times;</span>\n              </button>\n            </slot>\n          </div>\n          <div class=\"modal-body\">\n            <slot :text=\"text\" name=\"body\">\n              <p>{{ text }}</p>\n            </slot>\n          </div>\n          <div v-if=\"!hideFooter\" class=\"modal-footer\">\n            <button\n              :class=\"btnCancelKindClass\"\n              type=\"button\"\n              class=\"btn\"\n              data-dismiss=\"modal\"\n              @click=\"emitCancel($event);\"\n            >\n              {{ closeButtonLabel }}\n            </button>\n\n            <slot v-if=\"secondaryButtonLabel\" name=\"secondary-button\">\n              <button v-if=\"secondaryButtonLabel\" type=\"button\" class=\"btn\" data-dismiss=\"modal\">\n                {{ secondaryButtonLabel }}\n              </button>\n            </slot>\n\n            <button\n              v-if=\"primaryButtonLabel\"\n              :disabled=\"submitDisabled\"\n              :class=\"btnKindClass\"\n              type=\"button\"\n              class=\"btn js-primary-button\"\n              data-dismiss=\"modal\"\n              @click=\"emitSubmit($event);\"\n            >\n              {{ primaryButtonLabel }}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div v-if=\"!id\" class=\"modal-backdrop fade show\"></div>\n  </div>\n</template>\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--1!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./deprecated_modal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--1!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./deprecated_modal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./deprecated_modal.vue?vue&type=template&id=77ed7938&\"\nimport script from \"./deprecated_modal.vue?vue&type=script&lang=js&\"\nexport * from \"./deprecated_modal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"deprecated_modal.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal-open\"},[_c('div',{staticClass:\"modal\",class:_vm.id ? '' : 'd-block',attrs:{\"id\":_vm.id,\"role\":\"dialog\",\"tabindex\":\"-1\"}},[_c('div',{staticClass:\"modal-dialog\",class:_vm.modalDialogClass,attrs:{\"role\":\"document\"}},[_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"modal-header\"},[_vm._t(\"header\",[_c('h4',{staticClass:\"modal-title float-left\"},[_vm._v(_vm._s(_vm.title))]),_vm._v(\" \"),_c('button',{staticClass:\"close float-right\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"},on:{\"click\":function($event){_vm.emitCancel($event);}}},[_c('span',{attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"×\")])])])],2),_vm._v(\" \"),_c('div',{staticClass:\"modal-body\"},[_vm._t(\"body\",[_c('p',[_vm._v(_vm._s(_vm.text))])],{text:_vm.text})],2),_vm._v(\" \"),(!_vm.hideFooter)?_c('div',{staticClass:\"modal-footer\"},[_c('button',{staticClass:\"btn\",class:_vm.btnCancelKindClass,attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\"},on:{\"click\":function($event){_vm.emitCancel($event);}}},[_vm._v(\"\\n            \"+_vm._s(_vm.closeButtonLabel)+\"\\n          \")]),_vm._v(\" \"),(_vm.secondaryButtonLabel)?_vm._t(\"secondary-button\",[(_vm.secondaryButtonLabel)?_c('button',{staticClass:\"btn\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\"}},[_vm._v(\"\\n              \"+_vm._s(_vm.secondaryButtonLabel)+\"\\n            \")]):_vm._e()]):_vm._e(),_vm._v(\" \"),(_vm.primaryButtonLabel)?_c('button',{staticClass:\"btn js-primary-button\",class:_vm.btnKindClass,attrs:{\"disabled\":_vm.submitDisabled,\"type\":\"button\",\"data-dismiss\":\"modal\"},on:{\"click\":function($event){_vm.emitSubmit($event);}}},[_vm._v(\"\\n            \"+_vm._s(_vm.primaryButtonLabel)+\"\\n          \")]):_vm._e()],2):_vm._e()])])]),_vm._v(\" \"),(!_vm.id)?_c('div',{staticClass:\"modal-backdrop fade show\"}):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../node_modules/babel-loader/lib/index.js??ref--1!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./delete_milestone_modal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../node_modules/babel-loader/lib/index.js??ref--1!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./delete_milestone_modal.vue?vue&type=script&lang=js&\"","<script>\nimport axios from '~/lib/utils/axios_utils';\n\nimport Flash from '~/flash';\nimport DeprecatedModal from '~/vue_shared/components/deprecated_modal.vue';\nimport { n__, s__, sprintf } from '~/locale';\nimport { redirectTo } from '~/lib/utils/url_utility';\nimport eventHub from '../event_hub';\n\nexport default {\n  components: {\n    DeprecatedModal,\n  },\n  props: {\n    issueCount: {\n      type: Number,\n      required: true,\n    },\n    mergeRequestCount: {\n      type: Number,\n      required: true,\n    },\n    milestoneId: {\n      type: Number,\n      required: true,\n    },\n    milestoneTitle: {\n      type: String,\n      required: true,\n    },\n    milestoneUrl: {\n      type: String,\n      required: true,\n    },\n  },\n  computed: {\n    text() {\n      const milestoneTitle = sprintf('<strong>%{milestoneTitle}</strong>', {\n        milestoneTitle: this.milestoneTitle,\n      });\n\n      if (this.issueCount === 0 && this.mergeRequestCount === 0) {\n        return sprintf(\n          s__(`Milestones|\nYou’re about to permanently delete the milestone %{milestoneTitle}.\nThis milestone is not currently used in any issues or merge requests.`),\n          {\n            milestoneTitle,\n          },\n          false,\n        );\n      }\n\n      return sprintf(\n        s__(`Milestones|\nYou’re about to permanently delete the milestone %{milestoneTitle} and remove it from %{issuesWithCount} and %{mergeRequestsWithCount}.\nOnce deleted, it cannot be undone or recovered.`),\n        {\n          milestoneTitle,\n          issuesWithCount: n__('%d issue', '%d issues', this.issueCount),\n          mergeRequestsWithCount: n__(\n            '%d merge request',\n            '%d merge requests',\n            this.mergeRequestCount,\n          ),\n        },\n        false,\n      );\n    },\n    title() {\n      return sprintf(s__('Milestones|Delete milestone %{milestoneTitle}?'), {\n        milestoneTitle: this.milestoneTitle,\n      });\n    },\n  },\n  methods: {\n    onSubmit() {\n      eventHub.$emit('deleteMilestoneModal.requestStarted', this.milestoneUrl);\n\n      return axios\n        .delete(this.milestoneUrl)\n        .then(response => {\n          eventHub.$emit('deleteMilestoneModal.requestFinished', {\n            milestoneUrl: this.milestoneUrl,\n            successful: true,\n          });\n\n          // follow the rediect to milestones overview page\n          redirectTo(response.request.responseURL);\n        })\n        .catch(error => {\n          eventHub.$emit('deleteMilestoneModal.requestFinished', {\n            milestoneUrl: this.milestoneUrl,\n            successful: false,\n          });\n\n          if (error.response && error.response.status === 404) {\n            Flash(\n              sprintf(s__('Milestones|Milestone %{milestoneTitle} was not found'), {\n                milestoneTitle: this.milestoneTitle,\n              }),\n            );\n          } else {\n            Flash(\n              sprintf(s__('Milestones|Failed to delete milestone %{milestoneTitle}'), {\n                milestoneTitle: this.milestoneTitle,\n              }),\n            );\n          }\n          throw error;\n        });\n    },\n  },\n};\n</script>\n\n<template>\n  <deprecated-modal\n    id=\"delete-milestone-modal\"\n    :title=\"title\"\n    :text=\"text\"\n    :primary-button-label=\"s__('Milestones|Delete milestone')\"\n    kind=\"danger\"\n    @submit=\"onSubmit\"\n  >\n    <template slot=\"body\" slot-scope=\"props\">\n      <p v-html=\"props.text\"></p>\n    </template>\n  </deprecated-modal>\n</template>\n","import { render, staticRenderFns } from \"./delete_milestone_modal.vue?vue&type=template&id=68176018&\"\nimport script from \"./delete_milestone_modal.vue?vue&type=script&lang=js&\"\nexport * from \"./delete_milestone_modal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"delete_milestone_modal.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('deprecated-modal',{attrs:{\"id\":\"delete-milestone-modal\",\"title\":_vm.title,\"text\":_vm.text,\"primary-button-label\":_vm.s__('Milestones|Delete milestone'),\"kind\":\"danger\"},on:{\"submit\":_vm.onSubmit},scopedSlots:_vm._u([{key:\"body\",fn:function(props){return [_c('p',{domProps:{\"innerHTML\":_vm._s(props.text)}})]}}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from 'vue';\nimport Translate from '~/vue_shared/translate';\nimport deleteMilestoneModal from './components/delete_milestone_modal.vue';\nimport eventHub from './event_hub';\n\nexport default () => {\n  Vue.use(Translate);\n\n  const onRequestFinished = ({ milestoneUrl, successful }) => {\n    const button = document.querySelector(\n      `.js-delete-milestone-button[data-milestone-url=\"${milestoneUrl}\"]`,\n    );\n\n    if (!successful) {\n      button.removeAttribute('disabled');\n    }\n\n    button.querySelector('.js-loading-icon').classList.add('hidden');\n  };\n\n  const onRequestStarted = milestoneUrl => {\n    const button = document.querySelector(\n      `.js-delete-milestone-button[data-milestone-url=\"${milestoneUrl}\"]`,\n    );\n    button.setAttribute('disabled', '');\n    button.querySelector('.js-loading-icon').classList.remove('hidden');\n    eventHub.$once('deleteMilestoneModal.requestFinished', onRequestFinished);\n  };\n\n  const onDeleteButtonClick = event => {\n    const button = event.currentTarget;\n    const modalProps = {\n      milestoneId: parseInt(button.dataset.milestoneId, 10),\n      milestoneTitle: button.dataset.milestoneTitle,\n      milestoneUrl: button.dataset.milestoneUrl,\n      issueCount: parseInt(button.dataset.milestoneIssueCount, 10),\n      mergeRequestCount: parseInt(button.dataset.milestoneMergeRequestCount, 10),\n    };\n    eventHub.$once('deleteMilestoneModal.requestStarted', onRequestStarted);\n    eventHub.$emit('deleteMilestoneModal.props', modalProps);\n  };\n\n  const deleteMilestoneButtons = document.querySelectorAll('.js-delete-milestone-button');\n  deleteMilestoneButtons.forEach(button => {\n    button.addEventListener('click', onDeleteButtonClick);\n  });\n\n  eventHub.$once('deleteMilestoneModal.mounted', () => {\n    deleteMilestoneButtons.forEach(button => {\n      button.removeAttribute('disabled');\n    });\n  });\n\n  return new Vue({\n    el: '#delete-milestone-modal',\n    components: {\n      deleteMilestoneModal,\n    },\n    data() {\n      return {\n        modalProps: {\n          milestoneId: -1,\n          milestoneTitle: '',\n          milestoneUrl: '',\n          issueCount: -1,\n          mergeRequestCount: -1,\n        },\n      };\n    },\n    mounted() {\n      eventHub.$on('deleteMilestoneModal.props', this.setModalProps);\n      eventHub.$emit('deleteMilestoneModal.mounted');\n    },\n    beforeDestroy() {\n      eventHub.$off('deleteMilestoneModal.props', this.setModalProps);\n    },\n    methods: {\n      setModalProps(modalProps) {\n        this.modalProps = modalProps;\n      },\n    },\n    render(createElement) {\n      return createElement(deleteMilestoneModal, {\n        props: this.modalProps,\n      });\n    },\n  });\n};\n","/* eslint-disable no-new */\n\nimport Milestone from '~/milestone';\nimport Sidebar from '~/right_sidebar';\nimport MountMilestoneSidebar from '~/sidebar/mount_milestone_sidebar';\n\nexport default () => {\n  new Milestone();\n  new Sidebar();\n  new MountMilestoneSidebar();\n};\n","import Vue from 'vue';\n\nexport default new Vue();\n"],"sourceRoot":""}