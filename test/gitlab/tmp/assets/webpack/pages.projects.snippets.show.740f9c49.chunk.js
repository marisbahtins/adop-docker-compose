(this.webpackJsonp=this.webpackJsonp||[]).push([[171,22],{109:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(31);function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(){function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.field=t,this.isLocalStorageAvailable=i.a.isLocalStorageAccessSafe(),null!=n.join&&(n=n.join("/")),this.key="autosave/"+n,this.field.data("autosave",this),this.restore(),this.field.on("input",function(){return o.save()})}var t,n,a;return t=e,(n=[{key:"restore",value:function(){if(this.isLocalStorageAvailable&&this.field.length){var e=window.localStorage.getItem(this.key);(null!=e?e.length:void 0)>0&&this.field.val(e),this.field.trigger("input");var t=new Event("change",{bubbles:!0,cancelable:!1}),n=this.field.get(0);n&&n.dispatchEvent(t)}}},{key:"save",value:function(){if(this.field.length){var e=this.field.val();return this.isLocalStorageAvailable&&(null!=e?e.length:void 0)>0?window.localStorage.setItem(this.key,e):this.reset()}}},{key:"reset",value:function(){if(this.isLocalStorageAvailable)return window.localStorage.removeItem(this.key)}},{key:"dispose",value:function(){this.field.off("input")}}])&&o(t.prototype,n),a&&o(t,a),e}()},111:function(e,t){Mousetrap=function(e){var t=e,n=t.stopCallback,i=!0;return t.stopCallback=function(e,t,o){return!i||n(e,t,o)},t.pause=function(){i=!1},t.unpause=function(){i=!0},t}(Mousetrap)},125:function(e,t,n){"use strict";function i(e,t){var n=t.x,i=t.y,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=document.createElement("button");return o.concat(["js-image-badge"]).forEach(function(e){return a.classList.add(e)}),a.setAttribute("type","button"),a.setAttribute("disabled",!0),a.dataset.noteId=e,a.style.left="".concat(n,"px"),a.style.top="".concat(i,"px"),a}function o(e,t){var n=t.x,i=t.y,o=document.createElement("button");o.classList.add("btn-transparent"),o.classList.add("comment-indicator"),o.setAttribute("type","button"),o.style.left="".concat(n,"px"),o.style.top="".concat(i,"px"),o.innerHTML=gl.utils.spriteIcon("image-comment-dark"),e.appendChild(o)}var a={x:0,y:0,width:0,height:0},r=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.noteId,i=t.discussionId;this.actual=t.actual||a,this.browser=t.browser||a,this.noteId=n,this.discussionId=i,t.imageEl&&!t.browser&&(this.browser=S.resizeCoordinatesToImageElement(t.imageEl,this.actual))},s=n(0),c=n.n(s);function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.canCreateNote=!(!n||!n.canCreateNote),this.renderCommentBadge=!(!n||!n.renderCommentBadge),this.$noteContainer=c()(".note-container",this.el),this.imageBadges=[]}var t,n,i;return t=e,(n=[{key:"init",value:function(){this.imageFrameEl=this.el.querySelector(".diff-file .js-image-frame"),this.imageEl=this.imageFrameEl.querySelector("img"),this.bindEvents()}},{key:"bindEvents",value:function(){var e;this.imageClickedWrapper=this.imageClicked.bind(this),this.imageBlurredWrapper=S.removeCommentIndicator.bind(null,this.imageFrameEl),this.addBadgeWrapper=this.addBadge.bind(this),this.removeBadgeWrapper=this.removeBadge.bind(this),this.renderBadgesWrapper=this.renderBadges.bind(this),(e=this.imageEl).complete&&0!==e.naturalHeight?this.renderBadges():this.imageEl.addEventListener("load",this.renderBadgesWrapper),this.$noteContainer.on("click",".js-diff-notes-toggle",S.toggleCollapsed),c()(this.el).on("click",".comment-indicator",S.commentIndicatorOnClick),this.canCreateNote&&(this.el.addEventListener("click.imageDiff",this.imageClickedWrapper),this.el.addEventListener("blur.imageDiff",this.imageBlurredWrapper),this.el.addEventListener("addBadge.imageDiff",this.addBadgeWrapper),this.el.addEventListener("removeBadge.imageDiff",this.removeBadgeWrapper))}},{key:"imageClicked",value:function(e){var t=e.detail,n=S.getTargetSelection(t),i=t.currentTarget;S.setPositionDataAttribute(i,n.actual),S.showCommentIndicator(this.imageFrameEl,n.browser)}},{key:"renderBadges",value:function(){l(this.el.querySelectorAll(".note-container .discussion-notes .notes")).forEach(this.renderBadge.bind(this))}},{key:"renderBadge",value:function(e,t){var n=S.generateBadgeFromDiscussionDOM(this.imageFrameEl,e);this.imageBadges.push(n);var i={coordinate:n.browser,noteId:n.noteId};if(this.renderCommentBadge)S.addImageCommentBadge(this.imageFrameEl,i);else{var o=Object.assign({},i,{badgeText:t+1});S.addImageBadge(this.imageFrameEl,o)}}},{key:"addBadge",value:function(e){var t=e.detail,n=t.x,i=t.y,o=t.width,a=t.height,s=t.noteId,c=t.discussionId,l=this.imageBadges.length+1,d=new r({actual:{x:n,y:i,width:o,height:a},imageEl:this.imageFrameEl.querySelector("img"),noteId:s,discussionId:c});this.imageBadges.push(d),S.addImageBadge(this.imageFrameEl,{coordinate:d.browser,badgeText:l,noteId:s}),S.addAvatarBadge(this.el,{detail:{noteId:s,badgeNumber:l}});var u=this.el.querySelector("#discussion_".concat(c));S.updateDiscussionBadgeNumber(u,l)}},{key:"removeBadge",value:function(e){var t=this,n=e.detail.badgeNumber,i=n-1,o=this.imageFrameEl.querySelectorAll(".badge");this.imageBadges.length!==n&&this.imageBadges.forEach(function(e,n){if(n>i){var a=e.discussionId,r=n,s=t.el.querySelector("#discussion_".concat(a));o[n].innerText=r,S.updateDiscussionBadgeNumber(s,r),S.updateDiscussionAvatarBadgeNumber(s,r)}}),this.imageBadges.splice(i,1),o[i].remove()}}])&&d(t.prototype,n),i&&d(t,i),e}(),h={TWO_UP:"TWO_UP",SWIPE:"SWIPE",ONION_SKIN:"ONION_SKIN"};function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function v(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e,t,n){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),v(this,y(t).apply(this,arguments))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,u),n=t,(i=[{key:"init",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.TWO_UP;this.imageFrameEls=(m(e={},h.TWO_UP,this.el.querySelector(".two-up .js-image-frame")),m(e,h.SWIPE,this.el.querySelector(".swipe .js-image-frame")),m(e,h.ONION_SKIN,this.el.querySelector(".onion-skin .js-image-frame")),e);var i=this.el.querySelector(".view-modes-menu");this.viewModesEls=(m(t={},h.TWO_UP,i.querySelector(".two-up")),m(t,h.SWIPE,i.querySelector(".swipe")),m(t,h.ONION_SKIN,i.querySelector(".onion-skin")),t),this.currentView=n,this.generateImageEls(),this.bindEvents()}},{key:"generateImageEls",value:function(){var e=this;this.imageEls={},Object.getOwnPropertyNames(h).forEach(function(t){e.imageEls[t]=e.imageFrameEls[t].querySelector("img")})}},{key:"bindEvents",value:function(){b(y(t.prototype),"bindEvents",this).call(this),this.changeToViewTwoUp=this.changeView.bind(this,h.TWO_UP),this.changeToViewSwipe=this.changeView.bind(this,h.SWIPE),this.changeToViewOnionSkin=this.changeView.bind(this,h.ONION_SKIN),this.viewModesEls[h.TWO_UP].addEventListener("click",this.changeToViewTwoUp),this.viewModesEls[h.SWIPE].addEventListener("click",this.changeToViewSwipe),this.viewModesEls[h.ONION_SKIN].addEventListener("click",this.changeToViewOnionSkin)}},{key:"changeView",value:function(e){if(t=e,Object.getOwnPropertyNames(h).find(function(e){return e===t})){var t,n=S.removeCommentIndicator(this.imageFrameEl);this.currentView=e,p(this.imageFrameEl.querySelectorAll(".badge")).map(function(e){return e.remove()}),this.imageBadges=[],setTimeout(this.renderNewView.bind(this,n),250)}}},{key:"renderNewView",value:function(e){if(this.renderBadges(),e.removed){var t=S.resizeCoordinatesToImageElement(this.imageEl,{x:e.x,y:e.y,width:e.image.width,height:e.image.height});S.showCommentIndicator(this.imageFrameEl,t)}}},{key:"imageEl",get:function(){return this.imageEls[this.currentView]}},{key:"imageFrameEl",get:function(){return this.imageFrameEls[this.currentView]}}])&&g(n.prototype,i),o&&g(n,o),t}();function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,o=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function C(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var E=900,_=["two-up","swipe"],x=function(){function e(t){var n,i,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o={"two-up":function(){return c()(".two-up.view .wrap",this.file).each((e=this,function(t,n){return c()("img",n).each(function(){if(c()(this).width()>E/2)return c()(this).width(E/2)}),e.requestImageInfo(c()("img",n),function(e,t){return c()(".image-info .meta-width",n).text(e+"px"),c()(".image-info .meta-height",n).text(t+"px"),c()(".image-info",n).removeClass("hide")})}));var e},swipe:function(){var e,t,n;return t=0,e=0,c()(".swipe.view",this.file).each((n=this,function(i,o){var a,r,s,l,d;a=j(n.prepareFrames(o),2),t=a[0],e=a[1],l=c()(".swipe-frame",o),r=c()(".swipe-wrap",o),s=c()(".swipe-bar",o),l.css({width:t+16,height:e+28}),r.css({width:t+1,height:e+2}),s.css({left:1}),d=parseInt(r.css("right").replace("px",""),10),n.initDraggable(s,d,function(e,n){n>0&&n<l.width()-2*d&&(r.width(t+1-n),s.css("left",n))})}))},"onion-skin":function(){var e,t,n,i;return n=0,t=0,e=c()(".drag-track",this.file).width()-c()(".dragger",this.file).width(),c()(".onion-skin.view",this.file).each((i=this,function(o,a){var r,s,l,d,u,h;r=j(i.prepareFrames(a),2),n=r[0],t=r[1],s=c()(".onion-skin-frame",a),u=c()(".frame.added",a),l=c()(".drag-track",a),d=c()(".dragger",l),s.css({width:n+16,height:t+28}),c()(".swipe-wrap",a).css({width:n+1,height:t+2}),d.css({left:e}),u.css("opacity",1),h=parseInt(u.css("right").replace("px",""),10),i.initDraggable(d,h,function(t,n){var i=n/e;i>=0&&i<=1&&(d.css("left",n),u.css("opacity",i))})}))}},(i="views")in(n=this)?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,this.file=t,this.requestImageInfo(c()(".two-up.view .frame.deleted img",this.file),(a=this,function(e,t){return a.requestImageInfo(c()(".two-up.view .frame.added img",a.file),function(e,t){a.initViewModes(),c()(".two-up.view img",a.file).waitForImages(function(){a.initView("two-up")})})}))}var t,n,i;return t=e,(n=[{key:"initViewModes",value:function(){var e,t=_[0];return c()(".view-modes",this.file).removeClass("hide"),c()(".view-modes-menu",this.file).on("click","li",(e=this,function(t){if(!c()(t.currentTarget).hasClass("active"))return e.activateViewMode(t.currentTarget.className)})),this.activateViewMode(t)}},{key:"activateViewMode",value:function(e){return c()(".view-modes-menu li",this.file).removeClass("active").filter("."+e).addClass("active"),c()(".view:visible:not(."+e+")",this.file).fadeOut(200,(t=this,function(){return c()(".view."+e,t.file).fadeIn(200),t.initView(e)}));var t}},{key:"initView",value:function(e){return this.views[e].call(this)}},{key:"initDraggable",value:function(e,t,n){var i=!1,o=c()("body"),a=e.parent();e.off("mousedown").on("mousedown",function(){i=!0,o.css("user-select","none")}),o.off("mouseup").off("mousemove").on("mouseup",function(){i=!1,o.css("user-select","")}).on("mousemove",function(e){var o;i&&(o=e.pageX-(a.offset().left+t),n(e,o))})}},{key:"prepareFrames",value:function(e){var t,n;return n=0,t=0,c()(".frame",e).each(function(e,i){var o,a;return a=c()(i).width(),o=c()(i).height(),n=a>n?a:n,t=o>t?o:t}).css({width:n,height:t}),[n,t]}},{key:"requestImageInfo",value:function(e,t){var n,i=e.get(0);if(i)return i.complete?t.call(this,i.naturalWidth,i.naturalHeight):e.on("load",(n=this,function(){return t.call(n,i.naturalWidth,i.naturalHeight)}))}}])&&C(t.prototype,n),i&&C(t,i),e}();var S=t.a={addCommentIndicator:o,removeCommentIndicator:function(e){var t=e.querySelector(".comment-indicator"),n=e.querySelector("img"),i=!!t,o={};return i&&(o={x:parseInt(t.style.left,10),y:parseInt(t.style.top,10),image:{width:n.width,height:n.height}},t.remove()),Object.assign({},o,{removed:i})},showCommentIndicator:function(e,t){var n=t.x,i=t.y,a=e.querySelector(".comment-indicator");a?(a.style.left="".concat(n,"px"),a.style.top="".concat(i,"px")):o(e,t)},commentIndicatorOnClick:function(e){e.stopPropagation(),e.currentTarget.closest(".diff-viewer").querySelector(".note-container .note-textarea").focus()},addImageBadge:function(e,t){var n=t.coordinate,o=t.badgeText,a=i(t.noteId,n,["badge","badge-pill"]);a.innerText=o,e.appendChild(a)},addImageCommentBadge:function(e,t){var n=t.coordinate,o=i(t.noteId,n,["image-comment-badge"]);o.innerHTML=gl.utils.spriteIcon("image-comment-dark"),e.appendChild(o)},addAvatarBadge:function(e,t){var n=t.detail,i=n.noteId,o=n.badgeNumber,a=e.querySelector("#".concat(i," .badge"));a.innerText=o,a.classList.remove("hidden")},setPositionDataAttribute:function(e,t){var n=t.x,i=t.y,o=t.width,a=t.height,r=e.dataset.position,s=Object.assign({},JSON.parse(r),{x:n,y:i,width:o,height:a});e.setAttribute("data-position",JSON.stringify(s))},updateDiscussionAvatarBadgeNumber:function(e,t){e.querySelector(".image-diff-avatar-link .badge").innerText=t},updateDiscussionBadgeNumber:function(e,t){e.querySelector(".badge").innerText=t},toggleCollapsed:function(e){var t=e.currentTarget.closest(".discussion-notes"),n=t.querySelector(".discussion-form"),i=t.classList.contains("collapsed");i?t.classList.remove("collapsed"):t.classList.add("collapsed"),n&&!i?n.style.display="none":n&&i&&(n.style.display="block")},resizeCoordinatesToImageElement:function(e,t){var n=t.x,i=t.y,o=t.width,a=t.height,r=e.width,s=e.height,c=r/o,l=s/a;return{x:Math.round(n*c),y:Math.round(i*l),width:r,height:s}},generateBadgeFromDiscussionDOM:function(e,t){var n=JSON.parse(t.dataset.position),i=t.querySelector(".note");return new r({actual:n,imageEl:e.querySelector("img"),noteId:i.id,discussionId:t.dataset.discussionId})},getTargetSelection:function(e){var t=e.currentTarget.querySelector("img"),n=e.offsetX,i=e.offsetY,o=t.width,a=t.height,r=t.naturalWidth,s=t.naturalHeight,c=r/o,l=s/a,d=Math.max(0,n)&&Math.min(n,o),u=Math.max(0,i)&&Math.min(i,a);return{browser:{x:d,y:u,width:o,height:a},actual:{x:Math.round(d*c),y:Math.round(u*l),width:r,height:s}}},initImageDiff:function(e,t,n){var i,o={canCreateNote:t,renderCommentBadge:n};return new x(e),e.querySelector(".diff-file .js-single-image")?(i=new u(e,o)).init():e.querySelector(".diff-file .js-replaced-image")&&(i=new k(e,o)).init(),i}}},1374:function(e,t,n){n(42),n(44),e.exports=n(1375)},1375:function(e,t,n){"use strict";n.r(t);var i=n(360),o=n(85),a=n(290),r=n(211),s=n(496);document.addEventListener("DOMContentLoaded",function(){new a.a,new r.a,Object(i.a)(),new o.a,Object(s.a)()})},143:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(0),o=n.n(i),a=(n(261),n(6)),r=n(7);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.selector=t.selector,this.dataType=t.dataType,this.fieldName=t.fieldName,this.onSuccess=t.onSuccess||function(){},this.onError=function(e){var t="";return e.response.data&&"object"===s(e.response.data)&&(t=e.response.data.errors.join(" ")),new r.a(t||"Update failed","alert")},this.init()}var t,n,i;return t=e,(n=[{key:"init",value:function(){this.disable(),o()("".concat(this.selector," .js-task-list-container")).taskList("enable"),o()(document).on("tasklist:changed","".concat(this.selector," .js-task-list-container"),this.update.bind(this))}},{key:"disable",value:function(){o()("".concat(this.selector," .js-task-list-container")).taskList("disable"),o()(document).off("tasklist:changed","".concat(this.selector," .js-task-list-container"))}},{key:"update",value:function(e){var t,n,i,r=this,s=o()(e.target),c={};return c[this.dataType]=(t={},n=this.fieldName,i=s.val(),n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t),a.a.patch(s.data("updateUrl")||o()("form.js-issuable-update").attr("action"),c).then(function(e){var t=e.data;return r.onSuccess(t)}).catch(function(e){return r.onError(e)})}}])&&c(t.prototype,n),i&&c(t,i),e}()},156:function(e,t,n){"use strict";var i={init:function(e){this.hook=e,this.destroyed=!1,this.config=e.config.InputSetter||(this.hook.config.InputSetter={}),this.eventWrapper={},this.addEvents()},addEvents:function(){this.eventWrapper.setInputs=this.setInputs.bind(this),this.hook.list.list.addEventListener("click.dl",this.eventWrapper.setInputs)},removeEvents:function(){this.hook.list.list.removeEventListener("click.dl",this.eventWrapper.setInputs)},setInputs:function(e){var t=this;if(!this.destroyed){var n=e.detail.selected;Array.isArray(this.config)||(this.config=[this.config]),this.config.forEach(function(e){return t.setInput(e,n)})}},setInput:function(e,t){var n=e.input||this.hook.trigger,i=t.getAttribute(e.valueAttribute),o=e.inputAttribute;return n.hasAttribute(o)?n.setAttribute(o,i):"INPUT"===n.tagName?n.value=i:n.textContent=i},destroy:function(){this.destroyed=!0,this.removeEvents()}};t.a=i},211:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(0),o=n.n(i),a=n(7),r=n(13),s=n(6);function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initAuxiliaryViewer(),e.initRichViewer(),this.initMainViewers()}var t,i,l;return t=e,l=[{key:"initAuxiliaryViewer",value:function(){var t=document.querySelector('.blob-viewer[data-type="auxiliary"]');t&&e.loadViewer(t)}},{key:"initRichViewer",value:function(){var e=document.querySelector('.blob-viewer[data-type="rich"]');if(e&&e.dataset.richType){var t=function(t){return t.then(function(t){return t.default(e)}).catch(function(e){throw Object(a.a)("Error loading file viewer."),e})};switch(e.dataset.richType){case"balsamiq":t(Promise.all([n.e(12),n.e(17),n.e(239),n.e(232)]).then(n.bind(null,442)));break;case"notebook":t(Promise.all([n.e(12),n.e(240),n.e(233)]).then(n.bind(null,438)));break;case"pdf":t(Promise.all([n.e(244),n.e(234)]).then(n.bind(null,439)));break;case"sketch":t(Promise.all([n.e(12),n.e(17),n.e(241),n.e(235)]).then(n.bind(null,441)));break;case"stl":t(Promise.all([n.e(248),n.e(236)]).then(n.bind(null,440)))}}}},{key:"loadViewer",value:function(e){var t=e,n=t.getAttribute("data-url");return!n||t.getAttribute("data-loaded")||t.getAttribute("data-loading")?Promise.resolve(t):(t.setAttribute("data-loading","true"),s.a.get(n).then(function(e){var n=e.data;return t.innerHTML=n.html,t.setAttribute("data-loaded","true"),t}))}}],(i=[{key:"initMainViewers",value:function(){this.$fileHolder=o()(".file-holder"),this.$fileHolder.length&&(this.switcher=document.querySelector(".js-blob-viewer-switcher"),this.switcherBtns=document.querySelectorAll(".js-blob-viewer-switch-btn"),this.copySourceBtn=document.querySelector(".js-copy-blob-source-btn"),this.simpleViewer=this.$fileHolder[0].querySelector('.blob-viewer[data-type="simple"]'),this.richViewer=this.$fileHolder[0].querySelector('.blob-viewer[data-type="rich"]'),this.initBindings(),this.switchToInitialViewer())}},{key:"switchToInitialViewer",value:function(){var e=this.$fileHolder[0].querySelector(".blob-viewer:not(.hidden)").getAttribute("data-type");this.switcher&&0===window.location.hash.indexOf("#L")&&(e="simple"),this.switchToViewer(e)}},{key:"initBindings",value:function(){var e=this;this.switcherBtns.length&&Array.from(this.switcherBtns).forEach(function(t){t.addEventListener("click",e.switchViewHandler.bind(e))}),this.copySourceBtn&&this.copySourceBtn.addEventListener("click",function(){return e.copySourceBtn.classList.contains("disabled")?e.copySourceBtn.blur():e.switchToViewer("simple")})}},{key:"switchViewHandler",value:function(e){var t=e.currentTarget;e.preventDefault(),this.switchToViewer(t.getAttribute("data-viewer"))}},{key:"toggleCopyButtonState",value:function(){this.copySourceBtn&&(this.simpleViewer.getAttribute("data-loaded")?(this.copySourceBtn.setAttribute("title","Copy source to clipboard"),this.copySourceBtn.classList.remove("disabled")):this.activeViewer===this.simpleViewer?(this.copySourceBtn.setAttribute("title","Wait for the source to load to copy it to the clipboard"),this.copySourceBtn.classList.add("disabled")):(this.copySourceBtn.setAttribute("title","Switch to the source to copy it to the clipboard"),this.copySourceBtn.classList.add("disabled")),o()(this.copySourceBtn).tooltip("_fixTitle"))}},{key:"switchToViewer",value:function(t){var n=this,i=this.$fileHolder[0].querySelector(".blob-viewer[data-type='".concat(t,"']"));if(this.activeViewer!==i){var s=document.querySelector(".js-blob-viewer-switch-btn.active"),c=document.querySelector(".js-blob-viewer-switch-btn[data-viewer='".concat(t,"']")),l=this.$fileHolder[0].querySelector(".blob-viewer:not([data-type='".concat(t,"'])"));s&&s.classList.remove("active"),c&&(c.classList.add("active"),c.blur()),l&&l.classList.add("hidden"),i.classList.remove("hidden"),this.activeViewer=i,this.toggleCopyButtonState(),e.loadViewer(i).then(function(e){o()(e).renderGFM(),n.$fileHolder.trigger("highlight:line"),Object(r.m)(),n.toggleCopyButtonState()}).catch(function(){return new a.a("Error loading viewer")})}}}])&&c(t.prototype,i),l&&c(t,l),e}()},224:function(e,t,n){"use strict";var i=n(0),o=n.n(i),a=n(5),r=n.n(a),s=n(14),c=n.n(s),l=n(62),d=n.n(l),u=(n(410),n(411),n(152)),h=n(11),f=n(140),p=n(10),m=n(6),g=n(19),v=n(7),b=n(66),y=n(175),w=n(156);function k(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var j=Object.assign({},w.a),C=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dropdownTrigger=t.dropdownTrigger,this.dropdownList=t.dropdownList,this.noteTypeInput=t.noteTypeInput,this.submitButton=t.submitButton,this.closeButton=t.closeButton,this.reopenButton=t.reopenButton}var t,n,i;return t=e,(n=[{key:"initDroplab",value:function(){this.droplab=new y.a;var e=this.setConfig();this.droplab.init(this.dropdownTrigger,this.dropdownList,[j],e)}},{key:"setConfig",value:function(){var e={InputSetter:[{input:this.noteTypeInput,valueAttribute:"data-value"},{input:this.submitButton,valueAttribute:"data-submit-text"}]};return this.closeButton&&e.InputSetter.push({input:this.closeButton,valueAttribute:"data-close-text"},{input:this.closeButton,valueAttribute:"data-close-text",inputAttribute:"data-alternative-text"}),this.reopenButton&&e.InputSetter.push({input:this.reopenButton,valueAttribute:"data-reopen-text"},{input:this.reopenButton,valueAttribute:"data-reopen-text",inputAttribute:"data-alternative-text"}),e}}])&&k(t.prototype,n),i&&k(t,i),e}(),E=n(79),_=n(190),x=n(109),S=n(143),N=n(13),T=(n(125),n(20));function I(e,t,n){return(I=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&O(o,n.prototype),o}).apply(null,arguments)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function D(e,t,n){return t&&A(e.prototype,t),n&&A(e,n),e}function F(e){return e.replace(/\r\n/g,"\n")}n.d(t,"a",function(){return P}),window.autosize=d.a;var L=/^\/\w+.*$/gm,P=function(){function e(t,n,i,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:b.b;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.updateTargetButtons=this.updateTargetButtons.bind(this),this.updateComment=this.updateComment.bind(this),this.visibilityChange=this.visibilityChange.bind(this),this.cancelDiscussionForm=this.cancelDiscussionForm.bind(this),this.onAddDiffNote=this.onAddDiffNote.bind(this),this.onAddImageDiffNote=this.onAddImageDiffNote.bind(this),this.setupDiscussionNoteForm=this.setupDiscussionNoteForm.bind(this),this.onReplyToDiscussionNote=this.onReplyToDiscussionNote.bind(this),this.removeNote=this.removeNote.bind(this),this.cancelEdit=this.cancelEdit.bind(this),this.updateNote=this.updateNote.bind(this),this.addDiscussionNote=this.addDiscussionNote.bind(this),this.addNoteError=this.addNoteError.bind(this),this.addNote=this.addNote.bind(this),this.resetMainTargetForm=this.resetMainTargetForm.bind(this),this.refresh=this.refresh.bind(this),this.keydownNoteText=this.keydownNoteText.bind(this),this.toggleCommitList=this.toggleCommitList.bind(this),this.postComment=this.postComment.bind(this),this.clearFlashWrapper=this.clearFlash.bind(this),this.onHashChange=this.onHashChange.bind(this),this.notes_url=t,this.note_ids=n,this.enableGFM=r,this.updatedNotesTrackingMap={},this.last_fetched_at=i,this.noteable_url=document.URL,this.notesCountBadge||(this.notesCountBadge=o()(".issuable-details").find(".notes-tab .badge")),this.basePollingInterval=15e3,this.maxPollingSteps=4,this.$wrapperEl=Object(N.s)()?o()(document).find(".diffs"):o()(document),this.cleanBinding(),this.addBinding(),this.setPollingInterval(),this.setupMainTargetNoteForm(r),this.taskList=new S.a({dataType:"note",fieldName:"note",selector:".notes"}),this.collapseLongCommitList(),this.setViewType(a),"merge_requests"===Object(N.h)(1)&&o()(".note-edit-form").clone().addClass("mr-note-edit-form").insertAfter(".note-edit-form");var s=Object(g.a)(),c=s&&document.getElementById(s);c&&this.loadLazyDiff({currentTarget:c})}return D(e,null,[{key:"initialize",value:function(t,n,i,o,a){this.instance||(this.instance=new e(t,n,i,o,a))}},{key:"getInstance",value:function(){return this.instance}}]),D(e,[{key:"setViewType",value:function(e){this.view=c.a.get("diff_view")||e}},{key:"addBinding",value:function(){this.$wrapperEl.on("click",".js-note-edit",this.showEditForm.bind(this)),this.$wrapperEl.on("click",".note-edit-cancel",this.cancelEdit),this.$wrapperEl.on("click",".js-comment-submit-button",this.postComment),this.$wrapperEl.on("click",".js-comment-save-button",this.updateComment),this.$wrapperEl.on("keyup input",".js-note-text",this.updateTargetButtons),this.$wrapperEl.on("click",".js-comment-resolve-button",this.postComment),this.$wrapperEl.on("click",".js-note-delete",this.removeNote),this.$wrapperEl.on("click",".js-note-attachment-delete",this.removeAttachment),this.$wrapperEl.on("change",".js-note-attachment-input",this.updateFormAttachment),this.$wrapperEl.on("click",".js-discussion-reply-button",this.onReplyToDiscussionNote),this.$wrapperEl.on("click",".js-add-diff-note-button",this.onAddDiffNote),this.$wrapperEl.on("click",".js-add-image-diff-note-button",this.onAddImageDiffNote),this.$wrapperEl.on("click",".js-close-discussion-note-form",this.cancelDiscussionForm),this.$wrapperEl.on("click",".system-note-commit-list-toggler",this.toggleCommitList),this.$wrapperEl.on("click",".js-toggle-lazy-diff",this.loadLazyDiff),this.$wrapperEl.on("click",".js-toggle-lazy-diff-retry-button",this.onClickRetryLazyLoad.bind(this)),this.$wrapperEl.on("visibilitychange",this.visibilityChange),this.$wrapperEl.on("issuable:change",this.refresh),this.$wrapperEl.on("ajax:success",".js-main-target-form",this.addNote),this.$wrapperEl.on("ajax:success",".js-discussion-note-form",this.addDiscussionNote),this.$wrapperEl.on("ajax:success",".js-main-target-form",this.resetMainTargetForm),this.$wrapperEl.on("ajax:complete",".js-main-target-form",this.reenableTargetFormSubmitButton),this.$wrapperEl.on("keydown",".js-note-text",this.keydownNoteText),o()(window).on("hashchange",this.onHashChange)}},{key:"cleanBinding",value:function(){this.$wrapperEl.off("click",".js-note-edit"),this.$wrapperEl.off("click",".note-edit-cancel"),this.$wrapperEl.off("click",".js-note-delete"),this.$wrapperEl.off("click",".js-note-attachment-delete"),this.$wrapperEl.off("click",".js-discussion-reply-button"),this.$wrapperEl.off("click",".js-add-diff-note-button"),this.$wrapperEl.off("click",".js-add-image-diff-note-button"),this.$wrapperEl.off("visibilitychange"),this.$wrapperEl.off("keyup input",".js-note-text"),this.$wrapperEl.off("click",".js-note-target-reopen"),this.$wrapperEl.off("click",".js-note-target-close"),this.$wrapperEl.off("keydown",".js-note-text"),this.$wrapperEl.off("click",".js-comment-resolve-button"),this.$wrapperEl.off("click",".system-note-commit-list-toggler"),this.$wrapperEl.off("click",".js-toggle-lazy-diff"),this.$wrapperEl.off("click",".js-toggle-lazy-diff-retry-button"),this.$wrapperEl.off("ajax:success",".js-main-target-form"),this.$wrapperEl.off("ajax:success",".js-discussion-note-form"),this.$wrapperEl.off("ajax:complete",".js-main-target-form"),o()(window).off("hashchange",this.onHashChange)}},{key:"keydownNoteText",value:function(e){var t,n,i,a;if(!Object(N.w)(e))switch(t=o()(e.target),e.which){case 38:if(""!==t.val())return;if((a=o()("li.note[data-author-id='".concat(gon.current_user_id,"'][data-editable]:last"),t.closest(".note, .notes_holder, #notes"))).length)return a.find(".js-note-edit").trigger("click",[!0,a]);break;case 27:if((n=t.closest(".js-discussion-note-form")).length){if(""!==t.val()&&!window.confirm("Are you sure you want to cancel creating this comment?"))return;return void this.removeDiscussionNoteForm(n)}if((i=t.closest(".note")).length){if(t.closest("form").data("originalNote")!==t.val()&&!window.confirm("Are you sure you want to cancel editing this comment?"))return;return this.removeNoteEditForm(i)}}}},{key:"initRefresh",value:function(){return e.interval&&clearInterval(e.interval),e.interval=setInterval((t=this,function(){return t.refresh()}),this.pollingInterval);var t}},{key:"refresh",value:function(){if(!document.hidden)return this.getContent()}},{key:"getContent",value:function(){var e=this;this.refreshing||(this.refreshing=!0,m.a.get("".concat(this.notes_url,"?html=true"),{headers:{"X-Last-Fetched-At":this.last_fetched_at}}).then(function(t){var n=t.data,i=n.notes;e.last_fetched_at=n.last_fetched_at,e.setPollingInterval(n.notes.length),o.a.each(i,function(t,n){return e.renderNote(n)}),e.refreshing=!1}).catch(function(){e.refreshing=!1}))}},{key:"setPollingInterval",value:function(e){var t;return null==e&&(e=!0),t=this.basePollingInterval*Math.pow(2,this.maxPollingSteps-1),e?this.pollingInterval=this.basePollingInterval:this.pollingInterval<t&&(this.pollingInterval*=2),this.initRefresh()}},{key:"handleQuickActions",value:function(t){var n;t.commands_changes&&("merge"in t.commands_changes&&e.checkMergeRequestStatus(),"emoji_award"in t.commands_changes&&(n=o()(".js-awards-block").eq(0),Object(_.b)().then(function(e){e.addAwardToEmojiBar(n,t.commands_changes.emoji_award),e.scrollToAwards()}).catch(function(){})))}},{key:"setupNewNote",value:function(t){Object(T.i)(t.find(".js-timeago"),!1),this.collapseLongCommitList(),this.taskList.init(),e.updateNoteTargetSelector(t),this.$noteToCleanHighlight=t}},{key:"onHashChange",value:function(){this.$noteToCleanHighlight&&e.updateNoteTargetSelector(this.$noteToCleanHighlight),this.$noteToCleanHighlight=null}},{key:"renderNote",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o()(".main-notes-list");if(t.discussion_html)return this.renderDiscussionNote(t,n);if(t.valid){var a=i.find("#note_".concat(t.id));if(e.isNewNote(t,this.note_ids)){if(Object(N.s)())return;this.note_ids.push(t.id),i.length&&i.find(".system-note.being-posted").remove();var r=e.animateAppendNote(t.html,i);return this.setupNewNote(r),this.refresh(),this.updateNotesCount(1)}if(e.isUpdatedNote(t,a)){var s=a.hasClass("is-editing"),c=F(a.find(".original-note-content").text().trim()),l=a.find(".js-note-text"),d=l.val(),u=F(t.note),h=d===c||d===u;if(s&&h)l.val(t.note),this.updatedNotesTrackingMap[t.id]=t;else if(s&&!h)this.putConflictEditWarningInPlace(t,a),this.updatedNotesTrackingMap[t.id]=t;else{var f=e.animateUpdateNote(t.html,a);this.setupNewNote(f)}}}else t.errors&&t.errors.commands_only&&(t.commands_changes&&Object.keys(t.commands_changes).length>0&&i.find(".system-note.being-posted").remove(),this.addFlash(t.errors.commands_only,"notice",this.parentTimeline.get(0)),this.refresh())}},{key:"isParallelView",value:function(){return"parallel"===c.a.get("diff_view")}},{key:"renderDiscussionNote",value:function(t,n){var i,a,r,s,c;if(e.isNewNote(t,this.note_ids)){if(this.note_ids.push(t.id),r=(a=n||o()('.js-discussion-note-form[data-discussion-id="'.concat(t.discussion_id,'"]'))).length||!t.discussion_line_code?a.closest("tr"):o()("#".concat(t.discussion_line_code)),t.on_image&&(r=a),s=this.isParallelView()?a.find("#line_type").val():"old",c=r.prevAll(".line_holder").first().find(".js-avatar-container."+s+"_line"),(i=o()('.notes[data-discussion-id="'.concat(t.discussion_id,'"]'))).length||(i=a.closest(".discussion").find(".notes")),0===i.length)if(t.diff_discussion_html){var l=o()(t.diff_discussion_html).renderGFM();if(!this.isParallelView()||r.hasClass("js-temp-notes-holder")||t.on_image)r.after(l);else{var d=l.find('.notes[data-discussion-id="'.concat(t.discussion_id,'"]')),u="."+d.closest(".notes_content").attr("class").split(" ").join(".");r.find(u+" .content").append(d.closest(".content").children())}}else e.animateAppendNote(t.discussion_html,o()(".main-notes-list"));else e.animateAppendNote(t.html,i);return void 0!==gl.diffNotesCompileComponents&&t.discussion_resolvable&&(gl.diffNotesCompileComponents(),this.renderDiscussionAvatar(c,t)),Object(T.i)(o()(".js-timeago"),!1),e.checkMergeRequestStatus(),this.updateNotesCount(1)}}},{key:"getLineHolder",value:function(e){return o()(e).closest(".notes_holder").prevAll(".line_holder").first().get(0)}},{key:"renderDiscussionAvatar",value:function(e,t){var n=e.find(".diff-comment-avatar-holders");n.length||((n=document.createElement("diff-note-avatars")).setAttribute("discussion-id",t.discussion_id),e.append(n),gl.diffNotesCompileComponents())}},{key:"resetMainTargetForm",value:function(e){var t;(t=o()(".js-main-target-form")).find(".js-errors").remove(),t.find(".js-md-write-button").click(),t.find(".js-note-text").val("").trigger("input"),t.find(".js-note-text").data("autosave").reset();var n=document.createEvent("Event");n.initEvent("autosize:update",!0,!1),t.find(".js-autosize")[0].dispatchEvent(n),this.updateTargetButtons(e)}},{key:"reenableTargetFormSubmitButton",value:function(){return o()(".js-main-target-form").find(".js-note-text").trigger("input")}},{key:"setupMainTargetNoteForm",value:function(t){var n;n=o()(".js-new-note-form"),this.formClone=n.clone(),this.setupNoteForm(n,t),n.removeClass("js-new-note-form"),n.addClass("js-main-target-form"),n.find("#note_line_code").remove(),n.find("#note_position").remove(),n.find("#note_type").val(""),n.find("#note_project_id").remove(),n.find("#in_reply_to_discussion_id").remove(),n.find(".js-comment-resolve-button").closest("comment-and-resolve-btn").remove(),this.parentTimeline=n.parents(".timeline"),n.length&&e.initCommentTypeToggle(n.get(0))}},{key:"setupNoteForm",value:function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.b;return this.glForm=new E.a(e,i),t=e.find(".js-note-text"),n=["Note",e.find("#note_noteable_type").val(),e.find("#note_noteable_id").val(),e.find("#note_commit_id").val(),e.find("#note_type").val(),e.find("#note_project_id").val(),e.find("#in_reply_to_discussion_id").val(),e.find("#note_line_code").val(),e.find("#note_position").val()],new x.a(t,n)}},{key:"addNote",value:function(e,t){return this.renderNote(t)}},{key:"addNoteError",value:function(e){var t;return e.hasClass("js-main-target-form")?t=e.parents(".timeline"):e.hasClass("js-discussion-note-form")&&(t=e.closest(".discussion-notes").find(".notes")),this.addFlash("Your comment could not be submitted! Please check your network connection and try again.","alert",t.get(0))}},{key:"updateNoteError",value:function(e){new v.a("Your comment could not be updated! Please check your network connection and try again.")}},{key:"addDiscussionNote",value:function(e,t,n){if(null!=e.attr("data-resolve-all")){e.data("projectPath");var i=e.data("discussionId"),o=e.data("noteableIid");null!=ResolveService&&ResolveService.toggleResolveForDiscussion(o,i)}this.renderNote(t,e),n&&this.removeDiscussionNoteForm(e)}},{key:"updateNote",value:function(e,t){var n;n=o()(e.html),this.revertNoteEditForm(t),n.renderGFM(),o()(".note-row-"+e.id).replaceWith(n),this.setupNewNote(n),void 0!==gl.diffNotesCompileComponents&&gl.diffNotesCompileComponents()}},{key:"checkContentToAllowEditing",value:function(e){var t=e.find(".original-note-content").text().trim(),n=!0;if(e.find(".js-note-text").val()===t)this.removeNoteEditForm(e);else{e.find(".note-form-actions");Object(N.u)(e.get(0))||Object(N.G)(e),e.find(".js-finish-edit-warning").show(),n=!1}return n}},{key:"showEditForm",value:function(e,t,n){e.preventDefault();var i=o()(e.target),a=o()(this.getEditFormSelector(i)),r=i.closest(".note"),s=o()(".note.is-editing:visible");if(s.length&&!this.checkContentToAllowEditing(s))return;r.find(".js-note-attachment-delete").show(),a.addClass("current-note-edit-form"),r.addClass("is-editing"),this.putEditFormInPlace(i)}},{key:"cancelEdit",value:function(e){e.preventDefault();var t=o()(e.target),n=t.closest(".note"),i=n.attr("data-note-id");if(this.revertNoteEditForm(t),this.updatedNotesTrackingMap[i]){var a=o()(this.updatedNotesTrackingMap[i].html);n.replaceWith(a),this.setupNewNote(a),delete this.updatedNotesTrackingMap[i]}else n.find(".js-finish-edit-warning").hide(),this.removeNoteEditForm(n)}},{key:"revertNoteEditForm",value:function(e){e=e||o()(".note.is-editing:visible");var t=this.getEditFormSelector(e),n=o()(t);n.insertBefore(".diffs"),n.find(".js-comment-save-button").enable(),n.find(".js-finish-edit-warning").hide()}},{key:"getEditFormSelector",value:function(e){var t=".note-edit-form:not(.mr-note-edit-form)";return e.parents("#diffs").length&&(t=".note-edit-form.mr-note-edit-form"),t}},{key:"removeNoteEditForm",value:function(e){var t=e.find(".diffs .current-note-edit-form");return e.removeClass("is-editing"),t.removeClass("current-note-edit-form"),t.find(".js-finish-edit-warning").hide(),t.find(".js-note-text").val(t.find("form.edit-note").data("originalNote"))}},{key:"removeNote",value:function(t){var n,i;return i=o()(t.currentTarget).closest(".note"),n=i.attr("id"),i.attr("data-note-id"),o()(t.currentTarget).closest(".notes[data-discussion-id]").closest(".notes_holder").prev(".line_holder"),o()('.note[id="'.concat(n,'"]')).each(function(e,t){var i,a;a=(i=o()(t)).closest(".discussion-notes");var r=o()(".notes",a).data("discussionId");if(void 0!==gl.diffNotesCompileComponents&&gl.diffNoteApps[n]&&gl.diffNoteApps[n].$destroy(),i.remove(),0===a.find(".note").length){var s=a.closest("tr");if(a.closest(".timeline-entry").remove(),o()(".js-diff-avatars-".concat(r)).trigger("remove.vue"),s.find(".discussion-notes").length>1||0===s.length){var c=a.closest(".diff-file");if(c.length>0){var l=new CustomEvent("removeBadge.imageDiff",{detail:{badgeNumber:a.index()+1}});c[0].dispatchEvent(l)}a.remove()}else s.length>0&&s.remove()}}),e.checkMergeRequestStatus(),this.updateNotesCount(-1)}},{key:"removeAttachment",value:function(){var e=o()(this).closest(".note");return e.find(".note-attachment").remove(),e.find(".note-body > .note-text").show(),e.find(".note-header").show(),e.find(".diffs .current-note-edit-form").remove()}},{key:"onReplyToDiscussionNote",value:function(e){this.replyToDiscussionNote(e.target)}},{key:"replyToDiscussionNote",value:function(e){var t,n;return t=this.cleanForm(this.formClone.clone()),(n=o()(e).closest(".js-discussion-reply-button")).closest(".discussion-reply-holder").hide().after(t),this.setupDiscussionNoteForm(n,t)}},{key:"setupDiscussionNoteForm",value:function(e,t){var n=e.closest(".text-file");0===n.length&&(n=e.closest(".image"));var i=e.data("discussionId");(i&&(t.attr("data-discussion-id",i),t.find("#in_reply_to_discussion_id").val(i)),t.find("#note_project_id").val(e.data("discussionProjectId")),t.attr("data-line-code",e.data("lineCode")),t.find("#line_type").val(e.data("lineType")),t.find("#note_noteable_type").val(n.data("noteableType")),t.find("#note_noteable_id").val(n.data("noteableId")),t.find("#note_commit_id").val(n.data("commitId")),t.find("#note_type").val(e.data("noteType")),t.find("#note_line_code").val(e.data("lineCode")),t.find("#note_position").val(e.attr("data-position")),t.find(".js-close-discussion-note-form").show().removeClass("hide"),t.find(".js-note-target-close").remove(),t.find(".js-note-new-discussion").remove(),this.setupNoteForm(t),t.removeClass("js-main-target-form").addClass("discussion-form js-discussion-note-form"),void 0!==gl.diffNotesCompileComponents)&&(t.find("comment-and-resolve-btn").attr(":discussion-id","'".concat(i,"'")),gl.diffNotesCompileComponents());t.find(".js-note-text").focus(),t.find(".js-comment-resolve-button").attr("data-discussion-id",i)}},{key:"onAddDiffNote",value:function(e){e.preventDefault();var t=e.currentTarget||e.target,n=o()(t),i=!n.hasClass("js-diff-comment-avatar");this.toggleDiffNote({target:n,lineType:t.dataset.lineType,showReplyInput:i})}},{key:"onAddImageDiffNote",value:function(e){var t,n=o()(e.currentTarget||e.target),i=n.closest(".diff-file"),a=new CustomEvent("click.imageDiff",{detail:e});i[0].dispatchEvent(a);var r=n.closest(".diff-viewer").find(".note-container"),s=r.find("> .discussion-form");0===s.length?(t=this.cleanForm(this.formClone.clone())).appendTo(r):t=s,this.setupDiscussionNoteForm(n,t)}},{key:"toggleDiffNote",value:function(e){var t,n,i,a,r,s,c,l=e.target,d=e.lineType,u=e.forceShow,h=e.showReplyInput,f=void 0!==h&&h,p=(s=(t=o()(l)).closest("tr")).next(),m=s;p.is(".notes_holder")&&(m=p),i=p.is(".notes_holder"),n=!1;var g="";c='<tr class="notes_holder js-temp-notes-holder"><td class="notes_content" colspan="3"><div class="content"></div></td></tr>',this.isParallelView()&&(g=".".concat(d),c='<tr class="notes_holder js-temp-notes-holder"><td class="notes_line old"></td><td class="notes_content parallel old"><div class="content"></div></td><td class="notes_line new"></td><td class="notes_content parallel new"><div class="content"></div></td></tr>');var v=".notes_content".concat(g," .content"),b=m.find(v);if(i&&f)m.show(),(b=m.find(v)).length&&(b.show(),(r=b.find(".js-discussion-reply-button:visible")).length?this.replyToDiscussionNote(r[0]):0===b.find(".js-discussion-note-form").length&&(n=!0));else if(f)s.after(c),b=(m=s.next()).find(v),n=!0;else{var y=m.find(".content:not(:empty)").is(":visible"),w=!0===u||!y&&!(!0===u||!1===u);m.toggleClass("hide",!w),b.toggleClass("hide",!w)}if(n)return(a=this.cleanForm(this.formClone.clone())).appendTo(b),this.setupDiscussionNoteForm(t,a)}},{key:"removeDiscussionNoteForm",value:function(e){var t;return t=e.closest("tr"),e.data("glForm").destroy(),e.find(".js-note-text").data("autosave").reset(),e.prev(".discussion-reply-holder").show(),t.is(".js-temp-notes-holder")?t.remove():e.remove()}},{key:"cancelDiscussionForm",value:function(e){e.preventDefault();var t=o()(e.target).closest(".js-discussion-note-form");if(0===o()(e.target).closest(".discussion-notes").length){var n=t.closest(".diff-file");if(n.length>0){var i=new CustomEvent("blur.imageDiff",{detail:e});n[0].dispatchEvent(i)}}return this.removeDiscussionNoteForm(t)}},{key:"updateFormAttachment",value:function(){var e,t;return t=o()(this).closest("form"),e=o()(this).val().replace(/^.*[\\\/]/,""),t.find(".js-attachment-filename").text(e)}},{key:"visibilityChange",value:function(){return this.refresh()}},{key:"updateTargetButtons",value:function(e){var t,n,i,a,r,s;a=(i=(s=o()(e.target)).parents("form")).find(".js-note-target-reopen"),t=i.find(".js-note-target-close"),s.val().trim().length>0?(r=a.attr("data-alternative-text"),n=t.attr("data-alternative-text"),a.text()!==r&&a.text(r),t.text()!==n&&t.text(n),a.is(":not(.btn-comment-and-reopen)")&&a.addClass("btn-comment-and-reopen"),t.is(":not(.btn-comment-and-close)")&&t.addClass("btn-comment-and-close")):(r=a.data("originalText"),n=t.data("originalText"),a.text()!==r&&a.text(r),t.text()!==n&&t.text(n),a.is(".btn-comment-and-reopen")&&a.removeClass("btn-comment-and-reopen"),t.is(".btn-comment-and-close")&&t.removeClass("btn-comment-and-close"))}},{key:"putEditFormInPlace",value:function(e){var t=o()(this.getEditFormSelector(e)),n=e.closest(".note");t.insertAfter(n.find(".note-text"));var i=n.find(".original-note-content"),a=i.text().trim(),r=i.data("postUrl"),s=i.data("targetId"),c=i.data("targetType"),l=i.data("markdownVersion");this.glForm=new E.a(t.find("form"),this.enableGFM),t.find("form").attr("action","".concat(r,"?html=true")).attr("data-remote","true").attr("data-markdown-version",l),t.find(".js-form-target-id").val(s),t.find(".js-form-target-type").val(c),t.find(".js-note-text").focus().val(a),t.find(".js-md-write-button").trigger("click"),t.find(".referenced-users").hide()}},{key:"putConflictEditWarningInPlace",value:function(e,t){0===t.find(".js-conflict-edit-warning").length&&o()('<div class="js-conflict-edit-warning alert alert-danger">\n        This comment has changed since you started editing, please review the\n        <a href="#note_'.concat(e.id,'" target="_blank" rel="noopener noreferrer">\n          updated comment\n        </a>\n        to ensure information is not lost\n      </div>')).insertAfter(t.find(".note-text"))}},{key:"updateNotesCount",value:function(e){return this.notesCountBadge.text(parseInt(this.notesCountBadge.text(),10)+e)}},{key:"onClickRetryLazyLoad",value:function(e){var t=o()(e.currentTarget);return t.prop("disabled",!0),this.loadLazyDiff(e).then(function(){t.prop("disabled",!1)})}},{key:"loadLazyDiff",value:function(t){var n=o()(t.currentTarget).closest(".js-toggle-container");if(e.renderPlaceholderComponent(n),n.find(".js-toggle-lazy-diff").removeClass("js-toggle-lazy-diff"),0!==n.find("tbody").length){var i=n.find(".file-holder").data("linesPath"),a=n.find(".js-error-lazy-load-diff"),r=n.find(".js-success-lazy-load");return i?m.a.get(i).then(function(t){var i=t.data;r.removeClass("hidden"),a.addClass("hidden"),e.renderDiffContent(n,i)}).catch(function(){r.addClass("hidden"),a.removeClass("hidden")}):Promise.resolve()}}},{key:"toggleCommitList",value:function(e){var t=o()(e.currentTarget),n=t.siblings(".system-note-commit-list");t.find(".fa").toggleClass("fa-angle-down").toggleClass("fa-angle-up"),n.toggleClass("hide-shade")}},{key:"collapseLongCommitList",value:function(){var e=o()("#notes-list").find("li.system-note").has("ul");o.a.each(e,function(e,t){var n=o()(t),i=n.find(".note-text").find("p:first").text().replace(":","");n.find(".note-header .system-note-message").html(i),n.find("li").length>3?(n.find(".note-text").addClass("system-note-commit-list"),n.find(".system-note-commit-list-toggler").show()):n.find(".note-text").addClass("system-note-commit-list hide-shade")})}},{key:"addFlash",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.flashContainer=I(v.a,t)}},{key:"clearFlash",value:function(){this.flashContainer&&(this.flashContainer.style.display="none",this.flashContainer=null)}},{key:"cleanForm",value:function(e){return e.find(".js-comment-type-dropdown").removeClass("btn-group"),e.find(".dropdown-menu").remove(),e}},{key:"getFormData",value:function(e){var t=e.find(".js-note-text").val();return{formData:e.serialize(),formContent:r.a.escape(t),formAction:e.attr("action"),formContentOriginal:t}}},{key:"hasQuickActions",value:function(e){return L.test(e)}},{key:"stripQuickActions",value:function(e){return e.replace(L,"").trim()}},{key:"getQuickActionDescription",value:function(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).filter(function(t,n){return new RegExp("/".concat(t.name)).test(e)});if(n&&n.length)if(n.length>1)t="Applying multiple commands";else{var i=n[0].description.toLowerCase();t="Applying command to ".concat(i)}else t="Applying command";return t}},{key:"createPlaceholderNote",value:function(e){var t=e.formContent,n=e.uniqueId,i=e.isDiscussionNote,a=e.currentUsername,s=e.currentUserFullname,c=e.currentUserAvatar,l=i?"discussion":"",d=o()('<li id="'.concat(n,'" class="note being-posted fade-in-half timeline-entry">\n         <div class="timeline-entry-inner">\n            <div class="timeline-icon">\n               <a href="/').concat(r.a.escape(a),'">\n                 <img class="avatar s40" src="').concat(c,'" />\n               </a>\n            </div>\n            <div class="timeline-content ').concat(l,'">\n               <div class="note-header">\n                  <div class="note-header-info">\n                     <a href="/').concat(r.a.escape(a),'">\n                       <span class="d-none d-sm-inline-block">').concat(r.a.escape(a),'</span>\n                       <span class="note-headline-light">').concat(r.a.escape(a),'</span>\n                     </a>\n                  </div>\n               </div>\n               <div class="note-body">\n                 <div class="note-text">\n                   <p>').concat(t,"</p>\n                 </div>\n               </div>\n            </div>\n         </div>\n      </li>"));return d.find(".d-none.d-sm-inline-block").text(r.a.escape(s)),d.find(".note-headline-light").text("@".concat(r.a.escape(a))),d}},{key:"createPlaceholderSystemNote",value:function(e){var t=e.formContent,n=e.uniqueId;return o()('<li id="'.concat(n,'" class="note system-note timeline-entry being-posted fade-in-half">\n         <div class="timeline-entry-inner">\n           <div class="timeline-content">\n             <i>').concat(t,"</i>\n           </div>\n         </div>\n       </li>"))}},{key:"postComment",value:function(e){var t=this;e.preventDefault();var n=o()(e.target);n.prop("disabled",!0);var i,a,s,c,l=n.parents("form"),d=l.find(".js-note-target-close"),h="discussion"===n.parent().find("li.droplab-item-selected").attr("id"),f=l.hasClass("js-main-target-form"),p=l.hasClass("js-discussion-note-form"),g=n.hasClass("js-comment-resolve-button"),v=this.getFormData(l),b=v.formData,y=v.formContent,w=v.formAction,k=v.formContentOriginal,j=!1;return p?s=l.parent(".discussion-notes").find(".notes"):f&&(s=o()("ul.main-notes-list")),g&&l.find(".js-comment-submit-button").disable(),c=y,this.hasQuickActions(y)&&(c=this.stripQuickActions(y),j=!0),c&&(i=r.a.uniqueId("tempNote_"),s.append(this.createPlaceholderNote({formContent:c,uniqueId:i,isDiscussionNote:h,currentUsername:gon.current_username,currentUserFullname:gon.current_user_fullname,currentUserAvatar:gon.current_user_avatar_url}))),j&&(a=r.a.uniqueId("tempSystemNote_"),s.append(this.createPlaceholderSystemNote({formContent:this.getQuickActionDescription(y,u.a.get(gl.GfmAutoComplete.dataSources.commands)),uniqueId:a}))),s.length&&(f?this.resetMainTargetForm(e):p&&this.removeDiscussionNoteForm(l)),d.text(d.data("originalText")),m.a.post("".concat(w,"?html=true"),b).then(function(o){var a=o.data;n.prop("disabled",!1),s.find("#".concat(i)).remove();var r=l.closest(".diff-file");if(r.length>0){var c=new CustomEvent("blur.imageDiff",{detail:e});r[0].dispatchEvent(c)}if(j&&l.find("textarea.js-note-text").trigger("clear-commands-cache.atwho"),t.clearFlashWrapper(),p){s.find(".flash-container").remove(),g&&l.attr("data-discussion-id",n.data("discussionId")).attr("data-resolve-all","true").attr("data-project-path",n.data("projectPath"));var d=0===s.length;if(t.addDiscussionNote(l,a,d),d){var u=l.find("#note_position").val();if(r.length>0&&u.length>0){var h=JSON.parse(u),m=h.x,v=h.y,b=h.width,y=h.height,w=new CustomEvent("addBadge.imageDiff",{detail:{x:m,y:v,width:b,height:y,noteId:"note_".concat(a.id),discussionId:a.discussion_id}});r[0].dispatchEvent(w)}}s.length&&s.append('<div class="flash-container" style="display: none;"></div>')}else f&&(t.addNote(l,a),t.reenableTargetFormSubmitButton(e));a.commands_changes&&t.handleQuickActions(a),l.trigger("ajax:success",[a])}).catch(function(){s.find("#".concat(i)).remove(),n.prop("disabled",!1);var o=new CustomEvent("blur.imageDiff",{detail:e}),r=l.closest(".diff-file");if(r.length&&r[0].dispatchEvent(o),j&&s.find("#".concat(a)).remove(),p&&s.length){var c=s.parent().find(".js-discussion-reply-button");t.replyToDiscussionNote(c[0]),l=s.parent().find("form")}l.find(".js-note-text").val(k),t.reenableTargetFormSubmitButton(e),t.addNoteError(l)})}},{key:"updateComment",value:function(e){var t=this;e.preventDefault();var n=o()(e.target).parents("form"),i=n.find(".js-note-target-close"),a=n.parents(".note.is-editing"),s=a.find(".js-task-list-container").find(".note-text"),c=this.getFormData(n),l=c.formData,d=c.formContent,u=c.formAction,h=(n.closest(".diff-file"),n.closest(".notes"),s.html());return s.html(d),a.removeClass("is-editing fade-in-full").addClass("being-posted fade-in-half"),a.find(".note-headline-meta a").html('<i class="fa fa-spinner fa-spin" aria-label="Comment is being updated" aria-hidden="true"></i>'),m.a.post("".concat(u,"?html=true"),l).then(function(e){var n=e.data;t.updateNote(n,a)}).catch(function(){s.html(r.a.escape(h)),a.removeClass("being-posted fade-in"),a.find(".fa.fa-spinner").remove(),t.updateNoteError()}),i.text(i.data("originalText"))}}],[{key:"initCommentTypeToggle",value:function(e){var t=e.querySelector(".js-comment-type-dropdown .dropdown-toggle"),n=e.querySelector(".js-comment-type-dropdown .dropdown-menu"),i=e.querySelector("#note_type"),o=e.querySelector(".js-comment-type-dropdown .js-comment-submit-button"),a=e.querySelector(".js-note-target-close"),r=e.querySelector(".js-note-target-reopen");new C({dropdownTrigger:t,dropdownList:n,noteTypeInput:i,submitButton:o,closeButton:a,reopenButton:r}).initDroplab()}},{key:"updateNoteTargetSelector",value:function(e){var t=Object(g.a)(),n=Boolean(t&&e.filter("#".concat(t)).length>0);e.toggleClass("target",n)}},{key:"renderPlaceholderComponent",value:function(e){var t=e.find(".js-code-placeholder").get(0);new h.default({el:t,components:{GlSkeletonLoading:p.k},render:function(e){return e("gl-skeleton-loading")}})}},{key:"renderDiffContent",value:function(e,t){var n=t.discussion_html,i=o()(n).find(".line_holder");i.addClass("fade-in"),e.find(".diff-content > table > tbody").prepend(i);var a=e.find(".file-holder");e.find(".line-holder-placeholder").remove(),Object(f.a)(a)}},{key:"isNewNote",value:function(e,t){return-1===o.a.inArray(e.id,t)}},{key:"isUpdatedNote",value:function(e,t){return F(e.note.trim())!==F(t.find(".original-note-content").first().text().trim())}},{key:"checkMergeRequestStatus",value:function(){"merge_requests"===Object(N.h)(1)&&gl.mrWidget&&gl.mrWidget.checkStatus()}},{key:"animateAppendNote",value:function(e,t){var n=o()(e);return n.addClass("fade-in-full").renderGFM(),t.append(n),n}},{key:"animateUpdateNote",value:function(e,t){var n=o()(e);return n.addClass("fade-in").renderGFM(),t.replaceWith(n),n}}]),e}();window.Notes=P},261:function(e,t,n){(function(t){var n;n=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,n){var i,o,a,r,s=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};i=function(e){return Array.prototype.slice.apply(e)},a=function(e,t){for(;e&&!e.classList.contains(t);)e=e.parentNode;return e},r=function(e,t){var n;return"function"==typeof Event?(n=new Event(e,{bubbles:!0,cancelable:!0})).detail=t:(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,t),n},o=function(){function e(e){var t;this.el=e,this.container=a(this.el,"js-task-list-container"),this.field=this.container.querySelector(".js-task-list-field"),this.container.addEventListener("change",(t=this,function(e){if(e.target.classList.contains("task-list-item-checkbox"))return t.updateTaskList(e.target)})),this.enable()}return e.prototype.enable=function(){var e;if(this.container.querySelectorAll(".js-task-list-field").length>0)return i(this.container.querySelectorAll(".task-list-item")).forEach(function(e){return e.classList.add("enabled")}),i(this.container.querySelectorAll(".task-list-item-checkbox")).forEach(function(e){return e.disabled=!1}),this.container.classList.add("is-task-list-enabled"),e=r("tasklist:enabled"),this.container.dispatchEvent(e)},e.prototype.disable=function(){var e;return i(this.container.querySelectorAll(".task-list-item")).forEach(function(e){return e.classList.remove("enabled")}),i(this.container.querySelectorAll(".task-list-item-checkbox")).forEach(function(e){return e.disabled=!0}),this.container.classList.remove("is-task-list-enabled"),e=r("tasklist:disabled"),this.container.dispatchEvent(e)},e.prototype.updateTaskList=function(t){var n,o,a,s;if(a=this.container.querySelectorAll(".task-list-item-checkbox"),s=1+i(a).indexOf(t),n=r("tasklist:change",{index:s,checked:t.checked}),this.field.dispatchEvent(n),!n.defaultPrevented)return this.field.value=e.updateSource(this.field.value,s,t.checked),n=r("change"),this.field.dispatchEvent(n),o=r("tasklist:changed",{index:s,checked:t.checked}),this.field.dispatchEvent(o)},e.incomplete="[ ]",e.complete="[x]",e.escapePattern=function(e){return e.replace(/([\[\]])/g,"\\$1").replace(/\s/,"\\s").replace("x","[xX]")},e.incompletePattern=RegExp(""+e.escapePattern(e.incomplete)),e.completePattern=RegExp(""+e.escapePattern(e.complete)),e.itemPattern=RegExp("^(?:\\s*(?:>\\s*)*(?:[-+*]|(?:\\d+\\.)))\\s*("+e.escapePattern(e.complete)+"|"+e.escapePattern(e.incomplete)+")\\s+(?!\\(.*?\\))(?=(?:\\[.*?\\]\\s*(?:\\[.*?\\]|\\(.*?\\))\\s*)*(?:[^\\[]|$))"),e.startFencesPattern=/^`{3}.*$/,e.endFencesPattern=/^`{3}$/,e.itemsInParasPattern=RegExp("^("+e.escapePattern(e.complete)+"|"+e.escapePattern(e.incomplete)+").+$","g"),e.updateSource=function(e,t,n){var i,o,a,r;return i=e.replace(/\r/g,"").replace(this.itemsInParasPattern,"").split("\n"),a=0,o=!1,function(){var c,l,d,u;for(u=[],c=0,l=(d=e.split("\n")).length;c<l;c++)r=d[c],o?r.match(this.endFencesPattern)&&(o=!1):r.match(this.startFencesPattern)?o=!0:s.call(i,r)>=0&&r.match(this.itemPattern)&&(a+=1)===t&&(r=n?r.replace(this.incompletePattern,this.complete):r.replace(this.completePattern,this.incomplete)),u.push(r);return u}.call(this).join("\n")},e}(),void 0!==t&&(t.fn.taskList=function(e){return this.each(function(n,i){var a;if((a=t(i).data("task-list"))||(a=new o(i),t(i).data("task-list",a),e&&"enable"!==e))return a[e||"enable"]()})}),e.exports=o}])},e.exports=n()}).call(this,n(0))},27:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(2),o=n.n(i),a=n(4),r=n(43);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=c(this,l(t).call(this)),o.a.bind("g p",function(){return Object(a.a)(".shortcuts-project")}),o.a.bind("g v",function(){return Object(a.a)(".shortcuts-project-activity")}),o.a.bind("g r",function(){return Object(a.a)(".shortcuts-project-releases")}),o.a.bind("g f",function(){return Object(a.a)(".shortcuts-tree")}),o.a.bind("g c",function(){return Object(a.a)(".shortcuts-commits")}),o.a.bind("g j",function(){return Object(a.a)(".shortcuts-builds")}),o.a.bind("g n",function(){return Object(a.a)(".shortcuts-network")}),o.a.bind("g d",function(){return Object(a.a)(".shortcuts-repository-charts")}),o.a.bind("g i",function(){return Object(a.a)(".shortcuts-issues")}),o.a.bind("g b",function(){return Object(a.a)(".shortcuts-issue-boards")}),o.a.bind("g m",function(){return Object(a.a)(".shortcuts-merge_requests")}),o.a.bind("g w",function(){return Object(a.a)(".shortcuts-wiki")}),o.a.bind("g s",function(){return Object(a.a)(".shortcuts-snippets")}),o.a.bind("g k",function(){return Object(a.a)(".shortcuts-kubernetes")}),o.a.bind("g e",function(){return Object(a.a)(".shortcuts-environments")}),o.a.bind("g l",function(){return Object(a.a)(".shortcuts-metrics")}),o.a.bind("i",function(){return Object(a.a)(".shortcuts-new-issue")}),e.enabledHelp.push(".hidden-shortcut.project"),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r["a"]),t}()},28:function(e,t,n){"use strict";var i=n(0),o=n.n(i),a=n(12),r=n(31);function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.projectSelectInput=o()(t),this.newItemBtn=o()(".new-project-item-link"),this.resourceType=this.newItemBtn.data("type"),this.resourceLabel=this.newItemBtn.data("label"),this.formattedText=this.deriveTextVariants(),this.groupId=this.projectSelectInput.data("groupId"),this.bindEvents(),this.initLocalStorage()}var t,n,i;return t=e,(n=[{key:"bindEvents",value:function(){var e=this;this.projectSelectInput.siblings(".new-project-item-select-button").on("click",function(t){return e.openDropdown(t)}),this.newItemBtn.on("click",function(t){e.getProjectFromLocalStorage()||(t.preventDefault(),e.openDropdown(t))}),this.projectSelectInput.on("change",function(){return e.selectProject()})}},{key:"initLocalStorage",value:function(){r.a.isLocalStorageAccessSafe()&&(this.localStorageKey=["group",this.groupId,this.formattedText.localStorageItemType,"recent-project"].join("-"),this.setBtnTextFromLocalStorage())}},{key:"openDropdown",value:function(e){o()(e.currentTarget).siblings(".project-item-select").select2("open")}},{key:"selectProject",value:function(){var e=JSON.parse(this.projectSelectInput.val()),t={url:"".concat(e.url,"/").concat(this.projectSelectInput.data("relativePath")),name:e.name};this.setNewItemBtnAttributes(t),this.setProjectInLocalStorage(t)}},{key:"setBtnTextFromLocalStorage",value:function(){var e=this.getProjectFromLocalStorage();this.setNewItemBtnAttributes(e)}},{key:"setNewItemBtnAttributes",value:function(e){e?(this.newItemBtn.attr("href",e.url),this.newItemBtn.text("".concat(this.formattedText.defaultTextPrefix," in ").concat(e.name))):this.newItemBtn.text("Select project to create ".concat(this.formattedText.presetTextSuffix))}},{key:"getProjectFromLocalStorage",value:function(){var e=localStorage.getItem(this.localStorageKey);return JSON.parse(e)}},{key:"setProjectInLocalStorage",value:function(e){var t=JSON.stringify(e);localStorage.setItem(this.localStorageKey,t)}},{key:"deriveTextVariants",value:function(){var e=this.resourceLabel;return{localStorageItemType:"new-".concat(this.resourceType.split("_").join("-").slice(0,-1)),defaultTextPrefix:e,presetTextSuffix:this.resourceType.split("_").join(" ").slice(0,-1)}}}])&&s(t.prototype,n),i&&s(t,i),e}();function l(){o()(".ajax-project-select").each(function(e,t){var n,i,r=o()(t).data("simpleFilter")||!1;return this.groupId=o()(t).data("groupId"),this.includeGroups=o()(t).data("includeGroups"),this.allProjects=o()(t).data("allProjects")||!1,this.orderBy=o()(t).data("orderBy")||"id",this.withIssuesEnabled=o()(t).data("withIssuesEnabled"),this.withMergeRequestsEnabled=o()(t).data("withMergeRequestsEnabled"),this.withShared=void 0===o()(t).data("withShared")||o()(t).data("withShared"),this.includeProjectsInSubgroups=o()(t).data("includeProjectsInSubgroups")||!1,this.allowClear=o()(t).data("allowClear")||!1,n="Search for project",this.includeGroups&&(n+=" or group"),o()(t).select2({placeholder:n,minimumInputLength:0,query:(i=this,function(e){var t,n;return t=function(t){var n;return n={results:t},e.callback(n)},n=i.includeGroups?function(n){var i;return i=function(e){var i;return i=e.concat(n),t(i)},a.a.groups(e.term,{},i)}:t,i.groupId?a.a.groupProjects(i.groupId,e.term,{with_issues_enabled:i.withIssuesEnabled,with_merge_requests_enabled:i.withMergeRequestsEnabled,with_shared:i.withShared,include_subgroups:i.includeProjectsInSubgroups},n):a.a.projects(e.term,{order_by:i.orderBy,with_issues_enabled:i.withIssuesEnabled,with_merge_requests_enabled:i.withMergeRequestsEnabled,membership:!i.allProjects},n)}),id:function(e){return r?e.id:JSON.stringify({name:e.name,url:e.web_url})},text:function(e){return e.name_with_namespace||e.name},initSelection:function(e,t){return a.a.project(e.val()).then(function(e){var n=e.data;return t(n)})},allowClear:this.allowClear,dropdownCssClass:"ajax-project-dropdown"}),r?t:new c(t)})}n.d(t,"a",function(){return l})},29:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var i=n(0),o=n.n(i),a=n(14),r=n.n(a),s=n(1),c=n(19),l=n(6),d=n(7),u=n(28);function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=o()("ul.clone-options-dropdown"),n=o()("#project_clone"),i=o()(".js-git-clone-holder .js-clone-dropdown-label"),a=document.querySelector(".js-mobile-git-clone .js-clone-dropdown-label"),s=i.text().trim();s.length>0&&o()("a:contains('".concat(s,"')"),t).addClass("is-active"),o()("a",t).on("click",function(e){e.preventDefault();var i=o()(e.currentTarget),r=i.attr("href"),s=i.data("cloneType");o()(".is-active",t).removeClass("is-active"),o()('a[data-clone-type="'.concat(s,'"]')).each(function(){var e=o()(this),t=e.find(".dropdown-menu-inner-title").text(),n=e.closest(".project-clone-holder").find(".js-clone-dropdown-label");e.toggleClass("is-active"),n.text(t)}),a?a.dataset.clipboardText=r:n.val(r),o()(".js-git-empty .js-clone").text(r)}),e.initRefSwitcher(),o()(".project-refs-select").on("change",function(){return o()(this).parents("form").submit()}),o()(".hide-no-ssh-message").on("click",function(e){return r.a.set("hide_no_ssh_message","false"),o()(this).parents(".no-ssh-key-message").remove(),e.preventDefault()}),o()(".hide-no-password-message").on("click",function(e){return r.a.set("hide_no_password_message","false"),o()(this).parents(".no-password-message").remove(),e.preventDefault()}),o()(".hide-auto-devops-implicitly-enabled-banner").on("click",function(e){var t=o()(this).data("project-id"),n="hide_auto_devops_implicitly_enabled_banner_".concat(t);return r.a.set(n,"false"),o()(this).parents(".auto-devops-implicitly-enabled-banner").remove(),e.preventDefault()}),e.projectSelectDropdown()}var t,n,i;return t=e,i=[{key:"projectSelectDropdown",value:function(){Object(u.a)(),o()(".project-item-select").on("click",function(t){return e.changeProject(o()(t.currentTarget).val())})}},{key:"changeProject",value:function(e){return window.location=e}},{key:"initRefSwitcher",value:function(){var e=document.createElement("li"),t=document.createElement("a");return t.href="#",o()(".js-project-refs-dropdown").each(function(){var n,i;return n=o()(this),i=n.data("selected"),n.glDropdown({data:function(e,t){l.a.get(n.data("refsUrl"),{params:{ref:n.data("ref"),search:e}}).then(function(e){var n=e.data;return t(n)}).catch(function(){return Object(d.a)(Object(s.a)("An error occurred while getting projects"))})},selectable:!0,filterable:!0,filterRemote:!0,filterByText:!0,inputFieldName:n.data("inputFieldName"),fieldName:n.data("fieldName"),renderRow:function(n){var o=e.cloneNode(!1);if(null!=n.header)o.className="dropdown-header",o.textContent=n.header;else{var a=t.cloneNode(!1);n===i&&(a.className="is-active"),a.textContent=n,a.dataset.ref=n,o.appendChild(a)}return o},id:function(e,t){return t.attr("data-ref")},toggleLabel:function(e,t){return t.text().trim()},clicked:function(e){if(e.e.preventDefault(),o()('input[name="ref"]').length){var t=n.closest("form"),i=n.data("visit"),a=!!i||i,r=t.attr("action"),s=-1===r.indexOf("?")?"?":"&";a&&Object(c.g)("".concat(r).concat(s).concat(t.serialize()))}}})})}}],(n=null)&&h(t.prototype,n),i&&h(t,i),e}()},290:function(e,t,n){"use strict";var i=n(0),o=n.n(i),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.highlightLineClass=e.highlightLineClass||"hll",e.fileHolderSelector=e.fileHolderSelector||".file-holder",e.scrollFileHolder=e.scrollFileHolder||!1,e.hash=e.hash||window.location.hash,this.options=e,this._hash=e.hash,this.highlightLineClass=e.highlightLineClass,this.setHash=this.setHash.bind(this),this.highlightLine=this.highlightLine.bind(this),this.clickHandler=this.clickHandler.bind(this),this.highlightHash=this.highlightHash.bind(this),this.bindEvents(),this.highlightHash()};a.prototype.bindEvents=function(){var e=o()(this.options.fileHolderSelector);e.on("click","a[data-line-number]",this.clickHandler),e.on("highlight:line",this.highlightHash)},a.prototype.highlightHash=function(e){var t;if(e&&"string"==typeof e&&(this._hash=e),this.clearHighlight(),""!==this._hash&&(t=this.hashToRange(this._hash))[0]){this.highlightRange(t);var n="#L".concat(t[0]),i={offset:-150};this.options.scrollFileHolder?o()(this.options.fileHolderSelector).scrollTo(n,i):o.a.scrollTo(n,i)}},a.prototype.clickHandler=function(e){var t,n,i;return e.preventDefault(),this.clearHighlight(),n=o()(e.target).closest("a").data("lineNumber"),(t=this.hashToRange(this._hash))[0]&&e.shiftKey?e.shiftKey?(i=n<t[0]?[n,t[0]]:[t[0],n],this.setHash(i[0],i[1]),this.highlightRange(i)):void 0:(this.setHash(n),this.highlightLine(n))},a.prototype.clearHighlight=function(){return o()("."+this.highlightLineClass).removeClass(this.highlightLineClass)},a.prototype.hashToRange=function(e){var t;return(t=e.match(/^#?L(\d+)(?:-(\d+))?$/))&&t.length?[parseInt(t[1],10),t[2]?parseInt(t[2],10):null]:[null,null]},a.prototype.highlightLine=function(e){return o()("#LC"+e).addClass(this.highlightLineClass)},a.prototype.highlightRange=function(e){if(e[1]){for(var t=[],n=e[0]<=e[1]?e:e.reverse(),i=e[0];i<=n[1];i+=1)t.push(this.highlightLine(i));return t}return this.highlightLine(e[0])},a.prototype.setHash=function(e,t){var n;return n=t?"#L"+e+"-"+t:"#L"+e,this._hash=n,this.__setLocationHash__(n)},a.prototype.__setLocationHash__=function(e){return window.history.pushState({url:e},document.title,e)},t.a=a},360:function(e,t,n){"use strict";var i=n(224);t.a=function(){var e=document.querySelector(".js-notes-data"),t=JSON.parse(e.innerHTML),n=t.notesUrl,o=t.notesIds,a=t.now,r=t.diffView,s=t.enableGFM;i.a.initialize(n,o,a,r,s)}},44:function(e,t,n){"use strict";n.r(t);var i=n(38),o=n(36),a=n(29),r=n(27);document.addEventListener("DOMContentLoaded",function(){var e=document.body.dataset.page;if(["projects:clusters:new","projects:clusters:create_gcp","projects:clusters:create_user"].indexOf(e)>-1){var t=document.querySelector(".gcp-signup-offer");t&&new o.a(t),Object(i.a)()}new a.a,new r.a})},496:function(e,t,n){"use strict";t.a=function(){var e=window.location,t=e.protocol,n=e.host,i=e.pathname,o=document.querySelector(".js-share-btn"),a=document.querySelector(".js-embed-btn"),r=document.querySelector(".js-snippet-url-area"),s=document.querySelector(".js-embed-action"),c="".concat(t,"//").concat(n+i);o.addEventListener("click",function(){o.classList.add("is-active"),a.classList.remove("is-active"),r.value=c,s.innerText="Share"}),a.addEventListener("click",function(){a.classList.add("is-active"),o.classList.remove("is-active");var e='<script src="'.concat(c,'.js"><\/script>');r.value=e,s.innerText="Embed"})}},79:function(e,t,n){"use strict";var i=n(0),o=n.n(i),a=n(62),r=n.n(a),s=n(66),c=n(32),l=n.n(c),d=n(5),u=n.n(d),h=(n(173),n(75)),f=n(6);function p(e){var t,n,i,a,r,s,c,d=e.find(".button-attach-file"),p=e.find(".attaching-file-message"),m=e.find(".button-cancel-uploading-files"),g=e.find(".retry-uploading-link"),v=e.find(".uploading-progress"),b=e.find(".uploading-error-container"),y=e.find(".uploading-error-message"),w=e.find(".uploading-progress-container"),k=e.data("uploads-path")||window.uploads_path||null,j=gon.max_file_size||10,C=e.find(".js-gfm-input");C.wrap('<div class="div-dropzone"></div>'),C.on("paste",function(e){return t(e)});var E=C.closest(".md-area");e.setupMarkdownPreview();var _=e.find(".div-dropzone");if(_.parent().addClass("div-dropzone-wrapper"),_.append('<div class="div-dropzone-hover"></div>'),_.find(".div-dropzone-hover").append('<i class="fa fa-paperclip div-dropzone-icon"></i>'),!k)return _.addClass("js-invalid-dropzone"),null;var x=_.dropzone({url:k,dictDefaultMessage:"",clickable:!0,paramName:"file",maxFilesize:j,uploadMultiple:!1,headers:h.a.headers,previewContainer:!1,processing:function(){return o()(".div-dropzone-alert").alert("close")},dragover:function(){E.addClass("is-dropzone-hover"),e.find(".div-dropzone-hover").css("opacity",.7)},dragleave:function(){E.removeClass("is-dropzone-hover"),e.find(".div-dropzone-hover").css("opacity",0)},drop:function(){E.removeClass("is-dropzone-hover"),e.find(".div-dropzone-hover").css("opacity",0),C.focus()},success:function(e,t){var o=this.getQueuedFiles().length+this.getUploadingFiles().length,a=o>=1;n(t.link.markdown,a),o||d.removeClass("hide"),i(t.link.url)},error:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Attaching the file failed.",i=arguments.length>2?arguments[2]:void 0,o=!(t=n||i.responseText)||u.a.isString(t)?t:t.message;b.removeClass("hide"),y.html(o),d.addClass("hide"),m.addClass("hide")},totaluploadprogress:function(e){a(this.files,p),v.text("".concat(Math.round(e),"%"))},sending:function(){d.addClass("hide"),b.addClass("hide"),w.removeClass("hide"),m.removeClass("hide")},removedfile:function(){d.removeClass("hide"),m.addClass("hide"),w.addClass("hide"),b.addClass("hide")},queuecomplete:function(){o()(".dz-preview").remove(),o()(".markdown-area").trigger("input"),w.addClass("hide"),m.addClass("hide")}}),S=o()(x[0]).children("textarea");m.on("click",function(e){e.preventDefault(),e.stopPropagation(),l.a.forElement(_.get(0)).removeAllFiles(!0)}),g.on("click",function(e){var t=l.a.forElement(e.target.closest(".js-main-target-form").querySelector(".div-dropzone")),n=t.files;e.preventDefault(),t.removeAllFiles(!0),n.map(function(e){var n=e;return n.status===l.a.ERROR&&(n.status=void 0,n.accepted=void 0),t.addFile(n)})}),t=function(e){var t=e.originalEvent;if(t.clipboardData&&t.clipboardData.items){var i=r(t);if(i){e.preventDefault();var o=s(t)||"image.png",a="{{".concat(o,"}}");return n(a),c(i.getAsFile(),o)}}},r=function(e){for(var t=0;t<e.clipboardData.items.length;){var n=e.clipboardData.items[t];if(-1!==n.type.indexOf("image"))return n;t+=1}return!1},n=function(e,t){var n=e;t&&(n+="\n\n");var i=S.get(0),a=i.selectionStart,r=i.selectionEnd,s=o()(S).val().length,c=o()(S).val().substring(0,a),l=o()(S).val().substring(r,s);return o()(S).val(c+n+l),i.setSelectionRange(a+n.length,r+n.length),i.style.height="".concat(i.scrollHeight,"px"),C.get(0).dispatchEvent(new Event("input")),C.trigger("input")},i=function(t){o()(e).append('<input type="hidden" name="files[]" value="'.concat(u.a.escape(t),'">'))},s=function(e){var t;return window.clipboardData&&window.clipboardData.getData?t=window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData&&(t=e.clipboardData.getData("text/plain")),(t=t.split("\r"))[0]};var N=function(){return w.addClass("hide")};return c=function(t,n){var i=new FormData;i.append("file",t,n),w.removeClass("hide"),e.find(".div-dropzone-alert").alert("close"),f.a.post(k,i).then(function(e){var t=e.data.link.markdown;!function(e,t){var n=o()(S);n.val(function(n,i){return i.replace("{{".concat(e,"}}"),t)}),n.trigger("change")}(n,t),N()}).catch(function(e){var t;t=e.response.data.message,b.removeClass("hide"),y.html(t),N()})},a=function(e,t){var n,i=e.filter(function(e){return"uploading"===e.status||"queued"===e.status}).length;n=i>1?"Attaching ".concat(i," files -"):"Attaching a file -",t.text(n)},e.find(".markdown-selector").click(function(e){e.preventDefault(),o()(this).closest(".gfm-form").find(".div-dropzone").click(),C.focus()}),l.a.forElement(_.get(0))}l.a.autoDiscover=!1;var m=n(76);function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.d(t,"a",function(){return v});var v=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.form=t,this.textarea=this.form.find("textarea.js-gfm-input"),this.enableGFM=Object.assign({},s.b,i);var o=gl.GfmAutoComplete&&gl.GfmAutoComplete.dataSources||{};Object.keys(this.enableGFM).forEach(function(e){"emojis"!==e&&(n.enableGFM[e]=!!o[e])}),this.destroy(),this.setupForm(),this.form.data("glForm",this)}var t,n,i;return t=e,(n=[{key:"destroy",value:function(){this.clearEventListeners(),this.autoComplete&&this.autoComplete.destroy(),this.form.data("glForm",null)}},{key:"setupForm",value:function(){var e=this.form.is(":not(.gfm-form)");this.form.removeClass("js-new-note-form"),e&&(this.form.find(".div-dropzone").remove(),this.form.addClass("gfm-form"),gl.utils.disableButtonIfEmptyField(this.form.find(".js-note-text"),this.form.find(".js-comment-button, .js-note-new-discussion")),this.autoComplete=new s.a(gl.GfmAutoComplete&&gl.GfmAutoComplete.dataSources),this.autoComplete.setup(this.form.find(".js-gfm-input"),this.enableGFM),p(this.form),r()(this.textarea)),this.addEventListeners(),Object(m.b)(this.form),this.form.show(),this.isAutosizeable&&this.setupAutosize()}},{key:"setupAutosize",value:function(){var e=this;this.textarea.off("autosize:resized").on("autosize:resized",this.setHeightData.bind(this)),this.textarea.off("mouseup.autosize").on("mouseup.autosize",this.destroyAutosize.bind(this)),setTimeout(function(){r()(e.textarea),e.textarea.css("resize","vertical")},0)}},{key:"setHeightData",value:function(){this.textarea.data("height",this.textarea.outerHeight())}},{key:"destroyAutosize",value:function(){var e=this.textarea.outerHeight();this.textarea.data("height")!==e&&(r.a.destroy(this.textarea),this.textarea.data("height",e),this.textarea.outerHeight(e),this.textarea.css("max-height",window.outerHeight))}},{key:"clearEventListeners",value:function(){this.textarea.off("focus"),this.textarea.off("blur"),Object(m.c)(this.form)}},{key:"addEventListeners",value:function(){this.textarea.on("focus",function(){o()(this).closest(".md-area").addClass("is-focused")}),this.textarea.on("blur",function(){o()(this).closest(".md-area").removeClass("is-focused")})}}])&&g(t.prototype,n),i&&g(t,i),e}()},85:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n(0),o=n.n(i),a=(n(172),n(32)),r=n.n(a),s=n(2),c=n.n(s);n(111);function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}r.a.autoDiscover=!1;var d=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.active_backdrop=null,this.active_textarea=null,o()(document).on("click",".js-zen-enter",function(e){return e.preventDefault(),o()(e.currentTarget).trigger("zen_mode:enter")}),o()(document).on("click",".js-zen-leave",function(e){return e.preventDefault(),o()(e.currentTarget).trigger("zen_mode:leave")}),o()(document).on("zen_mode:enter",(t=this,function(e){return t.enter(o()(e.target).closest(".md-area").find(".zen-backdrop"))})),o()(document).on("zen_mode:leave",function(e){return function(t){return e.exit()}}(this)),o()(document).on("keydown",function(e){if(27===e.keyCode)return e.preventDefault(),o()(document).trigger("zen_mode:leave")})}var t,n,i;return t=e,(n=[{key:"enter",value:function(e){c.a.pause(),this.active_backdrop=o()(e),this.active_backdrop.addClass("fullscreen"),this.active_textarea=this.active_backdrop.find("textarea"),this.active_textarea.removeAttr("style"),this.active_textarea.focus()}},{key:"exit",value:function(){if(this.active_textarea){c.a.unpause(),this.active_textarea.closest(".zen-backdrop").removeClass("fullscreen"),this.scrollTo(this.active_textarea),this.active_textarea=null,this.active_backdrop=null;var e=o()(".div-dropzone");e&&!e.hasClass("js-invalid-dropzone")&&r.a.forElement(".div-dropzone").enable()}}},{key:"scrollTo",value:function(e){return o.a.scrollTo(e,0,{offset:-150})}}])&&l(t.prototype,n),i&&l(t,i),e}()}},[[1374,1,0,2,3]]]);
//# sourceMappingURL=pages.projects.snippets.show.740f9c49.chunk.js.map